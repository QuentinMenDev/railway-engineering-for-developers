(function(){const y=document.createElement("link").relList;if(y&&y.supports&&y.supports("modulepreload"))return;for(const R of document.querySelectorAll('link[rel="modulepreload"]'))d(R);new MutationObserver(R=>{for(const O of R)if(O.type==="childList")for(const _ of O.addedNodes)_.tagName==="LINK"&&_.rel==="modulepreload"&&d(_)}).observe(document,{childList:!0,subtree:!0});function b(R){const O={};return R.integrity&&(O.integrity=R.integrity),R.referrerPolicy&&(O.referrerPolicy=R.referrerPolicy),R.crossOrigin==="use-credentials"?O.credentials="include":R.crossOrigin==="anonymous"?O.credentials="omit":O.credentials="same-origin",O}function d(R){if(R.ep)return;R.ep=!0;const O=b(R);fetch(R.href,O)}})();var dl={exports:{}},ka={};var vu;function tf(){if(vu)return ka;vu=1;var h=Symbol.for("react.transitional.element"),y=Symbol.for("react.fragment");function b(d,R,O){var _=null;if(O!==void 0&&(_=""+O),R.key!==void 0&&(_=""+R.key),"key"in R){O={};for(var X in R)X!=="key"&&(O[X]=R[X])}else O=R;return R=O.ref,{$$typeof:h,type:d,key:_,ref:R!==void 0?R:null,props:O}}return ka.Fragment=y,ka.jsx=b,ka.jsxs=b,ka}var bu;function nf(){return bu||(bu=1,dl.exports=tf()),dl.exports}var e=nf(),hl={exports:{}},V={};var ju;function af(){if(ju)return V;ju=1;var h=Symbol.for("react.transitional.element"),y=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),d=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),O=Symbol.for("react.consumer"),_=Symbol.for("react.context"),X=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),j=Symbol.for("react.memo"),U=Symbol.for("react.lazy"),D=Symbol.for("react.activity"),J=Symbol.iterator;function G(m){return m===null||typeof m!="object"?null:(m=J&&m[J]||m["@@iterator"],typeof m=="function"?m:null)}var F={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},re=Object.assign,Ge={};function We(m,A,E){this.props=m,this.context=A,this.refs=Ge,this.updater=E||F}We.prototype.isReactComponent={},We.prototype.setState=function(m,A){if(typeof m!="object"&&typeof m!="function"&&m!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,m,A,"setState")},We.prototype.forceUpdate=function(m){this.updater.enqueueForceUpdate(this,m,"forceUpdate")};function Z(){}Z.prototype=We.prototype;function I(m,A,E){this.props=m,this.context=A,this.refs=Ge,this.updater=E||F}var ie=I.prototype=new Z;ie.constructor=I,re(ie,We.prototype),ie.isPureReactComponent=!0;var je=Array.isArray;function Se(){}var Q={H:null,A:null,T:null,S:null},be=Object.prototype.hasOwnProperty;function Je(m,A,E){var z=E.ref;return{$$typeof:h,type:m,key:A,ref:z!==void 0?z:null,props:E}}function Fi(m,A){return Je(m.type,A,m.props)}function Mt(m){return typeof m=="object"&&m!==null&&m.$$typeof===h}function Qe(m){var A={"=":"=0",":":"=2"};return"$"+m.replace(/[=:]/g,function(E){return A[E]})}var Ti=/\/+/g;function zt(m,A){return typeof m=="object"&&m!==null&&m.key!=null?Qe(""+m.key):A.toString(36)}function Tt(m){switch(m.status){case"fulfilled":return m.value;case"rejected":throw m.reason;default:switch(typeof m.status=="string"?m.then(Se,Se):(m.status="pending",m.then(function(A){m.status==="pending"&&(m.status="fulfilled",m.value=A)},function(A){m.status==="pending"&&(m.status="rejected",m.reason=A)})),m.status){case"fulfilled":return m.value;case"rejected":throw m.reason}}throw m}function k(m,A,E,z,K){var $=typeof m;($==="undefined"||$==="boolean")&&(m=null);var he=!1;if(m===null)he=!0;else switch($){case"bigint":case"string":case"number":he=!0;break;case"object":switch(m.$$typeof){case h:case y:he=!0;break;case U:return he=m._init,k(he(m._payload),A,E,z,K)}}if(he)return K=K(m),he=z===""?"."+zt(m,0):z,je(K)?(E="",he!=null&&(E=he.replace(Ti,"$&/")+"/"),k(K,A,E,"",function(Dn){return Dn})):K!=null&&(Mt(K)&&(K=Fi(K,E+(K.key==null||m&&m.key===K.key?"":(""+K.key).replace(Ti,"$&/")+"/")+he)),A.push(K)),1;he=0;var Pe=z===""?".":z+":";if(je(m))for(var Me=0;Me<m.length;Me++)z=m[Me],$=Pe+zt(z,Me),he+=k(z,A,E,$,K);else if(Me=G(m),typeof Me=="function")for(m=Me.call(m),Me=0;!(z=m.next()).done;)z=z.value,$=Pe+zt(z,Me++),he+=k(z,A,E,$,K);else if($==="object"){if(typeof m.then=="function")return k(Tt(m),A,E,z,K);throw A=String(m),Error("Objects are not valid as a React child (found: "+(A==="[object Object]"?"object with keys {"+Object.keys(m).join(", ")+"}":A)+"). If you meant to render a collection of children, use an array instead.")}return he}function M(m,A,E){if(m==null)return m;var z=[],K=0;return k(m,z,"","",function($){return A.call(E,$,K++)}),z}function H(m){if(m._status===-1){var A=m._result;A=A(),A.then(function(E){(m._status===0||m._status===-1)&&(m._status=1,m._result=E)},function(E){(m._status===0||m._status===-1)&&(m._status=2,m._result=E)}),m._status===-1&&(m._status=0,m._result=A)}if(m._status===1)return m._result.default;throw m._result}var ge=typeof reportError=="function"?reportError:function(m){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var A=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof m=="object"&&m!==null&&typeof m.message=="string"?String(m.message):String(m),error:m});if(!window.dispatchEvent(A))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",m);return}console.error(m)},xe={map:M,forEach:function(m,A,E){M(m,function(){A.apply(this,arguments)},E)},count:function(m){var A=0;return M(m,function(){A++}),A},toArray:function(m){return M(m,function(A){return A})||[]},only:function(m){if(!Mt(m))throw Error("React.Children.only expected to receive a single React element child.");return m}};return V.Activity=D,V.Children=xe,V.Component=We,V.Fragment=b,V.Profiler=R,V.PureComponent=I,V.StrictMode=d,V.Suspense=C,V.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Q,V.__COMPILER_RUNTIME={__proto__:null,c:function(m){return Q.H.useMemoCache(m)}},V.cache=function(m){return function(){return m.apply(null,arguments)}},V.cacheSignal=function(){return null},V.cloneElement=function(m,A,E){if(m==null)throw Error("The argument must be a React element, but you passed "+m+".");var z=re({},m.props),K=m.key;if(A!=null)for($ in A.key!==void 0&&(K=""+A.key),A)!be.call(A,$)||$==="key"||$==="__self"||$==="__source"||$==="ref"&&A.ref===void 0||(z[$]=A[$]);var $=arguments.length-2;if($===1)z.children=E;else if(1<$){for(var he=Array($),Pe=0;Pe<$;Pe++)he[Pe]=arguments[Pe+2];z.children=he}return Je(m.type,K,z)},V.createContext=function(m){return m={$$typeof:_,_currentValue:m,_currentValue2:m,_threadCount:0,Provider:null,Consumer:null},m.Provider=m,m.Consumer={$$typeof:O,_context:m},m},V.createElement=function(m,A,E){var z,K={},$=null;if(A!=null)for(z in A.key!==void 0&&($=""+A.key),A)be.call(A,z)&&z!=="key"&&z!=="__self"&&z!=="__source"&&(K[z]=A[z]);var he=arguments.length-2;if(he===1)K.children=E;else if(1<he){for(var Pe=Array(he),Me=0;Me<he;Me++)Pe[Me]=arguments[Me+2];K.children=Pe}if(m&&m.defaultProps)for(z in he=m.defaultProps,he)K[z]===void 0&&(K[z]=he[z]);return Je(m,$,K)},V.createRef=function(){return{current:null}},V.forwardRef=function(m){return{$$typeof:X,render:m}},V.isValidElement=Mt,V.lazy=function(m){return{$$typeof:U,_payload:{_status:-1,_result:m},_init:H}},V.memo=function(m,A){return{$$typeof:j,type:m,compare:A===void 0?null:A}},V.startTransition=function(m){var A=Q.T,E={};Q.T=E;try{var z=m(),K=Q.S;K!==null&&K(E,z),typeof z=="object"&&z!==null&&typeof z.then=="function"&&z.then(Se,ge)}catch($){ge($)}finally{A!==null&&E.types!==null&&(A.types=E.types),Q.T=A}},V.unstable_useCacheRefresh=function(){return Q.H.useCacheRefresh()},V.use=function(m){return Q.H.use(m)},V.useActionState=function(m,A,E){return Q.H.useActionState(m,A,E)},V.useCallback=function(m,A){return Q.H.useCallback(m,A)},V.useContext=function(m){return Q.H.useContext(m)},V.useDebugValue=function(){},V.useDeferredValue=function(m,A){return Q.H.useDeferredValue(m,A)},V.useEffect=function(m,A){return Q.H.useEffect(m,A)},V.useEffectEvent=function(m){return Q.H.useEffectEvent(m)},V.useId=function(){return Q.H.useId()},V.useImperativeHandle=function(m,A,E){return Q.H.useImperativeHandle(m,A,E)},V.useInsertionEffect=function(m,A){return Q.H.useInsertionEffect(m,A)},V.useLayoutEffect=function(m,A){return Q.H.useLayoutEffect(m,A)},V.useMemo=function(m,A){return Q.H.useMemo(m,A)},V.useOptimistic=function(m,A){return Q.H.useOptimistic(m,A)},V.useReducer=function(m,A,E){return Q.H.useReducer(m,A,E)},V.useRef=function(m){return Q.H.useRef(m)},V.useState=function(m){return Q.H.useState(m)},V.useSyncExternalStore=function(m,A,E){return Q.H.useSyncExternalStore(m,A,E)},V.useTransition=function(){return Q.H.useTransition()},V.version="19.2.4",V}var wu;function yl(){return wu||(wu=1,hl.exports=af()),hl.exports}var Re=yl(),ul={exports:{}},Ta={},ml={exports:{}},gl={};var ku;function sf(){return ku||(ku=1,(function(h){function y(k,M){var H=k.length;k.push(M);e:for(;0<H;){var ge=H-1>>>1,xe=k[ge];if(0<R(xe,M))k[ge]=M,k[H]=xe,H=ge;else break e}}function b(k){return k.length===0?null:k[0]}function d(k){if(k.length===0)return null;var M=k[0],H=k.pop();if(H!==M){k[0]=H;e:for(var ge=0,xe=k.length,m=xe>>>1;ge<m;){var A=2*(ge+1)-1,E=k[A],z=A+1,K=k[z];if(0>R(E,H))z<xe&&0>R(K,E)?(k[ge]=K,k[z]=H,ge=z):(k[ge]=E,k[A]=H,ge=A);else if(z<xe&&0>R(K,H))k[ge]=K,k[z]=H,ge=z;else break e}}return M}function R(k,M){var H=k.sortIndex-M.sortIndex;return H!==0?H:k.id-M.id}if(h.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var O=performance;h.unstable_now=function(){return O.now()}}else{var _=Date,X=_.now();h.unstable_now=function(){return _.now()-X}}var C=[],j=[],U=1,D=null,J=3,G=!1,F=!1,re=!1,Ge=!1,We=typeof setTimeout=="function"?setTimeout:null,Z=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;function ie(k){for(var M=b(j);M!==null;){if(M.callback===null)d(j);else if(M.startTime<=k)d(j),M.sortIndex=M.expirationTime,y(C,M);else break;M=b(j)}}function je(k){if(re=!1,ie(k),!F)if(b(C)!==null)F=!0,Se||(Se=!0,Qe());else{var M=b(j);M!==null&&Tt(je,M.startTime-k)}}var Se=!1,Q=-1,be=5,Je=-1;function Fi(){return Ge?!0:!(h.unstable_now()-Je<be)}function Mt(){if(Ge=!1,Se){var k=h.unstable_now();Je=k;var M=!0;try{e:{F=!1,re&&(re=!1,Z(Q),Q=-1),G=!0;var H=J;try{t:{for(ie(k),D=b(C);D!==null&&!(D.expirationTime>k&&Fi());){var ge=D.callback;if(typeof ge=="function"){D.callback=null,J=D.priorityLevel;var xe=ge(D.expirationTime<=k);if(k=h.unstable_now(),typeof xe=="function"){D.callback=xe,ie(k),M=!0;break t}D===b(C)&&d(C),ie(k)}else d(C);D=b(C)}if(D!==null)M=!0;else{var m=b(j);m!==null&&Tt(je,m.startTime-k),M=!1}}break e}finally{D=null,J=H,G=!1}M=void 0}}finally{M?Qe():Se=!1}}}var Qe;if(typeof I=="function")Qe=function(){I(Mt)};else if(typeof MessageChannel<"u"){var Ti=new MessageChannel,zt=Ti.port2;Ti.port1.onmessage=Mt,Qe=function(){zt.postMessage(null)}}else Qe=function(){We(Mt,0)};function Tt(k,M){Q=We(function(){k(h.unstable_now())},M)}h.unstable_IdlePriority=5,h.unstable_ImmediatePriority=1,h.unstable_LowPriority=4,h.unstable_NormalPriority=3,h.unstable_Profiling=null,h.unstable_UserBlockingPriority=2,h.unstable_cancelCallback=function(k){k.callback=null},h.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):be=0<k?Math.floor(1e3/k):5},h.unstable_getCurrentPriorityLevel=function(){return J},h.unstable_next=function(k){switch(J){case 1:case 2:case 3:var M=3;break;default:M=J}var H=J;J=M;try{return k()}finally{J=H}},h.unstable_requestPaint=function(){Ge=!0},h.unstable_runWithPriority=function(k,M){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var H=J;J=k;try{return M()}finally{J=H}},h.unstable_scheduleCallback=function(k,M,H){var ge=h.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?ge+H:ge):H=ge,k){case 1:var xe=-1;break;case 2:xe=250;break;case 5:xe=1073741823;break;case 4:xe=1e4;break;default:xe=5e3}return xe=H+xe,k={id:U++,callback:M,priorityLevel:k,startTime:H,expirationTime:xe,sortIndex:-1},H>ge?(k.sortIndex=H,y(j,k),b(C)===null&&k===b(j)&&(re?(Z(Q),Q=-1):re=!0,Tt(je,H-ge))):(k.sortIndex=xe,y(C,k),F||G||(F=!0,Se||(Se=!0,Qe()))),k},h.unstable_shouldYield=Fi,h.unstable_wrapCallback=function(k){var M=J;return function(){var H=J;J=M;try{return k.apply(this,arguments)}finally{J=H}}}})(gl)),gl}var Tu;function rf(){return Tu||(Tu=1,ml.exports=sf()),ml.exports}var fl={exports:{}},Ke={};var Su;function of(){if(Su)return Ke;Su=1;var h=yl();function y(C){var j="https://react.dev/errors/"+C;if(1<arguments.length){j+="?args[]="+encodeURIComponent(arguments[1]);for(var U=2;U<arguments.length;U++)j+="&args[]="+encodeURIComponent(arguments[U])}return"Minified React error #"+C+"; visit "+j+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function b(){}var d={d:{f:b,r:function(){throw Error(y(522))},D:b,C:b,L:b,m:b,X:b,S:b,M:b},p:0,findDOMNode:null},R=Symbol.for("react.portal");function O(C,j,U){var D=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:R,key:D==null?null:""+D,children:C,containerInfo:j,implementation:U}}var _=h.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function X(C,j){if(C==="font")return"";if(typeof j=="string")return j==="use-credentials"?j:""}return Ke.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=d,Ke.createPortal=function(C,j){var U=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!j||j.nodeType!==1&&j.nodeType!==9&&j.nodeType!==11)throw Error(y(299));return O(C,j,null,U)},Ke.flushSync=function(C){var j=_.T,U=d.p;try{if(_.T=null,d.p=2,C)return C()}finally{_.T=j,d.p=U,d.d.f()}},Ke.preconnect=function(C,j){typeof C=="string"&&(j?(j=j.crossOrigin,j=typeof j=="string"?j==="use-credentials"?j:"":void 0):j=null,d.d.C(C,j))},Ke.prefetchDNS=function(C){typeof C=="string"&&d.d.D(C)},Ke.preinit=function(C,j){if(typeof C=="string"&&j&&typeof j.as=="string"){var U=j.as,D=X(U,j.crossOrigin),J=typeof j.integrity=="string"?j.integrity:void 0,G=typeof j.fetchPriority=="string"?j.fetchPriority:void 0;U==="style"?d.d.S(C,typeof j.precedence=="string"?j.precedence:void 0,{crossOrigin:D,integrity:J,fetchPriority:G}):U==="script"&&d.d.X(C,{crossOrigin:D,integrity:J,fetchPriority:G,nonce:typeof j.nonce=="string"?j.nonce:void 0})}},Ke.preinitModule=function(C,j){if(typeof C=="string")if(typeof j=="object"&&j!==null){if(j.as==null||j.as==="script"){var U=X(j.as,j.crossOrigin);d.d.M(C,{crossOrigin:U,integrity:typeof j.integrity=="string"?j.integrity:void 0,nonce:typeof j.nonce=="string"?j.nonce:void 0})}}else j==null&&d.d.M(C)},Ke.preload=function(C,j){if(typeof C=="string"&&typeof j=="object"&&j!==null&&typeof j.as=="string"){var U=j.as,D=X(U,j.crossOrigin);d.d.L(C,U,{crossOrigin:D,integrity:typeof j.integrity=="string"?j.integrity:void 0,nonce:typeof j.nonce=="string"?j.nonce:void 0,type:typeof j.type=="string"?j.type:void 0,fetchPriority:typeof j.fetchPriority=="string"?j.fetchPriority:void 0,referrerPolicy:typeof j.referrerPolicy=="string"?j.referrerPolicy:void 0,imageSrcSet:typeof j.imageSrcSet=="string"?j.imageSrcSet:void 0,imageSizes:typeof j.imageSizes=="string"?j.imageSizes:void 0,media:typeof j.media=="string"?j.media:void 0})}},Ke.preloadModule=function(C,j){if(typeof C=="string")if(j){var U=X(j.as,j.crossOrigin);d.d.m(C,{as:typeof j.as=="string"&&j.as!=="script"?j.as:void 0,crossOrigin:U,integrity:typeof j.integrity=="string"?j.integrity:void 0})}else d.d.m(C)},Ke.requestFormReset=function(C){d.d.r(C)},Ke.unstable_batchedUpdates=function(C,j){return C(j)},Ke.useFormState=function(C,j,U){return _.H.useFormState(C,j,U)},Ke.useFormStatus=function(){return _.H.useHostTransitionStatus()},Ke.version="19.2.4",Ke}var Au;function lf(){if(Au)return fl.exports;Au=1;function h(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(h)}catch(y){console.error(y)}}return h(),fl.exports=of(),fl.exports}var Cu;function cf(){if(Cu)return Ta;Cu=1;var h=rf(),y=yl(),b=lf();function d(t){var i="https://react.dev/errors/"+t;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)i+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function R(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function O(t){var i=t,n=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(n=i.return),t=i.return;while(t)}return i.tag===3?n:null}function _(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function X(t){if(t.tag===31){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function C(t){if(O(t)!==t)throw Error(d(188))}function j(t){var i=t.alternate;if(!i){if(i=O(t),i===null)throw Error(d(188));return i!==t?null:t}for(var n=t,a=i;;){var s=n.return;if(s===null)break;var r=s.alternate;if(r===null){if(a=s.return,a!==null){n=a;continue}break}if(s.child===r.child){for(r=s.child;r;){if(r===n)return C(s),t;if(r===a)return C(s),i;r=r.sibling}throw Error(d(188))}if(n.return!==a.return)n=s,a=r;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,a=r;break}if(l===a){o=!0,a=s,n=r;break}l=l.sibling}if(!o){for(l=r.child;l;){if(l===n){o=!0,n=r,a=s;break}if(l===a){o=!0,a=r,n=s;break}l=l.sibling}if(!o)throw Error(d(189))}}if(n.alternate!==a)throw Error(d(190))}if(n.tag!==3)throw Error(d(188));return n.stateNode.current===n?t:i}function U(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t;for(t=t.child;t!==null;){if(i=U(t),i!==null)return i;t=t.sibling}return null}var D=Object.assign,J=Symbol.for("react.element"),G=Symbol.for("react.transitional.element"),F=Symbol.for("react.portal"),re=Symbol.for("react.fragment"),Ge=Symbol.for("react.strict_mode"),We=Symbol.for("react.profiler"),Z=Symbol.for("react.consumer"),I=Symbol.for("react.context"),ie=Symbol.for("react.forward_ref"),je=Symbol.for("react.suspense"),Se=Symbol.for("react.suspense_list"),Q=Symbol.for("react.memo"),be=Symbol.for("react.lazy"),Je=Symbol.for("react.activity"),Fi=Symbol.for("react.memo_cache_sentinel"),Mt=Symbol.iterator;function Qe(t){return t===null||typeof t!="object"?null:(t=Mt&&t[Mt]||t["@@iterator"],typeof t=="function"?t:null)}var Ti=Symbol.for("react.client.reference");function zt(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===Ti?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case re:return"Fragment";case We:return"Profiler";case Ge:return"StrictMode";case je:return"Suspense";case Se:return"SuspenseList";case Je:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case F:return"Portal";case I:return t.displayName||"Context";case Z:return(t._context.displayName||"Context")+".Consumer";case ie:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Q:return i=t.displayName||null,i!==null?i:zt(t.type)||"Memo";case be:i=t._payload,t=t._init;try{return zt(t(i))}catch{}}return null}var Tt=Array.isArray,k=y.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,M=b.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,H={pending:!1,data:null,method:null,action:null},ge=[],xe=-1;function m(t){return{current:t}}function A(t){0>xe||(t.current=ge[xe],ge[xe]=null,xe--)}function E(t,i){xe++,ge[xe]=t.current,t.current=i}var z=m(null),K=m(null),$=m(null),he=m(null);function Pe(t,i){switch(E($,i),E(K,t),E(z,null),i.nodeType){case 9:case 11:t=(t=i.documentElement)&&(t=t.namespaceURI)?_h(t):0;break;default:if(t=i.tagName,i=i.namespaceURI)i=_h(i),t=Ih(i,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}A(z),E(z,t)}function Me(){A(z),A(K),A($)}function Dn(t){t.memoizedState!==null&&E(he,t);var i=z.current,n=Ih(i,t.type);i!==n&&(E(K,t),E(z,n))}function Aa(t){K.current===t&&(A(z),A(K)),he.current===t&&(A(he),va._currentValue=H)}var Vs,xl;function Si(t){if(Vs===void 0)try{throw Error()}catch(n){var i=n.stack.trim().match(/\n( *(at )?)/);Vs=i&&i[1]||"",xl=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Vs+t+xl}var Js=!1;function Ks(t,i){if(!t||Js)return"";Js=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var a={DetermineComponentFrameRoot:function(){try{if(i){var S=function(){throw Error()};if(Object.defineProperty(S.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(S,[])}catch(v){var x=v}Reflect.construct(t,[],S)}else{try{S.call()}catch(v){x=v}t.call(S.prototype)}}else{try{throw Error()}catch(v){x=v}(S=t())&&typeof S.catch=="function"&&S.catch(function(){})}}catch(v){if(v&&x&&typeof v.stack=="string")return[v.stack,x.stack]}return[null,null]}};a.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var s=Object.getOwnPropertyDescriptor(a.DetermineComponentFrameRoot,"name");s&&s.configurable&&Object.defineProperty(a.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var r=a.DetermineComponentFrameRoot(),o=r[0],l=r[1];if(o&&l){var c=o.split(`
`),p=l.split(`
`);for(s=a=0;a<c.length&&!c[a].includes("DetermineComponentFrameRoot");)a++;for(;s<p.length&&!p[s].includes("DetermineComponentFrameRoot");)s++;if(a===c.length||s===p.length)for(a=c.length-1,s=p.length-1;1<=a&&0<=s&&c[a]!==p[s];)s--;for(;1<=a&&0<=s;a--,s--)if(c[a]!==p[s]){if(a!==1||s!==1)do if(a--,s--,0>s||c[a]!==p[s]){var w=`
`+c[a].replace(" at new "," at ");return t.displayName&&w.includes("<anonymous>")&&(w=w.replace("<anonymous>",t.displayName)),w}while(1<=a&&0<=s);break}}}finally{Js=!1,Error.prepareStackTrace=n}return(n=t?t.displayName||t.name:"")?Si(n):""}function Bu(t,i){switch(t.tag){case 26:case 27:case 5:return Si(t.type);case 16:return Si("Lazy");case 13:return t.child!==i&&i!==null?Si("Suspense Fallback"):Si("Suspense");case 19:return Si("SuspenseList");case 0:case 15:return Ks(t.type,!1);case 11:return Ks(t.type.render,!1);case 1:return Ks(t.type,!0);case 31:return Si("Activity");default:return""}}function vl(t){try{var i="",n=null;do i+=Bu(t,n),n=t,t=t.return;while(t);return i}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}var Ps=Object.prototype.hasOwnProperty,Ys=h.unstable_scheduleCallback,Qs=h.unstable_cancelCallback,zu=h.unstable_shouldYield,qu=h.unstable_requestPaint,at=h.unstable_now,Nu=h.unstable_getCurrentPriorityLevel,bl=h.unstable_ImmediatePriority,jl=h.unstable_UserBlockingPriority,Ca=h.unstable_NormalPriority,Wu=h.unstable_LowPriority,wl=h.unstable_IdlePriority,Ou=h.log,Uu=h.unstable_setDisableYieldValue,Rn=null,st=null;function $t(t){if(typeof Ou=="function"&&Uu(t),st&&typeof st.setStrictMode=="function")try{st.setStrictMode(Rn,t)}catch{}}var rt=Math.clz32?Math.clz32:Hu,Lu=Math.log,Gu=Math.LN2;function Hu(t){return t>>>=0,t===0?32:31-(Lu(t)/Gu|0)|0}var Ma=256,Ea=262144,Da=4194304;function Ai(t){var i=t&42;if(i!==0)return i;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Ra(t,i,n){var a=t.pendingLanes;if(a===0)return 0;var s=0,r=t.suspendedLanes,o=t.pingedLanes;t=t.warmLanes;var l=a&134217727;return l!==0?(a=l&~r,a!==0?s=Ai(a):(o&=l,o!==0?s=Ai(o):n||(n=l&~t,n!==0&&(s=Ai(n))))):(l=a&~r,l!==0?s=Ai(l):o!==0?s=Ai(o):n||(n=a&~t,n!==0&&(s=Ai(n)))),s===0?0:i!==0&&i!==s&&(i&r)===0&&(r=s&-s,n=i&-i,r>=n||r===32&&(n&4194048)!==0)?i:s}function Bn(t,i){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&i)===0}function _u(t,i){switch(t){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function kl(){var t=Da;return Da<<=1,(Da&62914560)===0&&(Da=4194304),t}function Xs(t){for(var i=[],n=0;31>n;n++)i.push(t);return i}function zn(t,i){t.pendingLanes|=i,i!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Iu(t,i,n,a,s,r){var o=t.pendingLanes;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=n,t.entangledLanes&=n,t.errorRecoveryDisabledLanes&=n,t.shellSuspendCounter=0;var l=t.entanglements,c=t.expirationTimes,p=t.hiddenUpdates;for(n=o&~n;0<n;){var w=31-rt(n),S=1<<w;l[w]=0,c[w]=-1;var x=p[w];if(x!==null)for(p[w]=null,w=0;w<x.length;w++){var v=x[w];v!==null&&(v.lane&=-536870913)}n&=~S}a!==0&&Tl(t,a,0),r!==0&&s===0&&t.tag!==0&&(t.suspendedLanes|=r&~(o&~i))}function Tl(t,i,n){t.pendingLanes|=i,t.suspendedLanes&=~i;var a=31-rt(i);t.entangledLanes|=i,t.entanglements[a]=t.entanglements[a]|1073741824|n&261930}function Sl(t,i){var n=t.entangledLanes|=i;for(t=t.entanglements;n;){var a=31-rt(n),s=1<<a;s&i|t[a]&i&&(t[a]|=i),n&=~s}}function Al(t,i){var n=i&-i;return n=(n&42)!==0?1:Zs(n),(n&(t.suspendedLanes|i))!==0?0:n}function Zs(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function $s(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Cl(){var t=M.p;return t!==0?t:(t=window.event,t===void 0?32:uu(t.type))}function Ml(t,i){var n=M.p;try{return M.p=t,i()}finally{M.p=n}}var ei=Math.random().toString(36).slice(2),He="__reactFiber$"+ei,Xe="__reactProps$"+ei,Vi="__reactContainer$"+ei,er="__reactEvents$"+ei,Fu="__reactListeners$"+ei,Vu="__reactHandles$"+ei,El="__reactResources$"+ei,qn="__reactMarker$"+ei;function tr(t){delete t[He],delete t[Xe],delete t[er],delete t[Fu],delete t[Vu]}function Ji(t){var i=t[He];if(i)return i;for(var n=t.parentNode;n;){if(i=n[Vi]||n[He]){if(n=i.alternate,i.child!==null||n!==null&&n.child!==null)for(t=Qh(t);t!==null;){if(n=t[He])return n;t=Qh(t)}return i}t=n,n=t.parentNode}return null}function Ki(t){if(t=t[He]||t[Vi]){var i=t.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return t}return null}function Nn(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t.stateNode;throw Error(d(33))}function Pi(t){var i=t[El];return i||(i=t[El]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Ue(t){t[qn]=!0}var Dl=new Set,Rl={};function Ci(t,i){Yi(t,i),Yi(t+"Capture",i)}function Yi(t,i){for(Rl[t]=i,t=0;t<i.length;t++)Dl.add(i[t])}var Ju=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Bl={},zl={};function Ku(t){return Ps.call(zl,t)?!0:Ps.call(Bl,t)?!1:Ju.test(t)?zl[t]=!0:(Bl[t]=!0,!1)}function Ba(t,i,n){if(Ku(i))if(n===null)t.removeAttribute(i);else{switch(typeof n){case"undefined":case"function":case"symbol":t.removeAttribute(i);return;case"boolean":var a=i.toLowerCase().slice(0,5);if(a!=="data-"&&a!=="aria-"){t.removeAttribute(i);return}}t.setAttribute(i,""+n)}}function za(t,i,n){if(n===null)t.removeAttribute(i);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttribute(i,""+n)}}function qt(t,i,n,a){if(a===null)t.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttributeNS(i,n,""+a)}}function gt(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ql(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Pu(t,i,n){var a=Object.getOwnPropertyDescriptor(t.constructor.prototype,i);if(!t.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var s=a.get,r=a.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return s.call(this)},set:function(o){n=""+o,r.call(this,o)}}),Object.defineProperty(t,i,{enumerable:a.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function ir(t){if(!t._valueTracker){var i=ql(t)?"checked":"value";t._valueTracker=Pu(t,i,""+t[i])}}function Nl(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var n=i.getValue(),a="";return t&&(a=ql(t)?t.checked?"true":"false":t.value),t=a,t!==n?(i.setValue(t),!0):!1}function qa(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Yu=/[\n"\\]/g;function ft(t){return t.replace(Yu,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function nr(t,i,n,a,s,r,o,l){t.name="",o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"?t.type=o:t.removeAttribute("type"),i!=null?o==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+gt(i)):t.value!==""+gt(i)&&(t.value=""+gt(i)):o!=="submit"&&o!=="reset"||t.removeAttribute("value"),i!=null?ar(t,o,gt(i)):n!=null?ar(t,o,gt(n)):a!=null&&t.removeAttribute("value"),s==null&&r!=null&&(t.defaultChecked=!!r),s!=null&&(t.checked=s&&typeof s!="function"&&typeof s!="symbol"),l!=null&&typeof l!="function"&&typeof l!="symbol"&&typeof l!="boolean"?t.name=""+gt(l):t.removeAttribute("name")}function Wl(t,i,n,a,s,r,o,l){if(r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"&&(t.type=r),i!=null||n!=null){if(!(r!=="submit"&&r!=="reset"||i!=null)){ir(t);return}n=n!=null?""+gt(n):"",i=i!=null?""+gt(i):n,l||i===t.value||(t.value=i),t.defaultValue=i}a=a??s,a=typeof a!="function"&&typeof a!="symbol"&&!!a,t.checked=l?t.checked:!!a,t.defaultChecked=!!a,o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"&&(t.name=o),ir(t)}function ar(t,i,n){i==="number"&&qa(t.ownerDocument)===t||t.defaultValue===""+n||(t.defaultValue=""+n)}function Qi(t,i,n,a){if(t=t.options,i){i={};for(var s=0;s<n.length;s++)i["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=i.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&a&&(t[n].defaultSelected=!0)}else{for(n=""+gt(n),i=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,a&&(t[s].defaultSelected=!0);return}i!==null||t[s].disabled||(i=t[s])}i!==null&&(i.selected=!0)}}function Ol(t,i,n){if(i!=null&&(i=""+gt(i),i!==t.value&&(t.value=i),n==null)){t.defaultValue!==i&&(t.defaultValue=i);return}t.defaultValue=n!=null?""+gt(n):""}function Ul(t,i,n,a){if(i==null){if(a!=null){if(n!=null)throw Error(d(92));if(Tt(a)){if(1<a.length)throw Error(d(93));a=a[0]}n=a}n==null&&(n=""),i=n}n=gt(i),t.defaultValue=n,a=t.textContent,a===n&&a!==""&&a!==null&&(t.value=a),ir(t)}function Xi(t,i){if(i){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=i;return}}t.textContent=i}var Qu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ll(t,i,n){var a=i.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?a?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="":a?t.setProperty(i,n):typeof n!="number"||n===0||Qu.has(i)?i==="float"?t.cssFloat=n:t[i]=(""+n).trim():t[i]=n+"px"}function Gl(t,i,n){if(i!=null&&typeof i!="object")throw Error(d(62));if(t=t.style,n!=null){for(var a in n)!n.hasOwnProperty(a)||i!=null&&i.hasOwnProperty(a)||(a.indexOf("--")===0?t.setProperty(a,""):a==="float"?t.cssFloat="":t[a]="");for(var s in i)a=i[s],i.hasOwnProperty(s)&&n[s]!==a&&Ll(t,s,a)}else for(var r in i)i.hasOwnProperty(r)&&Ll(t,r,i[r])}function sr(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Xu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Zu=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Na(t){return Zu.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Nt(){}var rr=null;function or(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Zi=null,$i=null;function Hl(t){var i=Ki(t);if(i&&(t=i.stateNode)){var n=t[Xe]||null;e:switch(t=i.stateNode,i.type){case"input":if(nr(t,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),i=n.name,n.type==="radio"&&i!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+ft(""+i)+'"][type="radio"]'),i=0;i<n.length;i++){var a=n[i];if(a!==t&&a.form===t.form){var s=a[Xe]||null;if(!s)throw Error(d(90));nr(a,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name)}}for(i=0;i<n.length;i++)a=n[i],a.form===t.form&&Nl(a)}break e;case"textarea":Ol(t,n.value,n.defaultValue);break e;case"select":i=n.value,i!=null&&Qi(t,!!n.multiple,i,!1)}}}var lr=!1;function _l(t,i,n){if(lr)return t(i,n);lr=!0;try{var a=t(i);return a}finally{if(lr=!1,(Zi!==null||$i!==null)&&(ws(),Zi&&(i=Zi,t=$i,$i=Zi=null,Hl(i),t)))for(i=0;i<t.length;i++)Hl(t[i])}}function Wn(t,i){var n=t.stateNode;if(n===null)return null;var a=n[Xe]||null;if(a===null)return null;n=a[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(t=t.type,a=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!a;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(d(231,i,typeof n));return n}var Wt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),cr=!1;if(Wt)try{var On={};Object.defineProperty(On,"passive",{get:function(){cr=!0}}),window.addEventListener("test",On,On),window.removeEventListener("test",On,On)}catch{cr=!1}var ti=null,dr=null,Wa=null;function Il(){if(Wa)return Wa;var t,i=dr,n=i.length,a,s="value"in ti?ti.value:ti.textContent,r=s.length;for(t=0;t<n&&i[t]===s[t];t++);var o=n-t;for(a=1;a<=o&&i[n-a]===s[r-a];a++);return Wa=s.slice(t,1<a?1-a:void 0)}function Oa(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function Ua(){return!0}function Fl(){return!1}function Ze(t){function i(n,a,s,r,o){this._reactName=n,this._targetInst=s,this.type=a,this.nativeEvent=r,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(r):r[l]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?Ua:Fl,this.isPropagationStopped=Fl,this}return D(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ua)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ua)},persist:function(){},isPersistent:Ua}),i}var Mi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},La=Ze(Mi),Un=D({},Mi,{view:0,detail:0}),$u=Ze(Un),hr,ur,Ln,Ga=D({},Un,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:gr,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ln&&(Ln&&t.type==="mousemove"?(hr=t.screenX-Ln.screenX,ur=t.screenY-Ln.screenY):ur=hr=0,Ln=t),hr)},movementY:function(t){return"movementY"in t?t.movementY:ur}}),Vl=Ze(Ga),em=D({},Ga,{dataTransfer:0}),tm=Ze(em),im=D({},Un,{relatedTarget:0}),mr=Ze(im),nm=D({},Mi,{animationName:0,elapsedTime:0,pseudoElement:0}),am=Ze(nm),sm=D({},Mi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),rm=Ze(sm),om=D({},Mi,{data:0}),Jl=Ze(om),lm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hm(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=dm[t])?!!i[t]:!1}function gr(){return hm}var um=D({},Un,{key:function(t){if(t.key){var i=lm[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=Oa(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?cm[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:gr,charCode:function(t){return t.type==="keypress"?Oa(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Oa(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),mm=Ze(um),gm=D({},Ga,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Kl=Ze(gm),fm=D({},Un,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:gr}),pm=Ze(fm),ym=D({},Mi,{propertyName:0,elapsedTime:0,pseudoElement:0}),xm=Ze(ym),vm=D({},Ga,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),bm=Ze(vm),jm=D({},Mi,{newState:0,oldState:0}),wm=Ze(jm),km=[9,13,27,32],fr=Wt&&"CompositionEvent"in window,Gn=null;Wt&&"documentMode"in document&&(Gn=document.documentMode);var Tm=Wt&&"TextEvent"in window&&!Gn,Pl=Wt&&(!fr||Gn&&8<Gn&&11>=Gn),Yl=" ",Ql=!1;function Xl(t,i){switch(t){case"keyup":return km.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Zl(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var en=!1;function Sm(t,i){switch(t){case"compositionend":return Zl(i);case"keypress":return i.which!==32?null:(Ql=!0,Yl);case"textInput":return t=i.data,t===Yl&&Ql?null:t;default:return null}}function Am(t,i){if(en)return t==="compositionend"||!fr&&Xl(t,i)?(t=Il(),Wa=dr=ti=null,en=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Pl&&i.locale!=="ko"?null:i.data;default:return null}}var Cm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $l(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!Cm[t.type]:i==="textarea"}function ec(t,i,n,a){Zi?$i?$i.push(a):$i=[a]:Zi=a,i=Es(i,"onChange"),0<i.length&&(n=new La("onChange","change",null,n,a),t.push({event:n,listeners:i}))}var Hn=null,_n=null;function Mm(t){Wh(t,0)}function Ha(t){var i=Nn(t);if(Nl(i))return t}function tc(t,i){if(t==="change")return i}var ic=!1;if(Wt){var pr;if(Wt){var yr="oninput"in document;if(!yr){var nc=document.createElement("div");nc.setAttribute("oninput","return;"),yr=typeof nc.oninput=="function"}pr=yr}else pr=!1;ic=pr&&(!document.documentMode||9<document.documentMode)}function ac(){Hn&&(Hn.detachEvent("onpropertychange",sc),_n=Hn=null)}function sc(t){if(t.propertyName==="value"&&Ha(_n)){var i=[];ec(i,_n,t,or(t)),_l(Mm,i)}}function Em(t,i,n){t==="focusin"?(ac(),Hn=i,_n=n,Hn.attachEvent("onpropertychange",sc)):t==="focusout"&&ac()}function Dm(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ha(_n)}function Rm(t,i){if(t==="click")return Ha(i)}function Bm(t,i){if(t==="input"||t==="change")return Ha(i)}function zm(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var ot=typeof Object.is=="function"?Object.is:zm;function In(t,i){if(ot(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var n=Object.keys(t),a=Object.keys(i);if(n.length!==a.length)return!1;for(a=0;a<n.length;a++){var s=n[a];if(!Ps.call(i,s)||!ot(t[s],i[s]))return!1}return!0}function rc(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function oc(t,i){var n=rc(t);t=0;for(var a;n;){if(n.nodeType===3){if(a=t+n.textContent.length,t<=i&&a>=i)return{node:n,offset:i-t};t=a}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=rc(n)}}function lc(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?lc(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function cc(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var i=qa(t.document);i instanceof t.HTMLIFrameElement;){try{var n=typeof i.contentWindow.location.href=="string"}catch{n=!1}if(n)t=i.contentWindow;else break;i=qa(t.document)}return i}function xr(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}var qm=Wt&&"documentMode"in document&&11>=document.documentMode,tn=null,vr=null,Fn=null,br=!1;function dc(t,i,n){var a=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;br||tn==null||tn!==qa(a)||(a=tn,"selectionStart"in a&&xr(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Fn&&In(Fn,a)||(Fn=a,a=Es(vr,"onSelect"),0<a.length&&(i=new La("onSelect","select",null,i,n),t.push({event:i,listeners:a}),i.target=tn)))}function Ei(t,i){var n={};return n[t.toLowerCase()]=i.toLowerCase(),n["Webkit"+t]="webkit"+i,n["Moz"+t]="moz"+i,n}var nn={animationend:Ei("Animation","AnimationEnd"),animationiteration:Ei("Animation","AnimationIteration"),animationstart:Ei("Animation","AnimationStart"),transitionrun:Ei("Transition","TransitionRun"),transitionstart:Ei("Transition","TransitionStart"),transitioncancel:Ei("Transition","TransitionCancel"),transitionend:Ei("Transition","TransitionEnd")},jr={},hc={};Wt&&(hc=document.createElement("div").style,"AnimationEvent"in window||(delete nn.animationend.animation,delete nn.animationiteration.animation,delete nn.animationstart.animation),"TransitionEvent"in window||delete nn.transitionend.transition);function Di(t){if(jr[t])return jr[t];if(!nn[t])return t;var i=nn[t],n;for(n in i)if(i.hasOwnProperty(n)&&n in hc)return jr[t]=i[n];return t}var uc=Di("animationend"),mc=Di("animationiteration"),gc=Di("animationstart"),Nm=Di("transitionrun"),Wm=Di("transitionstart"),Om=Di("transitioncancel"),fc=Di("transitionend"),pc=new Map,wr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");wr.push("scrollEnd");function St(t,i){pc.set(t,i),Ci(i,[t])}var _a=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},pt=[],an=0,kr=0;function Ia(){for(var t=an,i=kr=an=0;i<t;){var n=pt[i];pt[i++]=null;var a=pt[i];pt[i++]=null;var s=pt[i];pt[i++]=null;var r=pt[i];if(pt[i++]=null,a!==null&&s!==null){var o=a.pending;o===null?s.next=s:(s.next=o.next,o.next=s),a.pending=s}r!==0&&yc(n,s,r)}}function Fa(t,i,n,a){pt[an++]=t,pt[an++]=i,pt[an++]=n,pt[an++]=a,kr|=a,t.lanes|=a,t=t.alternate,t!==null&&(t.lanes|=a)}function Tr(t,i,n,a){return Fa(t,i,n,a),Va(t)}function Ri(t,i){return Fa(t,null,null,i),Va(t)}function yc(t,i,n){t.lanes|=n;var a=t.alternate;a!==null&&(a.lanes|=n);for(var s=!1,r=t.return;r!==null;)r.childLanes|=n,a=r.alternate,a!==null&&(a.childLanes|=n),r.tag===22&&(t=r.stateNode,t===null||t._visibility&1||(s=!0)),t=r,r=r.return;return t.tag===3?(r=t.stateNode,s&&i!==null&&(s=31-rt(n),t=r.hiddenUpdates,a=t[s],a===null?t[s]=[i]:a.push(i),i.lane=n|536870912),r):null}function Va(t){if(50<ua)throw ua=0,qo=null,Error(d(185));for(var i=t.return;i!==null;)t=i,i=t.return;return t.tag===3?t.stateNode:null}var sn={};function Um(t,i,n,a){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function lt(t,i,n,a){return new Um(t,i,n,a)}function Sr(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Ot(t,i){var n=t.alternate;return n===null?(n=lt(t.tag,i,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=i,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&65011712,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,i=t.dependencies,n.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n.refCleanup=t.refCleanup,n}function xc(t,i){t.flags&=65011714;var n=t.alternate;return n===null?(t.childLanes=0,t.lanes=i,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,t.type=n.type,i=n.dependencies,t.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t}function Ja(t,i,n,a,s,r){var o=0;if(a=t,typeof t=="function")Sr(t)&&(o=1);else if(typeof t=="string")o=Ig(t,n,z.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case Je:return t=lt(31,n,i,s),t.elementType=Je,t.lanes=r,t;case re:return Bi(n.children,s,r,i);case Ge:o=8,s|=24;break;case We:return t=lt(12,n,i,s|2),t.elementType=We,t.lanes=r,t;case je:return t=lt(13,n,i,s),t.elementType=je,t.lanes=r,t;case Se:return t=lt(19,n,i,s),t.elementType=Se,t.lanes=r,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case I:o=10;break e;case Z:o=9;break e;case ie:o=11;break e;case Q:o=14;break e;case be:o=16,a=null;break e}o=29,n=Error(d(130,t===null?"null":typeof t,"")),a=null}return i=lt(o,n,i,s),i.elementType=t,i.type=a,i.lanes=r,i}function Bi(t,i,n,a){return t=lt(7,t,a,i),t.lanes=n,t}function Ar(t,i,n){return t=lt(6,t,null,i),t.lanes=n,t}function vc(t){var i=lt(18,null,null,0);return i.stateNode=t,i}function Cr(t,i,n){return i=lt(4,t.children!==null?t.children:[],t.key,i),i.lanes=n,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}var bc=new WeakMap;function yt(t,i){if(typeof t=="object"&&t!==null){var n=bc.get(t);return n!==void 0?n:(i={value:t,source:i,stack:vl(i)},bc.set(t,i),i)}return{value:t,source:i,stack:vl(i)}}var rn=[],on=0,Ka=null,Vn=0,xt=[],vt=0,ii=null,Et=1,Dt="";function Ut(t,i){rn[on++]=Vn,rn[on++]=Ka,Ka=t,Vn=i}function jc(t,i,n){xt[vt++]=Et,xt[vt++]=Dt,xt[vt++]=ii,ii=t;var a=Et;t=Dt;var s=32-rt(a)-1;a&=~(1<<s),n+=1;var r=32-rt(i)+s;if(30<r){var o=s-s%5;r=(a&(1<<o)-1).toString(32),a>>=o,s-=o,Et=1<<32-rt(i)+s|n<<s|a,Dt=r+t}else Et=1<<r|n<<s|a,Dt=t}function Mr(t){t.return!==null&&(Ut(t,1),jc(t,1,0))}function Er(t){for(;t===Ka;)Ka=rn[--on],rn[on]=null,Vn=rn[--on],rn[on]=null;for(;t===ii;)ii=xt[--vt],xt[vt]=null,Dt=xt[--vt],xt[vt]=null,Et=xt[--vt],xt[vt]=null}function wc(t,i){xt[vt++]=Et,xt[vt++]=Dt,xt[vt++]=ii,Et=i.id,Dt=i.overflow,ii=t}var _e=null,we=null,se=!1,ni=null,bt=!1,Dr=Error(d(519));function ai(t){var i=Error(d(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Jn(yt(i,t)),Dr}function kc(t){var i=t.stateNode,n=t.type,a=t.memoizedProps;switch(i[He]=t,i[Xe]=a,n){case"dialog":te("cancel",i),te("close",i);break;case"iframe":case"object":case"embed":te("load",i);break;case"video":case"audio":for(n=0;n<ga.length;n++)te(ga[n],i);break;case"source":te("error",i);break;case"img":case"image":case"link":te("error",i),te("load",i);break;case"details":te("toggle",i);break;case"input":te("invalid",i),Wl(i,a.value,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name,!0);break;case"select":te("invalid",i);break;case"textarea":te("invalid",i),Ul(i,a.value,a.defaultValue,a.children)}n=a.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||i.textContent===""+n||a.suppressHydrationWarning===!0||Gh(i.textContent,n)?(a.popover!=null&&(te("beforetoggle",i),te("toggle",i)),a.onScroll!=null&&te("scroll",i),a.onScrollEnd!=null&&te("scrollend",i),a.onClick!=null&&(i.onclick=Nt),i=!0):i=!1,i||ai(t,!0)}function Tc(t){for(_e=t.return;_e;)switch(_e.tag){case 5:case 31:case 13:bt=!1;return;case 27:case 3:bt=!0;return;default:_e=_e.return}}function ln(t){if(t!==_e)return!1;if(!se)return Tc(t),se=!0,!1;var i=t.tag,n;if((n=i!==3&&i!==27)&&((n=i===5)&&(n=t.type,n=!(n!=="form"&&n!=="button")||Yo(t.type,t.memoizedProps)),n=!n),n&&we&&ai(t),Tc(t),i===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(d(317));we=Yh(t)}else if(i===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(d(317));we=Yh(t)}else i===27?(i=we,xi(t.type)?(t=el,el=null,we=t):we=i):we=_e?wt(t.stateNode.nextSibling):null;return!0}function zi(){we=_e=null,se=!1}function Rr(){var t=ni;return t!==null&&(it===null?it=t:it.push.apply(it,t),ni=null),t}function Jn(t){ni===null?ni=[t]:ni.push(t)}var Br=m(null),qi=null,Lt=null;function si(t,i,n){E(Br,i._currentValue),i._currentValue=n}function Gt(t){t._currentValue=Br.current,A(Br)}function zr(t,i,n){for(;t!==null;){var a=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,a!==null&&(a.childLanes|=i)):a!==null&&(a.childLanes&i)!==i&&(a.childLanes|=i),t===n)break;t=t.return}}function qr(t,i,n,a){var s=t.child;for(s!==null&&(s.return=t);s!==null;){var r=s.dependencies;if(r!==null){var o=s.child;r=r.firstContext;e:for(;r!==null;){var l=r;r=s;for(var c=0;c<i.length;c++)if(l.context===i[c]){r.lanes|=n,l=r.alternate,l!==null&&(l.lanes|=n),zr(r.return,n,t),a||(o=null);break e}r=l.next}}else if(s.tag===18){if(o=s.return,o===null)throw Error(d(341));o.lanes|=n,r=o.alternate,r!==null&&(r.lanes|=n),zr(o,n,t),o=null}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}}function cn(t,i,n,a){t=null;for(var s=i,r=!1;s!==null;){if(!r){if((s.flags&524288)!==0)r=!0;else if((s.flags&262144)!==0)break}if(s.tag===10){var o=s.alternate;if(o===null)throw Error(d(387));if(o=o.memoizedProps,o!==null){var l=s.type;ot(s.pendingProps.value,o.value)||(t!==null?t.push(l):t=[l])}}else if(s===he.current){if(o=s.alternate,o===null)throw Error(d(387));o.memoizedState.memoizedState!==s.memoizedState.memoizedState&&(t!==null?t.push(va):t=[va])}s=s.return}t!==null&&qr(i,t,n,a),i.flags|=262144}function Pa(t){for(t=t.firstContext;t!==null;){if(!ot(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Ni(t){qi=t,Lt=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Ie(t){return Sc(qi,t)}function Ya(t,i){return qi===null&&Ni(t),Sc(t,i)}function Sc(t,i){var n=i._currentValue;if(i={context:i,memoizedValue:n,next:null},Lt===null){if(t===null)throw Error(d(308));Lt=i,t.dependencies={lanes:0,firstContext:i},t.flags|=524288}else Lt=Lt.next=i;return n}var Lm=typeof AbortController<"u"?AbortController:function(){var t=[],i=this.signal={aborted:!1,addEventListener:function(n,a){t.push(a)}};this.abort=function(){i.aborted=!0,t.forEach(function(n){return n()})}},Gm=h.unstable_scheduleCallback,Hm=h.unstable_NormalPriority,Be={$$typeof:I,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Nr(){return{controller:new Lm,data:new Map,refCount:0}}function Kn(t){t.refCount--,t.refCount===0&&Gm(Hm,function(){t.controller.abort()})}var Pn=null,Wr=0,dn=0,hn=null;function _m(t,i){if(Pn===null){var n=Pn=[];Wr=0,dn=Go(),hn={status:"pending",value:void 0,then:function(a){n.push(a)}}}return Wr++,i.then(Ac,Ac),i}function Ac(){if(--Wr===0&&Pn!==null){hn!==null&&(hn.status="fulfilled");var t=Pn;Pn=null,dn=0,hn=null;for(var i=0;i<t.length;i++)(0,t[i])()}}function Im(t,i){var n=[],a={status:"pending",value:null,reason:null,then:function(s){n.push(s)}};return t.then(function(){a.status="fulfilled",a.value=i;for(var s=0;s<n.length;s++)(0,n[s])(i)},function(s){for(a.status="rejected",a.reason=s,s=0;s<n.length;s++)(0,n[s])(void 0)}),a}var Cc=k.S;k.S=function(t,i){dh=at(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&_m(t,i),Cc!==null&&Cc(t,i)};var Wi=m(null);function Or(){var t=Wi.current;return t!==null?t:ve.pooledCache}function Qa(t,i){i===null?E(Wi,Wi.current):E(Wi,i.pool)}function Mc(){var t=Or();return t===null?null:{parent:Be._currentValue,pool:t}}var un=Error(d(460)),Ur=Error(d(474)),Xa=Error(d(542)),Za={then:function(){}};function Ec(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Dc(t,i,n){switch(n=t[n],n===void 0?t.push(i):n!==i&&(i.then(Nt,Nt),i=n),i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,Bc(t),t;default:if(typeof i.status=="string")i.then(Nt,Nt);else{if(t=ve,t!==null&&100<t.shellSuspendCounter)throw Error(d(482));t=i,t.status="pending",t.then(function(a){if(i.status==="pending"){var s=i;s.status="fulfilled",s.value=a}},function(a){if(i.status==="pending"){var s=i;s.status="rejected",s.reason=a}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,Bc(t),t}throw Ui=i,un}}function Oi(t){try{var i=t._init;return i(t._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(Ui=n,un):n}}var Ui=null;function Rc(){if(Ui===null)throw Error(d(459));var t=Ui;return Ui=null,t}function Bc(t){if(t===un||t===Xa)throw Error(d(483))}var mn=null,Yn=0;function $a(t){var i=Yn;return Yn+=1,mn===null&&(mn=[]),Dc(mn,t,i)}function Qn(t,i){i=i.props.ref,t.ref=i!==void 0?i:null}function es(t,i){throw i.$$typeof===J?Error(d(525)):(t=Object.prototype.toString.call(i),Error(d(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t)))}function zc(t){function i(g,u){if(t){var f=g.deletions;f===null?(g.deletions=[u],g.flags|=16):f.push(u)}}function n(g,u){if(!t)return null;for(;u!==null;)i(g,u),u=u.sibling;return null}function a(g){for(var u=new Map;g!==null;)g.key!==null?u.set(g.key,g):u.set(g.index,g),g=g.sibling;return u}function s(g,u){return g=Ot(g,u),g.index=0,g.sibling=null,g}function r(g,u,f){return g.index=f,t?(f=g.alternate,f!==null?(f=f.index,f<u?(g.flags|=67108866,u):f):(g.flags|=67108866,u)):(g.flags|=1048576,u)}function o(g){return t&&g.alternate===null&&(g.flags|=67108866),g}function l(g,u,f,T){return u===null||u.tag!==6?(u=Ar(f,g.mode,T),u.return=g,u):(u=s(u,f),u.return=g,u)}function c(g,u,f,T){var W=f.type;return W===re?w(g,u,f.props.children,T,f.key):u!==null&&(u.elementType===W||typeof W=="object"&&W!==null&&W.$$typeof===be&&Oi(W)===u.type)?(u=s(u,f.props),Qn(u,f),u.return=g,u):(u=Ja(f.type,f.key,f.props,null,g.mode,T),Qn(u,f),u.return=g,u)}function p(g,u,f,T){return u===null||u.tag!==4||u.stateNode.containerInfo!==f.containerInfo||u.stateNode.implementation!==f.implementation?(u=Cr(f,g.mode,T),u.return=g,u):(u=s(u,f.children||[]),u.return=g,u)}function w(g,u,f,T,W){return u===null||u.tag!==7?(u=Bi(f,g.mode,T,W),u.return=g,u):(u=s(u,f),u.return=g,u)}function S(g,u,f){if(typeof u=="string"&&u!==""||typeof u=="number"||typeof u=="bigint")return u=Ar(""+u,g.mode,f),u.return=g,u;if(typeof u=="object"&&u!==null){switch(u.$$typeof){case G:return f=Ja(u.type,u.key,u.props,null,g.mode,f),Qn(f,u),f.return=g,f;case F:return u=Cr(u,g.mode,f),u.return=g,u;case be:return u=Oi(u),S(g,u,f)}if(Tt(u)||Qe(u))return u=Bi(u,g.mode,f,null),u.return=g,u;if(typeof u.then=="function")return S(g,$a(u),f);if(u.$$typeof===I)return S(g,Ya(g,u),f);es(g,u)}return null}function x(g,u,f,T){var W=u!==null?u.key:null;if(typeof f=="string"&&f!==""||typeof f=="number"||typeof f=="bigint")return W!==null?null:l(g,u,""+f,T);if(typeof f=="object"&&f!==null){switch(f.$$typeof){case G:return f.key===W?c(g,u,f,T):null;case F:return f.key===W?p(g,u,f,T):null;case be:return f=Oi(f),x(g,u,f,T)}if(Tt(f)||Qe(f))return W!==null?null:w(g,u,f,T,null);if(typeof f.then=="function")return x(g,u,$a(f),T);if(f.$$typeof===I)return x(g,u,Ya(g,f),T);es(g,f)}return null}function v(g,u,f,T,W){if(typeof T=="string"&&T!==""||typeof T=="number"||typeof T=="bigint")return g=g.get(f)||null,l(u,g,""+T,W);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case G:return g=g.get(T.key===null?f:T.key)||null,c(u,g,T,W);case F:return g=g.get(T.key===null?f:T.key)||null,p(u,g,T,W);case be:return T=Oi(T),v(g,u,f,T,W)}if(Tt(T)||Qe(T))return g=g.get(f)||null,w(u,g,T,W,null);if(typeof T.then=="function")return v(g,u,f,$a(T),W);if(T.$$typeof===I)return v(g,u,f,Ya(u,T),W);es(u,T)}return null}function B(g,u,f,T){for(var W=null,oe=null,q=u,Y=u=0,ae=null;q!==null&&Y<f.length;Y++){q.index>Y?(ae=q,q=null):ae=q.sibling;var le=x(g,q,f[Y],T);if(le===null){q===null&&(q=ae);break}t&&q&&le.alternate===null&&i(g,q),u=r(le,u,Y),oe===null?W=le:oe.sibling=le,oe=le,q=ae}if(Y===f.length)return n(g,q),se&&Ut(g,Y),W;if(q===null){for(;Y<f.length;Y++)q=S(g,f[Y],T),q!==null&&(u=r(q,u,Y),oe===null?W=q:oe.sibling=q,oe=q);return se&&Ut(g,Y),W}for(q=a(q);Y<f.length;Y++)ae=v(q,g,Y,f[Y],T),ae!==null&&(t&&ae.alternate!==null&&q.delete(ae.key===null?Y:ae.key),u=r(ae,u,Y),oe===null?W=ae:oe.sibling=ae,oe=ae);return t&&q.forEach(function(ki){return i(g,ki)}),se&&Ut(g,Y),W}function L(g,u,f,T){if(f==null)throw Error(d(151));for(var W=null,oe=null,q=u,Y=u=0,ae=null,le=f.next();q!==null&&!le.done;Y++,le=f.next()){q.index>Y?(ae=q,q=null):ae=q.sibling;var ki=x(g,q,le.value,T);if(ki===null){q===null&&(q=ae);break}t&&q&&ki.alternate===null&&i(g,q),u=r(ki,u,Y),oe===null?W=ki:oe.sibling=ki,oe=ki,q=ae}if(le.done)return n(g,q),se&&Ut(g,Y),W;if(q===null){for(;!le.done;Y++,le=f.next())le=S(g,le.value,T),le!==null&&(u=r(le,u,Y),oe===null?W=le:oe.sibling=le,oe=le);return se&&Ut(g,Y),W}for(q=a(q);!le.done;Y++,le=f.next())le=v(q,g,Y,le.value,T),le!==null&&(t&&le.alternate!==null&&q.delete(le.key===null?Y:le.key),u=r(le,u,Y),oe===null?W=le:oe.sibling=le,oe=le);return t&&q.forEach(function(ef){return i(g,ef)}),se&&Ut(g,Y),W}function ye(g,u,f,T){if(typeof f=="object"&&f!==null&&f.type===re&&f.key===null&&(f=f.props.children),typeof f=="object"&&f!==null){switch(f.$$typeof){case G:e:{for(var W=f.key;u!==null;){if(u.key===W){if(W=f.type,W===re){if(u.tag===7){n(g,u.sibling),T=s(u,f.props.children),T.return=g,g=T;break e}}else if(u.elementType===W||typeof W=="object"&&W!==null&&W.$$typeof===be&&Oi(W)===u.type){n(g,u.sibling),T=s(u,f.props),Qn(T,f),T.return=g,g=T;break e}n(g,u);break}else i(g,u);u=u.sibling}f.type===re?(T=Bi(f.props.children,g.mode,T,f.key),T.return=g,g=T):(T=Ja(f.type,f.key,f.props,null,g.mode,T),Qn(T,f),T.return=g,g=T)}return o(g);case F:e:{for(W=f.key;u!==null;){if(u.key===W)if(u.tag===4&&u.stateNode.containerInfo===f.containerInfo&&u.stateNode.implementation===f.implementation){n(g,u.sibling),T=s(u,f.children||[]),T.return=g,g=T;break e}else{n(g,u);break}else i(g,u);u=u.sibling}T=Cr(f,g.mode,T),T.return=g,g=T}return o(g);case be:return f=Oi(f),ye(g,u,f,T)}if(Tt(f))return B(g,u,f,T);if(Qe(f)){if(W=Qe(f),typeof W!="function")throw Error(d(150));return f=W.call(f),L(g,u,f,T)}if(typeof f.then=="function")return ye(g,u,$a(f),T);if(f.$$typeof===I)return ye(g,u,Ya(g,f),T);es(g,f)}return typeof f=="string"&&f!==""||typeof f=="number"||typeof f=="bigint"?(f=""+f,u!==null&&u.tag===6?(n(g,u.sibling),T=s(u,f),T.return=g,g=T):(n(g,u),T=Ar(f,g.mode,T),T.return=g,g=T),o(g)):n(g,u)}return function(g,u,f,T){try{Yn=0;var W=ye(g,u,f,T);return mn=null,W}catch(q){if(q===un||q===Xa)throw q;var oe=lt(29,q,null,g.mode);return oe.lanes=T,oe.return=g,oe}}}var Li=zc(!0),qc=zc(!1),ri=!1;function Lr(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Gr(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function oi(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function li(t,i,n){var a=t.updateQueue;if(a===null)return null;if(a=a.shared,(de&2)!==0){var s=a.pending;return s===null?i.next=i:(i.next=s.next,s.next=i),a.pending=i,i=Va(t),yc(t,null,n),i}return Fa(t,a,i,n),Va(t)}function Xn(t,i,n){if(i=i.updateQueue,i!==null&&(i=i.shared,(n&4194048)!==0)){var a=i.lanes;a&=t.pendingLanes,n|=a,i.lanes=n,Sl(t,n)}}function Hr(t,i){var n=t.updateQueue,a=t.alternate;if(a!==null&&(a=a.updateQueue,n===a)){var s=null,r=null;if(n=n.firstBaseUpdate,n!==null){do{var o={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};r===null?s=r=o:r=r.next=o,n=n.next}while(n!==null);r===null?s=r=i:r=r.next=i}else s=r=i;n={baseState:a.baseState,firstBaseUpdate:s,lastBaseUpdate:r,shared:a.shared,callbacks:a.callbacks},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=i:t.next=i,n.lastBaseUpdate=i}var _r=!1;function Zn(){if(_r){var t=hn;if(t!==null)throw t}}function $n(t,i,n,a){_r=!1;var s=t.updateQueue;ri=!1;var r=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,p=c.next;c.next=null,o===null?r=p:o.next=p,o=c;var w=t.alternate;w!==null&&(w=w.updateQueue,l=w.lastBaseUpdate,l!==o&&(l===null?w.firstBaseUpdate=p:l.next=p,w.lastBaseUpdate=c))}if(r!==null){var S=s.baseState;o=0,w=p=c=null,l=r;do{var x=l.lane&-536870913,v=x!==l.lane;if(v?(ne&x)===x:(a&x)===x){x!==0&&x===dn&&(_r=!0),w!==null&&(w=w.next={lane:0,tag:l.tag,payload:l.payload,callback:null,next:null});e:{var B=t,L=l;x=i;var ye=n;switch(L.tag){case 1:if(B=L.payload,typeof B=="function"){S=B.call(ye,S,x);break e}S=B;break e;case 3:B.flags=B.flags&-65537|128;case 0:if(B=L.payload,x=typeof B=="function"?B.call(ye,S,x):B,x==null)break e;S=D({},S,x);break e;case 2:ri=!0}}x=l.callback,x!==null&&(t.flags|=64,v&&(t.flags|=8192),v=s.callbacks,v===null?s.callbacks=[x]:v.push(x))}else v={lane:x,tag:l.tag,payload:l.payload,callback:l.callback,next:null},w===null?(p=w=v,c=S):w=w.next=v,o|=x;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;v=l,l=v.next,v.next=null,s.lastBaseUpdate=v,s.shared.pending=null}}while(!0);w===null&&(c=S),s.baseState=c,s.firstBaseUpdate=p,s.lastBaseUpdate=w,r===null&&(s.shared.lanes=0),mi|=o,t.lanes=o,t.memoizedState=S}}function Nc(t,i){if(typeof t!="function")throw Error(d(191,t));t.call(i)}function Wc(t,i){var n=t.callbacks;if(n!==null)for(t.callbacks=null,t=0;t<n.length;t++)Nc(n[t],i)}var gn=m(null),ts=m(0);function Oc(t,i){t=Yt,E(ts,t),E(gn,i),Yt=t|i.baseLanes}function Ir(){E(ts,Yt),E(gn,gn.current)}function Fr(){Yt=ts.current,A(gn),A(ts)}var ct=m(null),jt=null;function ci(t){var i=t.alternate;E(Ee,Ee.current&1),E(ct,t),jt===null&&(i===null||gn.current!==null||i.memoizedState!==null)&&(jt=t)}function Vr(t){E(Ee,Ee.current),E(ct,t),jt===null&&(jt=t)}function Uc(t){t.tag===22?(E(Ee,Ee.current),E(ct,t),jt===null&&(jt=t)):di()}function di(){E(Ee,Ee.current),E(ct,ct.current)}function dt(t){A(ct),jt===t&&(jt=null),A(Ee)}var Ee=m(0);function is(t){for(var i=t;i!==null;){if(i.tag===13){var n=i.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||Zo(n)||$o(n)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Ht=0,P=null,fe=null,ze=null,ns=!1,fn=!1,Gi=!1,as=0,ea=0,pn=null,Fm=0;function Ae(){throw Error(d(321))}function Jr(t,i){if(i===null)return!1;for(var n=0;n<i.length&&n<t.length;n++)if(!ot(t[n],i[n]))return!1;return!0}function Kr(t,i,n,a,s,r){return Ht=r,P=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,k.H=t===null||t.memoizedState===null?jd:lo,Gi=!1,r=n(a,s),Gi=!1,fn&&(r=Gc(i,n,a,s)),Lc(t),r}function Lc(t){k.H=na;var i=fe!==null&&fe.next!==null;if(Ht=0,ze=fe=P=null,ns=!1,ea=0,pn=null,i)throw Error(d(300));t===null||qe||(t=t.dependencies,t!==null&&Pa(t)&&(qe=!0))}function Gc(t,i,n,a){P=t;var s=0;do{if(fn&&(pn=null),ea=0,fn=!1,25<=s)throw Error(d(301));if(s+=1,ze=fe=null,t.updateQueue!=null){var r=t.updateQueue;r.lastEffect=null,r.events=null,r.stores=null,r.memoCache!=null&&(r.memoCache.index=0)}k.H=wd,r=i(n,a)}while(fn);return r}function Vm(){var t=k.H,i=t.useState()[0];return i=typeof i.then=="function"?ta(i):i,t=t.useState()[0],(fe!==null?fe.memoizedState:null)!==t&&(P.flags|=1024),i}function Pr(){var t=as!==0;return as=0,t}function Yr(t,i,n){i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~n}function Qr(t){if(ns){for(t=t.memoizedState;t!==null;){var i=t.queue;i!==null&&(i.pending=null),t=t.next}ns=!1}Ht=0,ze=fe=P=null,fn=!1,ea=as=0,pn=null}function Ye(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ze===null?P.memoizedState=ze=t:ze=ze.next=t,ze}function De(){if(fe===null){var t=P.alternate;t=t!==null?t.memoizedState:null}else t=fe.next;var i=ze===null?P.memoizedState:ze.next;if(i!==null)ze=i,fe=t;else{if(t===null)throw P.alternate===null?Error(d(467)):Error(d(310));fe=t,t={memoizedState:fe.memoizedState,baseState:fe.baseState,baseQueue:fe.baseQueue,queue:fe.queue,next:null},ze===null?P.memoizedState=ze=t:ze=ze.next=t}return ze}function ss(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ta(t){var i=ea;return ea+=1,pn===null&&(pn=[]),t=Dc(pn,t,i),i=P,(ze===null?i.memoizedState:ze.next)===null&&(i=i.alternate,k.H=i===null||i.memoizedState===null?jd:lo),t}function rs(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return ta(t);if(t.$$typeof===I)return Ie(t)}throw Error(d(438,String(t)))}function Xr(t){var i=null,n=P.updateQueue;if(n!==null&&(i=n.memoCache),i==null){var a=P.alternate;a!==null&&(a=a.updateQueue,a!==null&&(a=a.memoCache,a!=null&&(i={data:a.data.map(function(s){return s.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),n===null&&(n=ss(),P.updateQueue=n),n.memoCache=i,n=i.data[i.index],n===void 0)for(n=i.data[i.index]=Array(t),a=0;a<t;a++)n[a]=Fi;return i.index++,n}function _t(t,i){return typeof i=="function"?i(t):i}function os(t){var i=De();return Zr(i,fe,t)}function Zr(t,i,n){var a=t.queue;if(a===null)throw Error(d(311));a.lastRenderedReducer=n;var s=t.baseQueue,r=a.pending;if(r!==null){if(s!==null){var o=s.next;s.next=r.next,r.next=o}i.baseQueue=s=r,a.pending=null}if(r=t.baseState,s===null)t.memoizedState=r;else{i=s.next;var l=o=null,c=null,p=i,w=!1;do{var S=p.lane&-536870913;if(S!==p.lane?(ne&S)===S:(Ht&S)===S){var x=p.revertLane;if(x===0)c!==null&&(c=c.next={lane:0,revertLane:0,gesture:null,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null}),S===dn&&(w=!0);else if((Ht&x)===x){p=p.next,x===dn&&(w=!0);continue}else S={lane:0,revertLane:p.revertLane,gesture:null,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null},c===null?(l=c=S,o=r):c=c.next=S,P.lanes|=x,mi|=x;S=p.action,Gi&&n(r,S),r=p.hasEagerState?p.eagerState:n(r,S)}else x={lane:S,revertLane:p.revertLane,gesture:p.gesture,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null},c===null?(l=c=x,o=r):c=c.next=x,P.lanes|=S,mi|=S;p=p.next}while(p!==null&&p!==i);if(c===null?o=r:c.next=l,!ot(r,t.memoizedState)&&(qe=!0,w&&(n=hn,n!==null)))throw n;t.memoizedState=r,t.baseState=o,t.baseQueue=c,a.lastRenderedState=r}return s===null&&(a.lanes=0),[t.memoizedState,a.dispatch]}function $r(t){var i=De(),n=i.queue;if(n===null)throw Error(d(311));n.lastRenderedReducer=t;var a=n.dispatch,s=n.pending,r=i.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do r=t(r,o.action),o=o.next;while(o!==s);ot(r,i.memoizedState)||(qe=!0),i.memoizedState=r,i.baseQueue===null&&(i.baseState=r),n.lastRenderedState=r}return[r,a]}function Hc(t,i,n){var a=P,s=De(),r=se;if(r){if(n===void 0)throw Error(d(407));n=n()}else n=i();var o=!ot((fe||s).memoizedState,n);if(o&&(s.memoizedState=n,qe=!0),s=s.queue,io(Fc.bind(null,a,s,t),[t]),s.getSnapshot!==i||o||ze!==null&&ze.memoizedState.tag&1){if(a.flags|=2048,yn(9,{destroy:void 0},Ic.bind(null,a,s,n,i),null),ve===null)throw Error(d(349));r||(Ht&127)!==0||_c(a,i,n)}return n}function _c(t,i,n){t.flags|=16384,t={getSnapshot:i,value:n},i=P.updateQueue,i===null?(i=ss(),P.updateQueue=i,i.stores=[t]):(n=i.stores,n===null?i.stores=[t]:n.push(t))}function Ic(t,i,n,a){i.value=n,i.getSnapshot=a,Vc(i)&&Jc(t)}function Fc(t,i,n){return n(function(){Vc(i)&&Jc(t)})}function Vc(t){var i=t.getSnapshot;t=t.value;try{var n=i();return!ot(t,n)}catch{return!0}}function Jc(t){var i=Ri(t,2);i!==null&&nt(i,t,2)}function eo(t){var i=Ye();if(typeof t=="function"){var n=t;if(t=n(),Gi){$t(!0);try{n()}finally{$t(!1)}}}return i.memoizedState=i.baseState=t,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:_t,lastRenderedState:t},i}function Kc(t,i,n,a){return t.baseState=n,Zr(t,fe,typeof a=="function"?a:_t)}function Jm(t,i,n,a,s){if(ds(t))throw Error(d(485));if(t=i.action,t!==null){var r={payload:s,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(o){r.listeners.push(o)}};k.T!==null?n(!0):r.isTransition=!1,a(r),n=i.pending,n===null?(r.next=i.pending=r,Pc(i,r)):(r.next=n.next,i.pending=n.next=r)}}function Pc(t,i){var n=i.action,a=i.payload,s=t.state;if(i.isTransition){var r=k.T,o={};k.T=o;try{var l=n(s,a),c=k.S;c!==null&&c(o,l),Yc(t,i,l)}catch(p){to(t,i,p)}finally{r!==null&&o.types!==null&&(r.types=o.types),k.T=r}}else try{r=n(s,a),Yc(t,i,r)}catch(p){to(t,i,p)}}function Yc(t,i,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(a){Qc(t,i,a)},function(a){return to(t,i,a)}):Qc(t,i,n)}function Qc(t,i,n){i.status="fulfilled",i.value=n,Xc(i),t.state=n,i=t.pending,i!==null&&(n=i.next,n===i?t.pending=null:(n=n.next,i.next=n,Pc(t,n)))}function to(t,i,n){var a=t.pending;if(t.pending=null,a!==null){a=a.next;do i.status="rejected",i.reason=n,Xc(i),i=i.next;while(i!==a)}t.action=null}function Xc(t){t=t.listeners;for(var i=0;i<t.length;i++)(0,t[i])()}function Zc(t,i){return i}function $c(t,i){if(se){var n=ve.formState;if(n!==null){e:{var a=P;if(se){if(we){t:{for(var s=we,r=bt;s.nodeType!==8;){if(!r){s=null;break t}if(s=wt(s.nextSibling),s===null){s=null;break t}}r=s.data,s=r==="F!"||r==="F"?s:null}if(s){we=wt(s.nextSibling),a=s.data==="F!";break e}}ai(a)}a=!1}a&&(i=n[0])}}return n=Ye(),n.memoizedState=n.baseState=i,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zc,lastRenderedState:i},n.queue=a,n=xd.bind(null,P,a),a.dispatch=n,a=eo(!1),r=oo.bind(null,P,!1,a.queue),a=Ye(),s={state:i,dispatch:null,action:t,pending:null},a.queue=s,n=Jm.bind(null,P,s,r,n),s.dispatch=n,a.memoizedState=t,[i,n,!1]}function ed(t){var i=De();return td(i,fe,t)}function td(t,i,n){if(i=Zr(t,i,Zc)[0],t=os(_t)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var a=ta(i)}catch(o){throw o===un?Xa:o}else a=i;i=De();var s=i.queue,r=s.dispatch;return n!==i.memoizedState&&(P.flags|=2048,yn(9,{destroy:void 0},Km.bind(null,s,n),null)),[a,r,t]}function Km(t,i){t.action=i}function id(t){var i=De(),n=fe;if(n!==null)return td(i,n,t);De(),i=i.memoizedState,n=De();var a=n.queue.dispatch;return n.memoizedState=t,[i,a,!1]}function yn(t,i,n,a){return t={tag:t,create:n,deps:a,inst:i,next:null},i=P.updateQueue,i===null&&(i=ss(),P.updateQueue=i),n=i.lastEffect,n===null?i.lastEffect=t.next=t:(a=n.next,n.next=t,t.next=a,i.lastEffect=t),t}function nd(){return De().memoizedState}function ls(t,i,n,a){var s=Ye();P.flags|=t,s.memoizedState=yn(1|i,{destroy:void 0},n,a===void 0?null:a)}function cs(t,i,n,a){var s=De();a=a===void 0?null:a;var r=s.memoizedState.inst;fe!==null&&a!==null&&Jr(a,fe.memoizedState.deps)?s.memoizedState=yn(i,r,n,a):(P.flags|=t,s.memoizedState=yn(1|i,r,n,a))}function ad(t,i){ls(8390656,8,t,i)}function io(t,i){cs(2048,8,t,i)}function Pm(t){P.flags|=4;var i=P.updateQueue;if(i===null)i=ss(),P.updateQueue=i,i.events=[t];else{var n=i.events;n===null?i.events=[t]:n.push(t)}}function sd(t){var i=De().memoizedState;return Pm({ref:i,nextImpl:t}),function(){if((de&2)!==0)throw Error(d(440));return i.impl.apply(void 0,arguments)}}function rd(t,i){return cs(4,2,t,i)}function od(t,i){return cs(4,4,t,i)}function ld(t,i){if(typeof i=="function"){t=t();var n=i(t);return function(){typeof n=="function"?n():i(null)}}if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function cd(t,i,n){n=n!=null?n.concat([t]):null,cs(4,4,ld.bind(null,i,t),n)}function no(){}function dd(t,i){var n=De();i=i===void 0?null:i;var a=n.memoizedState;return i!==null&&Jr(i,a[1])?a[0]:(n.memoizedState=[t,i],t)}function hd(t,i){var n=De();i=i===void 0?null:i;var a=n.memoizedState;if(i!==null&&Jr(i,a[1]))return a[0];if(a=t(),Gi){$t(!0);try{t()}finally{$t(!1)}}return n.memoizedState=[a,i],a}function ao(t,i,n){return n===void 0||(Ht&1073741824)!==0&&(ne&261930)===0?t.memoizedState=i:(t.memoizedState=n,t=uh(),P.lanes|=t,mi|=t,n)}function ud(t,i,n,a){return ot(n,i)?n:gn.current!==null?(t=ao(t,n,a),ot(t,i)||(qe=!0),t):(Ht&42)===0||(Ht&1073741824)!==0&&(ne&261930)===0?(qe=!0,t.memoizedState=n):(t=uh(),P.lanes|=t,mi|=t,i)}function md(t,i,n,a,s){var r=M.p;M.p=r!==0&&8>r?r:8;var o=k.T,l={};k.T=l,oo(t,!1,i,n);try{var c=s(),p=k.S;if(p!==null&&p(l,c),c!==null&&typeof c=="object"&&typeof c.then=="function"){var w=Im(c,a);ia(t,i,w,mt(t))}else ia(t,i,a,mt(t))}catch(S){ia(t,i,{then:function(){},status:"rejected",reason:S},mt())}finally{M.p=r,o!==null&&l.types!==null&&(o.types=l.types),k.T=o}}function Ym(){}function so(t,i,n,a){if(t.tag!==5)throw Error(d(476));var s=gd(t).queue;md(t,s,i,H,n===null?Ym:function(){return fd(t),n(a)})}function gd(t){var i=t.memoizedState;if(i!==null)return i;i={memoizedState:H,baseState:H,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:_t,lastRenderedState:H},next:null};var n={};return i.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:_t,lastRenderedState:n},next:null},t.memoizedState=i,t=t.alternate,t!==null&&(t.memoizedState=i),i}function fd(t){var i=gd(t);i.next===null&&(i=t.alternate.memoizedState),ia(t,i.next.queue,{},mt())}function ro(){return Ie(va)}function pd(){return De().memoizedState}function yd(){return De().memoizedState}function Qm(t){for(var i=t.return;i!==null;){switch(i.tag){case 24:case 3:var n=mt();t=oi(n);var a=li(i,t,n);a!==null&&(nt(a,i,n),Xn(a,i,n)),i={cache:Nr()},t.payload=i;return}i=i.return}}function Xm(t,i,n){var a=mt();n={lane:a,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},ds(t)?vd(i,n):(n=Tr(t,i,n,a),n!==null&&(nt(n,t,a),bd(n,i,a)))}function xd(t,i,n){var a=mt();ia(t,i,n,a)}function ia(t,i,n,a){var s={lane:a,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(ds(t))vd(i,s);else{var r=t.alternate;if(t.lanes===0&&(r===null||r.lanes===0)&&(r=i.lastRenderedReducer,r!==null))try{var o=i.lastRenderedState,l=r(o,n);if(s.hasEagerState=!0,s.eagerState=l,ot(l,o))return Fa(t,i,s,0),ve===null&&Ia(),!1}catch{}if(n=Tr(t,i,s,a),n!==null)return nt(n,t,a),bd(n,i,a),!0}return!1}function oo(t,i,n,a){if(a={lane:2,revertLane:Go(),gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},ds(t)){if(i)throw Error(d(479))}else i=Tr(t,n,a,2),i!==null&&nt(i,t,2)}function ds(t){var i=t.alternate;return t===P||i!==null&&i===P}function vd(t,i){fn=ns=!0;var n=t.pending;n===null?i.next=i:(i.next=n.next,n.next=i),t.pending=i}function bd(t,i,n){if((n&4194048)!==0){var a=i.lanes;a&=t.pendingLanes,n|=a,i.lanes=n,Sl(t,n)}}var na={readContext:Ie,use:rs,useCallback:Ae,useContext:Ae,useEffect:Ae,useImperativeHandle:Ae,useLayoutEffect:Ae,useInsertionEffect:Ae,useMemo:Ae,useReducer:Ae,useRef:Ae,useState:Ae,useDebugValue:Ae,useDeferredValue:Ae,useTransition:Ae,useSyncExternalStore:Ae,useId:Ae,useHostTransitionStatus:Ae,useFormState:Ae,useActionState:Ae,useOptimistic:Ae,useMemoCache:Ae,useCacheRefresh:Ae};na.useEffectEvent=Ae;var jd={readContext:Ie,use:rs,useCallback:function(t,i){return Ye().memoizedState=[t,i===void 0?null:i],t},useContext:Ie,useEffect:ad,useImperativeHandle:function(t,i,n){n=n!=null?n.concat([t]):null,ls(4194308,4,ld.bind(null,i,t),n)},useLayoutEffect:function(t,i){return ls(4194308,4,t,i)},useInsertionEffect:function(t,i){ls(4,2,t,i)},useMemo:function(t,i){var n=Ye();i=i===void 0?null:i;var a=t();if(Gi){$t(!0);try{t()}finally{$t(!1)}}return n.memoizedState=[a,i],a},useReducer:function(t,i,n){var a=Ye();if(n!==void 0){var s=n(i);if(Gi){$t(!0);try{n(i)}finally{$t(!1)}}}else s=i;return a.memoizedState=a.baseState=s,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:s},a.queue=t,t=t.dispatch=Xm.bind(null,P,t),[a.memoizedState,t]},useRef:function(t){var i=Ye();return t={current:t},i.memoizedState=t},useState:function(t){t=eo(t);var i=t.queue,n=xd.bind(null,P,i);return i.dispatch=n,[t.memoizedState,n]},useDebugValue:no,useDeferredValue:function(t,i){var n=Ye();return ao(n,t,i)},useTransition:function(){var t=eo(!1);return t=md.bind(null,P,t.queue,!0,!1),Ye().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,i,n){var a=P,s=Ye();if(se){if(n===void 0)throw Error(d(407));n=n()}else{if(n=i(),ve===null)throw Error(d(349));(ne&127)!==0||_c(a,i,n)}s.memoizedState=n;var r={value:n,getSnapshot:i};return s.queue=r,ad(Fc.bind(null,a,r,t),[t]),a.flags|=2048,yn(9,{destroy:void 0},Ic.bind(null,a,r,n,i),null),n},useId:function(){var t=Ye(),i=ve.identifierPrefix;if(se){var n=Dt,a=Et;n=(a&~(1<<32-rt(a)-1)).toString(32)+n,i="_"+i+"R_"+n,n=as++,0<n&&(i+="H"+n.toString(32)),i+="_"}else n=Fm++,i="_"+i+"r_"+n.toString(32)+"_";return t.memoizedState=i},useHostTransitionStatus:ro,useFormState:$c,useActionState:$c,useOptimistic:function(t){var i=Ye();i.memoizedState=i.baseState=t;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=n,i=oo.bind(null,P,!0,n),n.dispatch=i,[t,i]},useMemoCache:Xr,useCacheRefresh:function(){return Ye().memoizedState=Qm.bind(null,P)},useEffectEvent:function(t){var i=Ye(),n={impl:t};return i.memoizedState=n,function(){if((de&2)!==0)throw Error(d(440));return n.impl.apply(void 0,arguments)}}},lo={readContext:Ie,use:rs,useCallback:dd,useContext:Ie,useEffect:io,useImperativeHandle:cd,useInsertionEffect:rd,useLayoutEffect:od,useMemo:hd,useReducer:os,useRef:nd,useState:function(){return os(_t)},useDebugValue:no,useDeferredValue:function(t,i){var n=De();return ud(n,fe.memoizedState,t,i)},useTransition:function(){var t=os(_t)[0],i=De().memoizedState;return[typeof t=="boolean"?t:ta(t),i]},useSyncExternalStore:Hc,useId:pd,useHostTransitionStatus:ro,useFormState:ed,useActionState:ed,useOptimistic:function(t,i){var n=De();return Kc(n,fe,t,i)},useMemoCache:Xr,useCacheRefresh:yd};lo.useEffectEvent=sd;var wd={readContext:Ie,use:rs,useCallback:dd,useContext:Ie,useEffect:io,useImperativeHandle:cd,useInsertionEffect:rd,useLayoutEffect:od,useMemo:hd,useReducer:$r,useRef:nd,useState:function(){return $r(_t)},useDebugValue:no,useDeferredValue:function(t,i){var n=De();return fe===null?ao(n,t,i):ud(n,fe.memoizedState,t,i)},useTransition:function(){var t=$r(_t)[0],i=De().memoizedState;return[typeof t=="boolean"?t:ta(t),i]},useSyncExternalStore:Hc,useId:pd,useHostTransitionStatus:ro,useFormState:id,useActionState:id,useOptimistic:function(t,i){var n=De();return fe!==null?Kc(n,fe,t,i):(n.baseState=t,[t,n.queue.dispatch])},useMemoCache:Xr,useCacheRefresh:yd};wd.useEffectEvent=sd;function co(t,i,n,a){i=t.memoizedState,n=n(a,i),n=n==null?i:D({},i,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var ho={enqueueSetState:function(t,i,n){t=t._reactInternals;var a=mt(),s=oi(a);s.payload=i,n!=null&&(s.callback=n),i=li(t,s,a),i!==null&&(nt(i,t,a),Xn(i,t,a))},enqueueReplaceState:function(t,i,n){t=t._reactInternals;var a=mt(),s=oi(a);s.tag=1,s.payload=i,n!=null&&(s.callback=n),i=li(t,s,a),i!==null&&(nt(i,t,a),Xn(i,t,a))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var n=mt(),a=oi(n);a.tag=2,i!=null&&(a.callback=i),i=li(t,a,n),i!==null&&(nt(i,t,n),Xn(i,t,n))}};function kd(t,i,n,a,s,r,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(a,r,o):i.prototype&&i.prototype.isPureReactComponent?!In(n,a)||!In(s,r):!0}function Td(t,i,n,a){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(n,a),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(n,a),i.state!==t&&ho.enqueueReplaceState(i,i.state,null)}function Hi(t,i){var n=i;if("ref"in i){n={};for(var a in i)a!=="ref"&&(n[a]=i[a])}if(t=t.defaultProps){n===i&&(n=D({},n));for(var s in t)n[s]===void 0&&(n[s]=t[s])}return n}function Sd(t){_a(t)}function Ad(t){console.error(t)}function Cd(t){_a(t)}function hs(t,i){try{var n=t.onUncaughtError;n(i.value,{componentStack:i.stack})}catch(a){setTimeout(function(){throw a})}}function Md(t,i,n){try{var a=t.onCaughtError;a(n.value,{componentStack:n.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(s){setTimeout(function(){throw s})}}function uo(t,i,n){return n=oi(n),n.tag=3,n.payload={element:null},n.callback=function(){hs(t,i)},n}function Ed(t){return t=oi(t),t.tag=3,t}function Dd(t,i,n,a){var s=n.type.getDerivedStateFromError;if(typeof s=="function"){var r=a.value;t.payload=function(){return s(r)},t.callback=function(){Md(i,n,a)}}var o=n.stateNode;o!==null&&typeof o.componentDidCatch=="function"&&(t.callback=function(){Md(i,n,a),typeof s!="function"&&(gi===null?gi=new Set([this]):gi.add(this));var l=a.stack;this.componentDidCatch(a.value,{componentStack:l!==null?l:""})})}function Zm(t,i,n,a,s){if(n.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){if(i=n.alternate,i!==null&&cn(i,n,s,!0),n=ct.current,n!==null){switch(n.tag){case 31:case 13:return jt===null?ks():n.alternate===null&&Ce===0&&(Ce=3),n.flags&=-257,n.flags|=65536,n.lanes=s,a===Za?n.flags|=16384:(i=n.updateQueue,i===null?n.updateQueue=new Set([a]):i.add(a),Oo(t,a,s)),!1;case 22:return n.flags|=65536,a===Za?n.flags|=16384:(i=n.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([a])},n.updateQueue=i):(n=i.retryQueue,n===null?i.retryQueue=new Set([a]):n.add(a)),Oo(t,a,s)),!1}throw Error(d(435,n.tag))}return Oo(t,a,s),ks(),!1}if(se)return i=ct.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=s,a!==Dr&&(t=Error(d(422),{cause:a}),Jn(yt(t,n)))):(a!==Dr&&(i=Error(d(423),{cause:a}),Jn(yt(i,n))),t=t.current.alternate,t.flags|=65536,s&=-s,t.lanes|=s,a=yt(a,n),s=uo(t.stateNode,a,s),Hr(t,s),Ce!==4&&(Ce=2)),!1;var r=Error(d(520),{cause:a});if(r=yt(r,n),ha===null?ha=[r]:ha.push(r),Ce!==4&&(Ce=2),i===null)return!0;a=yt(a,n),n=i;do{switch(n.tag){case 3:return n.flags|=65536,t=s&-s,n.lanes|=t,t=uo(n.stateNode,a,t),Hr(n,t),!1;case 1:if(i=n.type,r=n.stateNode,(n.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||r!==null&&typeof r.componentDidCatch=="function"&&(gi===null||!gi.has(r))))return n.flags|=65536,s&=-s,n.lanes|=s,s=Ed(s),Dd(s,t,n,a),Hr(n,s),!1}n=n.return}while(n!==null);return!1}var mo=Error(d(461)),qe=!1;function Fe(t,i,n,a){i.child=t===null?qc(i,null,n,a):Li(i,t.child,n,a)}function Rd(t,i,n,a,s){n=n.render;var r=i.ref;if("ref"in a){var o={};for(var l in a)l!=="ref"&&(o[l]=a[l])}else o=a;return Ni(i),a=Kr(t,i,n,o,r,s),l=Pr(),t!==null&&!qe?(Yr(t,i,s),It(t,i,s)):(se&&l&&Mr(i),i.flags|=1,Fe(t,i,a,s),i.child)}function Bd(t,i,n,a,s){if(t===null){var r=n.type;return typeof r=="function"&&!Sr(r)&&r.defaultProps===void 0&&n.compare===null?(i.tag=15,i.type=r,zd(t,i,r,a,s)):(t=Ja(n.type,null,a,i,i.mode,s),t.ref=i.ref,t.return=i,i.child=t)}if(r=t.child,!jo(t,s)){var o=r.memoizedProps;if(n=n.compare,n=n!==null?n:In,n(o,a)&&t.ref===i.ref)return It(t,i,s)}return i.flags|=1,t=Ot(r,a),t.ref=i.ref,t.return=i,i.child=t}function zd(t,i,n,a,s){if(t!==null){var r=t.memoizedProps;if(In(r,a)&&t.ref===i.ref)if(qe=!1,i.pendingProps=a=r,jo(t,s))(t.flags&131072)!==0&&(qe=!0);else return i.lanes=t.lanes,It(t,i,s)}return go(t,i,n,a,s)}function qd(t,i,n,a){var s=a.children,r=t!==null?t.memoizedState:null;if(t===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.mode==="hidden"){if((i.flags&128)!==0){if(r=r!==null?r.baseLanes|n:n,t!==null){for(a=i.child=t.child,s=0;a!==null;)s=s|a.lanes|a.childLanes,a=a.sibling;a=s&~r}else a=0,i.child=null;return Nd(t,i,r,n,a)}if((n&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},t!==null&&Qa(i,r!==null?r.cachePool:null),r!==null?Oc(i,r):Ir(),Uc(i);else return a=i.lanes=536870912,Nd(t,i,r!==null?r.baseLanes|n:n,n,a)}else r!==null?(Qa(i,r.cachePool),Oc(i,r),di(),i.memoizedState=null):(t!==null&&Qa(i,null),Ir(),di());return Fe(t,i,s,n),i.child}function aa(t,i){return t!==null&&t.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function Nd(t,i,n,a,s){var r=Or();return r=r===null?null:{parent:Be._currentValue,pool:r},i.memoizedState={baseLanes:n,cachePool:r},t!==null&&Qa(i,null),Ir(),Uc(i),t!==null&&cn(t,i,a,!0),i.childLanes=s,null}function us(t,i){return i=gs({mode:i.mode,children:i.children},t.mode),i.ref=t.ref,t.child=i,i.return=t,i}function Wd(t,i,n){return Li(i,t.child,null,n),t=us(i,i.pendingProps),t.flags|=2,dt(i),i.memoizedState=null,t}function $m(t,i,n){var a=i.pendingProps,s=(i.flags&128)!==0;if(i.flags&=-129,t===null){if(se){if(a.mode==="hidden")return t=us(i,a),i.lanes=536870912,aa(null,t);if(Vr(i),(t=we)?(t=Ph(t,bt),t=t!==null&&t.data==="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:ii!==null?{id:Et,overflow:Dt}:null,retryLane:536870912,hydrationErrors:null},n=vc(t),n.return=i,i.child=n,_e=i,we=null)):t=null,t===null)throw ai(i);return i.lanes=536870912,null}return us(i,a)}var r=t.memoizedState;if(r!==null){var o=r.dehydrated;if(Vr(i),s)if(i.flags&256)i.flags&=-257,i=Wd(t,i,n);else if(i.memoizedState!==null)i.child=t.child,i.flags|=128,i=null;else throw Error(d(558));else if(qe||cn(t,i,n,!1),s=(n&t.childLanes)!==0,qe||s){if(a=ve,a!==null&&(o=Al(a,n),o!==0&&o!==r.retryLane))throw r.retryLane=o,Ri(t,o),nt(a,t,o),mo;ks(),i=Wd(t,i,n)}else t=r.treeContext,we=wt(o.nextSibling),_e=i,se=!0,ni=null,bt=!1,t!==null&&wc(i,t),i=us(i,a),i.flags|=4096;return i}return t=Ot(t.child,{mode:a.mode,children:a.children}),t.ref=i.ref,i.child=t,t.return=i,t}function ms(t,i){var n=i.ref;if(n===null)t!==null&&t.ref!==null&&(i.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(d(284));(t===null||t.ref!==n)&&(i.flags|=4194816)}}function go(t,i,n,a,s){return Ni(i),n=Kr(t,i,n,a,void 0,s),a=Pr(),t!==null&&!qe?(Yr(t,i,s),It(t,i,s)):(se&&a&&Mr(i),i.flags|=1,Fe(t,i,n,s),i.child)}function Od(t,i,n,a,s,r){return Ni(i),i.updateQueue=null,n=Gc(i,a,n,s),Lc(t),a=Pr(),t!==null&&!qe?(Yr(t,i,r),It(t,i,r)):(se&&a&&Mr(i),i.flags|=1,Fe(t,i,n,r),i.child)}function Ud(t,i,n,a,s){if(Ni(i),i.stateNode===null){var r=sn,o=n.contextType;typeof o=="object"&&o!==null&&(r=Ie(o)),r=new n(a,r),i.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=ho,i.stateNode=r,r._reactInternals=i,r=i.stateNode,r.props=a,r.state=i.memoizedState,r.refs={},Lr(i),o=n.contextType,r.context=typeof o=="object"&&o!==null?Ie(o):sn,r.state=i.memoizedState,o=n.getDerivedStateFromProps,typeof o=="function"&&(co(i,n,o,a),r.state=i.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(o=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),o!==r.state&&ho.enqueueReplaceState(r,r.state,null),$n(i,a,r,s),Zn(),r.state=i.memoizedState),typeof r.componentDidMount=="function"&&(i.flags|=4194308),a=!0}else if(t===null){r=i.stateNode;var l=i.memoizedProps,c=Hi(n,l);r.props=c;var p=r.context,w=n.contextType;o=sn,typeof w=="object"&&w!==null&&(o=Ie(w));var S=n.getDerivedStateFromProps;w=typeof S=="function"||typeof r.getSnapshotBeforeUpdate=="function",l=i.pendingProps!==l,w||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(l||p!==o)&&Td(i,r,a,o),ri=!1;var x=i.memoizedState;r.state=x,$n(i,a,r,s),Zn(),p=i.memoizedState,l||x!==p||ri?(typeof S=="function"&&(co(i,n,S,a),p=i.memoizedState),(c=ri||kd(i,n,c,a,x,p,o))?(w||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount()),typeof r.componentDidMount=="function"&&(i.flags|=4194308)):(typeof r.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=a,i.memoizedState=p),r.props=a,r.state=p,r.context=o,a=c):(typeof r.componentDidMount=="function"&&(i.flags|=4194308),a=!1)}else{r=i.stateNode,Gr(t,i),o=i.memoizedProps,w=Hi(n,o),r.props=w,S=i.pendingProps,x=r.context,p=n.contextType,c=sn,typeof p=="object"&&p!==null&&(c=Ie(p)),l=n.getDerivedStateFromProps,(p=typeof l=="function"||typeof r.getSnapshotBeforeUpdate=="function")||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(o!==S||x!==c)&&Td(i,r,a,c),ri=!1,x=i.memoizedState,r.state=x,$n(i,a,r,s),Zn();var v=i.memoizedState;o!==S||x!==v||ri||t!==null&&t.dependencies!==null&&Pa(t.dependencies)?(typeof l=="function"&&(co(i,n,l,a),v=i.memoizedState),(w=ri||kd(i,n,w,a,x,v,c)||t!==null&&t.dependencies!==null&&Pa(t.dependencies))?(p||typeof r.UNSAFE_componentWillUpdate!="function"&&typeof r.componentWillUpdate!="function"||(typeof r.componentWillUpdate=="function"&&r.componentWillUpdate(a,v,c),typeof r.UNSAFE_componentWillUpdate=="function"&&r.UNSAFE_componentWillUpdate(a,v,c)),typeof r.componentDidUpdate=="function"&&(i.flags|=4),typeof r.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof r.componentDidUpdate!="function"||o===t.memoizedProps&&x===t.memoizedState||(i.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&x===t.memoizedState||(i.flags|=1024),i.memoizedProps=a,i.memoizedState=v),r.props=a,r.state=v,r.context=c,a=w):(typeof r.componentDidUpdate!="function"||o===t.memoizedProps&&x===t.memoizedState||(i.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&x===t.memoizedState||(i.flags|=1024),a=!1)}return r=a,ms(t,i),a=(i.flags&128)!==0,r||a?(r=i.stateNode,n=a&&typeof n.getDerivedStateFromError!="function"?null:r.render(),i.flags|=1,t!==null&&a?(i.child=Li(i,t.child,null,s),i.child=Li(i,null,n,s)):Fe(t,i,n,s),i.memoizedState=r.state,t=i.child):t=It(t,i,s),t}function Ld(t,i,n,a){return zi(),i.flags|=256,Fe(t,i,n,a),i.child}var fo={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function po(t){return{baseLanes:t,cachePool:Mc()}}function yo(t,i,n){return t=t!==null?t.childLanes&~n:0,i&&(t|=ut),t}function Gd(t,i,n){var a=i.pendingProps,s=!1,r=(i.flags&128)!==0,o;if((o=r)||(o=t!==null&&t.memoizedState===null?!1:(Ee.current&2)!==0),o&&(s=!0,i.flags&=-129),o=(i.flags&32)!==0,i.flags&=-33,t===null){if(se){if(s?ci(i):di(),(t=we)?(t=Ph(t,bt),t=t!==null&&t.data!=="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:ii!==null?{id:Et,overflow:Dt}:null,retryLane:536870912,hydrationErrors:null},n=vc(t),n.return=i,i.child=n,_e=i,we=null)):t=null,t===null)throw ai(i);return $o(t)?i.lanes=32:i.lanes=536870912,null}var l=a.children;return a=a.fallback,s?(di(),s=i.mode,l=gs({mode:"hidden",children:l},s),a=Bi(a,s,n,null),l.return=i,a.return=i,l.sibling=a,i.child=l,a=i.child,a.memoizedState=po(n),a.childLanes=yo(t,o,n),i.memoizedState=fo,aa(null,a)):(ci(i),xo(i,l))}var c=t.memoizedState;if(c!==null&&(l=c.dehydrated,l!==null)){if(r)i.flags&256?(ci(i),i.flags&=-257,i=vo(t,i,n)):i.memoizedState!==null?(di(),i.child=t.child,i.flags|=128,i=null):(di(),l=a.fallback,s=i.mode,a=gs({mode:"visible",children:a.children},s),l=Bi(l,s,n,null),l.flags|=2,a.return=i,l.return=i,a.sibling=l,i.child=a,Li(i,t.child,null,n),a=i.child,a.memoizedState=po(n),a.childLanes=yo(t,o,n),i.memoizedState=fo,i=aa(null,a));else if(ci(i),$o(l)){if(o=l.nextSibling&&l.nextSibling.dataset,o)var p=o.dgst;o=p,a=Error(d(419)),a.stack="",a.digest=o,Jn({value:a,source:null,stack:null}),i=vo(t,i,n)}else if(qe||cn(t,i,n,!1),o=(n&t.childLanes)!==0,qe||o){if(o=ve,o!==null&&(a=Al(o,n),a!==0&&a!==c.retryLane))throw c.retryLane=a,Ri(t,a),nt(o,t,a),mo;Zo(l)||ks(),i=vo(t,i,n)}else Zo(l)?(i.flags|=192,i.child=t.child,i=null):(t=c.treeContext,we=wt(l.nextSibling),_e=i,se=!0,ni=null,bt=!1,t!==null&&wc(i,t),i=xo(i,a.children),i.flags|=4096);return i}return s?(di(),l=a.fallback,s=i.mode,c=t.child,p=c.sibling,a=Ot(c,{mode:"hidden",children:a.children}),a.subtreeFlags=c.subtreeFlags&65011712,p!==null?l=Ot(p,l):(l=Bi(l,s,n,null),l.flags|=2),l.return=i,a.return=i,a.sibling=l,i.child=a,aa(null,a),a=i.child,l=t.child.memoizedState,l===null?l=po(n):(s=l.cachePool,s!==null?(c=Be._currentValue,s=s.parent!==c?{parent:c,pool:c}:s):s=Mc(),l={baseLanes:l.baseLanes|n,cachePool:s}),a.memoizedState=l,a.childLanes=yo(t,o,n),i.memoizedState=fo,aa(t.child,a)):(ci(i),n=t.child,t=n.sibling,n=Ot(n,{mode:"visible",children:a.children}),n.return=i,n.sibling=null,t!==null&&(o=i.deletions,o===null?(i.deletions=[t],i.flags|=16):o.push(t)),i.child=n,i.memoizedState=null,n)}function xo(t,i){return i=gs({mode:"visible",children:i},t.mode),i.return=t,t.child=i}function gs(t,i){return t=lt(22,t,null,i),t.lanes=0,t}function vo(t,i,n){return Li(i,t.child,null,n),t=xo(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function Hd(t,i,n){t.lanes|=i;var a=t.alternate;a!==null&&(a.lanes|=i),zr(t.return,i,n)}function bo(t,i,n,a,s,r){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:a,tail:n,tailMode:s,treeForkCount:r}:(o.isBackwards=i,o.rendering=null,o.renderingStartTime=0,o.last=a,o.tail=n,o.tailMode=s,o.treeForkCount=r)}function _d(t,i,n){var a=i.pendingProps,s=a.revealOrder,r=a.tail;a=a.children;var o=Ee.current,l=(o&2)!==0;if(l?(o=o&1|2,i.flags|=128):o&=1,E(Ee,o),Fe(t,i,a,n),a=se?Vn:0,!l&&t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Hd(t,n,i);else if(t.tag===19)Hd(t,n,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(s){case"forwards":for(n=i.child,s=null;n!==null;)t=n.alternate,t!==null&&is(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=i.child,i.child=null):(s=n.sibling,n.sibling=null),bo(i,!1,s,n,r,a);break;case"backwards":case"unstable_legacy-backwards":for(n=null,s=i.child,i.child=null;s!==null;){if(t=s.alternate,t!==null&&is(t)===null){i.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}bo(i,!0,n,null,r,a);break;case"together":bo(i,!1,null,null,void 0,a);break;default:i.memoizedState=null}return i.child}function It(t,i,n){if(t!==null&&(i.dependencies=t.dependencies),mi|=i.lanes,(n&i.childLanes)===0)if(t!==null){if(cn(t,i,n,!1),(n&i.childLanes)===0)return null}else return null;if(t!==null&&i.child!==t.child)throw Error(d(153));if(i.child!==null){for(t=i.child,n=Ot(t,t.pendingProps),i.child=n,n.return=i;t.sibling!==null;)t=t.sibling,n=n.sibling=Ot(t,t.pendingProps),n.return=i;n.sibling=null}return i.child}function jo(t,i){return(t.lanes&i)!==0?!0:(t=t.dependencies,!!(t!==null&&Pa(t)))}function eg(t,i,n){switch(i.tag){case 3:Pe(i,i.stateNode.containerInfo),si(i,Be,t.memoizedState.cache),zi();break;case 27:case 5:Dn(i);break;case 4:Pe(i,i.stateNode.containerInfo);break;case 10:si(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,Vr(i),null;break;case 13:var a=i.memoizedState;if(a!==null)return a.dehydrated!==null?(ci(i),i.flags|=128,null):(n&i.child.childLanes)!==0?Gd(t,i,n):(ci(i),t=It(t,i,n),t!==null?t.sibling:null);ci(i);break;case 19:var s=(t.flags&128)!==0;if(a=(n&i.childLanes)!==0,a||(cn(t,i,n,!1),a=(n&i.childLanes)!==0),s){if(a)return _d(t,i,n);i.flags|=128}if(s=i.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),E(Ee,Ee.current),a)break;return null;case 22:return i.lanes=0,qd(t,i,n,i.pendingProps);case 24:si(i,Be,t.memoizedState.cache)}return It(t,i,n)}function Id(t,i,n){if(t!==null)if(t.memoizedProps!==i.pendingProps)qe=!0;else{if(!jo(t,n)&&(i.flags&128)===0)return qe=!1,eg(t,i,n);qe=(t.flags&131072)!==0}else qe=!1,se&&(i.flags&1048576)!==0&&jc(i,Vn,i.index);switch(i.lanes=0,i.tag){case 16:e:{var a=i.pendingProps;if(t=Oi(i.elementType),i.type=t,typeof t=="function")Sr(t)?(a=Hi(t,a),i.tag=1,i=Ud(null,i,t,a,n)):(i.tag=0,i=go(null,i,t,a,n));else{if(t!=null){var s=t.$$typeof;if(s===ie){i.tag=11,i=Rd(null,i,t,a,n);break e}else if(s===Q){i.tag=14,i=Bd(null,i,t,a,n);break e}}throw i=zt(t)||t,Error(d(306,i,""))}}return i;case 0:return go(t,i,i.type,i.pendingProps,n);case 1:return a=i.type,s=Hi(a,i.pendingProps),Ud(t,i,a,s,n);case 3:e:{if(Pe(i,i.stateNode.containerInfo),t===null)throw Error(d(387));a=i.pendingProps;var r=i.memoizedState;s=r.element,Gr(t,i),$n(i,a,null,n);var o=i.memoizedState;if(a=o.cache,si(i,Be,a),a!==r.cache&&qr(i,[Be],n,!0),Zn(),a=o.element,r.isDehydrated)if(r={element:a,isDehydrated:!1,cache:o.cache},i.updateQueue.baseState=r,i.memoizedState=r,i.flags&256){i=Ld(t,i,a,n);break e}else if(a!==s){s=yt(Error(d(424)),i),Jn(s),i=Ld(t,i,a,n);break e}else for(t=i.stateNode.containerInfo,t.nodeType===9?t=t.body:t=t.nodeName==="HTML"?t.ownerDocument.body:t,we=wt(t.firstChild),_e=i,se=!0,ni=null,bt=!0,n=qc(i,null,a,n),i.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(zi(),a===s){i=It(t,i,n);break e}Fe(t,i,a,n)}i=i.child}return i;case 26:return ms(t,i),t===null?(n=eu(i.type,null,i.pendingProps,null))?i.memoizedState=n:se||(n=i.type,t=i.pendingProps,a=Ds($.current).createElement(n),a[He]=i,a[Xe]=t,Ve(a,n,t),Ue(a),i.stateNode=a):i.memoizedState=eu(i.type,t.memoizedProps,i.pendingProps,t.memoizedState),null;case 27:return Dn(i),t===null&&se&&(a=i.stateNode=Xh(i.type,i.pendingProps,$.current),_e=i,bt=!0,s=we,xi(i.type)?(el=s,we=wt(a.firstChild)):we=s),Fe(t,i,i.pendingProps.children,n),ms(t,i),t===null&&(i.flags|=4194304),i.child;case 5:return t===null&&se&&((s=a=we)&&(a=Dg(a,i.type,i.pendingProps,bt),a!==null?(i.stateNode=a,_e=i,we=wt(a.firstChild),bt=!1,s=!0):s=!1),s||ai(i)),Dn(i),s=i.type,r=i.pendingProps,o=t!==null?t.memoizedProps:null,a=r.children,Yo(s,r)?a=null:o!==null&&Yo(s,o)&&(i.flags|=32),i.memoizedState!==null&&(s=Kr(t,i,Vm,null,null,n),va._currentValue=s),ms(t,i),Fe(t,i,a,n),i.child;case 6:return t===null&&se&&((t=n=we)&&(n=Rg(n,i.pendingProps,bt),n!==null?(i.stateNode=n,_e=i,we=null,t=!0):t=!1),t||ai(i)),null;case 13:return Gd(t,i,n);case 4:return Pe(i,i.stateNode.containerInfo),a=i.pendingProps,t===null?i.child=Li(i,null,a,n):Fe(t,i,a,n),i.child;case 11:return Rd(t,i,i.type,i.pendingProps,n);case 7:return Fe(t,i,i.pendingProps,n),i.child;case 8:return Fe(t,i,i.pendingProps.children,n),i.child;case 12:return Fe(t,i,i.pendingProps.children,n),i.child;case 10:return a=i.pendingProps,si(i,i.type,a.value),Fe(t,i,a.children,n),i.child;case 9:return s=i.type._context,a=i.pendingProps.children,Ni(i),s=Ie(s),a=a(s),i.flags|=1,Fe(t,i,a,n),i.child;case 14:return Bd(t,i,i.type,i.pendingProps,n);case 15:return zd(t,i,i.type,i.pendingProps,n);case 19:return _d(t,i,n);case 31:return $m(t,i,n);case 22:return qd(t,i,n,i.pendingProps);case 24:return Ni(i),a=Ie(Be),t===null?(s=Or(),s===null&&(s=ve,r=Nr(),s.pooledCache=r,r.refCount++,r!==null&&(s.pooledCacheLanes|=n),s=r),i.memoizedState={parent:a,cache:s},Lr(i),si(i,Be,s)):((t.lanes&n)!==0&&(Gr(t,i),$n(i,null,null,n),Zn()),s=t.memoizedState,r=i.memoizedState,s.parent!==a?(s={parent:a,cache:a},i.memoizedState=s,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=s),si(i,Be,a)):(a=r.cache,si(i,Be,a),a!==s.cache&&qr(i,[Be],n,!0))),Fe(t,i,i.pendingProps.children,n),i.child;case 29:throw i.pendingProps}throw Error(d(156,i.tag))}function Ft(t){t.flags|=4}function wo(t,i,n,a,s){if((i=(t.mode&32)!==0)&&(i=!1),i){if(t.flags|=16777216,(s&335544128)===s)if(t.stateNode.complete)t.flags|=8192;else if(ph())t.flags|=8192;else throw Ui=Za,Ur}else t.flags&=-16777217}function Fd(t,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!su(i))if(ph())t.flags|=8192;else throw Ui=Za,Ur}function fs(t,i){i!==null&&(t.flags|=4),t.flags&16384&&(i=t.tag!==22?kl():536870912,t.lanes|=i,jn|=i)}function sa(t,i){if(!se)switch(t.tailMode){case"hidden":i=t.tail;for(var n=null;i!==null;)i.alternate!==null&&(n=i),i=i.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:a.sibling=null}}function ke(t){var i=t.alternate!==null&&t.alternate.child===t.child,n=0,a=0;if(i)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,a|=s.subtreeFlags&65011712,a|=s.flags&65011712,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,a|=s.subtreeFlags,a|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=a,t.childLanes=n,i}function tg(t,i,n){var a=i.pendingProps;switch(Er(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ke(i),null;case 1:return ke(i),null;case 3:return n=i.stateNode,a=null,t!==null&&(a=t.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),Gt(Be),Me(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(ln(i)?Ft(i):t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Rr())),ke(i),null;case 26:var s=i.type,r=i.memoizedState;return t===null?(Ft(i),r!==null?(ke(i),Fd(i,r)):(ke(i),wo(i,s,null,a,n))):r?r!==t.memoizedState?(Ft(i),ke(i),Fd(i,r)):(ke(i),i.flags&=-16777217):(t=t.memoizedProps,t!==a&&Ft(i),ke(i),wo(i,s,t,a,n)),null;case 27:if(Aa(i),n=$.current,s=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==a&&Ft(i);else{if(!a){if(i.stateNode===null)throw Error(d(166));return ke(i),null}t=z.current,ln(i)?kc(i):(t=Xh(s,a,n),i.stateNode=t,Ft(i))}return ke(i),null;case 5:if(Aa(i),s=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==a&&Ft(i);else{if(!a){if(i.stateNode===null)throw Error(d(166));return ke(i),null}if(r=z.current,ln(i))kc(i);else{var o=Ds($.current);switch(r){case 1:r=o.createElementNS("http://www.w3.org/2000/svg",s);break;case 2:r=o.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;default:switch(s){case"svg":r=o.createElementNS("http://www.w3.org/2000/svg",s);break;case"math":r=o.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;case"script":r=o.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof a.is=="string"?o.createElement("select",{is:a.is}):o.createElement("select"),a.multiple?r.multiple=!0:a.size&&(r.size=a.size);break;default:r=typeof a.is=="string"?o.createElement(s,{is:a.is}):o.createElement(s)}}r[He]=i,r[Xe]=a;e:for(o=i.child;o!==null;){if(o.tag===5||o.tag===6)r.appendChild(o.stateNode);else if(o.tag!==4&&o.tag!==27&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break e;for(;o.sibling===null;){if(o.return===null||o.return===i)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}i.stateNode=r;e:switch(Ve(r,s,a),s){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&Ft(i)}}return ke(i),wo(i,i.type,t===null?null:t.memoizedProps,i.pendingProps,n),null;case 6:if(t&&i.stateNode!=null)t.memoizedProps!==a&&Ft(i);else{if(typeof a!="string"&&i.stateNode===null)throw Error(d(166));if(t=$.current,ln(i)){if(t=i.stateNode,n=i.memoizedProps,a=null,s=_e,s!==null)switch(s.tag){case 27:case 5:a=s.memoizedProps}t[He]=i,t=!!(t.nodeValue===n||a!==null&&a.suppressHydrationWarning===!0||Gh(t.nodeValue,n)),t||ai(i,!0)}else t=Ds(t).createTextNode(a),t[He]=i,i.stateNode=t}return ke(i),null;case 31:if(n=i.memoizedState,t===null||t.memoizedState!==null){if(a=ln(i),n!==null){if(t===null){if(!a)throw Error(d(318));if(t=i.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(d(557));t[He]=i}else zi(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;ke(i),t=!1}else n=Rr(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=n),t=!0;if(!t)return i.flags&256?(dt(i),i):(dt(i),null);if((i.flags&128)!==0)throw Error(d(558))}return ke(i),null;case 13:if(a=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(s=ln(i),a!==null&&a.dehydrated!==null){if(t===null){if(!s)throw Error(d(318));if(s=i.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(d(317));s[He]=i}else zi(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;ke(i),s=!1}else s=Rr(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=s),s=!0;if(!s)return i.flags&256?(dt(i),i):(dt(i),null)}return dt(i),(i.flags&128)!==0?(i.lanes=n,i):(n=a!==null,t=t!==null&&t.memoizedState!==null,n&&(a=i.child,s=null,a.alternate!==null&&a.alternate.memoizedState!==null&&a.alternate.memoizedState.cachePool!==null&&(s=a.alternate.memoizedState.cachePool.pool),r=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(r=a.memoizedState.cachePool.pool),r!==s&&(a.flags|=2048)),n!==t&&n&&(i.child.flags|=8192),fs(i,i.updateQueue),ke(i),null);case 4:return Me(),t===null&&Fo(i.stateNode.containerInfo),ke(i),null;case 10:return Gt(i.type),ke(i),null;case 19:if(A(Ee),a=i.memoizedState,a===null)return ke(i),null;if(s=(i.flags&128)!==0,r=a.rendering,r===null)if(s)sa(a,!1);else{if(Ce!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(r=is(t),r!==null){for(i.flags|=128,sa(a,!1),t=r.updateQueue,i.updateQueue=t,fs(i,t),i.subtreeFlags=0,t=n,n=i.child;n!==null;)xc(n,t),n=n.sibling;return E(Ee,Ee.current&1|2),se&&Ut(i,a.treeForkCount),i.child}t=t.sibling}a.tail!==null&&at()>bs&&(i.flags|=128,s=!0,sa(a,!1),i.lanes=4194304)}else{if(!s)if(t=is(r),t!==null){if(i.flags|=128,s=!0,t=t.updateQueue,i.updateQueue=t,fs(i,t),sa(a,!0),a.tail===null&&a.tailMode==="hidden"&&!r.alternate&&!se)return ke(i),null}else 2*at()-a.renderingStartTime>bs&&n!==536870912&&(i.flags|=128,s=!0,sa(a,!1),i.lanes=4194304);a.isBackwards?(r.sibling=i.child,i.child=r):(t=a.last,t!==null?t.sibling=r:i.child=r,a.last=r)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=at(),t.sibling=null,n=Ee.current,E(Ee,s?n&1|2:n&1),se&&Ut(i,a.treeForkCount),t):(ke(i),null);case 22:case 23:return dt(i),Fr(),a=i.memoizedState!==null,t!==null?t.memoizedState!==null!==a&&(i.flags|=8192):a&&(i.flags|=8192),a?(n&536870912)!==0&&(i.flags&128)===0&&(ke(i),i.subtreeFlags&6&&(i.flags|=8192)):ke(i),n=i.updateQueue,n!==null&&fs(i,n.retryQueue),n=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),a=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),a!==n&&(i.flags|=2048),t!==null&&A(Wi),null;case 24:return n=null,t!==null&&(n=t.memoizedState.cache),i.memoizedState.cache!==n&&(i.flags|=2048),Gt(Be),ke(i),null;case 25:return null;case 30:return null}throw Error(d(156,i.tag))}function ig(t,i){switch(Er(i),i.tag){case 1:return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return Gt(Be),Me(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 26:case 27:case 5:return Aa(i),null;case 31:if(i.memoizedState!==null){if(dt(i),i.alternate===null)throw Error(d(340));zi()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 13:if(dt(i),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(d(340));zi()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return A(Ee),null;case 4:return Me(),null;case 10:return Gt(i.type),null;case 22:case 23:return dt(i),Fr(),t!==null&&A(Wi),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 24:return Gt(Be),null;case 25:return null;default:return null}}function Vd(t,i){switch(Er(i),i.tag){case 3:Gt(Be),Me();break;case 26:case 27:case 5:Aa(i);break;case 4:Me();break;case 31:i.memoizedState!==null&&dt(i);break;case 13:dt(i);break;case 19:A(Ee);break;case 10:Gt(i.type);break;case 22:case 23:dt(i),Fr(),t!==null&&A(Wi);break;case 24:Gt(Be)}}function ra(t,i){try{var n=i.updateQueue,a=n!==null?n.lastEffect:null;if(a!==null){var s=a.next;n=s;do{if((n.tag&t)===t){a=void 0;var r=n.create,o=n.inst;a=r(),o.destroy=a}n=n.next}while(n!==s)}}catch(l){me(i,i.return,l)}}function hi(t,i,n){try{var a=i.updateQueue,s=a!==null?a.lastEffect:null;if(s!==null){var r=s.next;a=r;do{if((a.tag&t)===t){var o=a.inst,l=o.destroy;if(l!==void 0){o.destroy=void 0,s=i;var c=n,p=l;try{p()}catch(w){me(s,c,w)}}}a=a.next}while(a!==r)}}catch(w){me(i,i.return,w)}}function Jd(t){var i=t.updateQueue;if(i!==null){var n=t.stateNode;try{Wc(i,n)}catch(a){me(t,t.return,a)}}}function Kd(t,i,n){n.props=Hi(t.type,t.memoizedProps),n.state=t.memoizedState;try{n.componentWillUnmount()}catch(a){me(t,i,a)}}function oa(t,i){try{var n=t.ref;if(n!==null){switch(t.tag){case 26:case 27:case 5:var a=t.stateNode;break;case 30:a=t.stateNode;break;default:a=t.stateNode}typeof n=="function"?t.refCleanup=n(a):n.current=a}}catch(s){me(t,i,s)}}function Rt(t,i){var n=t.ref,a=t.refCleanup;if(n!==null)if(typeof a=="function")try{a()}catch(s){me(t,i,s)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(s){me(t,i,s)}else n.current=null}function Pd(t){var i=t.type,n=t.memoizedProps,a=t.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":n.autoFocus&&a.focus();break e;case"img":n.src?a.src=n.src:n.srcSet&&(a.srcset=n.srcSet)}}catch(s){me(t,t.return,s)}}function ko(t,i,n){try{var a=t.stateNode;Tg(a,t.type,n,i),a[Xe]=i}catch(s){me(t,t.return,s)}}function Yd(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&xi(t.type)||t.tag===4}function To(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Yd(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&xi(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function So(t,i,n){var a=t.tag;if(a===5||a===6)t=t.stateNode,i?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(t,i):(i=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,i.appendChild(t),n=n._reactRootContainer,n!=null||i.onclick!==null||(i.onclick=Nt));else if(a!==4&&(a===27&&xi(t.type)&&(n=t.stateNode,i=null),t=t.child,t!==null))for(So(t,i,n),t=t.sibling;t!==null;)So(t,i,n),t=t.sibling}function ps(t,i,n){var a=t.tag;if(a===5||a===6)t=t.stateNode,i?n.insertBefore(t,i):n.appendChild(t);else if(a!==4&&(a===27&&xi(t.type)&&(n=t.stateNode),t=t.child,t!==null))for(ps(t,i,n),t=t.sibling;t!==null;)ps(t,i,n),t=t.sibling}function Qd(t){var i=t.stateNode,n=t.memoizedProps;try{for(var a=t.type,s=i.attributes;s.length;)i.removeAttributeNode(s[0]);Ve(i,a,n),i[He]=t,i[Xe]=n}catch(r){me(t,t.return,r)}}var Vt=!1,Ne=!1,Ao=!1,Xd=typeof WeakSet=="function"?WeakSet:Set,Le=null;function ng(t,i){if(t=t.containerInfo,Ko=Os,t=cc(t),xr(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var a=n.getSelection&&n.getSelection();if(a&&a.rangeCount!==0){n=a.anchorNode;var s=a.anchorOffset,r=a.focusNode;a=a.focusOffset;try{n.nodeType,r.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,p=0,w=0,S=t,x=null;t:for(;;){for(var v;S!==n||s!==0&&S.nodeType!==3||(l=o+s),S!==r||a!==0&&S.nodeType!==3||(c=o+a),S.nodeType===3&&(o+=S.nodeValue.length),(v=S.firstChild)!==null;)x=S,S=v;for(;;){if(S===t)break t;if(x===n&&++p===s&&(l=o),x===r&&++w===a&&(c=o),(v=S.nextSibling)!==null)break;S=x,x=S.parentNode}S=v}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Po={focusedElem:t,selectionRange:n},Os=!1,Le=i;Le!==null;)if(i=Le,t=i.child,(i.subtreeFlags&1028)!==0&&t!==null)t.return=i,Le=t;else for(;Le!==null;){switch(i=Le,r=i.alternate,t=i.flags,i.tag){case 0:if((t&4)!==0&&(t=i.updateQueue,t=t!==null?t.events:null,t!==null))for(n=0;n<t.length;n++)s=t[n],s.ref.impl=s.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&r!==null){t=void 0,n=i,s=r.memoizedProps,r=r.memoizedState,a=n.stateNode;try{var B=Hi(n.type,s);t=a.getSnapshotBeforeUpdate(B,r),a.__reactInternalSnapshotBeforeUpdate=t}catch(L){me(n,n.return,L)}}break;case 3:if((t&1024)!==0){if(t=i.stateNode.containerInfo,n=t.nodeType,n===9)Xo(t);else if(n===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Xo(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(d(163))}if(t=i.sibling,t!==null){t.return=i.return,Le=t;break}Le=i.return}}function Zd(t,i,n){var a=n.flags;switch(n.tag){case 0:case 11:case 15:Kt(t,n),a&4&&ra(5,n);break;case 1:if(Kt(t,n),a&4)if(t=n.stateNode,i===null)try{t.componentDidMount()}catch(o){me(n,n.return,o)}else{var s=Hi(n.type,i.memoizedProps);i=i.memoizedState;try{t.componentDidUpdate(s,i,t.__reactInternalSnapshotBeforeUpdate)}catch(o){me(n,n.return,o)}}a&64&&Jd(n),a&512&&oa(n,n.return);break;case 3:if(Kt(t,n),a&64&&(t=n.updateQueue,t!==null)){if(i=null,n.child!==null)switch(n.child.tag){case 27:case 5:i=n.child.stateNode;break;case 1:i=n.child.stateNode}try{Wc(t,i)}catch(o){me(n,n.return,o)}}break;case 27:i===null&&a&4&&Qd(n);case 26:case 5:Kt(t,n),i===null&&a&4&&Pd(n),a&512&&oa(n,n.return);break;case 12:Kt(t,n);break;case 31:Kt(t,n),a&4&&th(t,n);break;case 13:Kt(t,n),a&4&&ih(t,n),a&64&&(t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(n=ug.bind(null,n),Bg(t,n))));break;case 22:if(a=n.memoizedState!==null||Vt,!a){i=i!==null&&i.memoizedState!==null||Ne,s=Vt;var r=Ne;Vt=a,(Ne=i)&&!r?Pt(t,n,(n.subtreeFlags&8772)!==0):Kt(t,n),Vt=s,Ne=r}break;case 30:break;default:Kt(t,n)}}function $d(t){var i=t.alternate;i!==null&&(t.alternate=null,$d(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&tr(i)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Te=null,$e=!1;function Jt(t,i,n){for(n=n.child;n!==null;)eh(t,i,n),n=n.sibling}function eh(t,i,n){if(st&&typeof st.onCommitFiberUnmount=="function")try{st.onCommitFiberUnmount(Rn,n)}catch{}switch(n.tag){case 26:Ne||Rt(n,i),Jt(t,i,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:Ne||Rt(n,i);var a=Te,s=$e;xi(n.type)&&(Te=n.stateNode,$e=!1),Jt(t,i,n),pa(n.stateNode),Te=a,$e=s;break;case 5:Ne||Rt(n,i);case 6:if(a=Te,s=$e,Te=null,Jt(t,i,n),Te=a,$e=s,Te!==null)if($e)try{(Te.nodeType===9?Te.body:Te.nodeName==="HTML"?Te.ownerDocument.body:Te).removeChild(n.stateNode)}catch(r){me(n,i,r)}else try{Te.removeChild(n.stateNode)}catch(r){me(n,i,r)}break;case 18:Te!==null&&($e?(t=Te,Jh(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,n.stateNode),En(t)):Jh(Te,n.stateNode));break;case 4:a=Te,s=$e,Te=n.stateNode.containerInfo,$e=!0,Jt(t,i,n),Te=a,$e=s;break;case 0:case 11:case 14:case 15:hi(2,n,i),Ne||hi(4,n,i),Jt(t,i,n);break;case 1:Ne||(Rt(n,i),a=n.stateNode,typeof a.componentWillUnmount=="function"&&Kd(n,i,a)),Jt(t,i,n);break;case 21:Jt(t,i,n);break;case 22:Ne=(a=Ne)||n.memoizedState!==null,Jt(t,i,n),Ne=a;break;default:Jt(t,i,n)}}function th(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{En(t)}catch(n){me(i,i.return,n)}}}function ih(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{En(t)}catch(n){me(i,i.return,n)}}function ag(t){switch(t.tag){case 31:case 13:case 19:var i=t.stateNode;return i===null&&(i=t.stateNode=new Xd),i;case 22:return t=t.stateNode,i=t._retryCache,i===null&&(i=t._retryCache=new Xd),i;default:throw Error(d(435,t.tag))}}function ys(t,i){var n=ag(t);i.forEach(function(a){if(!n.has(a)){n.add(a);var s=mg.bind(null,t,a);a.then(s,s)}})}function et(t,i){var n=i.deletions;if(n!==null)for(var a=0;a<n.length;a++){var s=n[a],r=t,o=i,l=o;e:for(;l!==null;){switch(l.tag){case 27:if(xi(l.type)){Te=l.stateNode,$e=!1;break e}break;case 5:Te=l.stateNode,$e=!1;break e;case 3:case 4:Te=l.stateNode.containerInfo,$e=!0;break e}l=l.return}if(Te===null)throw Error(d(160));eh(r,o,s),Te=null,$e=!1,r=s.alternate,r!==null&&(r.return=null),s.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)nh(i,t),i=i.sibling}var At=null;function nh(t,i){var n=t.alternate,a=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:et(i,t),tt(t),a&4&&(hi(3,t,t.return),ra(3,t),hi(5,t,t.return));break;case 1:et(i,t),tt(t),a&512&&(Ne||n===null||Rt(n,n.return)),a&64&&Vt&&(t=t.updateQueue,t!==null&&(a=t.callbacks,a!==null&&(n=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=n===null?a:n.concat(a))));break;case 26:var s=At;if(et(i,t),tt(t),a&512&&(Ne||n===null||Rt(n,n.return)),a&4){var r=n!==null?n.memoizedState:null;if(a=t.memoizedState,n===null)if(a===null)if(t.stateNode===null){e:{a=t.type,n=t.memoizedProps,s=s.ownerDocument||s;t:switch(a){case"title":r=s.getElementsByTagName("title")[0],(!r||r[qn]||r[He]||r.namespaceURI==="http://www.w3.org/2000/svg"||r.hasAttribute("itemprop"))&&(r=s.createElement(a),s.head.insertBefore(r,s.querySelector("head > title"))),Ve(r,a,n),r[He]=t,Ue(r),a=r;break e;case"link":var o=nu("link","href",s).get(a+(n.href||""));if(o){for(var l=0;l<o.length;l++)if(r=o[l],r.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&r.getAttribute("rel")===(n.rel==null?null:n.rel)&&r.getAttribute("title")===(n.title==null?null:n.title)&&r.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){o.splice(l,1);break t}}r=s.createElement(a),Ve(r,a,n),s.head.appendChild(r);break;case"meta":if(o=nu("meta","content",s).get(a+(n.content||""))){for(l=0;l<o.length;l++)if(r=o[l],r.getAttribute("content")===(n.content==null?null:""+n.content)&&r.getAttribute("name")===(n.name==null?null:n.name)&&r.getAttribute("property")===(n.property==null?null:n.property)&&r.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&r.getAttribute("charset")===(n.charSet==null?null:n.charSet)){o.splice(l,1);break t}}r=s.createElement(a),Ve(r,a,n),s.head.appendChild(r);break;default:throw Error(d(468,a))}r[He]=t,Ue(r),a=r}t.stateNode=a}else au(s,t.type,t.stateNode);else t.stateNode=iu(s,a,t.memoizedProps);else r!==a?(r===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):r.count--,a===null?au(s,t.type,t.stateNode):iu(s,a,t.memoizedProps)):a===null&&t.stateNode!==null&&ko(t,t.memoizedProps,n.memoizedProps)}break;case 27:et(i,t),tt(t),a&512&&(Ne||n===null||Rt(n,n.return)),n!==null&&a&4&&ko(t,t.memoizedProps,n.memoizedProps);break;case 5:if(et(i,t),tt(t),a&512&&(Ne||n===null||Rt(n,n.return)),t.flags&32){s=t.stateNode;try{Xi(s,"")}catch(B){me(t,t.return,B)}}a&4&&t.stateNode!=null&&(s=t.memoizedProps,ko(t,s,n!==null?n.memoizedProps:s)),a&1024&&(Ao=!0);break;case 6:if(et(i,t),tt(t),a&4){if(t.stateNode===null)throw Error(d(162));a=t.memoizedProps,n=t.stateNode;try{n.nodeValue=a}catch(B){me(t,t.return,B)}}break;case 3:if(zs=null,s=At,At=Rs(i.containerInfo),et(i,t),At=s,tt(t),a&4&&n!==null&&n.memoizedState.isDehydrated)try{En(i.containerInfo)}catch(B){me(t,t.return,B)}Ao&&(Ao=!1,ah(t));break;case 4:a=At,At=Rs(t.stateNode.containerInfo),et(i,t),tt(t),At=a;break;case 12:et(i,t),tt(t);break;case 31:et(i,t),tt(t),a&4&&(a=t.updateQueue,a!==null&&(t.updateQueue=null,ys(t,a)));break;case 13:et(i,t),tt(t),t.child.flags&8192&&t.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(vs=at()),a&4&&(a=t.updateQueue,a!==null&&(t.updateQueue=null,ys(t,a)));break;case 22:s=t.memoizedState!==null;var c=n!==null&&n.memoizedState!==null,p=Vt,w=Ne;if(Vt=p||s,Ne=w||c,et(i,t),Ne=w,Vt=p,tt(t),a&8192)e:for(i=t.stateNode,i._visibility=s?i._visibility&-2:i._visibility|1,s&&(n===null||c||Vt||Ne||_i(t)),n=null,i=t;;){if(i.tag===5||i.tag===26){if(n===null){c=n=i;try{if(r=c.stateNode,s)o=r.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none";else{l=c.stateNode;var S=c.memoizedProps.style,x=S!=null&&S.hasOwnProperty("display")?S.display:null;l.style.display=x==null||typeof x=="boolean"?"":(""+x).trim()}}catch(B){me(c,c.return,B)}}}else if(i.tag===6){if(n===null){c=i;try{c.stateNode.nodeValue=s?"":c.memoizedProps}catch(B){me(c,c.return,B)}}}else if(i.tag===18){if(n===null){c=i;try{var v=c.stateNode;s?Kh(v,!0):Kh(c.stateNode,!1)}catch(B){me(c,c.return,B)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===t)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;i.sibling===null;){if(i.return===null||i.return===t)break e;n===i&&(n=null),i=i.return}n===i&&(n=null),i.sibling.return=i.return,i=i.sibling}a&4&&(a=t.updateQueue,a!==null&&(n=a.retryQueue,n!==null&&(a.retryQueue=null,ys(t,n))));break;case 19:et(i,t),tt(t),a&4&&(a=t.updateQueue,a!==null&&(t.updateQueue=null,ys(t,a)));break;case 30:break;case 21:break;default:et(i,t),tt(t)}}function tt(t){var i=t.flags;if(i&2){try{for(var n,a=t.return;a!==null;){if(Yd(a)){n=a;break}a=a.return}if(n==null)throw Error(d(160));switch(n.tag){case 27:var s=n.stateNode,r=To(t);ps(t,r,s);break;case 5:var o=n.stateNode;n.flags&32&&(Xi(o,""),n.flags&=-33);var l=To(t);ps(t,l,o);break;case 3:case 4:var c=n.stateNode.containerInfo,p=To(t);So(t,p,c);break;default:throw Error(d(161))}}catch(w){me(t,t.return,w)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function ah(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var i=t;ah(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),t=t.sibling}}function Kt(t,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Zd(t,i.alternate,i),i=i.sibling}function _i(t){for(t=t.child;t!==null;){var i=t;switch(i.tag){case 0:case 11:case 14:case 15:hi(4,i,i.return),_i(i);break;case 1:Rt(i,i.return);var n=i.stateNode;typeof n.componentWillUnmount=="function"&&Kd(i,i.return,n),_i(i);break;case 27:pa(i.stateNode);case 26:case 5:Rt(i,i.return),_i(i);break;case 22:i.memoizedState===null&&_i(i);break;case 30:_i(i);break;default:_i(i)}t=t.sibling}}function Pt(t,i,n){for(n=n&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var a=i.alternate,s=t,r=i,o=r.flags;switch(r.tag){case 0:case 11:case 15:Pt(s,r,n),ra(4,r);break;case 1:if(Pt(s,r,n),a=r,s=a.stateNode,typeof s.componentDidMount=="function")try{s.componentDidMount()}catch(p){me(a,a.return,p)}if(a=r,s=a.updateQueue,s!==null){var l=a.stateNode;try{var c=s.shared.hiddenCallbacks;if(c!==null)for(s.shared.hiddenCallbacks=null,s=0;s<c.length;s++)Nc(c[s],l)}catch(p){me(a,a.return,p)}}n&&o&64&&Jd(r),oa(r,r.return);break;case 27:Qd(r);case 26:case 5:Pt(s,r,n),n&&a===null&&o&4&&Pd(r),oa(r,r.return);break;case 12:Pt(s,r,n);break;case 31:Pt(s,r,n),n&&o&4&&th(s,r);break;case 13:Pt(s,r,n),n&&o&4&&ih(s,r);break;case 22:r.memoizedState===null&&Pt(s,r,n),oa(r,r.return);break;case 30:break;default:Pt(s,r,n)}i=i.sibling}}function Co(t,i){var n=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),t=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(t=i.memoizedState.cachePool.pool),t!==n&&(t!=null&&t.refCount++,n!=null&&Kn(n))}function Mo(t,i){t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&Kn(t))}function Ct(t,i,n,a){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)sh(t,i,n,a),i=i.sibling}function sh(t,i,n,a){var s=i.flags;switch(i.tag){case 0:case 11:case 15:Ct(t,i,n,a),s&2048&&ra(9,i);break;case 1:Ct(t,i,n,a);break;case 3:Ct(t,i,n,a),s&2048&&(t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&Kn(t)));break;case 12:if(s&2048){Ct(t,i,n,a),t=i.stateNode;try{var r=i.memoizedProps,o=r.id,l=r.onPostCommit;typeof l=="function"&&l(o,i.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(c){me(i,i.return,c)}}else Ct(t,i,n,a);break;case 31:Ct(t,i,n,a);break;case 13:Ct(t,i,n,a);break;case 23:break;case 22:r=i.stateNode,o=i.alternate,i.memoizedState!==null?r._visibility&2?Ct(t,i,n,a):la(t,i):r._visibility&2?Ct(t,i,n,a):(r._visibility|=2,xn(t,i,n,a,(i.subtreeFlags&10256)!==0||!1)),s&2048&&Co(o,i);break;case 24:Ct(t,i,n,a),s&2048&&Mo(i.alternate,i);break;default:Ct(t,i,n,a)}}function xn(t,i,n,a,s){for(s=s&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var r=t,o=i,l=n,c=a,p=o.flags;switch(o.tag){case 0:case 11:case 15:xn(r,o,l,c,s),ra(8,o);break;case 23:break;case 22:var w=o.stateNode;o.memoizedState!==null?w._visibility&2?xn(r,o,l,c,s):la(r,o):(w._visibility|=2,xn(r,o,l,c,s)),s&&p&2048&&Co(o.alternate,o);break;case 24:xn(r,o,l,c,s),s&&p&2048&&Mo(o.alternate,o);break;default:xn(r,o,l,c,s)}i=i.sibling}}function la(t,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var n=t,a=i,s=a.flags;switch(a.tag){case 22:la(n,a),s&2048&&Co(a.alternate,a);break;case 24:la(n,a),s&2048&&Mo(a.alternate,a);break;default:la(n,a)}i=i.sibling}}var ca=8192;function vn(t,i,n){if(t.subtreeFlags&ca)for(t=t.child;t!==null;)rh(t,i,n),t=t.sibling}function rh(t,i,n){switch(t.tag){case 26:vn(t,i,n),t.flags&ca&&t.memoizedState!==null&&Fg(n,At,t.memoizedState,t.memoizedProps);break;case 5:vn(t,i,n);break;case 3:case 4:var a=At;At=Rs(t.stateNode.containerInfo),vn(t,i,n),At=a;break;case 22:t.memoizedState===null&&(a=t.alternate,a!==null&&a.memoizedState!==null?(a=ca,ca=16777216,vn(t,i,n),ca=a):vn(t,i,n));break;default:vn(t,i,n)}}function oh(t){var i=t.alternate;if(i!==null&&(t=i.child,t!==null)){i.child=null;do i=t.sibling,t.sibling=null,t=i;while(t!==null)}}function da(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var n=0;n<i.length;n++){var a=i[n];Le=a,ch(a,t)}oh(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)lh(t),t=t.sibling}function lh(t){switch(t.tag){case 0:case 11:case 15:da(t),t.flags&2048&&hi(9,t,t.return);break;case 3:da(t);break;case 12:da(t);break;case 22:var i=t.stateNode;t.memoizedState!==null&&i._visibility&2&&(t.return===null||t.return.tag!==13)?(i._visibility&=-3,xs(t)):da(t);break;default:da(t)}}function xs(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var n=0;n<i.length;n++){var a=i[n];Le=a,ch(a,t)}oh(t)}for(t=t.child;t!==null;){switch(i=t,i.tag){case 0:case 11:case 15:hi(8,i,i.return),xs(i);break;case 22:n=i.stateNode,n._visibility&2&&(n._visibility&=-3,xs(i));break;default:xs(i)}t=t.sibling}}function ch(t,i){for(;Le!==null;){var n=Le;switch(n.tag){case 0:case 11:case 15:hi(8,n,i);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var a=n.memoizedState.cachePool.pool;a!=null&&a.refCount++}break;case 24:Kn(n.memoizedState.cache)}if(a=n.child,a!==null)a.return=n,Le=a;else e:for(n=t;Le!==null;){a=Le;var s=a.sibling,r=a.return;if($d(a),a===n){Le=null;break e}if(s!==null){s.return=r,Le=s;break e}Le=r}}}var sg={getCacheForType:function(t){var i=Ie(Be),n=i.data.get(t);return n===void 0&&(n=t(),i.data.set(t,n)),n},cacheSignal:function(){return Ie(Be).controller.signal}},rg=typeof WeakMap=="function"?WeakMap:Map,de=0,ve=null,ee=null,ne=0,ue=0,ht=null,ui=!1,bn=!1,Eo=!1,Yt=0,Ce=0,mi=0,Ii=0,Do=0,ut=0,jn=0,ha=null,it=null,Ro=!1,vs=0,dh=0,bs=1/0,js=null,gi=null,Oe=0,fi=null,wn=null,Qt=0,Bo=0,zo=null,hh=null,ua=0,qo=null;function mt(){return(de&2)!==0&&ne!==0?ne&-ne:k.T!==null?Go():Cl()}function uh(){if(ut===0)if((ne&536870912)===0||se){var t=Ea;Ea<<=1,(Ea&3932160)===0&&(Ea=262144),ut=t}else ut=536870912;return t=ct.current,t!==null&&(t.flags|=32),ut}function nt(t,i,n){(t===ve&&(ue===2||ue===9)||t.cancelPendingCommit!==null)&&(kn(t,0),pi(t,ne,ut,!1)),zn(t,n),((de&2)===0||t!==ve)&&(t===ve&&((de&2)===0&&(Ii|=n),Ce===4&&pi(t,ne,ut,!1)),Bt(t))}function mh(t,i,n){if((de&6)!==0)throw Error(d(327));var a=!n&&(i&127)===0&&(i&t.expiredLanes)===0||Bn(t,i),s=a?cg(t,i):Wo(t,i,!0),r=a;do{if(s===0){bn&&!a&&pi(t,i,0,!1);break}else{if(n=t.current.alternate,r&&!og(n)){s=Wo(t,i,!1),r=!1;continue}if(s===2){if(r=i,t.errorRecoveryDisabledLanes&r)var o=0;else o=t.pendingLanes&-536870913,o=o!==0?o:o&536870912?536870912:0;if(o!==0){i=o;e:{var l=t;s=ha;var c=l.current.memoizedState.isDehydrated;if(c&&(kn(l,o).flags|=256),o=Wo(l,o,!1),o!==2){if(Eo&&!c){l.errorRecoveryDisabledLanes|=r,Ii|=r,s=4;break e}r=it,it=s,r!==null&&(it===null?it=r:it.push.apply(it,r))}s=o}if(r=!1,s!==2)continue}}if(s===1){kn(t,0),pi(t,i,0,!0);break}e:{switch(a=t,r=s,r){case 0:case 1:throw Error(d(345));case 4:if((i&4194048)!==i)break;case 6:pi(a,i,ut,!ui);break e;case 2:it=null;break;case 3:case 5:break;default:throw Error(d(329))}if((i&62914560)===i&&(s=vs+300-at(),10<s)){if(pi(a,i,ut,!ui),Ra(a,0,!0)!==0)break e;Qt=i,a.timeoutHandle=Fh(gh.bind(null,a,n,it,js,Ro,i,ut,Ii,jn,ui,r,"Throttled",-0,0),s);break e}gh(a,n,it,js,Ro,i,ut,Ii,jn,ui,r,null,-0,0)}}break}while(!0);Bt(t)}function gh(t,i,n,a,s,r,o,l,c,p,w,S,x,v){if(t.timeoutHandle=-1,S=i.subtreeFlags,S&8192||(S&16785408)===16785408){S={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Nt},rh(i,r,S);var B=(r&62914560)===r?vs-at():(r&4194048)===r?dh-at():0;if(B=Vg(S,B),B!==null){Qt=r,t.cancelPendingCommit=B(wh.bind(null,t,i,r,n,a,s,o,l,c,w,S,null,x,v)),pi(t,r,o,!p);return}}wh(t,i,r,n,a,s,o,l,c)}function og(t){for(var i=t;;){var n=i.tag;if((n===0||n===11||n===15)&&i.flags&16384&&(n=i.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var a=0;a<n.length;a++){var s=n[a],r=s.getSnapshot;s=s.value;try{if(!ot(r(),s))return!1}catch{return!1}}if(n=i.child,i.subtreeFlags&16384&&n!==null)n.return=i,i=n;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function pi(t,i,n,a){i&=~Do,i&=~Ii,t.suspendedLanes|=i,t.pingedLanes&=~i,a&&(t.warmLanes|=i),a=t.expirationTimes;for(var s=i;0<s;){var r=31-rt(s),o=1<<r;a[r]=-1,s&=~o}n!==0&&Tl(t,n,i)}function ws(){return(de&6)===0?(ma(0),!1):!0}function No(){if(ee!==null){if(ue===0)var t=ee.return;else t=ee,Lt=qi=null,Qr(t),mn=null,Yn=0,t=ee;for(;t!==null;)Vd(t.alternate,t),t=t.return;ee=null}}function kn(t,i){var n=t.timeoutHandle;n!==-1&&(t.timeoutHandle=-1,Cg(n)),n=t.cancelPendingCommit,n!==null&&(t.cancelPendingCommit=null,n()),Qt=0,No(),ve=t,ee=n=Ot(t.current,null),ne=i,ue=0,ht=null,ui=!1,bn=Bn(t,i),Eo=!1,jn=ut=Do=Ii=mi=Ce=0,it=ha=null,Ro=!1,(i&8)!==0&&(i|=i&32);var a=t.entangledLanes;if(a!==0)for(t=t.entanglements,a&=i;0<a;){var s=31-rt(a),r=1<<s;i|=t[s],a&=~r}return Yt=i,Ia(),n}function fh(t,i){P=null,k.H=na,i===un||i===Xa?(i=Rc(),ue=3):i===Ur?(i=Rc(),ue=4):ue=i===mo?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,ht=i,ee===null&&(Ce=1,hs(t,yt(i,t.current)))}function ph(){var t=ct.current;return t===null?!0:(ne&4194048)===ne?jt===null:(ne&62914560)===ne||(ne&536870912)!==0?t===jt:!1}function yh(){var t=k.H;return k.H=na,t===null?na:t}function xh(){var t=k.A;return k.A=sg,t}function ks(){Ce=4,ui||(ne&4194048)!==ne&&ct.current!==null||(bn=!0),(mi&134217727)===0&&(Ii&134217727)===0||ve===null||pi(ve,ne,ut,!1)}function Wo(t,i,n){var a=de;de|=2;var s=yh(),r=xh();(ve!==t||ne!==i)&&(js=null,kn(t,i)),i=!1;var o=Ce;e:do try{if(ue!==0&&ee!==null){var l=ee,c=ht;switch(ue){case 8:No(),o=6;break e;case 3:case 2:case 9:case 6:ct.current===null&&(i=!0);var p=ue;if(ue=0,ht=null,Tn(t,l,c,p),n&&bn){o=0;break e}break;default:p=ue,ue=0,ht=null,Tn(t,l,c,p)}}lg(),o=Ce;break}catch(w){fh(t,w)}while(!0);return i&&t.shellSuspendCounter++,Lt=qi=null,de=a,k.H=s,k.A=r,ee===null&&(ve=null,ne=0,Ia()),o}function lg(){for(;ee!==null;)vh(ee)}function cg(t,i){var n=de;de|=2;var a=yh(),s=xh();ve!==t||ne!==i?(js=null,bs=at()+500,kn(t,i)):bn=Bn(t,i);e:do try{if(ue!==0&&ee!==null){i=ee;var r=ht;t:switch(ue){case 1:ue=0,ht=null,Tn(t,i,r,1);break;case 2:case 9:if(Ec(r)){ue=0,ht=null,bh(i);break}i=function(){ue!==2&&ue!==9||ve!==t||(ue=7),Bt(t)},r.then(i,i);break e;case 3:ue=7;break e;case 4:ue=5;break e;case 7:Ec(r)?(ue=0,ht=null,bh(i)):(ue=0,ht=null,Tn(t,i,r,7));break;case 5:var o=null;switch(ee.tag){case 26:o=ee.memoizedState;case 5:case 27:var l=ee;if(o?su(o):l.stateNode.complete){ue=0,ht=null;var c=l.sibling;if(c!==null)ee=c;else{var p=l.return;p!==null?(ee=p,Ts(p)):ee=null}break t}}ue=0,ht=null,Tn(t,i,r,5);break;case 6:ue=0,ht=null,Tn(t,i,r,6);break;case 8:No(),Ce=6;break e;default:throw Error(d(462))}}dg();break}catch(w){fh(t,w)}while(!0);return Lt=qi=null,k.H=a,k.A=s,de=n,ee!==null?0:(ve=null,ne=0,Ia(),Ce)}function dg(){for(;ee!==null&&!zu();)vh(ee)}function vh(t){var i=Id(t.alternate,t,Yt);t.memoizedProps=t.pendingProps,i===null?Ts(t):ee=i}function bh(t){var i=t,n=i.alternate;switch(i.tag){case 15:case 0:i=Od(n,i,i.pendingProps,i.type,void 0,ne);break;case 11:i=Od(n,i,i.pendingProps,i.type.render,i.ref,ne);break;case 5:Qr(i);default:Vd(n,i),i=ee=xc(i,Yt),i=Id(n,i,Yt)}t.memoizedProps=t.pendingProps,i===null?Ts(t):ee=i}function Tn(t,i,n,a){Lt=qi=null,Qr(i),mn=null,Yn=0;var s=i.return;try{if(Zm(t,s,i,n,ne)){Ce=1,hs(t,yt(n,t.current)),ee=null;return}}catch(r){if(s!==null)throw ee=s,r;Ce=1,hs(t,yt(n,t.current)),ee=null;return}i.flags&32768?(se||a===1?t=!0:bn||(ne&536870912)!==0?t=!1:(ui=t=!0,(a===2||a===9||a===3||a===6)&&(a=ct.current,a!==null&&a.tag===13&&(a.flags|=16384))),jh(i,t)):Ts(i)}function Ts(t){var i=t;do{if((i.flags&32768)!==0){jh(i,ui);return}t=i.return;var n=tg(i.alternate,i,Yt);if(n!==null){ee=n;return}if(i=i.sibling,i!==null){ee=i;return}ee=i=t}while(i!==null);Ce===0&&(Ce=5)}function jh(t,i){do{var n=ig(t.alternate,t);if(n!==null){n.flags&=32767,ee=n;return}if(n=t.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!i&&(t=t.sibling,t!==null)){ee=t;return}ee=t=n}while(t!==null);Ce=6,ee=null}function wh(t,i,n,a,s,r,o,l,c){t.cancelPendingCommit=null;do Ss();while(Oe!==0);if((de&6)!==0)throw Error(d(327));if(i!==null){if(i===t.current)throw Error(d(177));if(r=i.lanes|i.childLanes,r|=kr,Iu(t,n,r,o,l,c),t===ve&&(ee=ve=null,ne=0),wn=i,fi=t,Qt=n,Bo=r,zo=s,hh=a,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,gg(Ca,function(){return Ch(),null})):(t.callbackNode=null,t.callbackPriority=0),a=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||a){a=k.T,k.T=null,s=M.p,M.p=2,o=de,de|=4;try{ng(t,i,n)}finally{de=o,M.p=s,k.T=a}}Oe=1,kh(),Th(),Sh()}}function kh(){if(Oe===1){Oe=0;var t=fi,i=wn,n=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||n){n=k.T,k.T=null;var a=M.p;M.p=2;var s=de;de|=4;try{nh(i,t);var r=Po,o=cc(t.containerInfo),l=r.focusedElem,c=r.selectionRange;if(o!==l&&l&&l.ownerDocument&&lc(l.ownerDocument.documentElement,l)){if(c!==null&&xr(l)){var p=c.start,w=c.end;if(w===void 0&&(w=p),"selectionStart"in l)l.selectionStart=p,l.selectionEnd=Math.min(w,l.value.length);else{var S=l.ownerDocument||document,x=S&&S.defaultView||window;if(x.getSelection){var v=x.getSelection(),B=l.textContent.length,L=Math.min(c.start,B),ye=c.end===void 0?L:Math.min(c.end,B);!v.extend&&L>ye&&(o=ye,ye=L,L=o);var g=oc(l,L),u=oc(l,ye);if(g&&u&&(v.rangeCount!==1||v.anchorNode!==g.node||v.anchorOffset!==g.offset||v.focusNode!==u.node||v.focusOffset!==u.offset)){var f=S.createRange();f.setStart(g.node,g.offset),v.removeAllRanges(),L>ye?(v.addRange(f),v.extend(u.node,u.offset)):(f.setEnd(u.node,u.offset),v.addRange(f))}}}}for(S=[],v=l;v=v.parentNode;)v.nodeType===1&&S.push({element:v,left:v.scrollLeft,top:v.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<S.length;l++){var T=S[l];T.element.scrollLeft=T.left,T.element.scrollTop=T.top}}Os=!!Ko,Po=Ko=null}finally{de=s,M.p=a,k.T=n}}t.current=i,Oe=2}}function Th(){if(Oe===2){Oe=0;var t=fi,i=wn,n=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||n){n=k.T,k.T=null;var a=M.p;M.p=2;var s=de;de|=4;try{Zd(t,i.alternate,i)}finally{de=s,M.p=a,k.T=n}}Oe=3}}function Sh(){if(Oe===4||Oe===3){Oe=0,qu();var t=fi,i=wn,n=Qt,a=hh;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Oe=5:(Oe=0,wn=fi=null,Ah(t,t.pendingLanes));var s=t.pendingLanes;if(s===0&&(gi=null),$s(n),i=i.stateNode,st&&typeof st.onCommitFiberRoot=="function")try{st.onCommitFiberRoot(Rn,i,void 0,(i.current.flags&128)===128)}catch{}if(a!==null){i=k.T,s=M.p,M.p=2,k.T=null;try{for(var r=t.onRecoverableError,o=0;o<a.length;o++){var l=a[o];r(l.value,{componentStack:l.stack})}}finally{k.T=i,M.p=s}}(Qt&3)!==0&&Ss(),Bt(t),s=t.pendingLanes,(n&261930)!==0&&(s&42)!==0?t===qo?ua++:(ua=0,qo=t):ua=0,ma(0)}}function Ah(t,i){(t.pooledCacheLanes&=i)===0&&(i=t.pooledCache,i!=null&&(t.pooledCache=null,Kn(i)))}function Ss(){return kh(),Th(),Sh(),Ch()}function Ch(){if(Oe!==5)return!1;var t=fi,i=Bo;Bo=0;var n=$s(Qt),a=k.T,s=M.p;try{M.p=32>n?32:n,k.T=null,n=zo,zo=null;var r=fi,o=Qt;if(Oe=0,wn=fi=null,Qt=0,(de&6)!==0)throw Error(d(331));var l=de;if(de|=4,lh(r.current),sh(r,r.current,o,n),de=l,ma(0,!1),st&&typeof st.onPostCommitFiberRoot=="function")try{st.onPostCommitFiberRoot(Rn,r)}catch{}return!0}finally{M.p=s,k.T=a,Ah(t,i)}}function Mh(t,i,n){i=yt(n,i),i=uo(t.stateNode,i,2),t=li(t,i,2),t!==null&&(zn(t,2),Bt(t))}function me(t,i,n){if(t.tag===3)Mh(t,t,n);else for(;i!==null;){if(i.tag===3){Mh(i,t,n);break}else if(i.tag===1){var a=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(gi===null||!gi.has(a))){t=yt(n,t),n=Ed(2),a=li(i,n,2),a!==null&&(Dd(n,a,i,t),zn(a,2),Bt(a));break}}i=i.return}}function Oo(t,i,n){var a=t.pingCache;if(a===null){a=t.pingCache=new rg;var s=new Set;a.set(i,s)}else s=a.get(i),s===void 0&&(s=new Set,a.set(i,s));s.has(n)||(Eo=!0,s.add(n),t=hg.bind(null,t,i,n),i.then(t,t))}function hg(t,i,n){var a=t.pingCache;a!==null&&a.delete(i),t.pingedLanes|=t.suspendedLanes&n,t.warmLanes&=~n,ve===t&&(ne&n)===n&&(Ce===4||Ce===3&&(ne&62914560)===ne&&300>at()-vs?(de&2)===0&&kn(t,0):Do|=n,jn===ne&&(jn=0)),Bt(t)}function Eh(t,i){i===0&&(i=kl()),t=Ri(t,i),t!==null&&(zn(t,i),Bt(t))}function ug(t){var i=t.memoizedState,n=0;i!==null&&(n=i.retryLane),Eh(t,n)}function mg(t,i){var n=0;switch(t.tag){case 31:case 13:var a=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:a=t.stateNode;break;case 22:a=t.stateNode._retryCache;break;default:throw Error(d(314))}a!==null&&a.delete(i),Eh(t,n)}function gg(t,i){return Ys(t,i)}var As=null,Sn=null,Uo=!1,Cs=!1,Lo=!1,yi=0;function Bt(t){t!==Sn&&t.next===null&&(Sn===null?As=Sn=t:Sn=Sn.next=t),Cs=!0,Uo||(Uo=!0,pg())}function ma(t,i){if(!Lo&&Cs){Lo=!0;do for(var n=!1,a=As;a!==null;){if(t!==0){var s=a.pendingLanes;if(s===0)var r=0;else{var o=a.suspendedLanes,l=a.pingedLanes;r=(1<<31-rt(42|t)+1)-1,r&=s&~(o&~l),r=r&201326741?r&201326741|1:r?r|2:0}r!==0&&(n=!0,zh(a,r))}else r=ne,r=Ra(a,a===ve?r:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),(r&3)===0||Bn(a,r)||(n=!0,zh(a,r));a=a.next}while(n);Lo=!1}}function fg(){Dh()}function Dh(){Cs=Uo=!1;var t=0;yi!==0&&Ag()&&(t=yi);for(var i=at(),n=null,a=As;a!==null;){var s=a.next,r=Rh(a,i);r===0?(a.next=null,n===null?As=s:n.next=s,s===null&&(Sn=n)):(n=a,(t!==0||(r&3)!==0)&&(Cs=!0)),a=s}Oe!==0&&Oe!==5||ma(t),yi!==0&&(yi=0)}function Rh(t,i){for(var n=t.suspendedLanes,a=t.pingedLanes,s=t.expirationTimes,r=t.pendingLanes&-62914561;0<r;){var o=31-rt(r),l=1<<o,c=s[o];c===-1?((l&n)===0||(l&a)!==0)&&(s[o]=_u(l,i)):c<=i&&(t.expiredLanes|=l),r&=~l}if(i=ve,n=ne,n=Ra(t,t===i?n:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),a=t.callbackNode,n===0||t===i&&(ue===2||ue===9)||t.cancelPendingCommit!==null)return a!==null&&a!==null&&Qs(a),t.callbackNode=null,t.callbackPriority=0;if((n&3)===0||Bn(t,n)){if(i=n&-n,i===t.callbackPriority)return i;switch(a!==null&&Qs(a),$s(n)){case 2:case 8:n=jl;break;case 32:n=Ca;break;case 268435456:n=wl;break;default:n=Ca}return a=Bh.bind(null,t),n=Ys(n,a),t.callbackPriority=i,t.callbackNode=n,i}return a!==null&&a!==null&&Qs(a),t.callbackPriority=2,t.callbackNode=null,2}function Bh(t,i){if(Oe!==0&&Oe!==5)return t.callbackNode=null,t.callbackPriority=0,null;var n=t.callbackNode;if(Ss()&&t.callbackNode!==n)return null;var a=ne;return a=Ra(t,t===ve?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),a===0?null:(mh(t,a,i),Rh(t,at()),t.callbackNode!=null&&t.callbackNode===n?Bh.bind(null,t):null)}function zh(t,i){if(Ss())return null;mh(t,i,!0)}function pg(){Mg(function(){(de&6)!==0?Ys(bl,fg):Dh()})}function Go(){if(yi===0){var t=dn;t===0&&(t=Ma,Ma<<=1,(Ma&261888)===0&&(Ma=256)),yi=t}return yi}function qh(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Na(""+t)}function Nh(t,i){var n=i.ownerDocument.createElement("input");return n.name=i.name,n.value=i.value,t.id&&n.setAttribute("form",t.id),i.parentNode.insertBefore(n,i),t=new FormData(t),n.parentNode.removeChild(n),t}function yg(t,i,n,a,s){if(i==="submit"&&n&&n.stateNode===s){var r=qh((s[Xe]||null).action),o=a.submitter;o&&(i=(i=o[Xe]||null)?qh(i.formAction):o.getAttribute("formAction"),i!==null&&(r=i,o=null));var l=new La("action","action",null,a,s);t.push({event:l,listeners:[{instance:null,listener:function(){if(a.defaultPrevented){if(yi!==0){var c=o?Nh(s,o):new FormData(s);so(n,{pending:!0,data:c,method:s.method,action:r},null,c)}}else typeof r=="function"&&(l.preventDefault(),c=o?Nh(s,o):new FormData(s),so(n,{pending:!0,data:c,method:s.method,action:r},r,c))},currentTarget:s}]})}}for(var Ho=0;Ho<wr.length;Ho++){var _o=wr[Ho],xg=_o.toLowerCase(),vg=_o[0].toUpperCase()+_o.slice(1);St(xg,"on"+vg)}St(uc,"onAnimationEnd"),St(mc,"onAnimationIteration"),St(gc,"onAnimationStart"),St("dblclick","onDoubleClick"),St("focusin","onFocus"),St("focusout","onBlur"),St(Nm,"onTransitionRun"),St(Wm,"onTransitionStart"),St(Om,"onTransitionCancel"),St(fc,"onTransitionEnd"),Yi("onMouseEnter",["mouseout","mouseover"]),Yi("onMouseLeave",["mouseout","mouseover"]),Yi("onPointerEnter",["pointerout","pointerover"]),Yi("onPointerLeave",["pointerout","pointerover"]),Ci("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ci("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ci("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ci("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ci("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ci("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ga="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),bg=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ga));function Wh(t,i){i=(i&4)!==0;for(var n=0;n<t.length;n++){var a=t[n],s=a.event;a=a.listeners;e:{var r=void 0;if(i)for(var o=a.length-1;0<=o;o--){var l=a[o],c=l.instance,p=l.currentTarget;if(l=l.listener,c!==r&&s.isPropagationStopped())break e;r=l,s.currentTarget=p;try{r(s)}catch(w){_a(w)}s.currentTarget=null,r=c}else for(o=0;o<a.length;o++){if(l=a[o],c=l.instance,p=l.currentTarget,l=l.listener,c!==r&&s.isPropagationStopped())break e;r=l,s.currentTarget=p;try{r(s)}catch(w){_a(w)}s.currentTarget=null,r=c}}}}function te(t,i){var n=i[er];n===void 0&&(n=i[er]=new Set);var a=t+"__bubble";n.has(a)||(Oh(i,t,2,!1),n.add(a))}function Io(t,i,n){var a=0;i&&(a|=4),Oh(n,t,a,i)}var Ms="_reactListening"+Math.random().toString(36).slice(2);function Fo(t){if(!t[Ms]){t[Ms]=!0,Dl.forEach(function(n){n!=="selectionchange"&&(bg.has(n)||Io(n,!1,t),Io(n,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[Ms]||(i[Ms]=!0,Io("selectionchange",!1,i))}}function Oh(t,i,n,a){switch(uu(i)){case 2:var s=Pg;break;case 8:s=Yg;break;default:s=sl}n=s.bind(null,i,n,t),s=void 0,!cr||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(s=!0),a?s!==void 0?t.addEventListener(i,n,{capture:!0,passive:s}):t.addEventListener(i,n,!0):s!==void 0?t.addEventListener(i,n,{passive:s}):t.addEventListener(i,n,!1)}function Vo(t,i,n,a,s){var r=a;if((i&1)===0&&(i&2)===0&&a!==null)e:for(;;){if(a===null)return;var o=a.tag;if(o===3||o===4){var l=a.stateNode.containerInfo;if(l===s)break;if(o===4)for(o=a.return;o!==null;){var c=o.tag;if((c===3||c===4)&&o.stateNode.containerInfo===s)return;o=o.return}for(;l!==null;){if(o=Ji(l),o===null)return;if(c=o.tag,c===5||c===6||c===26||c===27){a=r=o;continue e}l=l.parentNode}}a=a.return}_l(function(){var p=r,w=or(n),S=[];e:{var x=pc.get(t);if(x!==void 0){var v=La,B=t;switch(t){case"keypress":if(Oa(n)===0)break e;case"keydown":case"keyup":v=mm;break;case"focusin":B="focus",v=mr;break;case"focusout":B="blur",v=mr;break;case"beforeblur":case"afterblur":v=mr;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=Vl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=tm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=pm;break;case uc:case mc:case gc:v=am;break;case fc:v=xm;break;case"scroll":case"scrollend":v=$u;break;case"wheel":v=bm;break;case"copy":case"cut":case"paste":v=rm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=Kl;break;case"toggle":case"beforetoggle":v=wm}var L=(i&4)!==0,ye=!L&&(t==="scroll"||t==="scrollend"),g=L?x!==null?x+"Capture":null:x;L=[];for(var u=p,f;u!==null;){var T=u;if(f=T.stateNode,T=T.tag,T!==5&&T!==26&&T!==27||f===null||g===null||(T=Wn(u,g),T!=null&&L.push(fa(u,T,f))),ye)break;u=u.return}0<L.length&&(x=new v(x,B,null,n,w),S.push({event:x,listeners:L}))}}if((i&7)===0){e:{if(x=t==="mouseover"||t==="pointerover",v=t==="mouseout"||t==="pointerout",x&&n!==rr&&(B=n.relatedTarget||n.fromElement)&&(Ji(B)||B[Vi]))break e;if((v||x)&&(x=w.window===w?w:(x=w.ownerDocument)?x.defaultView||x.parentWindow:window,v?(B=n.relatedTarget||n.toElement,v=p,B=B?Ji(B):null,B!==null&&(ye=O(B),L=B.tag,B!==ye||L!==5&&L!==27&&L!==6)&&(B=null)):(v=null,B=p),v!==B)){if(L=Vl,T="onMouseLeave",g="onMouseEnter",u="mouse",(t==="pointerout"||t==="pointerover")&&(L=Kl,T="onPointerLeave",g="onPointerEnter",u="pointer"),ye=v==null?x:Nn(v),f=B==null?x:Nn(B),x=new L(T,u+"leave",v,n,w),x.target=ye,x.relatedTarget=f,T=null,Ji(w)===p&&(L=new L(g,u+"enter",B,n,w),L.target=f,L.relatedTarget=ye,T=L),ye=T,v&&B)t:{for(L=jg,g=v,u=B,f=0,T=g;T;T=L(T))f++;T=0;for(var W=u;W;W=L(W))T++;for(;0<f-T;)g=L(g),f--;for(;0<T-f;)u=L(u),T--;for(;f--;){if(g===u||u!==null&&g===u.alternate){L=g;break t}g=L(g),u=L(u)}L=null}else L=null;v!==null&&Uh(S,x,v,L,!1),B!==null&&ye!==null&&Uh(S,ye,B,L,!0)}}e:{if(x=p?Nn(p):window,v=x.nodeName&&x.nodeName.toLowerCase(),v==="select"||v==="input"&&x.type==="file")var oe=tc;else if($l(x))if(ic)oe=Bm;else{oe=Dm;var q=Em}else v=x.nodeName,!v||v.toLowerCase()!=="input"||x.type!=="checkbox"&&x.type!=="radio"?p&&sr(p.elementType)&&(oe=tc):oe=Rm;if(oe&&(oe=oe(t,p))){ec(S,oe,n,w);break e}q&&q(t,x,p),t==="focusout"&&p&&x.type==="number"&&p.memoizedProps.value!=null&&ar(x,"number",x.value)}switch(q=p?Nn(p):window,t){case"focusin":($l(q)||q.contentEditable==="true")&&(tn=q,vr=p,Fn=null);break;case"focusout":Fn=vr=tn=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,dc(S,n,w);break;case"selectionchange":if(qm)break;case"keydown":case"keyup":dc(S,n,w)}var Y;if(fr)e:{switch(t){case"compositionstart":var ae="onCompositionStart";break e;case"compositionend":ae="onCompositionEnd";break e;case"compositionupdate":ae="onCompositionUpdate";break e}ae=void 0}else en?Xl(t,n)&&(ae="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(ae="onCompositionStart");ae&&(Pl&&n.locale!=="ko"&&(en||ae!=="onCompositionStart"?ae==="onCompositionEnd"&&en&&(Y=Il()):(ti=w,dr="value"in ti?ti.value:ti.textContent,en=!0)),q=Es(p,ae),0<q.length&&(ae=new Jl(ae,t,null,n,w),S.push({event:ae,listeners:q}),Y?ae.data=Y:(Y=Zl(n),Y!==null&&(ae.data=Y)))),(Y=Tm?Sm(t,n):Am(t,n))&&(ae=Es(p,"onBeforeInput"),0<ae.length&&(q=new Jl("onBeforeInput","beforeinput",null,n,w),S.push({event:q,listeners:ae}),q.data=Y)),yg(S,t,p,n,w)}Wh(S,i)})}function fa(t,i,n){return{instance:t,listener:i,currentTarget:n}}function Es(t,i){for(var n=i+"Capture",a=[];t!==null;){var s=t,r=s.stateNode;if(s=s.tag,s!==5&&s!==26&&s!==27||r===null||(s=Wn(t,n),s!=null&&a.unshift(fa(t,s,r)),s=Wn(t,i),s!=null&&a.push(fa(t,s,r))),t.tag===3)return a;t=t.return}return[]}function jg(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Uh(t,i,n,a,s){for(var r=i._reactName,o=[];n!==null&&n!==a;){var l=n,c=l.alternate,p=l.stateNode;if(l=l.tag,c!==null&&c===a)break;l!==5&&l!==26&&l!==27||p===null||(c=p,s?(p=Wn(n,r),p!=null&&o.unshift(fa(n,p,c))):s||(p=Wn(n,r),p!=null&&o.push(fa(n,p,c)))),n=n.return}o.length!==0&&t.push({event:i,listeners:o})}var wg=/\r\n?/g,kg=/\u0000|\uFFFD/g;function Lh(t){return(typeof t=="string"?t:""+t).replace(wg,`
`).replace(kg,"")}function Gh(t,i){return i=Lh(i),Lh(t)===i}function pe(t,i,n,a,s,r){switch(n){case"children":typeof a=="string"?i==="body"||i==="textarea"&&a===""||Xi(t,a):(typeof a=="number"||typeof a=="bigint")&&i!=="body"&&Xi(t,""+a);break;case"className":za(t,"class",a);break;case"tabIndex":za(t,"tabindex",a);break;case"dir":case"role":case"viewBox":case"width":case"height":za(t,n,a);break;case"style":Gl(t,a,r);break;case"data":if(i!=="object"){za(t,"data",a);break}case"src":case"href":if(a===""&&(i!=="a"||n!=="href")){t.removeAttribute(n);break}if(a==null||typeof a=="function"||typeof a=="symbol"||typeof a=="boolean"){t.removeAttribute(n);break}a=Na(""+a),t.setAttribute(n,a);break;case"action":case"formAction":if(typeof a=="function"){t.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof r=="function"&&(n==="formAction"?(i!=="input"&&pe(t,i,"name",s.name,s,null),pe(t,i,"formEncType",s.formEncType,s,null),pe(t,i,"formMethod",s.formMethod,s,null),pe(t,i,"formTarget",s.formTarget,s,null)):(pe(t,i,"encType",s.encType,s,null),pe(t,i,"method",s.method,s,null),pe(t,i,"target",s.target,s,null)));if(a==null||typeof a=="symbol"||typeof a=="boolean"){t.removeAttribute(n);break}a=Na(""+a),t.setAttribute(n,a);break;case"onClick":a!=null&&(t.onclick=Nt);break;case"onScroll":a!=null&&te("scroll",t);break;case"onScrollEnd":a!=null&&te("scrollend",t);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(d(61));if(n=a.__html,n!=null){if(s.children!=null)throw Error(d(60));t.innerHTML=n}}break;case"multiple":t.multiple=a&&typeof a!="function"&&typeof a!="symbol";break;case"muted":t.muted=a&&typeof a!="function"&&typeof a!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(a==null||typeof a=="function"||typeof a=="boolean"||typeof a=="symbol"){t.removeAttribute("xlink:href");break}n=Na(""+a),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":a!=null&&typeof a!="function"&&typeof a!="symbol"?t.setAttribute(n,""+a):t.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":a&&typeof a!="function"&&typeof a!="symbol"?t.setAttribute(n,""):t.removeAttribute(n);break;case"capture":case"download":a===!0?t.setAttribute(n,""):a!==!1&&a!=null&&typeof a!="function"&&typeof a!="symbol"?t.setAttribute(n,a):t.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":a!=null&&typeof a!="function"&&typeof a!="symbol"&&!isNaN(a)&&1<=a?t.setAttribute(n,a):t.removeAttribute(n);break;case"rowSpan":case"start":a==null||typeof a=="function"||typeof a=="symbol"||isNaN(a)?t.removeAttribute(n):t.setAttribute(n,a);break;case"popover":te("beforetoggle",t),te("toggle",t),Ba(t,"popover",a);break;case"xlinkActuate":qt(t,"http://www.w3.org/1999/xlink","xlink:actuate",a);break;case"xlinkArcrole":qt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",a);break;case"xlinkRole":qt(t,"http://www.w3.org/1999/xlink","xlink:role",a);break;case"xlinkShow":qt(t,"http://www.w3.org/1999/xlink","xlink:show",a);break;case"xlinkTitle":qt(t,"http://www.w3.org/1999/xlink","xlink:title",a);break;case"xlinkType":qt(t,"http://www.w3.org/1999/xlink","xlink:type",a);break;case"xmlBase":qt(t,"http://www.w3.org/XML/1998/namespace","xml:base",a);break;case"xmlLang":qt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",a);break;case"xmlSpace":qt(t,"http://www.w3.org/XML/1998/namespace","xml:space",a);break;case"is":Ba(t,"is",a);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=Xu.get(n)||n,Ba(t,n,a))}}function Jo(t,i,n,a,s,r){switch(n){case"style":Gl(t,a,r);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(d(61));if(n=a.__html,n!=null){if(s.children!=null)throw Error(d(60));t.innerHTML=n}}break;case"children":typeof a=="string"?Xi(t,a):(typeof a=="number"||typeof a=="bigint")&&Xi(t,""+a);break;case"onScroll":a!=null&&te("scroll",t);break;case"onScrollEnd":a!=null&&te("scrollend",t);break;case"onClick":a!=null&&(t.onclick=Nt);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Rl.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(s=n.endsWith("Capture"),i=n.slice(2,s?n.length-7:void 0),r=t[Xe]||null,r=r!=null?r[n]:null,typeof r=="function"&&t.removeEventListener(i,r,s),typeof a=="function")){typeof r!="function"&&r!==null&&(n in t?t[n]=null:t.hasAttribute(n)&&t.removeAttribute(n)),t.addEventListener(i,a,s);break e}n in t?t[n]=a:a===!0?t.setAttribute(n,""):Ba(t,n,a)}}}function Ve(t,i,n){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":te("error",t),te("load",t);var a=!1,s=!1,r;for(r in n)if(n.hasOwnProperty(r)){var o=n[r];if(o!=null)switch(r){case"src":a=!0;break;case"srcSet":s=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(d(137,i));default:pe(t,i,r,o,n,null)}}s&&pe(t,i,"srcSet",n.srcSet,n,null),a&&pe(t,i,"src",n.src,n,null);return;case"input":te("invalid",t);var l=r=o=s=null,c=null,p=null;for(a in n)if(n.hasOwnProperty(a)){var w=n[a];if(w!=null)switch(a){case"name":s=w;break;case"type":o=w;break;case"checked":c=w;break;case"defaultChecked":p=w;break;case"value":r=w;break;case"defaultValue":l=w;break;case"children":case"dangerouslySetInnerHTML":if(w!=null)throw Error(d(137,i));break;default:pe(t,i,a,w,n,null)}}Wl(t,r,l,c,p,o,s,!1);return;case"select":te("invalid",t),a=o=r=null;for(s in n)if(n.hasOwnProperty(s)&&(l=n[s],l!=null))switch(s){case"value":r=l;break;case"defaultValue":o=l;break;case"multiple":a=l;default:pe(t,i,s,l,n,null)}i=r,n=o,t.multiple=!!a,i!=null?Qi(t,!!a,i,!1):n!=null&&Qi(t,!!a,n,!0);return;case"textarea":te("invalid",t),r=s=a=null;for(o in n)if(n.hasOwnProperty(o)&&(l=n[o],l!=null))switch(o){case"value":a=l;break;case"defaultValue":s=l;break;case"children":r=l;break;case"dangerouslySetInnerHTML":if(l!=null)throw Error(d(91));break;default:pe(t,i,o,l,n,null)}Ul(t,a,s,r);return;case"option":for(c in n)n.hasOwnProperty(c)&&(a=n[c],a!=null)&&(c==="selected"?t.selected=a&&typeof a!="function"&&typeof a!="symbol":pe(t,i,c,a,n,null));return;case"dialog":te("beforetoggle",t),te("toggle",t),te("cancel",t),te("close",t);break;case"iframe":case"object":te("load",t);break;case"video":case"audio":for(a=0;a<ga.length;a++)te(ga[a],t);break;case"image":te("error",t),te("load",t);break;case"details":te("toggle",t);break;case"embed":case"source":case"link":te("error",t),te("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(p in n)if(n.hasOwnProperty(p)&&(a=n[p],a!=null))switch(p){case"children":case"dangerouslySetInnerHTML":throw Error(d(137,i));default:pe(t,i,p,a,n,null)}return;default:if(sr(i)){for(w in n)n.hasOwnProperty(w)&&(a=n[w],a!==void 0&&Jo(t,i,w,a,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(a=n[l],a!=null&&pe(t,i,l,a,n,null))}function Tg(t,i,n,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var s=null,r=null,o=null,l=null,c=null,p=null,w=null;for(v in n){var S=n[v];if(n.hasOwnProperty(v)&&S!=null)switch(v){case"checked":break;case"value":break;case"defaultValue":c=S;default:a.hasOwnProperty(v)||pe(t,i,v,null,a,S)}}for(var x in a){var v=a[x];if(S=n[x],a.hasOwnProperty(x)&&(v!=null||S!=null))switch(x){case"type":r=v;break;case"name":s=v;break;case"checked":p=v;break;case"defaultChecked":w=v;break;case"value":o=v;break;case"defaultValue":l=v;break;case"children":case"dangerouslySetInnerHTML":if(v!=null)throw Error(d(137,i));break;default:v!==S&&pe(t,i,x,v,a,S)}}nr(t,o,l,c,p,w,r,s);return;case"select":v=o=l=x=null;for(r in n)if(c=n[r],n.hasOwnProperty(r)&&c!=null)switch(r){case"value":break;case"multiple":v=c;default:a.hasOwnProperty(r)||pe(t,i,r,null,a,c)}for(s in a)if(r=a[s],c=n[s],a.hasOwnProperty(s)&&(r!=null||c!=null))switch(s){case"value":x=r;break;case"defaultValue":l=r;break;case"multiple":o=r;default:r!==c&&pe(t,i,s,r,a,c)}i=l,n=o,a=v,x!=null?Qi(t,!!n,x,!1):!!a!=!!n&&(i!=null?Qi(t,!!n,i,!0):Qi(t,!!n,n?[]:"",!1));return;case"textarea":v=x=null;for(l in n)if(s=n[l],n.hasOwnProperty(l)&&s!=null&&!a.hasOwnProperty(l))switch(l){case"value":break;case"children":break;default:pe(t,i,l,null,a,s)}for(o in a)if(s=a[o],r=n[o],a.hasOwnProperty(o)&&(s!=null||r!=null))switch(o){case"value":x=s;break;case"defaultValue":v=s;break;case"children":break;case"dangerouslySetInnerHTML":if(s!=null)throw Error(d(91));break;default:s!==r&&pe(t,i,o,s,a,r)}Ol(t,x,v);return;case"option":for(var B in n)x=n[B],n.hasOwnProperty(B)&&x!=null&&!a.hasOwnProperty(B)&&(B==="selected"?t.selected=!1:pe(t,i,B,null,a,x));for(c in a)x=a[c],v=n[c],a.hasOwnProperty(c)&&x!==v&&(x!=null||v!=null)&&(c==="selected"?t.selected=x&&typeof x!="function"&&typeof x!="symbol":pe(t,i,c,x,a,v));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var L in n)x=n[L],n.hasOwnProperty(L)&&x!=null&&!a.hasOwnProperty(L)&&pe(t,i,L,null,a,x);for(p in a)if(x=a[p],v=n[p],a.hasOwnProperty(p)&&x!==v&&(x!=null||v!=null))switch(p){case"children":case"dangerouslySetInnerHTML":if(x!=null)throw Error(d(137,i));break;default:pe(t,i,p,x,a,v)}return;default:if(sr(i)){for(var ye in n)x=n[ye],n.hasOwnProperty(ye)&&x!==void 0&&!a.hasOwnProperty(ye)&&Jo(t,i,ye,void 0,a,x);for(w in a)x=a[w],v=n[w],!a.hasOwnProperty(w)||x===v||x===void 0&&v===void 0||Jo(t,i,w,x,a,v);return}}for(var g in n)x=n[g],n.hasOwnProperty(g)&&x!=null&&!a.hasOwnProperty(g)&&pe(t,i,g,null,a,x);for(S in a)x=a[S],v=n[S],!a.hasOwnProperty(S)||x===v||x==null&&v==null||pe(t,i,S,x,a,v)}function Hh(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Sg(){if(typeof performance.getEntriesByType=="function"){for(var t=0,i=0,n=performance.getEntriesByType("resource"),a=0;a<n.length;a++){var s=n[a],r=s.transferSize,o=s.initiatorType,l=s.duration;if(r&&l&&Hh(o)){for(o=0,l=s.responseEnd,a+=1;a<n.length;a++){var c=n[a],p=c.startTime;if(p>l)break;var w=c.transferSize,S=c.initiatorType;w&&Hh(S)&&(c=c.responseEnd,o+=w*(c<l?1:(l-p)/(c-p)))}if(--a,i+=8*(r+o)/(s.duration/1e3),t++,10<t)break}}if(0<t)return i/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Ko=null,Po=null;function Ds(t){return t.nodeType===9?t:t.ownerDocument}function _h(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Ih(t,i){if(t===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&i==="foreignObject"?0:t}function Yo(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Qo=null;function Ag(){var t=window.event;return t&&t.type==="popstate"?t===Qo?!1:(Qo=t,!0):(Qo=null,!1)}var Fh=typeof setTimeout=="function"?setTimeout:void 0,Cg=typeof clearTimeout=="function"?clearTimeout:void 0,Vh=typeof Promise=="function"?Promise:void 0,Mg=typeof queueMicrotask=="function"?queueMicrotask:typeof Vh<"u"?function(t){return Vh.resolve(null).then(t).catch(Eg)}:Fh;function Eg(t){setTimeout(function(){throw t})}function xi(t){return t==="head"}function Jh(t,i){var n=i,a=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"||n==="/&"){if(a===0){t.removeChild(s),En(i);return}a--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")a++;else if(n==="html")pa(t.ownerDocument.documentElement);else if(n==="head"){n=t.ownerDocument.head,pa(n);for(var r=n.firstChild;r;){var o=r.nextSibling,l=r.nodeName;r[qn]||l==="SCRIPT"||l==="STYLE"||l==="LINK"&&r.rel.toLowerCase()==="stylesheet"||n.removeChild(r),r=o}}else n==="body"&&pa(t.ownerDocument.body);n=s}while(n);En(i)}function Kh(t,i){var n=t;t=0;do{var a=n.nextSibling;if(n.nodeType===1?i?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(i?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(t===0)break;t--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||t++;n=a}while(n)}function Xo(t){var i=t.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var n=i;switch(i=i.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Xo(n),tr(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}t.removeChild(n)}}function Dg(t,i,n,a){for(;t.nodeType===1;){var s=n;if(t.nodeName.toLowerCase()!==i.toLowerCase()){if(!a&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(a){if(!t[qn])switch(i){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(r=t.getAttribute("rel"),r==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(r!==s.rel||t.getAttribute("href")!==(s.href==null||s.href===""?null:s.href)||t.getAttribute("crossorigin")!==(s.crossOrigin==null?null:s.crossOrigin)||t.getAttribute("title")!==(s.title==null?null:s.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(r=t.getAttribute("src"),(r!==(s.src==null?null:s.src)||t.getAttribute("type")!==(s.type==null?null:s.type)||t.getAttribute("crossorigin")!==(s.crossOrigin==null?null:s.crossOrigin))&&r&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(i==="input"&&t.type==="hidden"){var r=s.name==null?null:""+s.name;if(s.type==="hidden"&&t.getAttribute("name")===r)return t}else return t;if(t=wt(t.nextSibling),t===null)break}return null}function Rg(t,i,n){if(i==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=wt(t.nextSibling),t===null))return null;return t}function Ph(t,i){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!i||(t=wt(t.nextSibling),t===null))return null;return t}function Zo(t){return t.data==="$?"||t.data==="$~"}function $o(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function Bg(t,i){var n=t.ownerDocument;if(t.data==="$~")t._reactRetry=i;else if(t.data!=="$?"||n.readyState!=="loading")i();else{var a=function(){i(),n.removeEventListener("DOMContentLoaded",a)};n.addEventListener("DOMContentLoaded",a),t._reactRetry=a}}function wt(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return t}var el=null;function Yh(t){t=t.nextSibling;for(var i=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"||n==="/&"){if(i===0)return wt(t.nextSibling);i--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||i++}t=t.nextSibling}return null}function Qh(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(i===0)return t;i--}else n!=="/$"&&n!=="/&"||i++}t=t.previousSibling}return null}function Xh(t,i,n){switch(i=Ds(n),t){case"html":if(t=i.documentElement,!t)throw Error(d(452));return t;case"head":if(t=i.head,!t)throw Error(d(453));return t;case"body":if(t=i.body,!t)throw Error(d(454));return t;default:throw Error(d(451))}}function pa(t){for(var i=t.attributes;i.length;)t.removeAttributeNode(i[0]);tr(t)}var kt=new Map,Zh=new Set;function Rs(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Xt=M.d;M.d={f:zg,r:qg,D:Ng,C:Wg,L:Og,m:Ug,X:Gg,S:Lg,M:Hg};function zg(){var t=Xt.f(),i=ws();return t||i}function qg(t){var i=Ki(t);i!==null&&i.tag===5&&i.type==="form"?fd(i):Xt.r(t)}var An=typeof document>"u"?null:document;function $h(t,i,n){var a=An;if(a&&typeof i=="string"&&i){var s=ft(i);s='link[rel="'+t+'"][href="'+s+'"]',typeof n=="string"&&(s+='[crossorigin="'+n+'"]'),Zh.has(s)||(Zh.add(s),t={rel:t,crossOrigin:n,href:i},a.querySelector(s)===null&&(i=a.createElement("link"),Ve(i,"link",t),Ue(i),a.head.appendChild(i)))}}function Ng(t){Xt.D(t),$h("dns-prefetch",t,null)}function Wg(t,i){Xt.C(t,i),$h("preconnect",t,i)}function Og(t,i,n){Xt.L(t,i,n);var a=An;if(a&&t&&i){var s='link[rel="preload"][as="'+ft(i)+'"]';i==="image"&&n&&n.imageSrcSet?(s+='[imagesrcset="'+ft(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(s+='[imagesizes="'+ft(n.imageSizes)+'"]')):s+='[href="'+ft(t)+'"]';var r=s;switch(i){case"style":r=Cn(t);break;case"script":r=Mn(t)}kt.has(r)||(t=D({rel:"preload",href:i==="image"&&n&&n.imageSrcSet?void 0:t,as:i},n),kt.set(r,t),a.querySelector(s)!==null||i==="style"&&a.querySelector(ya(r))||i==="script"&&a.querySelector(xa(r))||(i=a.createElement("link"),Ve(i,"link",t),Ue(i),a.head.appendChild(i)))}}function Ug(t,i){Xt.m(t,i);var n=An;if(n&&t){var a=i&&typeof i.as=="string"?i.as:"script",s='link[rel="modulepreload"][as="'+ft(a)+'"][href="'+ft(t)+'"]',r=s;switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":r=Mn(t)}if(!kt.has(r)&&(t=D({rel:"modulepreload",href:t},i),kt.set(r,t),n.querySelector(s)===null)){switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(xa(r)))return}a=n.createElement("link"),Ve(a,"link",t),Ue(a),n.head.appendChild(a)}}}function Lg(t,i,n){Xt.S(t,i,n);var a=An;if(a&&t){var s=Pi(a).hoistableStyles,r=Cn(t);i=i||"default";var o=s.get(r);if(!o){var l={loading:0,preload:null};if(o=a.querySelector(ya(r)))l.loading=5;else{t=D({rel:"stylesheet",href:t,"data-precedence":i},n),(n=kt.get(r))&&tl(t,n);var c=o=a.createElement("link");Ue(c),Ve(c,"link",t),c._p=new Promise(function(p,w){c.onload=p,c.onerror=w}),c.addEventListener("load",function(){l.loading|=1}),c.addEventListener("error",function(){l.loading|=2}),l.loading|=4,Bs(o,i,a)}o={type:"stylesheet",instance:o,count:1,state:l},s.set(r,o)}}}function Gg(t,i){Xt.X(t,i);var n=An;if(n&&t){var a=Pi(n).hoistableScripts,s=Mn(t),r=a.get(s);r||(r=n.querySelector(xa(s)),r||(t=D({src:t,async:!0},i),(i=kt.get(s))&&il(t,i),r=n.createElement("script"),Ue(r),Ve(r,"link",t),n.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},a.set(s,r))}}function Hg(t,i){Xt.M(t,i);var n=An;if(n&&t){var a=Pi(n).hoistableScripts,s=Mn(t),r=a.get(s);r||(r=n.querySelector(xa(s)),r||(t=D({src:t,async:!0,type:"module"},i),(i=kt.get(s))&&il(t,i),r=n.createElement("script"),Ue(r),Ve(r,"link",t),n.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},a.set(s,r))}}function eu(t,i,n,a){var s=(s=$.current)?Rs(s):null;if(!s)throw Error(d(446));switch(t){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(i=Cn(n.href),n=Pi(s).hoistableStyles,a=n.get(i),a||(a={type:"style",instance:null,count:0,state:null},n.set(i,a)),a):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){t=Cn(n.href);var r=Pi(s).hoistableStyles,o=r.get(t);if(o||(s=s.ownerDocument||s,o={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},r.set(t,o),(r=s.querySelector(ya(t)))&&!r._p&&(o.instance=r,o.state.loading=5),kt.has(t)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},kt.set(t,n),r||_g(s,t,n,o.state))),i&&a===null)throw Error(d(528,""));return o}if(i&&a!==null)throw Error(d(529,""));return null;case"script":return i=n.async,n=n.src,typeof n=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Mn(n),n=Pi(s).hoistableScripts,a=n.get(i),a||(a={type:"script",instance:null,count:0,state:null},n.set(i,a)),a):{type:"void",instance:null,count:0,state:null};default:throw Error(d(444,t))}}function Cn(t){return'href="'+ft(t)+'"'}function ya(t){return'link[rel="stylesheet"]['+t+"]"}function tu(t){return D({},t,{"data-precedence":t.precedence,precedence:null})}function _g(t,i,n,a){t.querySelector('link[rel="preload"][as="style"]['+i+"]")?a.loading=1:(i=t.createElement("link"),a.preload=i,i.addEventListener("load",function(){return a.loading|=1}),i.addEventListener("error",function(){return a.loading|=2}),Ve(i,"link",n),Ue(i),t.head.appendChild(i))}function Mn(t){return'[src="'+ft(t)+'"]'}function xa(t){return"script[async]"+t}function iu(t,i,n){if(i.count++,i.instance===null)switch(i.type){case"style":var a=t.querySelector('style[data-href~="'+ft(n.href)+'"]');if(a)return i.instance=a,Ue(a),a;var s=D({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return a=(t.ownerDocument||t).createElement("style"),Ue(a),Ve(a,"style",s),Bs(a,n.precedence,t),i.instance=a;case"stylesheet":s=Cn(n.href);var r=t.querySelector(ya(s));if(r)return i.state.loading|=4,i.instance=r,Ue(r),r;a=tu(n),(s=kt.get(s))&&tl(a,s),r=(t.ownerDocument||t).createElement("link"),Ue(r);var o=r;return o._p=new Promise(function(l,c){o.onload=l,o.onerror=c}),Ve(r,"link",a),i.state.loading|=4,Bs(r,n.precedence,t),i.instance=r;case"script":return r=Mn(n.src),(s=t.querySelector(xa(r)))?(i.instance=s,Ue(s),s):(a=n,(s=kt.get(r))&&(a=D({},n),il(a,s)),t=t.ownerDocument||t,s=t.createElement("script"),Ue(s),Ve(s,"link",a),t.head.appendChild(s),i.instance=s);case"void":return null;default:throw Error(d(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(a=i.instance,i.state.loading|=4,Bs(a,n.precedence,t));return i.instance}function Bs(t,i,n){for(var a=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),s=a.length?a[a.length-1]:null,r=s,o=0;o<a.length;o++){var l=a[o];if(l.dataset.precedence===i)r=l;else if(r!==s)break}r?r.parentNode.insertBefore(t,r.nextSibling):(i=n.nodeType===9?n.head:n,i.insertBefore(t,i.firstChild))}function tl(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.title==null&&(t.title=i.title)}function il(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.integrity==null&&(t.integrity=i.integrity)}var zs=null;function nu(t,i,n){if(zs===null){var a=new Map,s=zs=new Map;s.set(n,a)}else s=zs,a=s.get(n),a||(a=new Map,s.set(n,a));if(a.has(t))return a;for(a.set(t,null),n=n.getElementsByTagName(t),s=0;s<n.length;s++){var r=n[s];if(!(r[qn]||r[He]||t==="link"&&r.getAttribute("rel")==="stylesheet")&&r.namespaceURI!=="http://www.w3.org/2000/svg"){var o=r.getAttribute(i)||"";o=t+o;var l=a.get(o);l?l.push(r):a.set(o,[r])}}return a}function au(t,i,n){t=t.ownerDocument||t,t.head.insertBefore(n,i==="title"?t.querySelector("head > title"):null)}function Ig(t,i,n){if(n===1||i.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;return i.rel==="stylesheet"?(t=i.disabled,typeof i.precedence=="string"&&t==null):!0;case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function su(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function Fg(t,i,n,a){if(n.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var s=Cn(a.href),r=i.querySelector(ya(s));if(r){i=r._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(t.count++,t=qs.bind(t),i.then(t,t)),n.state.loading|=4,n.instance=r,Ue(r);return}r=i.ownerDocument||i,a=tu(a),(s=kt.get(s))&&tl(a,s),r=r.createElement("link"),Ue(r);var o=r;o._p=new Promise(function(l,c){o.onload=l,o.onerror=c}),Ve(r,"link",a),n.instance=r}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(n,i),(i=n.state.preload)&&(n.state.loading&3)===0&&(t.count++,n=qs.bind(t),i.addEventListener("load",n),i.addEventListener("error",n))}}var nl=0;function Vg(t,i){return t.stylesheets&&t.count===0&&Ws(t,t.stylesheets),0<t.count||0<t.imgCount?function(n){var a=setTimeout(function(){if(t.stylesheets&&Ws(t,t.stylesheets),t.unsuspend){var r=t.unsuspend;t.unsuspend=null,r()}},6e4+i);0<t.imgBytes&&nl===0&&(nl=62500*Sg());var s=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Ws(t,t.stylesheets),t.unsuspend)){var r=t.unsuspend;t.unsuspend=null,r()}},(t.imgBytes>nl?50:800)+i);return t.unsuspend=n,function(){t.unsuspend=null,clearTimeout(a),clearTimeout(s)}}:null}function qs(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ws(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Ns=null;function Ws(t,i){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Ns=new Map,i.forEach(Jg,t),Ns=null,qs.call(t))}function Jg(t,i){if(!(i.state.loading&4)){var n=Ns.get(t);if(n)var a=n.get(null);else{n=new Map,Ns.set(t,n);for(var s=t.querySelectorAll("link[data-precedence],style[data-precedence]"),r=0;r<s.length;r++){var o=s[r];(o.nodeName==="LINK"||o.getAttribute("media")!=="not all")&&(n.set(o.dataset.precedence,o),a=o)}a&&n.set(null,a)}s=i.instance,o=s.getAttribute("data-precedence"),r=n.get(o)||a,r===a&&n.set(null,s),n.set(o,s),this.count++,a=qs.bind(this),s.addEventListener("load",a),s.addEventListener("error",a),r?r.parentNode.insertBefore(s,r.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(s,t.firstChild)),i.state.loading|=4}}var va={$$typeof:I,Provider:null,Consumer:null,_currentValue:H,_currentValue2:H,_threadCount:0};function Kg(t,i,n,a,s,r,o,l,c){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Xs(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xs(0),this.hiddenUpdates=Xs(null),this.identifierPrefix=a,this.onUncaughtError=s,this.onCaughtError=r,this.onRecoverableError=o,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=c,this.incompleteTransitions=new Map}function ru(t,i,n,a,s,r,o,l,c,p,w,S){return t=new Kg(t,i,n,o,c,p,w,S,l),i=1,r===!0&&(i|=24),r=lt(3,null,null,i),t.current=r,r.stateNode=t,i=Nr(),i.refCount++,t.pooledCache=i,i.refCount++,r.memoizedState={element:a,isDehydrated:n,cache:i},Lr(r),t}function ou(t){return t?(t=sn,t):sn}function lu(t,i,n,a,s,r){s=ou(s),a.context===null?a.context=s:a.pendingContext=s,a=oi(i),a.payload={element:n},r=r===void 0?null:r,r!==null&&(a.callback=r),n=li(t,a,i),n!==null&&(nt(n,t,i),Xn(n,t,i))}function cu(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<i?n:i}}function al(t,i){cu(t,i),(t=t.alternate)&&cu(t,i)}function du(t){if(t.tag===13||t.tag===31){var i=Ri(t,67108864);i!==null&&nt(i,t,67108864),al(t,67108864)}}function hu(t){if(t.tag===13||t.tag===31){var i=mt();i=Zs(i);var n=Ri(t,i);n!==null&&nt(n,t,i),al(t,i)}}var Os=!0;function Pg(t,i,n,a){var s=k.T;k.T=null;var r=M.p;try{M.p=2,sl(t,i,n,a)}finally{M.p=r,k.T=s}}function Yg(t,i,n,a){var s=k.T;k.T=null;var r=M.p;try{M.p=8,sl(t,i,n,a)}finally{M.p=r,k.T=s}}function sl(t,i,n,a){if(Os){var s=rl(a);if(s===null)Vo(t,i,a,Us,n),mu(t,a);else if(Xg(s,t,i,n,a))a.stopPropagation();else if(mu(t,a),i&4&&-1<Qg.indexOf(t)){for(;s!==null;){var r=Ki(s);if(r!==null)switch(r.tag){case 3:if(r=r.stateNode,r.current.memoizedState.isDehydrated){var o=Ai(r.pendingLanes);if(o!==0){var l=r;for(l.pendingLanes|=2,l.entangledLanes|=2;o;){var c=1<<31-rt(o);l.entanglements[1]|=c,o&=~c}Bt(r),(de&6)===0&&(bs=at()+500,ma(0))}}break;case 31:case 13:l=Ri(r,2),l!==null&&nt(l,r,2),ws(),al(r,2)}if(r=rl(a),r===null&&Vo(t,i,a,Us,n),r===s)break;s=r}s!==null&&a.stopPropagation()}else Vo(t,i,a,null,n)}}function rl(t){return t=or(t),ol(t)}var Us=null;function ol(t){if(Us=null,t=Ji(t),t!==null){var i=O(t);if(i===null)t=null;else{var n=i.tag;if(n===13){if(t=_(i),t!==null)return t;t=null}else if(n===31){if(t=X(i),t!==null)return t;t=null}else if(n===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null)}}return Us=t,null}function uu(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Nu()){case bl:return 2;case jl:return 8;case Ca:case Wu:return 32;case wl:return 268435456;default:return 32}default:return 32}}var ll=!1,vi=null,bi=null,ji=null,ba=new Map,ja=new Map,wi=[],Qg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function mu(t,i){switch(t){case"focusin":case"focusout":vi=null;break;case"dragenter":case"dragleave":bi=null;break;case"mouseover":case"mouseout":ji=null;break;case"pointerover":case"pointerout":ba.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":ja.delete(i.pointerId)}}function wa(t,i,n,a,s,r){return t===null||t.nativeEvent!==r?(t={blockedOn:i,domEventName:n,eventSystemFlags:a,nativeEvent:r,targetContainers:[s]},i!==null&&(i=Ki(i),i!==null&&du(i)),t):(t.eventSystemFlags|=a,i=t.targetContainers,s!==null&&i.indexOf(s)===-1&&i.push(s),t)}function Xg(t,i,n,a,s){switch(i){case"focusin":return vi=wa(vi,t,i,n,a,s),!0;case"dragenter":return bi=wa(bi,t,i,n,a,s),!0;case"mouseover":return ji=wa(ji,t,i,n,a,s),!0;case"pointerover":var r=s.pointerId;return ba.set(r,wa(ba.get(r)||null,t,i,n,a,s)),!0;case"gotpointercapture":return r=s.pointerId,ja.set(r,wa(ja.get(r)||null,t,i,n,a,s)),!0}return!1}function gu(t){var i=Ji(t.target);if(i!==null){var n=O(i);if(n!==null){if(i=n.tag,i===13){if(i=_(n),i!==null){t.blockedOn=i,Ml(t.priority,function(){hu(n)});return}}else if(i===31){if(i=X(n),i!==null){t.blockedOn=i,Ml(t.priority,function(){hu(n)});return}}else if(i===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ls(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var n=rl(t.nativeEvent);if(n===null){n=t.nativeEvent;var a=new n.constructor(n.type,n);rr=a,n.target.dispatchEvent(a),rr=null}else return i=Ki(n),i!==null&&du(i),t.blockedOn=n,!1;i.shift()}return!0}function fu(t,i,n){Ls(t)&&n.delete(i)}function Zg(){ll=!1,vi!==null&&Ls(vi)&&(vi=null),bi!==null&&Ls(bi)&&(bi=null),ji!==null&&Ls(ji)&&(ji=null),ba.forEach(fu),ja.forEach(fu)}function Gs(t,i){t.blockedOn===i&&(t.blockedOn=null,ll||(ll=!0,h.unstable_scheduleCallback(h.unstable_NormalPriority,Zg)))}var Hs=null;function pu(t){Hs!==t&&(Hs=t,h.unstable_scheduleCallback(h.unstable_NormalPriority,function(){Hs===t&&(Hs=null);for(var i=0;i<t.length;i+=3){var n=t[i],a=t[i+1],s=t[i+2];if(typeof a!="function"){if(ol(a||n)===null)continue;break}var r=Ki(n);r!==null&&(t.splice(i,3),i-=3,so(r,{pending:!0,data:s,method:n.method,action:a},a,s))}}))}function En(t){function i(c){return Gs(c,t)}vi!==null&&Gs(vi,t),bi!==null&&Gs(bi,t),ji!==null&&Gs(ji,t),ba.forEach(i),ja.forEach(i);for(var n=0;n<wi.length;n++){var a=wi[n];a.blockedOn===t&&(a.blockedOn=null)}for(;0<wi.length&&(n=wi[0],n.blockedOn===null);)gu(n),n.blockedOn===null&&wi.shift();if(n=(t.ownerDocument||t).$$reactFormReplay,n!=null)for(a=0;a<n.length;a+=3){var s=n[a],r=n[a+1],o=s[Xe]||null;if(typeof r=="function")o||pu(n);else if(o){var l=null;if(r&&r.hasAttribute("formAction")){if(s=r,o=r[Xe]||null)l=o.formAction;else if(ol(s)!==null)continue}else l=o.action;typeof l=="function"?n[a+1]=l:(n.splice(a,3),a-=3),pu(n)}}}function yu(){function t(r){r.canIntercept&&r.info==="react-transition"&&r.intercept({handler:function(){return new Promise(function(o){return s=o})},focusReset:"manual",scroll:"manual"})}function i(){s!==null&&(s(),s=null),a||setTimeout(n,20)}function n(){if(!a&&!navigation.transition){var r=navigation.currentEntry;r&&r.url!=null&&navigation.navigate(r.url,{state:r.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var a=!1,s=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(n,100),function(){a=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),s!==null&&(s(),s=null)}}}function cl(t){this._internalRoot=t}_s.prototype.render=cl.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(d(409));var n=i.current,a=mt();lu(n,a,t,i,null,null)},_s.prototype.unmount=cl.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;lu(t.current,2,null,t,null,null),ws(),i[Vi]=null}};function _s(t){this._internalRoot=t}_s.prototype.unstable_scheduleHydration=function(t){if(t){var i=Cl();t={blockedOn:null,target:t,priority:i};for(var n=0;n<wi.length&&i!==0&&i<wi[n].priority;n++);wi.splice(n,0,t),n===0&&gu(t)}};var xu=y.version;if(xu!=="19.2.4")throw Error(d(527,xu,"19.2.4"));M.findDOMNode=function(t){var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(d(188)):(t=Object.keys(t).join(","),Error(d(268,t)));return t=j(i),t=t!==null?U(t):null,t=t===null?null:t.stateNode,t};var $g={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:k,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Is=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Is.isDisabled&&Is.supportsFiber)try{Rn=Is.inject($g),st=Is}catch{}}return Ta.createRoot=function(t,i){if(!R(t))throw Error(d(299));var n=!1,a="",s=Sd,r=Ad,o=Cd;return i!=null&&(i.unstable_strictMode===!0&&(n=!0),i.identifierPrefix!==void 0&&(a=i.identifierPrefix),i.onUncaughtError!==void 0&&(s=i.onUncaughtError),i.onCaughtError!==void 0&&(r=i.onCaughtError),i.onRecoverableError!==void 0&&(o=i.onRecoverableError)),i=ru(t,1,!1,null,null,n,a,null,s,r,o,yu),t[Vi]=i.current,Fo(t),new cl(i)},Ta.hydrateRoot=function(t,i,n){if(!R(t))throw Error(d(299));var a=!1,s="",r=Sd,o=Ad,l=Cd,c=null;return n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onUncaughtError!==void 0&&(r=n.onUncaughtError),n.onCaughtError!==void 0&&(o=n.onCaughtError),n.onRecoverableError!==void 0&&(l=n.onRecoverableError),n.formState!==void 0&&(c=n.formState)),i=ru(t,1,!0,i,n??null,a,s,c,r,o,l,yu),i.context=ou(null),n=i.current,a=mt(),a=Zs(a),s=oi(a),s.callback=null,li(n,s,a),n=a,i.current.lanes=n,zn(i,n),Bt(i),t[Vi]=i.current,Fo(t),new _s(i)},Ta.version="19.2.4",Ta}var Mu;function df(){if(Mu)return ul.exports;Mu=1;function h(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(h)}catch(y){console.error(y)}}return h(),ul.exports=cf(),ul.exports}var hf=df();function uf({onToggleSidebar:h}){return e.jsxs("header",{className:"header",children:[e.jsx("button",{className:"menu-toggle",onClick:h,"aria-label":"Toggle menu",children:e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M3 12h18M3 6h18M3 18h18"})})}),e.jsxs("div",{className:"header-logo",children:[e.jsxs("svg",{viewBox:"0 0 28 28",fill:"none",children:[e.jsx("rect",{x:"2",y:"18",width:"24",height:"3",rx:"1",fill:"var(--accent)"}),e.jsx("rect",{x:"4",y:"21",width:"2",height:"4",rx:"0.5",fill:"var(--text-dim)"}),e.jsx("rect",{x:"10",y:"21",width:"2",height:"4",rx:"0.5",fill:"var(--text-dim)"}),e.jsx("rect",{x:"16",y:"21",width:"2",height:"4",rx:"0.5",fill:"var(--text-dim)"}),e.jsx("rect",{x:"22",y:"21",width:"2",height:"4",rx:"0.5",fill:"var(--text-dim)"}),e.jsx("rect",{x:"6",y:"8",width:"16",height:"10",rx:"2",fill:"var(--bg-raised)",stroke:"var(--accent)",strokeWidth:"1.5"}),e.jsx("circle",{cx:"11",cy:"13",r:"2",fill:"var(--accent)"}),e.jsx("circle",{cx:"17",cy:"13",r:"2",fill:"var(--accent)"}),e.jsx("rect",{x:"8",y:"5",width:"4",height:"4",rx:"1",fill:"var(--bg-raised)",stroke:"var(--accent)",strokeWidth:"1"})]}),e.jsx("span",{className:"header-title",children:"Railway Engineering Course"})]}),e.jsx("span",{className:"header-subtitle",children:"A course for the curious developer"})]})}const Zt={m0:{title:"Foundations",lessons:[{id:"m0-l1",title:"Why Railways Work",short:"0.1"},{id:"m0-l2",title:"The Eight Subsystems",short:"0.2"},{id:"m0-l3",title:"Developer's Mental Model",short:"0.3"}]},m1:{title:"Permanent Way",lessons:[{id:"m1-l1",title:"Track Structure",short:"1.1"},{id:"m1-l2",title:"Track Geometry",short:"1.2"},{id:"m1-l3",title:"Switches & Crossings",short:"1.3"},{id:"m1-l4",title:"Track Representations",short:"1.4"}]},m2:{title:"Civil & Geotechnical",lessons:[{id:"m2-l1",title:"Ground Investigation",short:"2.1"},{id:"m2-l2",title:"Earthworks",short:"2.2"},{id:"m2-l3",title:"Drainage & Stability",short:"2.3"}]},m3:{title:"Structures",lessons:[{id:"m3-l1",title:"Bridges",short:"3.1"},{id:"m3-l2",title:"Tunnels & Retaining Walls",short:"3.2"},{id:"m3-l3",title:"Stations & Clearances",short:"3.3"}]},m4:{title:"Signalling & Control",lessons:[{id:"m4-l1",title:"Block System & Signals",short:"4.1"},{id:"m4-l2",title:"Interlocking & Detection",short:"4.2"},{id:"m4-l3",title:"ETCS, CBTC & Future",short:"4.3"},{id:"m4-l4",title:"Points, Routes & Crossings",short:"4.4"}]},m5:{title:"Electrification & Power",lessons:[{id:"m5-l1",title:"Traction Power Systems",short:"5.1"},{id:"m5-l2",title:"Overhead Line Design",short:"5.2"},{id:"m5-l3",title:"Power Supply & Protection",short:"5.3"}]},m6:{title:"Rolling Stock",lessons:[{id:"m6-l1",title:"Vehicle Types & Architecture",short:"6.1"},{id:"m6-l2",title:"Traction, Braking & Dynamics",short:"6.2"},{id:"m6-l3",title:"Wheel-Rail Interface & Gauging",short:"6.3"}]},m7:{title:"Telecommunications",lessons:[{id:"m7-l1",title:"Radio & GSM-R",short:"7.1"},{id:"m7-l2",title:"Fibre Optic Networks & SCADA",short:"7.2"},{id:"m7-l3",title:"Passenger Information & Control Centres",short:"7.3"}]},m8:{title:"Operations & Timetabling",lessons:[{id:"m8-l1",title:"Timetabling & Scheduling",short:"8.1"},{id:"m8-l2",title:"Capacity & Possessions",short:"8.2"},{id:"m8-l3",title:"Performance & Delay Management",short:"8.3"}]},m9:{title:"Capstone",lessons:[{id:"m9-l1",title:"Project Lifecycle",short:"9.1"},{id:"m9-l2",title:"Key Interfaces & Integration",short:"9.2"},{id:"m9-l3",title:"Systems Engineering & Glossary",short:"9.3"}]}};function mf(){const h=[];return Object.values(Zt).forEach(y=>{y.lessons.forEach(b=>h.push(b.id))}),h}function pl(h){for(const[y,b]of Object.entries(Zt))if(b.lessons.some(d=>d.id===h))return y;return null}function Eu(h){const y=Zt[h];return y?.lessons[0]?y.lessons[0].id:h}function gf({currentPage:h,goTo:y,progress:b,isModuleComplete:d,pct:R,totalDone:O,totalItems:_,isOpen:X,onClose:C}){const[j,U]=Re.useState(()=>{const G=pl(h),F={};return G?F[G]=!0:F.m0=!0,F}),D=G=>{U(F=>({...F,[G]:!F[G]}))},J=pl(h);return Re.useEffect(()=>{J&&U(G=>({...G,[J]:!0}))},[J]),e.jsxs("nav",{className:`sidebar${X?" open":""}`,children:[e.jsx("div",{className:"progress-bar",children:e.jsx("div",{className:"progress-fill",style:{width:`${R}%`}})}),e.jsxs("div",{className:"progress-label",children:[O," / ",_," items completed"]}),e.jsx("div",{className:"nav-section-label",children:"Curriculum"}),e.jsxs("div",{className:`nav-item${h==="index"?" active":""}`,onClick:()=>{y("index"),C()},children:[e.jsx("span",{className:"nav-number",children:""}),e.jsx("span",{className:"nav-label",children:"Overview & Index"})]}),e.jsxs("div",{className:`nav-item${h==="symbols"?" active":""}`,onClick:()=>{y("symbols"),C()},children:[e.jsx("span",{className:"nav-number",children:""}),e.jsx("span",{className:"nav-label",children:"Symbol Lexicon"})]}),e.jsx("div",{className:"nav-section-label",children:"Modules"}),Object.entries(Zt).map(([G,F])=>{const re=F.lessons.filter(Z=>b.lessons[Z.id]).length,Ge=j[G],We=d(G);return e.jsxs("div",{className:`nav-group${Ge?" expanded":""}`,children:[e.jsxs("div",{className:`nav-group-header${J===G?" active":""}${We?" module-completed":""}`,onClick:()=>D(G),children:[e.jsx("span",{className:"nav-number",children:G.slice(1)}),e.jsx("span",{className:"nav-label",children:F.title}),e.jsxs("span",{className:"nav-group-progress",children:[re,"/",F.lessons.length]}),e.jsx("span",{className:"nav-group-chevron",children:""})]}),e.jsx("div",{className:"nav-group-lessons",children:F.lessons.map(Z=>e.jsxs("div",{className:`nav-item nav-lesson${h===Z.id?" active":""}${b.lessons[Z.id]?" completed":""}`,onClick:()=>{y(Z.id),C()},children:[e.jsx("span",{className:"nav-lesson-dot"}),e.jsxs("span",{className:"nav-label",children:[Z.short," ",Z.title]})]},Z.id))})]},G)})]})}function ff({goTo:h}){return e.jsxs("div",{className:"page-inner page-enter",children:[e.jsxs("div",{className:"hero",children:[e.jsx("h1",{children:"Railway Engineering"}),e.jsx("p",{className:"tagline",children:"A comprehensive course connecting every discipline  designed for a fullstack developer with a passion for trains."}),e.jsxs("div",{className:"meta",children:[e.jsx("span",{children:" 31 Lessons across 10 Modules"}),e.jsx("span",{children:" 6080 hours"}),e.jsx("span",{children:" Fully cross-referenced"})]})]}),e.jsxs("p",{children:["This course is organized into ",e.jsx("strong",{children:"10 modules"})," (with 31 lessons total) covering every railway engineering discipline. Each lesson includes expanded content, developer analogies, and a knowledge-check quiz."]}),e.jsx("p",{children:"Think of it like a software architecture: each discipline is a service with its own responsibilities, but they all communicate through shared interfaces and constraints."}),e.jsx("div",{className:"section-label",children:"Modules"}),e.jsx("div",{className:"module-cards",children:[{num:"0",id:"m0-l1",title:"Foundations  The Railway as a System",desc:"3 lessons: Physics, subsystems, and the developer's mental model"},{num:"1",id:"m1-l1",title:"Permanent Way (Track Engineering)",desc:"3 lessons: Track structure, geometry, switches & crossings"},{num:"2",id:"m2-l1",title:"Civil & Geotechnical Engineering",desc:"3 lessons: Ground investigation, earthworks, drainage"},{num:"3",id:"m3-l1",title:"Structures",desc:"3 lessons: Bridges, tunnels, stations & clearances"},{num:"4",id:"m4-l1",title:"Signalling & Train Control",desc:"4 lessons: Block systems, interlocking, ETCS, operations  the developer's favourite"},{num:"5",id:"m5-l1",title:"Electrification & Power Supply",desc:"3 lessons: Traction power, overhead line design, power supply & protection"},{num:"6",id:"m6-l1",title:"Rolling Stock",desc:"3 lessons: Vehicle types, traction & braking, wheel-rail interface & gauging"},{num:"7",id:"m7-l1",title:"Telecommunications & Control Systems",desc:"3 lessons: Radio & GSM-R, fibre & SCADA, passenger info & control centres"},{num:"8",id:"m8-l1",title:"Operations, Timetabling & Integration",desc:"3 lessons: Timetabling, capacity & possessions, performance & delays"},{num:"9",id:"m9-l1",title:"Capstone  How It All Fits Together",desc:"3 lessons: Project lifecycle, key interfaces, systems engineering"}].map(y=>e.jsxs("div",{className:"module-card",onClick:()=>h(y.id),children:[e.jsx("span",{className:"card-num",children:y.num}),e.jsxs("div",{className:"card-content",children:[e.jsx("div",{className:"card-title",children:y.title}),e.jsx("div",{className:"card-desc",children:y.desc})]}),e.jsx("span",{className:"card-arrow",children:""})]},y.id))}),e.jsx("div",{className:"section-label",children:"Reference"}),e.jsxs("div",{className:"module-card",onClick:()=>h("symbols"),children:[e.jsx("span",{className:"card-num",children:""}),e.jsxs("div",{className:"card-content",children:[e.jsx("div",{className:"card-title",children:"Symbol Lexicon"}),e.jsx("div",{className:"card-desc",children:"Every schematic symbol used across all 10 modules  at a glance, with links back to lessons"})]}),e.jsx("span",{className:"card-arrow",children:""})]}),e.jsx("h3",{children:"The Developer's Mental Model"}),e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Software Concept"}),e.jsx("th",{children:"Railway Equivalent"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{children:"Infrastructure / bare metal"}),e.jsx("td",{children:"Geotechnical & civil earthworks"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Network / physical layer"}),e.jsx("td",{children:"Track (permanent way)"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Protocol / transport layer"}),e.jsx("td",{children:"Signalling rules and interlocking"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Application logic"}),e.jsx("td",{children:"Train operations & timetabling"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"API contracts"}),e.jsx("td",{children:"Gauge, loading gauge, signalling interfaces"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Monitoring & observability"}),e.jsx("td",{children:"Telecommunications & SCADA"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Hardware"}),e.jsx("td",{children:"Rolling stock"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Power supply"}),e.jsx("td",{children:"Electrification"})]})]})]}),e.jsx("h3",{children:"Recommended Learning Path"}),e.jsx("div",{className:"timeline",children:[{week:"Weeks 12",links:[["m0-l1","Foundations"],["m1-l1","Track"]],text:"  visit a railway and observe track structure."},{week:"Weeks 34",links:[["m2-l1","Civil"],["m3-l1","Structures"]],text:"  focus on how the ground constrains track design."},{week:"Weeks 57",links:[["m4-l1","Signalling"]],text:" in depth  the richest module for a developer. Try a signalling sim."},{week:"Weeks 89",links:[["m5-l1","Electrification"],["m6-l1","Rolling Stock"]],text:"  focus on power, vehicle, and track interfaces."},{week:"Weeks 1011",links:[["m7-l1","Telecoms"],["m8-l1","Operations"]],text:"  explore real-time train data and timetabling."},{week:"Week 12",links:[["m9-l1","Capstone"]],text:"  review all connections. If you can explain the whole system, you've understood it."}].map((y,b)=>e.jsxs("div",{className:"timeline-item",children:[e.jsx("div",{className:"timeline-week",children:y.week}),e.jsxs("div",{className:"timeline-desc",children:[y.links.map(([d,R],O)=>e.jsxs("span",{children:[O>0&&" and ",e.jsx("span",{className:"connection-link",onClick:()=>h(d??""),children:R})]},d)),y.text]})]},b))}),e.jsxs("div",{className:"page-nav",children:[e.jsx("span",{}),e.jsx("div",{className:"page-nav-btn next",onClick:()=>h("m0-l1"),children:"Start: Foundations "})]})]})}function pf({goTo:h}){const y=[{module:"Foundations",moduleId:"m0",color:"var(--text-dim)",symbols:[{name:"Rail Cross-Section (I-beam)",desc:"The fundamental rail profile  an I-beam with head (wheel contact), web (vertical), and foot (load distribution). Standard rail: 60 kg/m (CEN60E1).",lessonId:"m0-l1",lessonLabel:"0.1 Why Railways Work",svg:e.jsxs("svg",{viewBox:"0 0 120 60",style:{width:"100%",maxWidth:"120px"},children:[e.jsx("rect",{x:"25",y:"5",width:"30",height:"6",fill:"var(--text-dim)",stroke:"var(--text-bright)",strokeWidth:"1.5"}),e.jsx("rect",{x:"35",y:"11",width:"10",height:"26",fill:"var(--text-dim)",stroke:"var(--text-bright)",strokeWidth:"1.5"}),e.jsx("rect",{x:"20",y:"37",width:"40",height:"6",fill:"var(--text-dim)",stroke:"var(--text-bright)",strokeWidth:"1.5"}),e.jsx("text",{x:"72",y:"12",fill:"var(--accent)",fontSize:"8",fontFamily:"JetBrains Mono, monospace",children:"head"}),e.jsx("text",{x:"72",y:"28",fill:"var(--accent)",fontSize:"8",fontFamily:"JetBrains Mono, monospace",children:"web"}),e.jsx("text",{x:"72",y:"44",fill:"var(--accent)",fontSize:"8",fontFamily:"JetBrains Mono, monospace",children:"foot"})]})},{name:"Standard Gauge (1,435 mm)",desc:"The distance between the inner faces of the two running rails, measured 14 mm below the rail surface. Used on ~60% of world railways.",lessonId:"m0-l3",lessonLabel:"0.3 Developer's Mental Model",svg:e.jsxs("svg",{viewBox:"0 0 160 50",style:{width:"100%",maxWidth:"160px"},children:[e.jsx("rect",{x:"10",y:"28",width:"140",height:"8",fill:"var(--bg-hover)",stroke:"var(--border)",strokeWidth:"1",rx:"1"}),e.jsx("rect",{x:"25",y:"16",width:"12",height:"14",fill:"var(--text-dim)",stroke:"var(--text-bright)",strokeWidth:"1"}),e.jsx("rect",{x:"123",y:"16",width:"12",height:"14",fill:"var(--text-dim)",stroke:"var(--text-bright)",strokeWidth:"1"}),e.jsx("line",{x1:"37",y1:"12",x2:"123",y2:"12",stroke:"var(--accent)",strokeWidth:"0.8"}),e.jsx("polygon",{points:"37,12 41,10 41,14",fill:"var(--accent)"}),e.jsx("polygon",{points:"123,12 119,10 119,14",fill:"var(--accent)"}),e.jsx("text",{x:"80",y:"9",fill:"var(--accent)",fontSize:"7",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"1,435 mm"})]})}]},{module:"Permanent Way",moduleId:"m1",color:"var(--accent)",symbols:[{name:"Track Layer Stack",desc:"The vertical structure supporting trains: rail  sleepers  ballast  sub-ballast  subgrade. Load distributes downward through each layer.",lessonId:"m1-l1",lessonLabel:"1.1 Track Structure",svg:e.jsx("svg",{viewBox:"0 0 130 80",style:{width:"100%",maxWidth:"130px"},children:[{y:4,h:10,label:"Rail",fill:"var(--text-bright)",op:.8},{y:16,h:10,label:"Sleeper",fill:"var(--accent)",op:.5},{y:28,h:12,label:"Ballast",fill:"var(--accent)",op:.35},{y:42,h:12,label:"Sub-ball.",fill:"var(--accent)",op:.2},{y:56,h:14,label:"Subgrade",fill:"var(--text-dim)",op:.2}].map((b,d)=>e.jsxs("g",{children:[e.jsx("rect",{x:"4",y:b.y,width:"80",height:b.h,fill:b.fill,opacity:b.op,stroke:"var(--text-bright)",strokeWidth:"0.5"}),e.jsx("text",{x:"90",y:b.y+b.h/2+3,fill:"var(--text-dim)",fontSize:"6",fontFamily:"JetBrains Mono, monospace",children:b.label})]},d))})},{name:"Cant / Superelevation",desc:"The outer rail is raised on curves to counteract centrifugal force. Cant deficiency (D) is the difference between applied cant and equilibrium cant.",lessonId:"m1-l2",lessonLabel:"1.2 Track Geometry",svg:e.jsxs("svg",{viewBox:"0 0 140 60",style:{width:"100%",maxWidth:"140px"},children:[e.jsx("line",{x1:"20",y1:"45",x2:"120",y2:"30",stroke:"var(--text-bright)",strokeWidth:"2.5"}),e.jsx("rect",{x:"25",y:"38",width:"6",height:"10",fill:"var(--accent)",transform:"rotate(-8.5 28 43)"}),e.jsx("rect",{x:"109",y:"23",width:"6",height:"10",fill:"var(--accent)",transform:"rotate(-8.5 112 28)"}),e.jsx("line",{x1:"125",y1:"22",x2:"125",y2:"45",stroke:"var(--blue)",strokeWidth:"0.8"}),e.jsx("text",{x:"130",y:"36",fill:"var(--blue)",fontSize:"7",fontFamily:"JetBrains Mono, monospace",children:"D"}),e.jsx("line",{x1:"70",y1:"38",x2:"70",y2:"20",stroke:"var(--accent-secondary)",strokeWidth:"0.8"}),e.jsx("polygon",{points:"70,20 67,24 73,24",fill:"var(--accent-secondary)"}),e.jsx("text",{x:"72",y:"17",fill:"var(--accent-secondary)",fontSize:"6",fontFamily:"JetBrains Mono, monospace",children:"gravity"})]})},{name:"Turnout (Switch & Crossing)",desc:"A track component allowing trains to diverge. Key parts: switch toe (moveable point), closure rails, and crossing (frog) where rails intersect.",lessonId:"m1-l3",lessonLabel:"1.3 Switches & Crossings",svg:e.jsxs("svg",{viewBox:"0 0 140 60",style:{width:"100%",maxWidth:"140px"},children:[e.jsx("line",{x1:"5",y1:"30",x2:"135",y2:"30",stroke:"var(--text-bright)",strokeWidth:"2"}),e.jsx("line",{x1:"35",y1:"30",x2:"135",y2:"12",stroke:"var(--text-bright)",strokeWidth:"1.5"}),e.jsx("circle",{cx:"35",cy:"30",r:"3",fill:"var(--accent)",stroke:"var(--accent)",strokeWidth:"1"}),e.jsx("line",{x1:"95",y1:"20",x2:"105",y2:"26",stroke:"var(--red)",strokeWidth:"1.5"}),e.jsx("line",{x1:"105",y1:"20",x2:"95",y2:"26",stroke:"var(--red)",strokeWidth:"1.5"}),e.jsx("text",{x:"35",y:"48",fill:"var(--accent)",fontSize:"6",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"toe"}),e.jsx("text",{x:"100",y:"14",fill:"var(--red)",fontSize:"6",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"crossing"})]})},{name:"Schematic Symbols (Track)",desc:"Standardised schematic drawing symbols used on signalling layouts: plain track, turnout, stop signal, distant signal, track section, buffer stop.",lessonId:"m1-l4",lessonLabel:"1.4 Track Representations",svg:e.jsxs("svg",{viewBox:"0 0 180 70",style:{width:"100%",maxWidth:"180px"},children:[e.jsx("line",{x1:"5",y1:"10",x2:"50",y2:"10",stroke:"var(--text-bright)",strokeWidth:"2"}),e.jsx("text",{x:"55",y:"13",fill:"var(--text-dim)",fontSize:"6",fontFamily:"JetBrains Mono, monospace",children:"track"}),e.jsx("line",{x1:"5",y1:"28",x2:"35",y2:"28",stroke:"var(--text-bright)",strokeWidth:"1.5"}),e.jsx("line",{x1:"20",y1:"28",x2:"50",y2:"18",stroke:"var(--text-bright)",strokeWidth:"1.5"}),e.jsx("text",{x:"55",y:"26",fill:"var(--text-dim)",fontSize:"6",fontFamily:"JetBrains Mono, monospace",children:"turnout"}),e.jsx("line",{x1:"12",y1:"42",x2:"12",y2:"52",stroke:"var(--text-bright)",strokeWidth:"1.5"}),e.jsx("circle",{cx:"12",cy:"38",r:"4",fill:"var(--red)",stroke:"var(--text-bright)",strokeWidth:"1"}),e.jsx("text",{x:"55",y:"42",fill:"var(--text-dim)",fontSize:"6",fontFamily:"JetBrains Mono, monospace",children:"stop sig."}),e.jsx("line",{x1:"5",y1:"62",x2:"25",y2:"62",stroke:"var(--text-bright)",strokeWidth:"1.5"}),e.jsx("line",{x1:"25",y1:"56",x2:"25",y2:"68",stroke:"var(--text-bright)",strokeWidth:"3"}),e.jsx("text",{x:"55",y:"65",fill:"var(--text-dim)",fontSize:"6",fontFamily:"JetBrains Mono, monospace",children:"buffer"}),e.jsx("line",{x1:"120",y1:"10",x2:"120",y2:"20",stroke:"var(--text-bright)",strokeWidth:"1.5"}),e.jsx("polygon",{points:"120,6 114,12 126,12",fill:"var(--accent)",stroke:"var(--text-bright)",strokeWidth:"0.8"}),e.jsx("text",{x:"133",y:"13",fill:"var(--text-dim)",fontSize:"6",fontFamily:"JetBrains Mono, monospace",children:"dist."})]})}]},{module:"Civil & Geotechnical",moduleId:"m2",color:"var(--accent)",symbols:[{name:"Borehole Log",desc:"A geological section showing subsurface layers encountered during ground investigation, with depth scale, groundwater level (GWL), and test results.",lessonId:"m2-l1",lessonLabel:"2.1 Ground Investigation",svg:e.jsxs("svg",{viewBox:"0 0 100 80",style:{width:"100%",maxWidth:"100px"},children:[[{y:5,h:14,label:"Topsoil",fill:"var(--accent-secondary)",op:.3},{y:19,h:18,label:"Clay",fill:"var(--accent)",op:.3},{y:37,h:18,label:"Sand",fill:"var(--accent)",op:.15},{y:55,h:18,label:"Rock",fill:"var(--text-dim)",op:.3}].map((b,d)=>e.jsxs("g",{children:[e.jsx("rect",{x:"20",y:b.y,width:"35",height:b.h,fill:b.fill,opacity:b.op,stroke:"var(--text-bright)",strokeWidth:"0.5"}),e.jsx("text",{x:"60",y:b.y+b.h/2+3,fill:"var(--text-dim)",fontSize:"6",fontFamily:"JetBrains Mono, monospace",children:b.label})]},d)),e.jsx("line",{x1:"18",y1:"30",x2:"57",y2:"30",stroke:"var(--blue)",strokeWidth:"0.8",strokeDasharray:"3,2"}),e.jsx("text",{x:"6",y:"33",fill:"var(--blue)",fontSize:"5",fontFamily:"JetBrains Mono, monospace",children:"GWL"}),e.jsx("text",{x:"16",y:"10",fill:"var(--text-dim)",fontSize:"5",fontFamily:"JetBrains Mono, monospace",textAnchor:"end",children:"0m"}),e.jsx("text",{x:"16",y:"76",fill:"var(--text-dim)",fontSize:"5",fontFamily:"JetBrains Mono, monospace",textAnchor:"end",children:"15m"})]})},{name:"Cutting & Embankment",desc:"Cutting: excavated below original ground level (OGL). Embankment: fill placed above OGL. Both create the railway formation at required levels.",lessonId:"m2-l2",lessonLabel:"2.2 Earthworks",svg:e.jsxs("svg",{viewBox:"0 0 180 55",style:{width:"100%",maxWidth:"180px"},children:[e.jsx("line",{x1:"5",y1:"15",x2:"30",y2:"35",stroke:"var(--text-bright)",strokeWidth:"1"}),e.jsx("line",{x1:"30",y1:"35",x2:"55",y2:"35",stroke:"var(--accent)",strokeWidth:"1.5"}),e.jsx("line",{x1:"55",y1:"35",x2:"80",y2:"15",stroke:"var(--text-bright)",strokeWidth:"1"}),e.jsx("line",{x1:"5",y1:"15",x2:"80",y2:"15",stroke:"var(--text-dim)",strokeWidth:"0.5",strokeDasharray:"3,2"}),e.jsx("text",{x:"42",y:"48",fill:"var(--text-dim)",fontSize:"6",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"cutting"}),e.jsx("line",{x1:"100",y1:"35",x2:"120",y2:"15",stroke:"var(--text-bright)",strokeWidth:"1"}),e.jsx("line",{x1:"120",y1:"15",x2:"155",y2:"15",stroke:"var(--accent)",strokeWidth:"1.5"}),e.jsx("line",{x1:"155",y1:"15",x2:"175",y2:"35",stroke:"var(--text-bright)",strokeWidth:"1"}),e.jsx("line",{x1:"100",y1:"35",x2:"175",y2:"35",stroke:"var(--text-dim)",strokeWidth:"0.5",strokeDasharray:"3,2"}),e.jsx("text",{x:"137",y:"48",fill:"var(--text-dim)",fontSize:"6",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"embankment"}),e.jsx("text",{x:"42",y:"12",fill:"var(--text-dim)",fontSize:"5",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"OGL"}),e.jsx("text",{x:"137",y:"40",fill:"var(--text-dim)",fontSize:"5",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"OGL"})]})},{name:"Track Drainage",desc:"Water percolates through ballast and is collected by cess drains at trackbed edges. Essential for formation stability and preventing frost heave.",lessonId:"m2-l3",lessonLabel:"2.3 Drainage & Stability",svg:e.jsxs("svg",{viewBox:"0 0 140 55",style:{width:"100%",maxWidth:"140px"},children:[e.jsx("rect",{x:"10",y:"5",width:"120",height:"8",fill:"var(--text-bright)",opacity:"0.5",stroke:"var(--text-bright)",strokeWidth:"0.5"}),e.jsx("text",{x:"70",y:"12",fill:"var(--bg)",fontSize:"5",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"rail + sleepers"}),e.jsx("rect",{x:"5",y:"13",width:"130",height:"14",fill:"var(--accent)",opacity:"0.15",stroke:"var(--text-bright)",strokeWidth:"0.5"}),e.jsx("text",{x:"70",y:"23",fill:"var(--text-dim)",fontSize:"5",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"ballast"}),e.jsx("rect",{x:"0",y:"27",width:"140",height:"10",fill:"var(--text-dim)",opacity:"0.15",stroke:"var(--text-bright)",strokeWidth:"0.5"}),e.jsx("text",{x:"70",y:"34",fill:"var(--text-dim)",fontSize:"5",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"formation"}),e.jsx("line",{x1:"40",y1:"16",x2:"12",y2:"38",stroke:"var(--blue)",strokeWidth:"0.6",strokeDasharray:"2,2"}),e.jsx("line",{x1:"100",y1:"16",x2:"128",y2:"38",stroke:"var(--blue)",strokeWidth:"0.6",strokeDasharray:"2,2"}),e.jsx("text",{x:"70",y:"48",fill:"var(--blue)",fontSize:"5",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:" cess drain      cess drain "})]})}]},{module:"Structures",moduleId:"m3",color:"var(--blue)",symbols:[{name:"Bridge Types",desc:"Three principal bridge forms: arch (compression), beam (bending), and box girder (torsion-resistant hollow section).",lessonId:"m3-l1",lessonLabel:"3.1 Bridges",svg:e.jsxs("svg",{viewBox:"0 0 180 55",style:{width:"100%",maxWidth:"180px"},children:[e.jsx("rect",{x:"2",y:"12",width:"6",height:"25",fill:"var(--border)",stroke:"var(--text-bright)",strokeWidth:"0.5"}),e.jsx("rect",{x:"47",y:"12",width:"6",height:"25",fill:"var(--border)",stroke:"var(--text-bright)",strokeWidth:"0.5"}),e.jsx("path",{d:"M 8,28 Q 27,8 47,28",fill:"none",stroke:"var(--text-bright)",strokeWidth:"1.2"}),e.jsx("line",{x1:"0",y1:"12",x2:"55",y2:"12",stroke:"var(--text-bright)",strokeWidth:"1"}),e.jsx("text",{x:"27",y:"48",fill:"var(--text-dim)",fontSize:"6",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"Arch"}),e.jsx("rect",{x:"65",y:"12",width:"45",height:"6",fill:"var(--border)",stroke:"var(--text-bright)",strokeWidth:"0.5"}),e.jsx("polygon",{points:"67,18 72,28 62,28",fill:"var(--text-dim)",stroke:"var(--text-bright)",strokeWidth:"0.5"}),e.jsx("polygon",{points:"108,18 113,28 103,28",fill:"var(--text-dim)",stroke:"var(--text-bright)",strokeWidth:"0.5"}),e.jsx("text",{x:"87",y:"48",fill:"var(--text-dim)",fontSize:"6",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"Beam"}),e.jsx("rect",{x:"125",y:"12",width:"45",height:"18",fill:"var(--border)",stroke:"var(--text-bright)",strokeWidth:"0.5"}),e.jsx("rect",{x:"133",y:"17",width:"29",height:"8",fill:"var(--bg)",stroke:"var(--text-bright)",strokeWidth:"0.5"}),e.jsx("text",{x:"147",y:"48",fill:"var(--text-dim)",fontSize:"6",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"Box"})]})},{name:"Tunnel Cross-Sections",desc:"Bored tunnel: circular profile from TBM. Cut-and-cover: rectangular profile, built in open trench then buried.",lessonId:"m3-l2",lessonLabel:"3.2 Tunnels & Retaining Walls",svg:e.jsxs("svg",{viewBox:"0 0 150 60",style:{width:"100%",maxWidth:"150px"},children:[e.jsx("circle",{cx:"35",cy:"28",r:"22",fill:"none",stroke:"var(--text-bright)",strokeWidth:"1.5"}),e.jsx("line",{x1:"15",y1:"40",x2:"55",y2:"40",stroke:"var(--accent)",strokeWidth:"1"}),e.jsx("text",{x:"35",y:"58",fill:"var(--text-dim)",fontSize:"6",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"Bored (TBM)"}),e.jsx("rect",{x:"80",y:"6",width:"50",height:"44",fill:"none",stroke:"var(--text-bright)",strokeWidth:"1.5",rx:"2"}),e.jsx("line",{x1:"82",y1:"40",x2:"128",y2:"40",stroke:"var(--accent)",strokeWidth:"1"}),e.jsx("text",{x:"105",y:"58",fill:"var(--text-dim)",fontSize:"6",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"Cut & Cover"})]})},{name:"Platform Layouts",desc:"Side platform: tracks between platforms. Island platform: platform between tracks. Bay platform: dead-end track within a through station.",lessonId:"m3-l3",lessonLabel:"3.3 Stations & Clearances",svg:e.jsxs("svg",{viewBox:"0 0 180 55",style:{width:"100%",maxWidth:"180px"},children:[e.jsx("rect",{x:"5",y:"5",width:"45",height:"6",fill:"var(--accent)",opacity:"0.3",stroke:"var(--accent)",strokeWidth:"0.5"}),e.jsx("line",{x1:"5",y1:"16",x2:"50",y2:"16",stroke:"var(--text-bright)",strokeWidth:"1.5"}),e.jsx("line",{x1:"5",y1:"22",x2:"50",y2:"22",stroke:"var(--text-bright)",strokeWidth:"1.5"}),e.jsx("rect",{x:"5",y:"27",width:"45",height:"6",fill:"var(--accent)",opacity:"0.3",stroke:"var(--accent)",strokeWidth:"0.5"}),e.jsx("text",{x:"27",y:"46",fill:"var(--text-dim)",fontSize:"6",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"Side"}),e.jsx("line",{x1:"65",y1:"8",x2:"110",y2:"8",stroke:"var(--text-bright)",strokeWidth:"1.5"}),e.jsx("rect",{x:"65",y:"14",width:"45",height:"10",fill:"var(--accent)",opacity:"0.3",stroke:"var(--accent)",strokeWidth:"0.5"}),e.jsx("line",{x1:"65",y1:"30",x2:"110",y2:"30",stroke:"var(--text-bright)",strokeWidth:"1.5"}),e.jsx("text",{x:"87",y:"46",fill:"var(--text-dim)",fontSize:"6",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"Island"}),e.jsx("line",{x1:"125",y1:"8",x2:"175",y2:"8",stroke:"var(--text-bright)",strokeWidth:"1.5"}),e.jsx("rect",{x:"125",y:"14",width:"45",height:"6",fill:"var(--accent)",opacity:"0.3",stroke:"var(--accent)",strokeWidth:"0.5"}),e.jsx("line",{x1:"125",y1:"24",x2:"160",y2:"24",stroke:"var(--text-bright)",strokeWidth:"1.5"}),e.jsx("line",{x1:"160",y1:"21",x2:"160",y2:"27",stroke:"var(--text-bright)",strokeWidth:"2.5"}),e.jsx("text",{x:"147",y:"46",fill:"var(--text-dim)",fontSize:"6",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"Bay"})]})}]},{module:"Signalling & Control",moduleId:"m4",color:"var(--red)",symbols:[{name:"Absolute Block Section",desc:"Only one train allowed in a block section at a time. Two signals define the section boundary. The foundation of railway safety.",lessonId:"m4-l1",lessonLabel:"4.1 Block System & Signals",svg:e.jsxs("svg",{viewBox:"0 0 160 50",style:{width:"100%",maxWidth:"160px"},children:[e.jsx("line",{x1:"5",y1:"30",x2:"155",y2:"30",stroke:"var(--text-bright)",strokeWidth:"2"}),e.jsx("line",{x1:"30",y1:"30",x2:"30",y2:"14",stroke:"var(--text-bright)",strokeWidth:"1.5"}),e.jsx("circle",{cx:"30",cy:"10",r:"5",fill:"var(--red)",stroke:"var(--text-bright)",strokeWidth:"1"}),e.jsx("line",{x1:"130",y1:"30",x2:"130",y2:"14",stroke:"var(--text-bright)",strokeWidth:"1.5"}),e.jsx("circle",{cx:"130",cy:"10",r:"5",fill:"var(--accent-secondary)",stroke:"var(--text-bright)",strokeWidth:"1"}),e.jsx("line",{x1:"30",y1:"40",x2:"130",y2:"40",stroke:"var(--accent)",strokeWidth:"0.8"}),e.jsx("line",{x1:"30",y1:"37",x2:"30",y2:"43",stroke:"var(--accent)",strokeWidth:"0.8"}),e.jsx("line",{x1:"130",y1:"37",x2:"130",y2:"43",stroke:"var(--accent)",strokeWidth:"0.8"}),e.jsx("text",{x:"80",y:"48",fill:"var(--accent)",fontSize:"6",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"block section"})]})},{name:"Track Circuit",desc:"Train detection using an electrical circuit through the rails. A battery energises a relay; a train axle short-circuits the rails, de-energising the relay.",lessonId:"m4-l2",lessonLabel:"4.2 Interlocking & Detection",svg:e.jsxs("svg",{viewBox:"0 0 160 50",style:{width:"100%",maxWidth:"160px"},children:[e.jsx("line",{x1:"10",y1:"15",x2:"150",y2:"15",stroke:"var(--text-bright)",strokeWidth:"1.5"}),e.jsx("line",{x1:"10",y1:"30",x2:"150",y2:"30",stroke:"var(--text-bright)",strokeWidth:"1.5"}),e.jsx("rect",{x:"10",y:"18",width:"18",height:"9",fill:"var(--bg-hover)",stroke:"var(--accent)",strokeWidth:"1",rx:"2"}),e.jsx("text",{x:"19",y:"25",fill:"var(--accent)",fontSize:"5",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"BAT"}),e.jsx("rect",{x:"132",y:"18",width:"18",height:"9",fill:"var(--bg-hover)",stroke:"var(--blue)",strokeWidth:"1",rx:"2"}),e.jsx("text",{x:"141",y:"25",fill:"var(--blue)",fontSize:"5",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"RLY"}),e.jsx("text",{x:"80",y:"10",fill:"var(--text-dim)",fontSize:"5",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"rail 1"}),e.jsx("text",{x:"80",y:"42",fill:"var(--text-dim)",fontSize:"5",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"rail 2  axle shorts circuit"})]})},{name:"ETCS Level 2",desc:"Digital train control: onboard EVC receives movement authority via GSM-R radio from the Radio Block Centre (RBC). Balises provide position references.",lessonId:"m4-l3",lessonLabel:"4.3 ETCS, CBTC & Future",svg:e.jsxs("svg",{viewBox:"0 0 180 55",style:{width:"100%",maxWidth:"180px"},children:[e.jsx("rect",{x:"5",y:"5",width:"35",height:"18",fill:"var(--bg-hover)",stroke:"var(--accent)",strokeWidth:"1",rx:"2"}),e.jsx("text",{x:"22",y:"17",fill:"var(--accent)",fontSize:"6",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"EVC"}),e.jsx("line",{x1:"40",y1:"14",x2:"65",y2:"14",stroke:"var(--blue)",strokeWidth:"0.8",strokeDasharray:"3,2"}),e.jsx("text",{x:"52",y:"10",fill:"var(--blue)",fontSize:"5",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"radio"}),e.jsx("rect",{x:"65",y:"5",width:"35",height:"18",fill:"var(--bg-hover)",stroke:"var(--blue)",strokeWidth:"1",rx:"2"}),e.jsx("text",{x:"82",y:"17",fill:"var(--blue)",fontSize:"6",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"RBC"}),e.jsx("line",{x1:"100",y1:"14",x2:"120",y2:"14",stroke:"var(--text-dim)",strokeWidth:"0.8"}),e.jsx("rect",{x:"120",y:"5",width:"30",height:"18",fill:"var(--bg-hover)",stroke:"var(--text-dim)",strokeWidth:"1",rx:"2"}),e.jsx("text",{x:"135",y:"17",fill:"var(--text-dim)",fontSize:"6",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"IXL"}),e.jsx("line",{x1:"5",y1:"38",x2:"175",y2:"38",stroke:"var(--text-bright)",strokeWidth:"1.5"}),e.jsx("rect",{x:"30",y:"35",width:"8",height:"6",fill:"var(--accent)",rx:"1"}),e.jsx("rect",{x:"80",y:"35",width:"8",height:"6",fill:"var(--accent)",rx:"1"}),e.jsx("text",{x:"90",y:"50",fill:"var(--accent)",fontSize:"5",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"balises"}),e.jsx("line",{x1:"5",y1:"46",x2:"130",y2:"46",stroke:"var(--accent-secondary)",strokeWidth:"0.6",strokeDasharray:"4,2"}),e.jsx("text",{x:"67",y:"53",fill:"var(--accent-secondary)",fontSize:"5",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:" movement authority "})]})},{name:"Point Machine & Level Crossing",desc:"Point machine: electro-mechanical device that moves and locks switch blades. Level crossing: where a road crosses the railway at grade, protected by barriers.",lessonId:"m4-l4",lessonLabel:"4.4 Points, Routes & Crossings",svg:e.jsxs("svg",{viewBox:"0 0 180 50",style:{width:"100%",maxWidth:"180px"},children:[e.jsx("line",{x1:"5",y1:"25",x2:"75",y2:"25",stroke:"var(--text-bright)",strokeWidth:"1.5"}),e.jsx("line",{x1:"25",y1:"25",x2:"65",y2:"10",stroke:"var(--text-bright)",strokeWidth:"1"}),e.jsx("rect",{x:"30",y:"28",width:"16",height:"12",fill:"var(--bg-hover)",stroke:"var(--accent)",strokeWidth:"1",rx:"2"}),e.jsx("text",{x:"38",y:"37",fill:"var(--accent)",fontSize:"6",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"M"}),e.jsx("line",{x1:"100",y1:"25",x2:"175",y2:"25",stroke:"var(--text-bright)",strokeWidth:"1.5"}),e.jsx("line",{x1:"130",y1:"5",x2:"130",y2:"45",stroke:"var(--text-dim)",strokeWidth:"1.5"}),e.jsx("line",{x1:"120",y1:"15",x2:"130",y2:"15",stroke:"var(--red)",strokeWidth:"1.5"}),e.jsx("line",{x1:"130",y1:"35",x2:"140",y2:"35",stroke:"var(--red)",strokeWidth:"1.5"}),e.jsx("text",{x:"130",y:"50",fill:"var(--text-dim)",fontSize:"5",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"LX"}),e.jsx("text",{x:"145",y:"10",fill:"var(--text-dim)",fontSize:"5",fontFamily:"JetBrains Mono, monospace",children:"road"})]})}]},{module:"Electrification & Power",moduleId:"m5",color:"var(--accent)",symbols:[{name:"OLE & Third Rail",desc:"Two traction power delivery methods: overhead line (25 kV AC via pantograph) and third rail (660750 V DC via collector shoe).",lessonId:"m5-l1",lessonLabel:"5.1 Traction Power Systems",svg:e.jsxs("svg",{viewBox:"0 0 180 55",style:{width:"100%",maxWidth:"180px"},children:[e.jsx("line",{x1:"25",y1:"45",x2:"25",y2:"5",stroke:"var(--text-bright)",strokeWidth:"1.5"}),e.jsx("line",{x1:"15",y1:"12",x2:"55",y2:"12",stroke:"var(--text-bright)",strokeWidth:"1"}),e.jsx("line",{x1:"10",y1:"45",x2:"60",y2:"45",stroke:"var(--text-bright)",strokeWidth:"1.5"}),e.jsx("text",{x:"35",y:"35",fill:"var(--accent)",fontSize:"6",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"25kV"}),e.jsx("text",{x:"35",y:"55",fill:"var(--text-dim)",fontSize:"6",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"OLE"}),e.jsx("line",{x1:"100",y1:"38",x2:"170",y2:"38",stroke:"var(--text-bright)",strokeWidth:"1.5"}),e.jsx("line",{x1:"100",y1:"45",x2:"170",y2:"45",stroke:"var(--text-bright)",strokeWidth:"1.5"}),e.jsx("line",{x1:"105",y1:"33",x2:"165",y2:"33",stroke:"var(--accent)",strokeWidth:"2"}),e.jsx("text",{x:"135",y:"28",fill:"var(--accent)",fontSize:"6",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"750V DC"}),e.jsx("text",{x:"135",y:"55",fill:"var(--text-dim)",fontSize:"6",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"Third Rail"})]})},{name:"Catenary System",desc:"Catenary wire suspended between masts supports the contact wire via droppers. Maintains consistent wire height for pantograph collection.",lessonId:"m5-l2",lessonLabel:"5.2 Overhead Line Design",svg:e.jsxs("svg",{viewBox:"0 0 180 55",style:{width:"100%",maxWidth:"180px"},children:[e.jsx("line",{x1:"20",y1:"45",x2:"20",y2:"5",stroke:"var(--text-bright)",strokeWidth:"1.5"}),e.jsx("line",{x1:"160",y1:"45",x2:"160",y2:"5",stroke:"var(--text-bright)",strokeWidth:"1.5"}),e.jsx("path",{d:"M 20,8 Q 90,22 160,8",fill:"none",stroke:"var(--text-dim)",strokeWidth:"1"}),e.jsx("line",{x1:"20",y1:"35",x2:"160",y2:"35",stroke:"var(--accent)",strokeWidth:"1.5"}),e.jsx("line",{x1:"60",y1:"14",x2:"60",y2:"35",stroke:"var(--text-dim)",strokeWidth:"0.5"}),e.jsx("line",{x1:"90",y1:"18",x2:"90",y2:"35",stroke:"var(--text-dim)",strokeWidth:"0.5"}),e.jsx("line",{x1:"120",y1:"14",x2:"120",y2:"35",stroke:"var(--text-dim)",strokeWidth:"0.5"}),e.jsx("text",{x:"90",y:"5",fill:"var(--text-dim)",fontSize:"5",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"catenary"}),e.jsx("text",{x:"90",y:"44",fill:"var(--accent)",fontSize:"5",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"contact wire"}),e.jsx("text",{x:"55",y:"28",fill:"var(--text-dim)",fontSize:"5",fontFamily:"JetBrains Mono, monospace",children:"droppers"})]})},{name:"Traction Power Chain",desc:"Power flows: national grid  feeder station  track sectioning cabin (TSC)  25 kV overhead line  train.",lessonId:"m5-l3",lessonLabel:"5.3 Power Supply & Protection",svg:e.jsx("svg",{viewBox:"0 0 180 30",style:{width:"100%",maxWidth:"180px"},children:["GRID","FEEDER","TSC","25kV","TRAIN"].map((b,d)=>e.jsxs("g",{children:[e.jsx("rect",{x:d*36+2,y:"5",width:"30",height:"16",fill:"var(--bg-hover)",stroke:d===4?"var(--accent)":"var(--text-dim)",strokeWidth:"1",rx:"2"}),e.jsx("text",{x:d*36+17,y:"16",fill:d===4?"var(--accent)":"var(--text-dim)",fontSize:"5",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:b}),d<4&&e.jsx("text",{x:d*36+35,y:"16",fill:"var(--text-dim)",fontSize:"7",fontFamily:"JetBrains Mono, monospace",children:""})]},d))})}]},{module:"Rolling Stock",moduleId:"m6",color:"var(--accent)",symbols:[{name:"Vehicle Types",desc:"Locomotive: power unit only. EMU: distributed traction, self-propelled. Freight wagon: unpowered, hauled by locomotive.",lessonId:"m6-l1",lessonLabel:"6.1 Vehicle Types & Architecture",svg:e.jsxs("svg",{viewBox:"0 0 180 45",style:{width:"100%",maxWidth:"180px"},children:[e.jsx("rect",{x:"5",y:"8",width:"40",height:"16",fill:"var(--bg-hover)",stroke:"var(--accent)",strokeWidth:"1",rx:"2"}),e.jsx("circle",{cx:"15",cy:"30",r:"4",fill:"none",stroke:"var(--text-bright)",strokeWidth:"1"}),e.jsx("circle",{cx:"35",cy:"30",r:"4",fill:"none",stroke:"var(--text-bright)",strokeWidth:"1"}),e.jsx("text",{x:"25",y:"43",fill:"var(--text-dim)",fontSize:"5",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"Loco"}),e.jsx("rect",{x:"65",y:"8",width:"50",height:"16",fill:"var(--bg-hover)",stroke:"var(--blue)",strokeWidth:"1",rx:"2"}),e.jsx("circle",{cx:"75",cy:"30",r:"4",fill:"none",stroke:"var(--text-bright)",strokeWidth:"1"}),e.jsx("circle",{cx:"105",cy:"30",r:"4",fill:"none",stroke:"var(--text-bright)",strokeWidth:"1"}),e.jsx("line",{x1:"90",y1:"8",x2:"90",y2:"2",stroke:"var(--accent)",strokeWidth:"1"}),e.jsx("line",{x1:"85",y1:"2",x2:"95",y2:"2",stroke:"var(--accent)",strokeWidth:"1"}),e.jsx("text",{x:"90",y:"43",fill:"var(--text-dim)",fontSize:"5",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"EMU"}),e.jsx("rect",{x:"130",y:"8",width:"40",height:"14",fill:"var(--bg-hover)",stroke:"var(--text-dim)",strokeWidth:"1",rx:"1"}),e.jsx("circle",{cx:"140",cy:"30",r:"4",fill:"none",stroke:"var(--text-bright)",strokeWidth:"1"}),e.jsx("circle",{cx:"160",cy:"30",r:"4",fill:"none",stroke:"var(--text-bright)",strokeWidth:"1"}),e.jsx("text",{x:"150",y:"43",fill:"var(--text-dim)",fontSize:"5",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"Wagon"})]})},{name:"Traction Power Flow",desc:"25 kV AC  main transformer  inverter (VVVF)  traction motor  wheel. Regenerative braking reverses the flow.",lessonId:"m6-l2",lessonLabel:"6.2 Traction, Braking & Dynamics",svg:e.jsx("svg",{viewBox:"0 0 180 30",style:{width:"100%",maxWidth:"180px"},children:["25kV","XFMR","INV","MOTOR","WHEEL"].map((b,d)=>e.jsxs("g",{children:[e.jsx("rect",{x:d*36+2,y:"5",width:"30",height:"16",fill:"var(--bg-hover)",stroke:d===0?"var(--accent)":"var(--text-dim)",strokeWidth:"1",rx:"2"}),e.jsx("text",{x:d*36+17,y:"16",fill:d===0?"var(--accent)":"var(--text-dim)",fontSize:"5",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:b}),d<4&&e.jsx("text",{x:d*36+35,y:"16",fill:"var(--text-dim)",fontSize:"7",fontFamily:"JetBrains Mono, monospace",children:""})]},d))})},{name:"Wheel Profile",desc:"Conical tread (1:20 taper) provides self-centring. The flange prevents derailment. Tread contact patch is ~1 cm.",lessonId:"m6-l3",lessonLabel:"6.3 Wheel-Rail Interface",svg:e.jsxs("svg",{viewBox:"0 0 120 55",style:{width:"100%",maxWidth:"120px"},children:[e.jsx("rect",{x:"35",y:"38",width:"50",height:"8",fill:"var(--text-dim)",stroke:"var(--text-bright)",strokeWidth:"0.5"}),e.jsx("text",{x:"60",y:"53",fill:"var(--text-dim)",fontSize:"6",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"rail"}),e.jsx("rect",{x:"30",y:"14",width:"55",height:"24",fill:"var(--bg-hover)",stroke:"var(--text-bright)",strokeWidth:"1",rx:"2"}),e.jsx("rect",{x:"22",y:"28",width:"10",height:"12",fill:"var(--accent)",opacity:"0.5",stroke:"var(--accent)",strokeWidth:"1",rx:"1"}),e.jsx("text",{x:"10",y:"36",fill:"var(--accent)",fontSize:"6",fontFamily:"JetBrains Mono, monospace",children:"flange"}),e.jsx("text",{x:"60",y:"29",fill:"var(--text-dim)",fontSize:"6",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"tread 1:20"})]})}]},{module:"Telecommunications",moduleId:"m7",color:"var(--blue)",symbols:[{name:"GSM-R Network",desc:"Dedicated railway radio: cab radio  base transceiver station (BTS)  base station controller (BSC)  mobile switching centre (MSC)  control centre.",lessonId:"m7-l1",lessonLabel:"7.1 Radio & GSM-R",svg:e.jsx("svg",{viewBox:"0 0 180 30",style:{width:"100%",maxWidth:"180px"},children:["Train","BTS","BSC","MSC","Control"].map((b,d)=>e.jsxs("g",{children:[e.jsx("rect",{x:d*36+2,y:"5",width:"30",height:"16",fill:"var(--bg-hover)",stroke:d===0?"var(--accent)":"var(--blue)",strokeWidth:"1",rx:"2"}),e.jsx("text",{x:d*36+17,y:"16",fill:d===0?"var(--accent)":"var(--blue)",fontSize:"5",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:b}),d<4&&e.jsx("text",{x:d*36+35,y:"16",fill:"var(--text-dim)",fontSize:"7",fontFamily:"JetBrains Mono, monospace",children:""})]},d))})},{name:"Fibre Ring Topology",desc:"Resilient ring: traffic can route in either direction. If one link fails, traffic automatically reverses around the ring.",lessonId:"m7-l2",lessonLabel:"7.2 Fibre Optic Networks",svg:e.jsxs("svg",{viewBox:"0 0 100 70",style:{width:"100%",maxWidth:"100px"},children:[[{x:15,y:5,label:"Stn A"},{x:60,y:5,label:"Stn B"},{x:60,y:40,label:"Stn C"},{x:15,y:40,label:"Stn D"}].map((b,d)=>e.jsxs("g",{children:[e.jsx("rect",{x:b.x,y:b.y,width:"28",height:"14",fill:"var(--bg-hover)",stroke:"var(--blue)",strokeWidth:"1",rx:"2"}),e.jsx("text",{x:b.x+14,y:b.y+10,fill:"var(--blue)",fontSize:"5",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:b.label})]},d)),e.jsx("line",{x1:"43",y1:"12",x2:"60",y2:"12",stroke:"var(--accent-secondary)",strokeWidth:"1"}),e.jsx("line",{x1:"88",y1:"19",x2:"88",y2:"40",stroke:"var(--accent-secondary)",strokeWidth:"1"}),e.jsx("line",{x1:"60",y1:"47",x2:"43",y2:"47",stroke:"var(--accent-secondary)",strokeWidth:"1"}),e.jsx("line",{x1:"15",y1:"40",x2:"15",y2:"19",stroke:"var(--accent-secondary)",strokeWidth:"1"}),e.jsx("text",{x:"50",y:"66",fill:"var(--text-dim)",fontSize:"5",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"resilient ring"})]})},{name:"PIS Data Flow",desc:"Darwin (real-time data)  CIS server  station displays, PA system, and passenger apps. The passenger information chain.",lessonId:"m7-l3",lessonLabel:"7.3 Passenger Information",svg:e.jsxs("svg",{viewBox:"0 0 160 45",style:{width:"100%",maxWidth:"160px"},children:[e.jsx("rect",{x:"5",y:"12",width:"35",height:"16",fill:"var(--bg-hover)",stroke:"var(--blue)",strokeWidth:"1",rx:"2"}),e.jsx("text",{x:"22",y:"23",fill:"var(--blue)",fontSize:"6",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"Darwin"}),e.jsx("text",{x:"47",y:"22",fill:"var(--text-dim)",fontSize:"7",fontFamily:"JetBrains Mono, monospace",children:""}),e.jsx("rect",{x:"55",y:"12",width:"35",height:"16",fill:"var(--bg-hover)",stroke:"var(--accent)",strokeWidth:"1",rx:"2"}),e.jsx("text",{x:"72",y:"23",fill:"var(--accent)",fontSize:"6",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"CIS"}),e.jsx("text",{x:"97",y:"15",fill:"var(--text-dim)",fontSize:"7",fontFamily:"JetBrains Mono, monospace",children:""}),e.jsx("text",{x:"97",y:"22",fill:"var(--text-dim)",fontSize:"7",fontFamily:"JetBrains Mono, monospace",children:""}),e.jsx("text",{x:"97",y:"29",fill:"var(--text-dim)",fontSize:"7",fontFamily:"JetBrains Mono, monospace",children:""}),e.jsx("text",{x:"110",y:"12",fill:"var(--text-dim)",fontSize:"5",fontFamily:"JetBrains Mono, monospace",children:"Displays"}),e.jsx("text",{x:"110",y:"22",fill:"var(--text-dim)",fontSize:"5",fontFamily:"JetBrains Mono, monospace",children:"PA"}),e.jsx("text",{x:"110",y:"32",fill:"var(--text-dim)",fontSize:"5",fontFamily:"JetBrains Mono, monospace",children:"App"})]})}]},{module:"Operations & Timetabling",moduleId:"m8",color:"var(--accent-secondary)",symbols:[{name:"Time-Distance Diagram",desc:"The fundamental timetable planning tool. Time on X-axis, distance (stations) on Y-axis. Line slope = speed; horizontal = dwell. Where lines cross, trains pass.",lessonId:"m8-l1",lessonLabel:"8.1 Timetabling & Scheduling",svg:e.jsxs("svg",{viewBox:"0 0 140 65",style:{width:"100%",maxWidth:"140px"},children:[e.jsx("line",{x1:"25",y1:"5",x2:"25",y2:"50",stroke:"var(--text-dim)",strokeWidth:"0.8"}),e.jsx("line",{x1:"25",y1:"50",x2:"135",y2:"50",stroke:"var(--text-dim)",strokeWidth:"0.8"}),e.jsx("text",{x:"22",y:"14",fill:"var(--text-dim)",fontSize:"5",fontFamily:"JetBrains Mono, monospace",textAnchor:"end",children:"A"}),e.jsx("text",{x:"22",y:"32",fill:"var(--text-dim)",fontSize:"5",fontFamily:"JetBrains Mono, monospace",textAnchor:"end",children:"B"}),e.jsx("text",{x:"22",y:"50",fill:"var(--text-dim)",fontSize:"5",fontFamily:"JetBrains Mono, monospace",textAnchor:"end",children:"C"}),e.jsx("line",{x1:"25",y1:"10",x2:"135",y2:"10",stroke:"var(--border)",strokeWidth:"0.3",strokeDasharray:"2,3"}),e.jsx("line",{x1:"25",y1:"30",x2:"135",y2:"30",stroke:"var(--border)",strokeWidth:"0.3",strokeDasharray:"2,3"}),e.jsx("polyline",{points:"35,10 70,30 75,30 120,48",fill:"none",stroke:"var(--accent)",strokeWidth:"1.2"}),e.jsx("polyline",{points:"50,10 80,30 90,30 130,48",fill:"none",stroke:"var(--blue)",strokeWidth:"1.2"}),e.jsx("text",{x:"80",y:"60",fill:"var(--text-dim)",fontSize:"5",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"time "})]})},{name:"Flat Junction Conflict",desc:"Where routes cross at grade, conflicting movements consume capacity. Each branch train blocks the main line for 24 minutes.",lessonId:"m8-l2",lessonLabel:"8.2 Capacity & Possessions",svg:e.jsxs("svg",{viewBox:"0 0 160 50",style:{width:"100%",maxWidth:"160px"},children:[e.jsx("line",{x1:"5",y1:"22",x2:"155",y2:"22",stroke:"var(--text-bright)",strokeWidth:"1.5"}),e.jsx("line",{x1:"5",y1:"30",x2:"155",y2:"30",stroke:"var(--text-bright)",strokeWidth:"1.5"}),e.jsx("line",{x1:"75",y1:"22",x2:"130",y2:"5",stroke:"var(--text-bright)",strokeWidth:"1.5"}),e.jsx("circle",{cx:"78",cy:"26",r:"8",fill:"none",stroke:"var(--red)",strokeWidth:"1",strokeDasharray:"2,2"}),e.jsx("text",{x:"78",y:"29",fill:"var(--red)",fontSize:"5",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:""}),e.jsx("text",{x:"78",y:"46",fill:"var(--text-dim)",fontSize:"5",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"conflict point"}),e.jsx("text",{x:"135",y:"8",fill:"var(--accent)",fontSize:"5",fontFamily:"JetBrains Mono, monospace",children:"branch"})]})},{name:"Disruption Response Flow",desc:"Incident triggers a decision: short-turn/cancel, divert/reroute, or bus replacement. All paths lead to recovery and normal service.",lessonId:"m8-l3",lessonLabel:"8.3 Performance & Delay",svg:e.jsxs("svg",{viewBox:"0 0 180 55",style:{width:"100%",maxWidth:"180px"},children:[e.jsx("rect",{x:"65",y:"2",width:"50",height:"14",fill:"var(--red)",opacity:"0.2",stroke:"var(--red)",strokeWidth:"1",rx:"2"}),e.jsx("text",{x:"90",y:"12",fill:"var(--red)",fontSize:"6",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"INCIDENT"}),e.jsx("line",{x1:"90",y1:"16",x2:"30",y2:"26",stroke:"var(--text-dim)",strokeWidth:"0.6"}),e.jsx("line",{x1:"90",y1:"16",x2:"90",y2:"26",stroke:"var(--text-dim)",strokeWidth:"0.6"}),e.jsx("line",{x1:"90",y1:"16",x2:"150",y2:"26",stroke:"var(--text-dim)",strokeWidth:"0.6"}),e.jsx("rect",{x:"5",y:"26",width:"50",height:"12",fill:"var(--bg-hover)",stroke:"var(--accent)",strokeWidth:"0.8",rx:"2"}),e.jsx("text",{x:"30",y:"35",fill:"var(--accent)",fontSize:"5",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"Cancel/Turn"}),e.jsx("rect",{x:"65",y:"26",width:"50",height:"12",fill:"var(--bg-hover)",stroke:"var(--blue)",strokeWidth:"0.8",rx:"2"}),e.jsx("text",{x:"90",y:"35",fill:"var(--blue)",fontSize:"5",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"Divert"}),e.jsx("rect",{x:"125",y:"26",width:"50",height:"12",fill:"var(--bg-hover)",stroke:"var(--accent-secondary)",strokeWidth:"0.8",rx:"2"}),e.jsx("text",{x:"150",y:"35",fill:"var(--accent-secondary)",fontSize:"5",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"Bus Repl."}),e.jsx("text",{x:"90",y:"50",fill:"var(--text-dim)",fontSize:"5",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:" recovery  normal service"})]})}]},{module:"Capstone",moduleId:"m9",color:"var(--accent-secondary)",symbols:[{name:"GRIP Project Stages",desc:"8-stage lifecycle: Output Definition  Feasibility  Option Selection  Single Option  Detail Design  Build  T&C  Close Out.",lessonId:"m9-l1",lessonLabel:"9.1 Project Lifecycle",svg:e.jsxs("svg",{viewBox:"0 0 180 30",style:{width:"100%",maxWidth:"180px"},children:[[{label:"1",c:"var(--text-dim)"},{label:"2",c:"var(--text-dim)"},{label:"3",c:"var(--blue)"},{label:"4",c:"var(--blue)"},{label:"5",c:"var(--accent)"},{label:"6",c:"var(--accent)"},{label:"7",c:"var(--accent-secondary)"},{label:"8",c:"var(--accent-secondary)"}].map((b,d)=>e.jsxs("g",{children:[e.jsx("rect",{x:d*22+2,y:"5",width:"18",height:"14",fill:"var(--bg-hover)",stroke:b.c,strokeWidth:"1",rx:"2"}),e.jsx("text",{x:d*22+11,y:"15",fill:b.c,fontSize:"7",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",fontWeight:"bold",children:b.label}),d<7&&e.jsx("text",{x:d*22+22,y:"15",fill:"var(--text-dim)",fontSize:"5",fontFamily:"JetBrains Mono, monospace",children:""})]},d)),e.jsx("text",{x:"90",y:"28",fill:"var(--text-dim)",fontSize:"5",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"define  design  build  deliver"})]})},{name:"Interface Matrix",desc:"Disciplines are interconnected: Track  Signalling  E&P  Telecoms  Civils  Structures  Rolling Stock. Failures cluster at interfaces.",lessonId:"m9-l2",lessonLabel:"9.2 Key Interfaces",svg:e.jsxs("svg",{viewBox:"0 0 120 65",style:{width:"100%",maxWidth:"120px"},children:[[{x:50,y:3,l:"Track"},{x:85,y:18,l:"Sig"},{x:85,y:40,l:"E&P"},{x:50,y:55,l:"Tel"},{x:15,y:40,l:"Civ"},{x:15,y:18,l:"RS"}].map((b,d)=>e.jsxs("g",{children:[e.jsx("circle",{cx:b.x+10,cy:b.y+5,r:"9",fill:"var(--bg-hover)",stroke:"var(--accent)",strokeWidth:"0.8"}),e.jsx("text",{x:b.x+10,y:b.y+8,fill:"var(--accent)",fontSize:"5",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:b.l})]},d)),e.jsx("line",{x1:"60",y1:"12",x2:"95",y2:"18",stroke:"var(--border-light)",strokeWidth:"0.5"}),e.jsx("line",{x1:"95",y1:"28",x2:"95",y2:"40",stroke:"var(--border-light)",strokeWidth:"0.5"}),e.jsx("line",{x1:"85",y1:"50",x2:"60",y2:"55",stroke:"var(--border-light)",strokeWidth:"0.5"}),e.jsx("line",{x1:"50",y1:"55",x2:"25",y2:"50",stroke:"var(--border-light)",strokeWidth:"0.5"}),e.jsx("line",{x1:"25",y1:"40",x2:"25",y2:"28",stroke:"var(--border-light)",strokeWidth:"0.5"}),e.jsx("line",{x1:"25",y1:"18",x2:"50",y2:"12",stroke:"var(--border-light)",strokeWidth:"0.5"}),e.jsx("line",{x1:"60",y1:"12",x2:"25",y2:"40",stroke:"var(--red)",strokeWidth:"0.4",strokeDasharray:"2,2"}),e.jsx("line",{x1:"95",y1:"23",x2:"25",y2:"23",stroke:"var(--red)",strokeWidth:"0.4",strokeDasharray:"2,2"})]})},{name:"V-Model Lifecycle",desc:"Left: requirements decompose. Bottom: implementation. Right: verification at each level. Horizontal dashed lines show traceability between left and right.",lessonId:"m9-l3",lessonLabel:"9.3 Systems Engineering",svg:e.jsxs("svg",{viewBox:"0 0 160 60",style:{width:"100%",maxWidth:"160px"},children:[e.jsx("rect",{x:"2",y:"5",width:"38",height:"12",fill:"var(--bg-hover)",stroke:"var(--accent)",strokeWidth:"0.8",rx:"2"}),e.jsx("text",{x:"21",y:"14",fill:"var(--accent)",fontSize:"5",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"Reqts"}),e.jsx("rect",{x:"20",y:"20",width:"38",height:"12",fill:"var(--bg-hover)",stroke:"var(--accent)",strokeWidth:"0.8",rx:"2"}),e.jsx("text",{x:"39",y:"29",fill:"var(--accent)",fontSize:"5",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"Design"}),e.jsx("rect",{x:"55",y:"38",width:"50",height:"14",fill:"var(--bg-hover)",stroke:"var(--accent-secondary)",strokeWidth:"1",rx:"2"}),e.jsx("text",{x:"80",y:"48",fill:"var(--accent-secondary)",fontSize:"6",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"Build"}),e.jsx("rect",{x:"100",y:"20",width:"38",height:"12",fill:"var(--bg-hover)",stroke:"var(--blue)",strokeWidth:"0.8",rx:"2"}),e.jsx("text",{x:"119",y:"29",fill:"var(--blue)",fontSize:"5",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"IntTest"}),e.jsx("rect",{x:"120",y:"5",width:"38",height:"12",fill:"var(--bg-hover)",stroke:"var(--blue)",strokeWidth:"0.8",rx:"2"}),e.jsx("text",{x:"139",y:"14",fill:"var(--blue)",fontSize:"5",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"Valid."}),e.jsx("line",{x1:"21",y1:"17",x2:"39",y2:"20",stroke:"var(--text-dim)",strokeWidth:"0.5"}),e.jsx("line",{x1:"58",y1:"32",x2:"70",y2:"38",stroke:"var(--text-dim)",strokeWidth:"0.5"}),e.jsx("line",{x1:"90",y1:"38",x2:"100",y2:"32",stroke:"var(--text-dim)",strokeWidth:"0.5"}),e.jsx("line",{x1:"119",y1:"17",x2:"139",y2:"20",stroke:"var(--text-dim)",strokeWidth:"0.5"}),e.jsx("line",{x1:"40",y1:"11",x2:"120",y2:"11",stroke:"var(--red)",strokeWidth:"0.5",strokeDasharray:"3,2"}),e.jsx("line",{x1:"58",y1:"26",x2:"100",y2:"26",stroke:"var(--red)",strokeWidth:"0.5",strokeDasharray:"3,2"}),e.jsx("text",{x:"80",y:"9",fill:"var(--red)",fontSize:"4",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"traceability"})]})}]}];return e.jsxs("div",{className:"page-inner page-enter",children:[e.jsxs("div",{className:"lexicon-header",children:[e.jsx("div",{className:"module-number",children:"Reference"}),e.jsx("h2",{children:"Symbol Lexicon"}),e.jsx("p",{className:"lexicon-intro",children:"Every schematic symbol used across the curriculum, organised by discipline. Each symbol links back to the lesson where it is introduced and explained in full context."})]}),e.jsx("div",{className:"lexicon-toc",children:y.map(b=>e.jsx("span",{className:"lexicon-toc-chip",onClick:()=>{const d=document.getElementById(`lex-${b.moduleId}`);d&&d.scrollIntoView({behavior:"smooth",block:"start"})},children:b.module},b.moduleId))}),y.map(b=>e.jsxs("section",{id:`lex-${b.moduleId}`,className:"lexicon-group",children:[e.jsxs("h3",{className:"lexicon-group-title",children:[e.jsx("span",{className:"lexicon-group-num",children:b.moduleId.slice(1)}),b.module]}),e.jsx("div",{className:"lexicon-grid",children:b.symbols.map((d,R)=>e.jsxs("div",{className:"lexicon-card",children:[e.jsx("div",{className:"lexicon-card-symbol",children:d.svg}),e.jsxs("div",{className:"lexicon-card-body",children:[e.jsx("div",{className:"lexicon-card-name",children:d.name}),e.jsx("div",{className:"lexicon-card-desc",children:d.desc}),e.jsxs("div",{className:"lexicon-card-link",onClick:()=>h(d.lessonId),children:[d.lessonLabel," "]})]})]},R))})]},b.moduleId)),e.jsx("div",{className:"lexicon-footer",children:e.jsxs("p",{children:["All symbols use simplified abstract geometry  rectangles, lines, and circles  designed for unambiguous correctness rather than physical detail. They follow the schematic conventions introduced in"," ",e.jsx("span",{className:"connection-link",onClick:()=>h("m1-l4"),children:"Lesson 1.4: Track Representations"}),"."]})})]})}const Sa="railway-course-quiz-responses";function yf(h){try{return JSON.parse(localStorage.getItem(Sa)??"{}")[h]||null}catch{return null}}function xf(h,y){try{const b=JSON.parse(localStorage.getItem(Sa)??"{}");b[h]=y,localStorage.setItem(Sa,JSON.stringify(b))}catch{}}function vf(h){try{const y=JSON.parse(localStorage.getItem(Sa)??"{}");delete y[h],localStorage.setItem(Sa,JSON.stringify(y))}catch{}}function Du(h){const y=[...h];for(let b=y.length-1;b>0;b--){const d=Math.floor(Math.random()*(b+1)),R=y[b];y[b]=y[d],y[d]=R}return y}function bf(h,y){return h.map((b,d)=>{const R=y[d]??[];return{text:b.text,explanation:b.explanation,options:R.map(O=>b.options[O]??""),correct:R.indexOf(b.correct)}})}function jf({questions:h,lessonId:y,onComplete:b}){const d=Re.useMemo(()=>yf(y),[y]),[R,O]=Re.useState(()=>d?.shuffleOrders?d.shuffleOrders:h.map(Z=>Du(Z.options.map((I,ie)=>ie)))),_=Re.useMemo(()=>bf(h,R),[h,R]),[X,C]=Re.useState(()=>d?.answers||{}),[j,U]=Re.useState(()=>d?.checked||{}),[D,J]=Re.useState(0),G=Re.useCallback((Z,I)=>{j[Z]||C(ie=>({...ie,[Z]:I}))},[j]),F=Re.useCallback(Z=>{U(I=>{const ie={...I,[Z]:!0},je={...X};if(xf(y,{answers:je,checked:ie,shuffleOrders:R}),Object.keys(ie).length===_.length&&b){let Se=0;_.forEach((Q,be)=>{X[be]===Q.correct&&Se++}),setTimeout(()=>b(Se,_.length),0)}return ie})},[X,_,b,y,R]),re=Re.useCallback(()=>{const Z=h.map(I=>Du(I.options.map((ie,je)=>je)));O(Z),C({}),U({}),vf(y),J(I=>I+1)},[y,h]),Ge=Object.keys(j).length===_.length,We=Ge?_.filter((Z,I)=>X[I]===Z.correct).length:null;return e.jsxs("div",{className:"quiz-section",children:[e.jsxs("div",{className:"quiz-header",children:[e.jsx("h3",{children:"Knowledge Check"}),Object.keys(j).length>0&&e.jsx("button",{className:"quiz-reset-btn",onClick:re,children:"Reset Quiz"})]}),_.map((Z,I)=>{const ie=X[I],je=j[I],Se=je&&ie===Z.correct;return e.jsxs("div",{className:"quiz-question",children:[e.jsxs("div",{className:"quiz-question-number",children:["Question ",I+1," of ",_.length]}),e.jsx("div",{className:"quiz-question-text",children:Z.text}),e.jsx("div",{className:"quiz-options",children:Z.options.map((Q,be)=>{let Je="quiz-option";return!je&&ie===be&&(Je+=" selected"),je&&ie===be&&be===Z.correct&&(Je+=" correct"),je&&ie===be&&be!==Z.correct&&(Je+=" incorrect"),je&&be===Z.correct&&ie!==be&&(Je+=" show-correct"),e.jsxs("div",{className:Je,onClick:()=>G(I,be),children:[e.jsx("span",{className:"quiz-option-radio"}),e.jsx("span",{children:Q})]},be)})}),e.jsx("button",{className:"quiz-check-btn",disabled:ie===void 0||je,onClick:()=>F(I),children:"Check Answer"}),je&&e.jsxs("div",{className:`quiz-feedback ${Se?"correct":"incorrect"}`,children:[e.jsx("strong",{children:Se?"Correct!":"Not quite."})," ",Z.explanation]})]},`${I}-${D}`)}),Ge&&e.jsxs("div",{className:"quiz-score",style:{display:"block"},children:[e.jsxs("div",{className:"quiz-score-value",children:[We," / ",_.length]}),e.jsx("div",{className:"quiz-score-label",children:"questions correct"})]})]})}function N({type:h="info",label:y,children:b}){return e.jsxs("div",{className:`callout${h==="analogy"?" analogy":""}`,children:[e.jsx("div",{className:"callout-label",children:y||(h==="analogy"?"Developer Analogy":"Note")}),e.jsx("p",{style:{margin:0},children:b})]})}function ce({items:h,goTo:y}){return e.jsxs("div",{className:"connections",children:[e.jsx("h4",{children:"Connections to Other Disciplines"}),h.map((b,d)=>e.jsxs("div",{className:"connection-item",children:[e.jsx("span",{className:"connection-arrow",children:""}),e.jsx("span",{className:"connection-link",onClick:()=>y(b.target),children:b.label}),"  ",b.desc]},d))]})}function wf({goTo:h}){return e.jsxs(e.Fragment,{children:[e.jsx("h3",{children:"The Physics of Steel on Steel"}),e.jsxs("figure",{className:"lesson-figure",children:[e.jsx("div",{className:"cad-symbol",children:e.jsxs("svg",{viewBox:"0 0 300 80",style:{width:"100%",maxWidth:"300px"},children:[e.jsx("rect",{x:"55",y:"8",width:"30",height:"6",fill:"var(--text-dim)",stroke:"var(--text-bright)",strokeWidth:"1.5"}),e.jsx("rect",{x:"65",y:"14",width:"10",height:"30",fill:"var(--text-dim)",stroke:"var(--text-bright)",strokeWidth:"1.5"}),e.jsx("rect",{x:"50",y:"44",width:"40",height:"6",fill:"var(--text-dim)",stroke:"var(--text-bright)",strokeWidth:"1.5"}),e.jsx("text",{x:"100",y:"15",fill:"var(--accent)",fontSize:"10",fontFamily:"JetBrains Mono, monospace",children:" head"}),e.jsx("text",{x:"100",y:"34",fill:"var(--accent)",fontSize:"10",fontFamily:"JetBrains Mono, monospace",children:" web"}),e.jsx("text",{x:"100",y:"52",fill:"var(--accent)",fontSize:"10",fontFamily:"JetBrains Mono, monospace",children:" foot"}),e.jsx("text",{x:"200",y:"20",fill:"var(--text-dim)",fontSize:"9",fontFamily:"JetBrains Mono, monospace",children:"steel/steel: 0.10.3%"}),e.jsx("text",{x:"200",y:"35",fill:"var(--text-dim)",fontSize:"9",fontFamily:"JetBrains Mono, monospace",children:"rubber/road: 12%"}),e.jsx("text",{x:"200",y:"55",fill:"var(--accent)",fontSize:"9",fontFamily:"JetBrains Mono, monospace",children:" 10 advantage"})]})}),e.jsx("figcaption",{children:"Schematic: Simplified rail I-beam cross-section (head, web, foot) and the rolling resistance advantage of steel on steel."})]}),e.jsxs("p",{children:["Railways work because of a single, elegant physical fact: a steel wheel rolling on a steel rail produces extraordinarily low friction. The rolling resistance coefficient is just ",e.jsx("strong",{children:"0.001 to 0.003"})," (0.10.3%), compared with 0.010.02 (12%) for rubber tyres on asphalt. This order-of-magnitude advantage means a single locomotive can haul a hundred wagons  something no road vehicle could dream of."]}),e.jsxs("p",{children:["This efficiency translates directly into energy consumption. Rail freight uses roughly",e.jsx("strong",{children:"510 times less energy per tonne-kilometre"})," than road haulage. For passenger transport, rail is 35 times more efficient than private cars and dramatically better than domestic aviation for comparable distances."]}),e.jsxs("figure",{className:"lesson-figure",children:[e.jsx("div",{className:"image-placeholder",children:e.jsx("p",{children:"IMAGE NEEDED: Close-up photo of a steel train wheel on a steel rail, showing the contact patch and the shiny wear strip on the rail head  illustrating the steel-on-steel interface that makes railways efficient."})}),e.jsx("figcaption",{children:"Steel wheel on steel rail  the fundamental low-friction interface that makes railways possible."})]}),e.jsx("h3",{children:"The Adhesion Trade-Off"}),e.jsxs("p",{children:["Low rolling resistance comes at a cost: the coefficient of friction between steel wheel and steel rail is only ",e.jsx("strong",{children:"0.150.35"}),", depending on conditions. On a wet, leaf-contaminated autumn rail, it can plummet to 0.05. This places hard limits on what trains can do:"]}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Gradient limits:"})," Mainline railways are typically limited to 12.5% gradients. High-speed lines seldom exceed 3.5%. Anything steeper requires rack railways or cable haulage."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Braking distance:"})," A train travelling at 200 km/h needs approximately ",e.jsx("strong",{children:"3 km to stop"}),"  versus around 150 m for a car at the same speed. This single fact drives the entire signalling discipline."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Traction limits:"})," Locomotives can only apply as much tractive effort as adhesion allows before wheels spin. Modern traction control systems manage this continuously."]})]}),e.jsxs(N,{type:"analogy",children:["Think of adhesion as an ",e.jsx("strong",{children:"API rate limit"}),". You can push data through the connection very efficiently (low rolling resistance), but there is a hard ceiling on how much force you can apply at any instant (the adhesion limit). Exceed the rate limit and everything degrades  wheels spin, braking fails, and the system enters an unstable state. The entire railway system is engineered around this constraint, just as a well-designed application is architected around its rate limits."]}),e.jsx("h3",{children:"Continuously Welded Rail (CWR)"}),e.jsx("p",{children:"Steel expands and contracts with temperature. A rail that is 1 km long will change length by roughly 11.5 mm for every 1C change in temperature. In jointed track (with gaps every 1820 m), this is accommodated by expansion joints. But joints are noisy, cause wear, and limit speed."}),e.jsxs("p",{children:[e.jsx("strong",{children:"CWR"})," eliminates joints by welding rails into continuous strings hundreds of metres (or kilometres) long. The rail is laid at a ",e.jsx("em",{children:"stress-free temperature"}),"(typically 2127C in temperate climates). Below this temperature, the rail is in tension  risking fracture. Above it, the rail is in compression  risking buckling. Managing this thermal stress is one of the key maintenance challenges on any railway."]}),e.jsx("h3",{children:"Why This Matters for Every Other Discipline"}),e.jsx("p",{children:"Every subsystem in railway engineering exists because of these fundamental physics. Signalling exists because trains cannot stop quickly. Track geometry is constrained because adhesion limits the forces you can apply. Electrification voltage choices are influenced by the energy efficiency advantage that makes rail worthwhile. Understanding these foundations will make every subsequent lesson click into place."}),e.jsx(ce,{goTo:h,items:[{target:"m1-l1",label:"Track Structure",desc:"How the physical layers are built to exploit low rolling resistance."},{target:"m1-l2",label:"Track Geometry",desc:"How gradient and curvature limits flow from adhesion constraints."},{target:"m4-l1",label:"Block System & Signals",desc:"Why signalling exists  braking distance demands advance warning."}]})]})}const kf=[{text:"What is the approximate rolling resistance of steel wheel on steel rail?",options:["510% of the load","12% of the load","0.10.3% of the load","0.010.03% of the load"],correct:2,explanation:"Steel on steel gives approximately 0.10.3% rolling resistance  about 10x less than rubber on asphalt. This is the fundamental reason railways are so energy-efficient for heavy loads."},{text:"Why can't conventional railways climb steep gradients?",options:["Rails would buckle under the strain","Low wheel-rail adhesion limits traction on slopes","Train engines are not powerful enough","Safety regulations prevent it"],correct:1,explanation:"The same low friction that makes railways efficient also limits adhesion. With a friction coefficient of only 0.150.35, trains struggle to maintain grip on steep slopes, typically limiting gradients to 23%."},{text:"Compared to road transport, how much less energy does rail typically use per tonne-km?",options:["About the same","About 2x less","About 510x less","About 100x less"],correct:2,explanation:"Rail transport typically uses 510x less energy per tonne-km than road freight, primarily because of the much lower rolling resistance of steel on steel."},{text:"What happens to a continuously welded rail when temperature rises significantly?",options:["It becomes more flexible","It develops compressive stress and risks buckling","It expands freely at the ends","Nothing  modern steel is temperature-resistant"],correct:1,explanation:"CWR cannot expand freely, so temperature increases create compressive stress in the rail. If this exceeds the restraining force from clips and ballast, the rail can buckle  a serious safety risk."}];function Tf({goTo:h}){return e.jsxs(e.Fragment,{children:[e.jsx("h3",{children:"A Railway as a System of Systems"}),e.jsx("p",{children:"A railway is not a single thing  it is eight interlocking subsystems, each a deep engineering discipline in its own right. No single team owns the whole railway; understanding the boundaries, interfaces, and responsibilities between subsystems is essential for anyone working in the industry."}),e.jsx("h3",{children:"The Eight Subsystems"}),e.jsxs("ol",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Track (Permanent Way)"}),"  The rails, sleepers, ballast, and fastenings that trains run on. Owned and maintained by the infrastructure manager (e.g. Network Rail in the UK, DB Netz in Germany). Example: UIC 60 rail on concrete sleepers, the workhorse of European mainlines."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Civil Engineering & Geotechnics"}),"  The earthworks beneath the track: cuttings, embankments, drainage, and ground stabilisation. Often the oldest parts of the railway (Victorian-era in the UK). Example: the embankments of the LondonBirmingham mainline, built in the 1830s and still in daily use."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Structures"}),"  Bridges, tunnels, retaining walls, and stations. The UK alone has over 30,000 bridges and 650 tunnels. Example: the Forth Bridge, an iconic cantilever structure carrying rail traffic since 1890."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Signalling"}),"  The systems that keep trains safely separated: signals, interlocking, train detection, and train protection. Safety-critical (SIL 4). Example: the Solid State Interlocking (SSI) controlling a major junction."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Electrification"}),"  The power supply infrastructure: substations, overhead line equipment (OLE / catenary), third rail, or conductor rail. Example: 25 kV AC overhead electrification on the West Coast Main Line."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Rolling Stock"}),"  The trains themselves: locomotives, coaches, multiple units, freight wagons. Owned by train operating companies (TOCs) or leasing companies (ROSCOs). Example: a Class 800 bi-mode intercity train."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Telecommunications"}),"  The communications backbone: fibre optic networks, GSM-R radio, SCADA, CCTV, and passenger information systems. Example: the Fixed Telecom Network (FTN) that carries all operational data."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Operations & Timetabling"}),"  How trains are scheduled, dispatched, and managed in real-time. Covers timetable planning, possession planning, performance analysis, and incident management. Example: the integrated timetable planning process for a major timetable change."]})]}),e.jsxs("figure",{className:"lesson-figure",children:[e.jsx("div",{className:"image-placeholder",children:e.jsx("p",{children:'IMAGE NEEDED: Aerial or wide-angle photo of a busy railway junction or station showing multiple subsystems visibly at work  tracks, overhead wires, signals, platforms, and a train. Should convey the complexity of a "system of systems."'})}),e.jsx("figcaption",{children:"A busy railway node where multiple subsystems converge  track, signalling, electrification, structures, and rolling stock all working together."})]}),e.jsx("h3",{children:"Infrastructure Manager vs Train Operating Company"}),e.jsxs("p",{children:["Most modern railways separate the ",e.jsx("strong",{children:"infrastructure manager"})," (who owns and maintains track, signalling, structures, and electrification) from the ",e.jsx("strong",{children:"train operating companies"})," (who run trains and serve passengers or freight customers). This separation  mandated by EU directives in Europe  creates clear interfaces but also introduces coordination challenges, particularly around timetabling and access."]}),e.jsxs(N,{type:"analogy",children:["Think of the eight subsystems as ",e.jsx("strong",{children:"microservices with bounded contexts"}),". Each subsystem has its own domain, its own experts, and its own lifecycle. The most dangerous bugs are always at the ",e.jsx("em",{children:"interfaces"})," between services  where one team's assumptions clash with another's. A signalling upgrade that doesn't account for a civil speed restriction, or an electrification project that doesn't consider bridge clearances, is the railway equivalent of an API contract violation."]}),e.jsx(ce,{goTo:h,items:[{target:"m0-l3",label:"Developer's Mental Model",desc:"Map these eight subsystems to software equivalents."},{target:"m1-l1",label:"Track Structure",desc:"Deep dive into Subsystem #1."},{target:"m4-l1",label:"Block System & Signals",desc:"Deep dive into Subsystem #4."}]})]})}const Sf=[{text:"How many key subsystems make up a railway?",options:["4","6","8","12"],correct:2,explanation:"A railway has 8 key subsystems: Track, Civil/Geotechnical, Structures, Signalling, Electrification, Rolling Stock, Telecommunications, and Operations."},{text:'Which discipline is often described as the "operating system" of the railway?',options:["Permanent Way","Operations & Timetabling","Signalling & Train Control","Telecommunications"],correct:2,explanation:"Signalling functions like the OS  managing resource allocation (track sections), enforcing safety rules, and controlling access (route setting)."},{text:"In modern railways, who typically owns and maintains the infrastructure?",options:["Train operating companies","The infrastructure manager (e.g. Network Rail)","Rolling stock leasing companies","Local government councils"],correct:1,explanation:"Most modern railways separate the infrastructure manager (track, signalling, stations) from train operating companies. In the UK this is Network Rail."}];function Af({goTo:h}){return e.jsxs(e.Fragment,{children:[e.jsx("h3",{children:"Mapping Software to Railways"}),e.jsx("p",{children:"If you come from a software engineering background, you already have powerful mental models. The trick is mapping them correctly. Here is a reference table you can return to throughout this course:"}),e.jsx("div",{className:"table-wrapper",children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Software Concept"}),e.jsx("th",{children:"Railway Equivalent"}),e.jsx("th",{children:"Why"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{children:"Infrastructure / IaC"}),e.jsx("td",{children:"Earthworks & civil"}),e.jsx("td",{children:"The foundation everything runs on; hard to change"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Network / transport"}),e.jsx("td",{children:"Track"}),e.jsx("td",{children:"Physical medium for movement of data/trains"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Protocol / flow control"}),e.jsx("td",{children:"Signalling"}),e.jsx("td",{children:"Rules that prevent collisions and manage capacity"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Application logic"}),e.jsx("td",{children:"Operations & timetabling"}),e.jsx("td",{children:"What actually gets done; the business value"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"API contracts / schemas"}),e.jsx("td",{children:"Loading gauge"}),e.jsx("td",{children:"Interface specification that must match on both sides"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Monitoring / observability"}),e.jsx("td",{children:"Telecoms & SCADA"}),e.jsx("td",{children:"Knowing what is happening in real-time"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Hardware / compute"}),e.jsx("td",{children:"Rolling stock"}),e.jsx("td",{children:"The physical assets that do the work"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Power supply / electricity"}),e.jsx("td",{children:"Electrification"}),e.jsx("td",{children:"The energy source that makes everything move"})]})]})]})}),e.jsx("h3",{children:"The OSI Model Analogy"}),e.jsx("p",{children:"The OSI networking model maps remarkably well to railway engineering layers. The physical layer (Layer 1) is the rail and track bed. The data link layer (Layer 2) is the train detection system  track circuits and axle counters that detect presence. The network layer (Layer 3) is the interlocking and route-setting logic. The transport layer (Layer 4) is the block system ensuring safe spacing. And the application layers (57) are the timetable, operational rules, and passenger information services."}),e.jsxs("figure",{className:"lesson-figure",children:[e.jsx("div",{className:"image-placeholder",children:e.jsx("p",{children:"IMAGE NEEDED: Photo showing dual-gauge track (three rails on shared sleepers), or a gauge-change facility where two different track gauges meet. Illustrates how different gauges are physically incompatible."})}),e.jsx("figcaption",{children:"Track gauge  the railway's most fundamental interface specification. Different gauges are physically incompatible, like mismatched API versions."})]}),e.jsxs("figure",{className:"lesson-figure",children:[e.jsx("div",{className:"cad-symbol",children:e.jsxs("svg",{viewBox:"0 0 300 70",style:{width:"100%",maxWidth:"300px"},children:[e.jsx("rect",{x:"50",y:"5",width:"14",height:"4",fill:"var(--text-dim)",stroke:"var(--text-bright)",strokeWidth:"1"}),e.jsx("rect",{x:"54",y:"9",width:"6",height:"20",fill:"var(--text-dim)",stroke:"var(--text-bright)",strokeWidth:"1"}),e.jsx("rect",{x:"48",y:"29",width:"18",height:"4",fill:"var(--text-dim)",stroke:"var(--text-bright)",strokeWidth:"1"}),e.jsx("rect",{x:"236",y:"5",width:"14",height:"4",fill:"var(--text-dim)",stroke:"var(--text-bright)",strokeWidth:"1"}),e.jsx("rect",{x:"240",y:"9",width:"6",height:"20",fill:"var(--text-dim)",stroke:"var(--text-bright)",strokeWidth:"1"}),e.jsx("rect",{x:"234",y:"29",width:"18",height:"4",fill:"var(--text-dim)",stroke:"var(--text-bright)",strokeWidth:"1"}),e.jsx("line",{x1:"64",y1:"18",x2:"236",y2:"18",stroke:"var(--accent)",strokeWidth:"1.5"}),e.jsx("polygon",{points:"64,18 70,15 70,21",fill:"var(--accent)"}),e.jsx("polygon",{points:"236,18 230,15 230,21",fill:"var(--accent)"}),e.jsx("text",{x:"150",y:"15",fill:"var(--accent)",fontSize:"11",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"1,435 mm"}),e.jsx("rect",{x:"35",y:"38",width:"230",height:"8",fill:"var(--bg-hover)",stroke:"var(--border-light)",strokeWidth:"1",rx:"1"}),e.jsx("text",{x:"150",y:"60",fill:"var(--text-dim)",fontSize:"9",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"standard gauge  measured between inner faces of rails"})]})}),e.jsx("figcaption",{children:"Schematic: Track gauge  the distance between inner rail faces. Standard gauge = 1,435 mm."})]}),e.jsx("h3",{children:"Gauge as Interface Specification"}),e.jsxs("p",{children:["Track gauge  the distance between the inner faces of the rails  is the railway world's most fundamental API contract. Standard gauge is ",e.jsx("strong",{children:"1,435 mm"}),", used by roughly 60% of the world's railways. But India uses 1,676 mm, Russia and Finland use 1,520 mm, and many countries have metre-gauge or cape-gauge (1,067 mm) networks. A train built for one gauge physically cannot run on another."]}),e.jsxs(N,{type:"analogy",children:["Gauge standardisation is ",e.jsx("strong",{children:"dependency injection"}),`. When George Stephenson's 4 ft 8 in gauge won the 19th-century "gauge war" against Brunel's 7 ft broad gauge, it was like the industry agreeing on a single interface. Every component  wheels, track, points, maintenance equipment  could be built to one specification and swapped freely. Brunel's broad gauge was arguably technically superior, but the network effects of standardisation won. This is the same dynamic that plays out with USB, HTTP, or any dominant API standard.`]}),e.jsx("h3",{children:"Recommended Resources"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Books:"}),' "The Railway: British Track Since 1804" (Lewis), "Railway Engineering" (Mundrey), "Modern Railway Track" (Esveld)']}),e.jsxs("li",{children:[e.jsx("strong",{children:"YouTube:"})," Geoff Marshall, Jago Hazzard, The Tim Traveller, Gareth Dennis"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Games & simulations:"})," OpenTTD, Train Simulator, SimSig (free signalling simulator used in industry training)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Standards bodies:"})," RSSB (UK), ERA (EU), UIC (international)"]})]}),e.jsx(ce,{goTo:h,items:[{target:"m0-l2",label:"The Eight Subsystems",desc:"The subsystem map this mental model organises."},{target:"m3-l3",label:"Stations & Clearances",desc:"Loading gauge as API schema in detail."},{target:"m1-l2",label:"Track Geometry",desc:"Gauge specification explored in depth."}]})]})}const Cf=[{text:"What software concept best maps to the railway gauge standard?",options:["Version control","API contract / interface specification","Load balancer","Database schema"],correct:1,explanation:"Gauge is a universal interface specification  every vehicle and every piece of track must conform to it, like an API contract between subsystems."},{text:'Where do "bugs" most commonly live in railway engineering?',options:["Inside individual subsystems","At the interfaces between disciplines","In the operations department","In the software systems"],correct:1,explanation:"Just like in microservice architectures, the most common problems occur at interfaces between disciplines  where one team's output becomes another's input."},{text:"What does the railway's monitoring & observability layer correspond to?",options:["Signalling","Rolling stock diagnostics","Telecommunications & SCADA","Operations timetabling"],correct:2,explanation:"Telecommunications & SCADA provide monitoring and observability  remote sensing, status reporting, real-time data feeds, like Prometheus/Grafana in a software stack."}];function Mf(h,y){switch(h){case"m0-l1":return e.jsx(wf,{goTo:y});case"m0-l2":return e.jsx(Tf,{goTo:y});case"m0-l3":return e.jsx(Af,{goTo:y});default:return null}}const Ef={"m0-l1":kf,"m0-l2":Sf,"m0-l3":Cf};function Df({goTo:h}){return e.jsxs(e.Fragment,{children:[e.jsxs("figure",{className:"lesson-figure",children:[e.jsx("div",{className:"cad-symbol",children:e.jsxs("svg",{viewBox:"0 0 300 130",style:{width:"100%",maxWidth:"300px"},children:[e.jsx("text",{x:"150",y:"14",fill:"var(--text-dim)",fontSize:"10",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"Track Layer Stack"}),e.jsx("rect",{x:"40",y:"22",width:"220",height:"14",fill:"var(--text-bright)",opacity:"0.8",stroke:"var(--text-bright)",strokeWidth:"1"}),e.jsx("text",{x:"150",y:"32",fill:"var(--bg-raised)",fontSize:"8",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"RAIL (60 kg/m)"}),e.jsx("rect",{x:"30",y:"38",width:"240",height:"14",fill:"var(--text-dim)",stroke:"var(--text-bright)",strokeWidth:"1"}),e.jsx("text",{x:"150",y:"48",fill:"var(--text-bright)",fontSize:"8",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"SLEEPERS @ 600 mm c/c"}),e.jsx("rect",{x:"20",y:"54",width:"260",height:"22",fill:"var(--border)",stroke:"var(--text-dim)",strokeWidth:"1"}),e.jsx("text",{x:"150",y:"68",fill:"var(--text-dim)",fontSize:"9",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"BALLAST 250350 mm"}),e.jsx("rect",{x:"15",y:"78",width:"270",height:"14",fill:"var(--bg-raised)",stroke:"var(--border-light)",strokeWidth:"1"}),e.jsx("text",{x:"150",y:"88",fill:"var(--text-dim)",fontSize:"8",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"SUB-BALLAST (filter layer)"}),e.jsx("rect",{x:"10",y:"94",width:"280",height:"22",fill:"var(--bg-hover)",stroke:"var(--border-light)",strokeWidth:"1"}),e.jsx("text",{x:"150",y:"108",fill:"var(--text-dim)",fontSize:"9",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"SUBGRADE"}),e.jsx("line",{x1:"285",y1:"28",x2:"285",y2:"108",stroke:"var(--accent)",strokeWidth:"1.5"}),e.jsx("polygon",{points:"285,108 282,102 288,102",fill:"var(--accent)"}),e.jsx("text",{x:"292",y:"70",fill:"var(--accent)",fontSize:"8",fontFamily:"JetBrains Mono, monospace",writingMode:"tb",children:"load path "})]})}),e.jsx("figcaption",{children:"Schematic: Track layer stack  each layer provides services to the one above, like a protocol stack."})]}),e.jsx("h3",{children:"The Track Layer Stack"}),e.jsx("p",{children:"Railway track is a carefully engineered stack of layers, each providing services to the one above it  exactly like a protocol stack. From top to bottom:"}),e.jsxs("div",{className:"layer-stack",children:[e.jsxs("div",{className:"layer layer-rail",children:[e.jsx("strong",{children:"Rail"}),"  UIC 60 profile, 60 kg/m. High-carbon steel, head-hardened for wear resistance. Carries and guides the wheels, transfers loads to fastenings."]}),e.jsxs("div",{className:"layer layer-fastenings",children:[e.jsx("strong",{children:"Fastenings"}),"  Pandrol e-clips or Vossloh systems. Resilient pads, baseplates, and clips that hold the rail to the sleeper while allowing controlled movement under thermal expansion and dynamic loading."]}),e.jsxs("div",{className:"layer layer-sleepers",children:[e.jsx("strong",{children:"Sleepers (Ties)"}),"  Primarily prestressed concrete (B70 type, ~300 kg each, at 600650 mm spacing). Timber sleepers survive in heritage and specific applications. Steel Y-sleepers used in niche cases. Distribute rail loads to ballast."]}),e.jsxs("div",{className:"layer layer-ballast",children:[e.jsx("strong",{children:"Ballast"}),"  Angular crushed granite or equivalent hard stone, 250350 mm deep. Distributes load, provides drainage, allows geometry correction by tamping. Degrades over time as stones round off and fines accumulate."]}),e.jsxs("div",{className:"layer layer-sub-ballast",children:[e.jsx("strong",{children:"Sub-ballast"}),"  A graded filter/separation layer (sand or geotextile) preventing subgrade fines from migrating up into the ballast and ballast stones from punching down."]}),e.jsxs("div",{className:"layer layer-subgrade",children:[e.jsx("strong",{children:"Subgrade"}),"  The natural ground or engineered formation. Its bearing capacity determines everything above. Weak subgrade demands thicker ballast or ground improvement."]})]}),e.jsxs("figure",{className:"lesson-figure",children:[e.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/8/80/Cross_section_of_railroad_ballast.jpg",alt:"Cross-section of a ballasted railway track showing the layered structure: rail, sleepers, ballast, and subgrade",loading:"lazy"}),e.jsxs("figcaption",{children:["Cross-section of ballasted track showing the layer stack in practice. Photo: ",e.jsx("a",{href:"https://commons.wikimedia.org/wiki/File:Cross_section_of_railroad_ballast.jpg",target:"_blank",rel:"noopener noreferrer",children:"Mathieu Landretti"}),", CC BY-SA 4.0"]})]}),e.jsx("h3",{children:"Rail Metallurgy & Profiles"}),e.jsxs("p",{children:["Modern mainline rail is made from high-carbon manganese steel (0.60.82% carbon, 0.81.3% manganese). The steel is continuously cast and hot-rolled to the desired profile. The ",e.jsx("strong",{children:"UIC 60"})," profile (60.21 kg/m) is the European standard for mainlines. Lighter profiles exist: UIC 54 (54.43 kg/m) for secondary lines, and UIC 46 for branch lines. North American railways use profiles like RE 136 (136 lb/yd  67.5 kg/m) for heavy-haul corridors."]}),e.jsxs("p",{children:["The rail head is the critical wear surface. ",e.jsx("strong",{children:"Head-hardening"})," (controlled cooling from the rolling heat) produces a pearlitic microstructure with hardness up to 400 HBW, dramatically extending rail life on curves and high-traffic lines.",e.jsx("strong",{children:" Premium rail grades"})," include R350HT (heat-treated, 350 HBW minimum) and R400HT for the most demanding applications. Bainitic rail steels are emerging for even higher wear resistance."]}),e.jsxs("p",{children:["A rail's cross-section has three parts: the ",e.jsx("strong",{children:"head"})," (the running surface and gauge face), the ",e.jsx("strong",{children:"web"})," (the thin vertical section providing shear resistance), and the ",e.jsx("strong",{children:"foot"})," (the broad base that sits on the sleeper and is gripped by the fastening). The head-to-foot geometry is carefully designed to resist bending and distribute wheel loads over the maximum possible length of rail."]}),e.jsx("h3",{children:"Sleeper Types in Depth"}),e.jsx("p",{children:"The choice of sleeper type has major implications for cost, maintenance, and noise:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Prestressed concrete (monoblock):"})," The B70 type dominates European mainlines. Each sleeper weighs approximately 300 kg and has a service life of 4050 years. Prestressing wires are tensioned before the concrete is cast, ensuring the sleeper remains in compression under load. The main disadvantage is weight (making manual handling impossible) and higher noise/vibration transmission compared to timber."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Twin-block concrete:"})," Two concrete blocks connected by a steel bar, common in France (the Bibloc and Vagneux types). Lighter per block than monoblocs and offer good lateral resistance in ballast."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Timber:"})," Still used for switches & crossings (where complex geometries require custom lengths), in heritage railways, and where vibration damping is critical (e.g., near sensitive buildings). Hardwood species like jarrah, oak, and azobe are preferred. Service life is 2035 years. Timber sleepers are treated with creosote or copper-chrome-arsenic (CCA), though environmental regulations are phasing these out."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Steel Y-sleepers:"})," Inverted Y-shape steel sleepers used in Australia and some African railways. Lightweight (around 70 kg) and suitable for remote locations with manual installation, but prone to corrosion and offer poor electrical insulation."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Composite/plastic:"})," Emerging alternatives made from recycled plastics or fibre-reinforced polymers, designed to replace timber. They offer good damping and resistance to rot and insects. Still unproven at scale on heavy-traffic mainlines."]})]}),e.jsxs("figure",{className:"lesson-figure",children:[e.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/f/f9/Pandrol-on-concrete.jpg",alt:"Close-up of a Pandrol e-clip rail fastening on a concrete sleeper, showing the clip, resilient pad, and rail foot",loading:"lazy"}),e.jsxs("figcaption",{children:["Pandrol e-clip fastening holding a rail to a concrete sleeper. The clip grips the rail foot while the resilient pad absorbs dynamic loads. Photo: ",e.jsx("a",{href:"https://commons.wikimedia.org/wiki/File:Pandrol-on-concrete.jpg",target:"_blank",rel:"noopener noreferrer",children:"Marcus Wong"}),", CC BY-SA 4.0"]})]}),e.jsx("h3",{children:"Fastening Systems"}),e.jsx("p",{children:"Fastenings must achieve four things simultaneously: hold the rail to gauge, resist lateral and longitudinal forces, provide electrical insulation between rails (for track circuits), and accommodate thermal movement. The two dominant systems are:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Pandrol e-clip:"})," A spring-steel clip driven into cast-in shoulders on the sleeper. Simple, low-maintenance, and field-replaceable with a basic tool. The clip provides a consistent toe load (typically ~9 kN per clip) holding the rail down onto a resilient pad. Used worldwide, particularly in the UK, Australia, and Africa."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Vossloh W-series:"})," A tension-clamp system with a screw-and-dowel arrangement. Offers higher toe loads (up to 20 kN), adjustable gauge, and is favoured on high-speed lines and in continental Europe. More complex to install but more tuneable."]})]}),e.jsxs("p",{children:["Beneath the rail foot sits a ",e.jsx("strong",{children:"rail pad"}),"  a resilient elastomeric layer (typically 510 mm thick, made of EVA or rubber-cork composite) that attenuates dynamic impact loads and reduces noise transmission into the sleeper and ballast. Pad stiffness is a critical design parameter: too stiff and the sleeper takes excessive punishment; too soft and gauge-holding suffers."]}),e.jsx("h3",{children:"Ballast: Lifecycle and Degradation"}),e.jsxs("p",{children:["Fresh ballast consists of angular, uniformly-sized stones (typically 2550 mm nominal size) of hard, durable rock  granite, basalt, or gneiss are preferred. The ",e.jsx("strong",{children:"angularity"})," of the stones is critical: angular faces interlock, providing lateral and longitudinal resistance to track movement. Over time, the stones degrade through several mechanisms:"]}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Abrasion:"})," Repeated vibration causes stones to rub against each other, rounding off the angular faces and producing fine particles."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Breakage:"})," High point loads from heavy axles can fracture stones, especially softer rock types."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Fouling:"})," Fine material (from stone wear, mud pumped up from the subgrade, coal dust from freight, or organic debris) fills the voids between stones, destroying drainage and load distribution."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Chemical weathering:"})," Some limestone ballast is vulnerable to dissolution, and all ballast degrades faster in wet environments."]})]}),e.jsx("p",{children:"Once fouling exceeds approximately 3040% of voids, the ballast can no longer be effectively tamped and must be cleaned (by a ballast cleaning machine that excavates, screens, and returns clean stone) or completely replaced. A well-maintained ballast layer can last 3060 years before requiring complete renewal, but tamping frequency increases as it ages."}),e.jsx("h3",{children:"CWR vs Jointed Rail"}),e.jsxs("p",{children:["Traditional jointed track uses 1820 m rail lengths with expansion gaps at joints.",e.jsx("strong",{children:"Continuously Welded Rail (CWR)"})," eliminates these joints, reducing noise, vibration, and wear dramatically. CWR is now the universal standard on mainlines."]}),e.jsxs("p",{children:["The physics of CWR revolves around ",e.jsx("strong",{children:"thermal stress"}),". Because the rail cannot expand or contract freely (it is restrained by fastenings and ballast), temperature changes create internal stress. A temperature rise above the ",e.jsx("strong",{children:"stress-free temperature (SFT)"}),"  the temperature at which the rail was last destressed  produces compressive stress that can cause lateral ",e.jsx("strong",{children:"buckling"})," (sun kinks). A temperature drop below SFT produces tensile stress that can cause ",e.jsx("strong",{children:"rail breaks"}),". The SFT is deliberately set at a temperature above the midpoint of the local range (typically 2127 C in temperate climates) to bias toward tensile stress, which is less dangerous than buckling."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Destressing"})," is the process of cutting the rail, allowing it to reach its natural length at a target temperature, then re-welding it. This resets the SFT. Rails are destressed after installation, after significant track realignment, and when monitoring detects SFT drift. Failure to maintain correct SFT is a significant safety risk."]}),e.jsx("h3",{children:"Slab Track vs Ballasted Track"}),e.jsxs("p",{children:["High-speed lines and tunnels increasingly use ",e.jsx("strong",{children:"slab track"}),": rails mounted on a concrete slab rather than ballast. Benefits include lower maintenance, better geometric stability, and no ballast-flight risk at high speeds. Downsides are higher initial cost, difficult correction of settlement, and higher noise emissions. Japan's Shinkansen, Germany's Rheda system, and many metro systems use slab track."]}),e.jsx("p",{children:"Major slab track systems include:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Rheda 2000:"})," Concrete sleepers embedded in a continuous concrete slab, used on German and Dutch high-speed lines. The sleepers provide the rail attachment points while the slab provides the structural platform."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Shinkansen slab:"})," Precast concrete slabs on a cement-asphalt (CA) mortar layer, allowing some adjustment after installation. The CA mortar provides vibration damping."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"BBEST (Balfour Beatty):"})," Used in tunnels (including HS1 in the UK), with rails mounted on discrete support blocks embedded in the slab."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"LVT (Low Vibration Track):"})," Concrete trough with a boot-mounted sleeper floating on a resilient mat  used where vibration isolation is paramount (above sensitive buildings, metro tunnels under hospitals, etc.)."]})]}),e.jsxs("figure",{className:"lesson-figure",children:[e.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/6/60/RHEDA_2000_-_02.JPG",alt:"RHEDA 2000 slab track system under construction on the HSL-Zuid high-speed line in the Netherlands, showing rails mounted on a concrete slab with embedded sleepers",loading:"lazy"}),e.jsxs("figcaption",{children:["RHEDA 2000 slab track on the HSL-Zuid (Netherlands). Rails sit on embedded sleepers cast into a continuous concrete slab  no ballast required. Photo: ",e.jsx("a",{href:"https://commons.wikimedia.org/wiki/File:RHEDA_2000_-_02.JPG",target:"_blank",rel:"noopener noreferrer",children:"Spoorjan"}),", CC BY-SA 3.0"]})]}),e.jsx("h3",{children:"Welding Methods"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Flash-butt welding:"})," Factory or on-site process using electrical resistance heating. Rail ends are clamped, brought into light contact, and a high current passed through them. The contact resistance generates intense heat, the ends are then forged together under hydraulic pressure, and the flash (upset metal) is trimmed. Produces the highest quality welds with consistent metallurgy. Used in rail welding depots to create long strings (typically 216 m or 288 m in the UK, up to 400 m elsewhere)."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Thermit (aluminothermic) welding:"})," A crucible of iron oxide and aluminium powder is ignited, producing molten steel at ~2,500 C that fills a mould around the rail gap. The exothermic reaction (8FeO + 8Al  9Fe + 4AlO) yields enough liquid metal to fill the joint. Used extensively for field joints, closure welds, and emergency repairs. Lower quality than flash-butt (the cast structure is less homogeneous) but highly portable  only a crucible, moulds, and a gas torch are needed."]})]}),e.jsx("h3",{children:"Track Maintenance Machines"}),e.jsx("p",{children:"Modern track maintenance is heavily mechanised. The key machines are:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Tamping machine:"})," Inserts vibrating tines into the ballast beside each sleeper and squeezes them together, packing ballast tightly under the sleeper to restore correct geometry. The machine lifts and lines the track simultaneously using laser-guided systems."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Ballast regulator:"})," Distributes ballast evenly across the track bed and profiles the shoulder using ploughs and brooms. Usually follows a tamper."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Dynamic track stabiliser:"})," Vibrates the track laterally at controlled frequency to settle ballast after tamping, restoring lateral resistance faster than natural consolidation by traffic."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Ballast cleaner:"})," Excavates contaminated ballast by an endless chain, screens it to remove fines, returns clean stone, and adds new ballast as needed. Operates at very slow speeds (200800 m/h) and is one of the most expensive maintenance operations."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Rail grinding train:"})," Grinds the rail head to remove surface defects (head checking, corrugation, squats) and restore the correct transverse profile. Grinding is proactive maintenance that extends rail life significantly."]})]}),e.jsxs(N,{type:"analogy",children:["The track layer stack is the ",e.jsx("strong",{children:"OSI model"})," of railways. Each layer provides defined services upward and has clear interface requirements downward. You can swap implementations at any layer (e.g. timber sleepers for concrete) without redesigning the whole stack  as long as you honour the interface. A rail does not care what sleeper type it sits on, just as TCP does not care whether it runs over Ethernet or Wi-Fi."]}),e.jsx(ce,{goTo:h,items:[{target:"m0-l1",label:"Why Railways Work",desc:"The physics that drive every design choice in the layer stack."},{target:"m1-l2",label:"Track Geometry",desc:"How the track is arranged horizontally and vertically."},{target:"m1-l4",label:"Track Representations",desc:"How the track layout is drawn  schematic vs geographic views."},{target:"m2-l2",label:"Earthworks",desc:"What lies beneath the subgrade  the civil engineering foundation."}]})]})}const Rf=[{text:"What is the primary function of ballast in the track structure?",options:["Provide a smooth surface for trains","Distribute load, drain water, and enable geometry adjustment","Prevent electromagnetic interference","Insulate the track thermally"],correct:1,explanation:"Ballast (angular crushed rock) distributes axle loads, allows drainage, and enables geometry adjustment by tamping machines."},{text:"What is the standard rail profile weight used in Europe?",options:["UIC 40 (40 kg/m)","UIC 54 (54 kg/m)","UIC 60 (60 kg/m)","UIC 80 (80 kg/m)"],correct:2,explanation:"UIC 60 (60 kg/m) is the modern European standard for mainline track. Heavier rail distributes loads better and resists wear longer."},{text:'What does "CWR" stand for and why is it important?',options:["Central Wire Routing  for signal cables","Continuously Welded Rail  eliminates jointed rail problems","Controlled Wheel Resistance  for braking","Concrete Wall Reinforcement  for structures"],correct:1,explanation:"Continuously Welded Rail eliminates joints (causing noise and wear) by welding rails into 200m+ lengths. The trade-off is thermal stress management."},{text:"What layer sits immediately below the ballast?",options:["Subgrade","Rail","Sub-ballast","Sleepers"],correct:2,explanation:"Sub-ballast is a filter/transition layer between ballast and subgrade, preventing fine particles migrating upward and providing additional load distribution."}];function Bf({goTo:h}){return e.jsxs(e.Fragment,{children:[e.jsx("h3",{children:"Gauge: The Fundamental Interface"}),e.jsxs("p",{children:["Track gauge is the perpendicular distance between the inner faces of the two rails, measured 14 mm below the running surface. ",e.jsx("strong",{children:"Standard gauge"})," is 1,435 mm (4 ft 8 in), used across most of Europe, North America, China, and Australia's main corridors. But the world has many gauges:"]}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Indian broad gauge:"})," 1,676 mm  the widest major system"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Russian/Finnish gauge:"})," 1,520 mm  a strategic deliberate difference"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Iberian gauge:"})," 1,668 mm  Spain and Portugal's legacy gauge, now being replaced by standard gauge on high-speed lines"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Metre gauge:"})," 1,000 mm  widespread in Southeast Asia, South America"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Cape gauge:"})," 1,067 mm  Southern Africa, Japan (narrow gauge lines), Queensland"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Narrow gauge:"})," 600 mm and 750 mm  industrial, mining, and light railways"]})]}),e.jsxs("p",{children:["Gauge breaks at borders require bogie-changing facilities, break-of-gauge transfers, or variable-gauge wheelsets (as used on the Spanish Talgo trains crossing between Iberian 1,668 mm and standard gauge). The most dramatic solution is ",e.jsx("strong",{children:"dual gauge"})," track  three or four rails on shared sleepers allowing trains of different gauges to share the same corridor. This is common in Australia where standard and broad gauge lines merge."]}),e.jsx(N,{type:"info",label:"Why 1,435 mm?",children:`The standard gauge derives from the track width used by George Stephenson on early colliery railways in northeast England. It became dominant through the UK's Gauge Act of 1846, which mandated it after the destructive "gauge wars" between Stephenson's narrow gauge and Brunel's 7 ft broad gauge on the Great Western Railway. Brunel's gauge was technically superior for speed and stability, but the network effect of existing narrow-gauge mileage won.`}),e.jsx("h3",{children:"Horizontal Alignment"}),e.jsxs("p",{children:["A horizontal alignment consists of three element types: ",e.jsx("strong",{children:"straights"}),"(tangent track), ",e.jsx("strong",{children:"transition curves"})," (clothoids / Euler spirals), and",e.jsx("strong",{children:"circular curves"}),". You never place a circular curve directly after a straight  the transition curve provides a gradual change of curvature from zero (straight) to 1/R (the circular curve radius), preventing sudden lateral forces on passengers and track."]}),e.jsxs("p",{children:["The ",e.jsx("strong",{children:"clothoid"})," (Euler spiral) is the standard transition curve form because its curvature increases linearly with arc length. This means the rate of change of lateral acceleration is constant  giving passengers a smooth, predictable onset of lateral force. The clothoid is defined by a single parameter ",e.jsx("em",{children:"A"}),", where A = R  L (R = radius of the circular curve, L = length of the transition). Longer transitions (higher A) give a gentler ride but consume more alignment length."]}),e.jsxs("p",{children:["In alignment design, curves are described by their ",e.jsx("strong",{children:"radius"})," (in metres). Tighter curves have smaller radii and impose greater constraints. Typical minimum radii are:"]}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"High-speed (300 km/h):"})," R  5,0007,000 m"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Conventional mainline (160 km/h):"})," R  1,0001,500 m"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Regional/suburban (80120 km/h):"})," R  300600 m"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Depots and yards (1530 km/h):"})," R  150200 m"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Tramways:"})," R as low as 2025 m (with special rail and bogies)"]})]}),e.jsxs(N,{type:"analogy",children:["Transition curves are ",e.jsx("strong",{children:"CSS easing functions"}),". Just as a CSS",e.jsx("code",{children:"ease-in-out"})," provides a smooth acceleration and deceleration rather than a jarring instant change, a clothoid transition provides a linear increase of curvature from zero to the target radius. The maths is different (cubic Bezier vs Euler spiral), but the design intent is identical: smooth the change to avoid abrupt discontinuities."]}),e.jsxs("figure",{className:"lesson-figure",children:[e.jsx("div",{className:"cad-symbol",children:e.jsxs("svg",{viewBox:"0 0 300 120",style:{width:"100%",maxWidth:"300px"},children:[e.jsx("g",{transform:"translate(150, 55)",children:e.jsxs("g",{transform:"rotate(-6)",children:[e.jsx("rect",{x:"-110",y:"0",width:"220",height:"10",fill:"var(--bg-hover)",stroke:"var(--border-light)",strokeWidth:"1",rx:"1"}),e.jsx("rect",{x:"-95",y:"-8",width:"8",height:"10",fill:"var(--text-bright)",stroke:"var(--text-bright)",strokeWidth:"1"}),e.jsx("rect",{x:"87",y:"-8",width:"8",height:"10",fill:"var(--text-bright)",stroke:"var(--text-bright)",strokeWidth:"1"})]})}),e.jsx("line",{x1:"30",y1:"68",x2:"270",y2:"68",stroke:"var(--text-dim)",strokeWidth:"0.5",strokeDasharray:"4,3"}),e.jsx("line",{x1:"245",y1:"42",x2:"245",y2:"68",stroke:"var(--accent)",strokeWidth:"1.5"}),e.jsx("polygon",{points:"245,42 242,48 248,48",fill:"var(--accent)"}),e.jsx("polygon",{points:"245,68 242,62 248,62",fill:"var(--accent)"}),e.jsx("text",{x:"258",y:"58",fill:"var(--accent)",fontSize:"11",fontFamily:"JetBrains Mono, monospace",children:"D"}),e.jsx("text",{x:"50",y:"35",fill:"var(--text-dim)",fontSize:"9",fontFamily:"JetBrains Mono, monospace",children:"inner (low)"}),e.jsx("text",{x:"200",y:"30",fill:"var(--text-dim)",fontSize:"9",fontFamily:"JetBrains Mono, monospace",children:"outer (high)"}),e.jsx("line",{x1:"150",y1:"28",x2:"190",y2:"28",stroke:"var(--red)",strokeWidth:"1.5"}),e.jsx("polygon",{points:"190,28 184,25 184,31",fill:"var(--red)"}),e.jsx("text",{x:"155",y:"22",fill:"var(--red)",fontSize:"8",fontFamily:"JetBrains Mono, monospace",children:"centrifugal"}),e.jsx("line",{x1:"150",y1:"32",x2:"150",y2:"50",stroke:"var(--blue)",strokeWidth:"1.5"}),e.jsx("polygon",{points:"150,50 147,44 153,44",fill:"var(--blue)"}),e.jsx("text",{x:"130",y:"50",fill:"var(--blue)",fontSize:"8",fontFamily:"JetBrains Mono, monospace",children:"g"}),e.jsx("text",{x:"150",y:"95",fill:"var(--text-dim)",fontSize:"9",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"D = cant (superelevation)"}),e.jsx("text",{x:"150",y:"108",fill:"var(--text-dim)",fontSize:"8",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"outer rail raised to counteract centrifugal force"})]})}),e.jsx("figcaption",{children:"Schematic: Cant (superelevation)  the outer rail is raised by distance D to counteract centrifugal force on curves."})]}),e.jsx("h3",{children:"Cant (Superelevation)"}),e.jsxs("p",{children:["On curves, the outer rail is raised above the inner rail. This ",e.jsx("strong",{children:"cant"}),"(or superelevation) tilts the train inward, counteracting centrifugal force. The",e.jsx("em",{children:"equilibrium cant"})," is the theoretical cant where the resultant force is perpendicular to the rail  passengers feel no lateral force. In practice, trains run at varying speeds, so designers use a ",e.jsx("strong",{children:"cant deficiency"}),": the difference between the applied cant and the equilibrium cant for the fastest train."]}),e.jsxs("p",{children:["The equilibrium cant formula is: ",e.jsxs("em",{children:["E",e.jsx("sub",{children:"q"})," = G  V / (g  R)"]}),", where G is the gauge (1,435 mm), V is speed (m/s), g is gravitational acceleration, and R is the curve radius. In practical units:",e.jsxs("em",{children:[" E",e.jsx("sub",{children:"q"})," (mm)  11.8  V(km/h) / R(m)"]}),"."]}),e.jsx("p",{children:"Typical limits:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Maximum applied cant:"})," 150180 mm (limited by freight trains stopped on curves  too much cant causes the load to shift inward)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Cant deficiency (conventional):"})," 90110 mm"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Cant deficiency (tilting trains):"})," 150275 mm  tilting compensates for the missing cant, so passengers feel comfortable even at high deficiency"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Cant excess:"})," Occurs when slow trains (especially freight) run on track canted for faster trains. Excessive cant excess causes rail corrugation on the inner (low) rail"]})]}),e.jsxs("figure",{className:"lesson-figure",children:[e.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/3/3b/Railway_superelevation_at_Dunbar%2C_July_2012.jpg",alt:"A train on superelevated (canted) track at Dunbar, Scotland, showing the outer rail raised above the inner rail on a curve",loading:"lazy"}),e.jsxs("figcaption",{children:["Superelevation (cant) clearly visible on curved track at Dunbar, Scotland. The outer rail is raised to counteract centrifugal force. Photo: ",e.jsx("a",{href:"https://commons.wikimedia.org/wiki/File:Railway_superelevation_at_Dunbar,_July_2012.jpg",target:"_blank",rel:"noopener noreferrer",children:"Calvinps"}),", Public Domain"]})]}),e.jsx("h3",{children:"Vertical Alignment"}),e.jsxs("p",{children:["Vertical alignment is described by ",e.jsx("strong",{children:"gradients"}),' (slope as a percentage or as a ratio, e.g., "1 in 100" = 1%) and ',e.jsx("strong",{children:"vertical curves"})," (parabolic transitions between different gradients). Where two gradients meet, a vertical curve smooths the change to prevent harsh vertical acceleration on rolling stock. The minimum radius of a vertical curve depends on line speed: higher speeds require larger radii to keep vertical acceleration within passenger comfort limits (typically  0.3 m/s)."]}),e.jsx("p",{children:"Mainline gradient limits are typically 12.5% for heavy mixed traffic. High-speed lines may reach 3.5% since they carry only lightweight EMUs with high power-to-weight ratios. Freight railways aim for even flatter gradients, as hauling 2,000 tonnes up a 1% grade requires enormous tractive effort. Some notable steep gradients:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Lickey Incline (UK):"})," 1 in 37.7 (2.65%)  the steepest sustained adhesion gradient on a UK mainline"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Gotthard Base Tunnel (Switzerland):"})," Maximum 1.25%  kept flat for 2,000-tonne freight trains"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Rack railways:"})," The Pilatus Railway in Switzerland reaches 48% using a Locher rack system  the steepest rack railway in the world"]})]}),e.jsx("h3",{children:"SpeedRadiusCant Relationship"}),e.jsxs("p",{children:["The permitted speed on a curve depends on three variables: the curve radius, the applied cant, and the maximum permissible cant deficiency. The simplified relationship is: ",e.jsxs("em",{children:["V",e.jsx("sub",{children:"max"})," = (R  (D + I) / 11.8)"]}),", where V is in km/h, R in metres, D is the applied cant in mm, and I is the maximum cant deficiency in mm."]}),e.jsx("p",{children:"This relationship drives the entire alignment design process: faster railways need wider curves, which means more land, longer tunnels, and higher construction costs. A curve designed for 160 km/h with D=150 mm and I=100 mm needs a minimum radius of about 1,215 m. Doubling the speed to 320 km/h (with the same parameters) demands R  4,860 m  four times larger. This quadratic relationship between speed and radius is why high-speed lines require such sweeping alignments and why upgrading existing lines to higher speeds is geometrically constrained."}),e.jsx("h3",{children:"Track Geometry Tolerances and Measurement"}),e.jsx("p",{children:"Real track is not perfect. The quality of track geometry is measured by recording deviations from the design alignment. Key parameters include:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Gauge variation:"})," Deviation from nominal gauge (tight gauge risks wheel climb; wide gauge risks derailment)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Twist:"})," The rate of change of cant over a given length  excessive twist causes one wheel to unload and is a primary derailment risk"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Top (longitudinal level):"})," Vertical irregularities along each rail  causes pitching and bouncing"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Alignment:"})," Lateral position errors  causes hunting and lateral oscillation"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Cross-level:"})," The difference in height between the two rails at any point (effectively, cant at that point)"]})]}),e.jsxs("p",{children:["These are measured by ",e.jsx("strong",{children:"track recording vehicles"}),"  instrumented trains or trolleys that run at line speed (or close to it) and record geometry continuously. Network Rail's New Measurement Train (NMT), for example, records track geometry, rail profile, overhead wire position, and ride quality at up to 200 km/h, producing a complete survey of the network multiple times per year. The data feeds directly into maintenance planning systems."]}),e.jsx(ce,{goTo:h,items:[{target:"m0-l3",label:"Developer's Mental Model",desc:"Gauge as API contract / interface specification."},{target:"m1-l3",label:"Switches & Crossings",desc:"Where geometry gets most complex  the turnout."},{target:"m1-l1",label:"Track Structure",desc:"The physical layers that carry these geometric alignments."},{target:"m1-l4",label:"Track Representations",desc:"How this geometry is represented in schematic and geographic drawings."}]})]})}const zf=[{text:"What is the standard gauge measurement?",options:["1,000 mm","1,435 mm","1,524 mm","1,668 mm"],correct:1,explanation:"1,435 mm (4 ft 8 in) is the international standard gauge, used on ~55% of world railways. It originated from early colliery tramways."},{text:"What is the purpose of cant (superelevation) on curved track?",options:["To improve drainage","To counteract centrifugal force on trains in curves","To reduce noise from wheel flanges","To allow higher loads on curves"],correct:1,explanation:"Cant raises the outer rail to counteract centrifugal force. The amount depends on design speed and curve radius."},{text:"What type of mathematical curve is used for transitions on railways?",options:["Circular arc","Parabola","Clothoid (Euler spiral)","Hyperbola"],correct:2,explanation:"Clothoids have curvature increasing linearly with distance, giving a gradual transition  like an easing function in animation."},{text:"What is the typical maximum gradient for a mainline railway?",options:["0.10.5%","12.5%","58%","1015%"],correct:1,explanation:"Mainlines stay below 12.5%. High-speed lines aim for under 3.5%. Mountain railways with rack systems can exceed 78%."}];function qf({goTo:h}){return e.jsxs(e.Fragment,{children:[e.jsxs("figure",{className:"lesson-figure",children:[e.jsx("div",{className:"cad-symbol",children:e.jsxs("svg",{viewBox:"0 0 320 110",style:{width:"100%",maxWidth:"320px"},children:[e.jsx("text",{x:"160",y:"14",fill:"var(--text-dim)",fontSize:"10",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"Turnout  Schematic Plan"}),e.jsx("line",{x1:"20",y1:"45",x2:"300",y2:"45",stroke:"var(--text-bright)",strokeWidth:"2"}),e.jsx("line",{x1:"80",y1:"45",x2:"260",y2:"85",stroke:"var(--text-bright)",strokeWidth:"2"}),e.jsx("circle",{cx:"80",cy:"45",r:"4",fill:"var(--accent)",stroke:"var(--accent)",strokeWidth:"1"}),e.jsx("line",{x1:"225",y1:"40",x2:"225",y2:"50",stroke:"var(--red)",strokeWidth:"2"}),e.jsx("line",{x1:"220",y1:"45",x2:"230",y2:"45",stroke:"var(--red)",strokeWidth:"2"}),e.jsx("rect",{x:"100",y:"50",width:"16",height:"10",fill:"var(--bg-raised)",stroke:"var(--accent)",strokeWidth:"1",rx:"1"}),e.jsx("text",{x:"108",y:"58",fill:"var(--accent)",fontSize:"7",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"M"}),e.jsx("text",{x:"80",y:"30",fill:"var(--accent)",fontSize:"8",fontFamily:"JetBrains Mono, monospace",children:"toe (switch)"}),e.jsx("text",{x:"225",y:"32",fill:"var(--red)",fontSize:"8",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"crossing"}),e.jsx("text",{x:"285",y:"40",fill:"var(--text-dim)",fontSize:"8",fontFamily:"JetBrains Mono, monospace",children:"straight"}),e.jsx("text",{x:"265",y:"95",fill:"var(--text-dim)",fontSize:"8",fontFamily:"JetBrains Mono, monospace",children:"diverge"}),e.jsx("polygon",{points:"35,45 45,41 45,49",fill:"var(--accent-secondary)"}),e.jsx("text",{x:"25",y:"60",fill:"var(--accent-secondary)",fontSize:"7",fontFamily:"JetBrains Mono, monospace",children:"facing"})]})}),e.jsx("figcaption",{children:"Schematic: Turnout plan view  switch toe, diverging route, crossing point, and point machine (M)."})]}),e.jsx("h3",{children:"Turnout Anatomy"}),e.jsx("p",{children:'A turnout (switch and crossing, or "set of points") is the most complex and maintenance-intensive piece of track on the railway. It allows a train to diverge from one route to another. The key components are:'}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Switch blades (switch rails):"}),' Tapered, movable rails that divert the wheel flange. They sit against the stock rails and are moved by a point machine. The taper starts from a fine tip (the "toe") and thickens over 36 m until it becomes full-section rail. The blade must fit tightly against the stock rail when closed to avoid creating a gap that could catch a wheel flange.']}),e.jsxs("li",{children:[e.jsx("strong",{children:"Stock rails:"})," The fixed rails against which the switch blades close. They are machined on the gauge face to receive the blade tip precisely."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Closure rails:"})," Connect the switch blades to the crossing. On the diverging route, these follow a curved alignment."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Crossing (frog):"}),' Where the two running paths intersect. The wheel must cross a gap in the rail  the "flangeway gap"  which is a significant source of noise and wear. The crossing nose (the point of the V) bears the most concentrated impact.']}),e.jsxs("li",{children:[e.jsx("strong",{children:"Check rails (guard rails):"})," Positioned opposite the crossing to hold the wheel firmly and prevent it from taking the wrong path through the flangeway gap. They constrain the back-to-back dimension of the wheelset."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Wing rails:"})," The rails forming the vee of the crossing nose, guiding the wheel through the flangeway gap."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Stretcher bars:"})," Steel bars connecting the two switch blades to ensure they move together as a unit. If one blade is tight against the stock rail, the other must be held open at the correct distance."]})]}),e.jsxs("figure",{className:"lesson-figure",children:[e.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/0/01/Railway_turnout_labelled.jpg",alt:"Overhead photograph of a railway turnout with labelled components: switch rails, stock rails, closure rails, frog/crossing, and guard rails",loading:"lazy"}),e.jsxs("figcaption",{children:["A simple turnout with key components labelled: switch blades, stock rails, closure rails, crossing (frog), and check/guard rails. Photo: ",e.jsx("a",{href:"https://commons.wikimedia.org/wiki/File:Railway_turnout_labelled.jpg",target:"_blank",rel:"noopener noreferrer",children:"TeVe / Picapica"}),", Public Domain"]})]}),e.jsx("h3",{children:"Point Machines and Detection"}),e.jsx("p",{children:"Point machines are the actuators that move the switch blades. They must meet exacting requirements: move the blades reliably in all weather, lock them in position, and report their state back to the signalling system. There are two main types:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Electro-mechanical (clamp-lock):"})," A motor drives a gearbox that moves the blades via a drive rod. Once in position, a mechanical clamp locks the blades against the stock rail. Detection is via separate electrical contacts that verify blade position. The classic UK type is the HW (hand-worked) or M63 clamp-lock machine. These are robust but have many moving parts subject to wear."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Electro-hydraulic:"})," Hydraulic cylinders move the blades, with the hydraulic pressure itself providing the locking force. Used on high-speed lines (e.g., the Alstom CSEE type). The hydraulic system provides smoother, more powerful actuation for the long, heavy blades used in high-speed turnouts."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"In-bearer (machine integrated into the sleeper):"})," Modern designs like the Vossloh Cogifer Easyswitch integrate the actuator within the switch bearer itself, eliminating external rodding and reducing vandalism risk."]})]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Detection"}),' is safety-critical: the signalling system must know with certainty that the blades are correctly positioned and locked before clearing a route over the turnout. Detection circuits verify that the closed blade is within a tight tolerance (typically 34 mm) of the stock rail and that the open blade is far enough away. If detection fails, the signal protecting that turnout cannot be cleared  the route is "locked out."']}),e.jsx("h3",{children:"Turnout Geometry: The 1-in-N System"}),e.jsxs("p",{children:["Turnouts are classified by their ",e.jsx("strong",{children:"crossing angle"}),", expressed as 1-in-N (where N is the ratio of longitudinal to lateral distance). Larger N values mean shallower angles and higher permissible speeds:"]}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"1-in-9:"})," ~40 km/h diverging speed  typical yard/station turnout"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"1-in-12:"})," ~60 km/h  common junction turnout"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"1-in-15 to 1-in-18.5:"})," ~80100 km/h  used where moderate diverging speed is needed"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"1-in-20:"})," ~100 km/h  fast junction"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"1-in-26 to 1-in-32:"})," ~130160 km/h  used on upgraded conventional lines"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"1-in-40 to 1-in-65:"})," ~160220+ km/h  high-speed turnouts, requiring movable-nose crossings"]})]}),e.jsx("p",{children:"A 1-in-9 turnout is about 30 m long. A 1-in-65 high-speed turnout can exceed 200 m  the length and cost increase dramatically with N."}),e.jsx("h3",{children:"Movable-Nose Crossings (Swing-Nose Crossings)"}),e.jsx("p",{children:"On conventional turnouts, the crossing has a fixed nose with a flangeway gap that all wheels must traverse. This gap creates noise, impact, and a point of unsupported running. For high-speed turnouts (typically 1-in-40 and above), this is unacceptable  the impact at speed would cause rapid wear and poor ride quality."}),e.jsxs("p",{children:["The solution is a ",e.jsx("strong",{children:"movable-nose crossing"}),": the crossing nose itself swings to close the gap on whichever route is set. This means the wheel always runs on a continuous rail surface through the crossing, eliminating the impact. The nose is moved by its own point machine and has its own detection circuit. Movable-nose crossings are mechanically complex and expensive but essential for high-speed operation. They are standard on TGV, ICE, and Shinkansen networks."]}),e.jsx("h3",{children:"Facing vs Trailing Movements"}),e.jsxs("p",{children:["A ",e.jsx("strong",{children:"facing"})," movement is when a train approaches the switch blades first (the points split the route ahead). A ",e.jsx("strong",{children:"trailing"}),' movement is when a train approaches the crossing first and trails through the blades. Facing movements are more safety-critical: if the points are set incorrectly, a facing movement will derail. A trailing movement will simply "trail through" and force the blades over (in older spring-point designs). Modern signalling pays special attention to facing point locks and detection.']}),e.jsxs("p",{children:["In signalling terms, any route that includes a facing movement through a set of points requires that those points are ",e.jsx("strong",{children:"detected, locked, and proved"}),"before the signal can clear. The interlocking logic guarantees this  it is one of the fundamental safety principles of railway signalling."]}),e.jsx("h3",{children:"Complex Layouts"}),e.jsx("p",{children:"Beyond simple turnouts, railways use several compound track formations:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Crossover:"})," Two turnouts connecting adjacent parallel tracks, allowing a train to cross from one track to the other. A ",e.jsx("strong",{children:"scissors crossover"})," is two crossovers overlaid, allowing movement in both directions between two tracks  it contains a diamond crossing at the centre."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Diamond crossing:"})," Two tracks crossing without connecting. Contains four flangeway gaps (or four movable noses). The crossing angle may be acute or obtuse."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Single slip:"})," A diamond with one connecting turnout  allows a train to cross straight OR diverge in one direction."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Double slip:"})," A diamond with turnouts in both directions  maximum flexibility in minimum space, but extremely complex mechanically (up to four point machines, four or more detection circuits)."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Ladder track / tandem turnouts:"})," A series of turnouts off one running line providing access to multiple parallel sidings, common in yards."]})]}),e.jsxs("figure",{className:"lesson-figure",children:[e.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/1/14/Aiguillage.jpg",alt:"Double slip points at a railway junction in Lille, France, showing two tracks crossing with switchable connections in both directions",loading:"lazy"}),e.jsxs("figcaption",{children:["Double slip points in Lille, France  two tracks cross with switchable connections in both directions, allowing maximum flexibility in minimal space. Photo: ",e.jsx("a",{href:"https://commons.wikimedia.org/wiki/File:Aiguillage.jpg",target:"_blank",rel:"noopener noreferrer",children:"Remi Jouan"}),", CC BY-SA 3.0"]})]}),e.jsx("h3",{children:"Common Failure Modes"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Wear:"})," The crossing nose and switch blade tips suffer concentrated impact loading and wear rapidly. On busy routes, crossing noses may need replacement every 25 years. Manganese steel castings are used for their work-hardening properties  they get harder as they're hammered."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Point machine failure:"})," Mechanical or electrical failure preventing the blades from moving or being detected. This is the single most common cause of signalling delays on many networks."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Gauge-corner cracking:"})," Rail head fatigue from repeated wheel contact at unfavourable angles, especially on curved closure rails."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Stretcher bar breakage:"})," The bars connecting the two switch blades can fracture, causing asymmetric movement."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Obstruction:"})," Ballast stones, ice, debris, or rail clips fallen between blade and stock rail can prevent the points from closing fully, blocking detection."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Rail creep:"})," Longitudinal movement of the rail through the turnout, misaligning the switch blades relative to the stock rails."]})]}),e.jsxs(N,{type:"analogy",children:["A turnout is an ",e.jsx("strong",{children:"API router"}),". Incoming requests (trains) are directed to one of several handlers (routes) based on the current configuration (point position). The 1-in-N geometry is your latency budget  a shallow angle (high N) means lower latency (higher speed) but requires more resources (a longer, costlier turnout). Facing points are like incoming request routing where getting it wrong causes a crash; trailing points are like response routing where errors are more forgiving."]}),e.jsx(ce,{goTo:h,items:[{target:"m4-l4",label:"Points, Routes & Level Crossings",desc:"How signalling controls and detects point positions."},{target:"m4-l2",label:"Interlocking & Train Detection",desc:"The safety logic that prevents conflicting point movements."},{target:"m1-l2",label:"Track Geometry",desc:"The geometric principles underlying turnout design."},{target:"m1-l4",label:"Track Representations",desc:"How turnout layouts are drawn in schematic and geographic views."}]})]})}const Nf=[{text:"What are the main components of a railway turnout?",options:["Points, rails, and signals","Switch rails, crossing (frog), and check rails","Sleepers, ballast, and clips","Motors, detectors, and locks"],correct:1,explanation:"A turnout has switch rails (movable blades), a crossing/frog (where rails intersect), and check rails (guiding opposite wheel)."},{text:'What does a "1-in-9" turnout geometry mean for train speed?',options:["Trains can pass at up to 90 km/h","Diverging speed is limited to about 40 km/h","Only freight trains can use it","It requires no speed restriction"],correct:1,explanation:"A 1-in-9 has a sharp diverging angle, limiting speed to ~40 km/h. A 1-in-40 allows 160+ km/h diverging."},{text:"What is the difference between a facing and trailing movement through points?",options:["Facing is faster, trailing is slower","Facing means the train approaches switch tips first (riskier); trailing approaches from the heel","They are interchangeable terms","Facing is for passengers, trailing for freight"],correct:1,explanation:"In a facing movement, incorrect point setting risks derailment. In trailing, wheels naturally deflect the blades  inherently safer."}];function Wf({goTo:h}){return e.jsxs(e.Fragment,{children:[e.jsx("h3",{children:"Why Two Kinds of Map?"}),e.jsxs("p",{children:["A railway network can be drawn in fundamentally different ways, depending on what question you're trying to answer. The two dominant representation styles are ",e.jsx("strong",{children:"geographic"})," (true-to-location) and ",e.jsx("strong",{children:"schematic"}),"(topologically simplified). Each exists because different users need different information  and cramming everything into one drawing makes it unreadable."]}),e.jsx("p",{children:"This duality shows up everywhere in railways: control room displays, engineering drawings, passenger maps, and digital systems all choose one representation or the other (or layer both). Understanding when to use which is a core skill."}),e.jsx("h3",{children:"Geographic Representation"}),e.jsx("p",{children:"A geographic representation preserves the real spatial position and shape of the track. Every curve, gradient, and turnout is drawn at its true position on the Earth's surface. This is the representation used for:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Alignment design:"})," The horizontal and vertical geometry of the track, drawn on Ordnance Survey (or equivalent) mapping. This is where the clothoids, radii, and gradients from Lesson 1.2 live."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Engineering plans:"})," Plan and profile drawings showing the track in relation to land boundaries, structures, earthworks, drainage, and other infrastructure. Typically drawn at scales of 1:500 to 1:2,500."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"GIS (Geographic Information Systems):"})," Modern railways maintain their asset data in geospatial databases where every rail, sleeper, signal, and cable route has precise coordinates. Network Rail's GEOGIS, SNCF's Atlas, and DB Netz's ISR are examples."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Satellite and aerial survey:"})," LiDAR and photogrammetry produce detailed 3D models of the railway corridor, used for vegetation management, clearance checks, and asset condition surveys."]})]}),e.jsxs("p",{children:["Geographic plans are essential for anyone doing physical work on the railway  construction, maintenance, land acquisition, environmental assessment. They answer the question: ",e.jsx("em",{children:`"Where exactly is this, and what's around it?"`})]}),e.jsx("p",{children:"The challenge of geographic representation is scale and complexity. A busy station throat with 20 turnouts, multiple platforms, and interlaced routes is almost impossible to read on a geographic plan at a useful scale. The lines are close together, labels overlap, and the logical structure of the track layout is obscured by physical geometry."}),e.jsxs("figure",{className:"lesson-figure",children:[e.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/0/0c/OSM_Gare_Saint-Lazare.png",alt:"OpenStreetMap view of Paris Gare Saint-Lazare showing the geographic track layout with curves, platforms, and the station throat",loading:"lazy"}),e.jsxs("figcaption",{children:["Geographic view of Paris Gare Saint-Lazare from OpenStreetMap  the true spatial layout of tracks, platforms, and the complex station throat. Note how individual turnout arrangements become hard to trace at this scale. Image: ",e.jsx("a",{href:"https://www.openstreetmap.org/",target:"_blank",rel:"noopener noreferrer",children:"OpenStreetMap contributors"}),", ODbL"]})]}),e.jsx("h3",{children:"Schematic Representation"}),e.jsxs("p",{children:["A schematic (or diagrammatic) representation strips away geographic accuracy to reveal the ",e.jsx("strong",{children:"topological structure"}),"  what is connected to what, in what order. Curves are straightened, distances are distorted, and the layout is rearranged to maximise clarity. The information preserved is ",e.jsx("em",{children:"connectivity"})," and ",e.jsx("em",{children:"sequence"}),", not position and shape."]}),e.jsx("p",{children:"The most famous example is the passenger network map  descended from Harry Beck's 1931 London Underground diagram, which abandoned geography in favour of a clean circuit-diagram style. Beck's insight was that underground passengers don't need to know the geographic shape of the route  they need to know which stations are on which lines, where to change, and the order of stops."}),e.jsxs("p",{children:["But schematic representations are far more than passenger maps. In railway engineering, the most critical schematic is the ",e.jsx("strong",{children:"signalling control table diagram"}),"(or track layout diagram), used in control rooms and design offices:"]}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Single-line diagrams:"})," Show each track as a single horizontal line, with turnouts represented as angular forks. Distances are not to scale  a 200 m station throat might get the same drawing space as a 20 km plain-line section if the station has more equipment to show. Signals, track circuits, axle counters, and point machines are all marked using standard symbols."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Control room displays:"})," The screens in a signal control centre show a schematic view of the track layout with real-time train positions, signal aspects, and point positions overlaid. Signallers work entirely from this schematic  they never see a geographic view during normal operations."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Interlocking data:"}),' The logic tables that define which signal routes are safe reference the schematic layout, not the physical layout. Route "A to B" is defined by a sequence of track sections and point positions on the diagram.']})]}),e.jsxs("figure",{className:"lesson-figure",children:[e.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/a/a8/Signalbox_diagram%2C_Shrewsbury.jpg",alt:"Signalling diagram from Shrewsbury signal box showing a schematic track layout with tracks as horizontal lines, turnouts as angular forks, and signal symbols",loading:"lazy"}),e.jsxs("figcaption",{children:["Schematic track diagram from Shrewsbury signal box. Each track is a straight line, turnouts are shown as angular forks, and signals appear as standard symbols. Geography is irrelevant  connectivity and sequence are everything. Photo: ",e.jsx("a",{href:"https://commons.wikimedia.org/wiki/File:Signalbox_diagram,_Shrewsbury.jpg",target:"_blank",rel:"noopener noreferrer",children:"mattbuck"}),", CC BY-SA 3.0"]})]}),e.jsxs(N,{type:"analogy",children:["Geographic vs schematic is ",e.jsx("strong",{children:"physical network topology vs logical network topology"})," in IT. A physical diagram shows where cables actually run through ducts and rooms. A logical diagram shows VLANs, subnets, and routing relationships  which may bear no resemblance to the physical cable layout. You need both: the physical view to install and maintain cable, the logical view to configure routing and debug connectivity. A signaller working from a schematic track diagram is exactly like a network engineer working from a logical topology diagram."]}),e.jsxs("figure",{className:"lesson-figure",children:[e.jsx("div",{className:"cad-symbol",children:e.jsxs("svg",{viewBox:"0 0 340 170",style:{width:"100%",maxWidth:"340px"},children:[e.jsx("text",{x:"170",y:"14",fill:"var(--text-dim)",fontSize:"10",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"Schematic Drawing Symbols"}),e.jsx("line",{x1:"20",y1:"45",x2:"320",y2:"45",stroke:"var(--text-bright)",strokeWidth:"2"}),e.jsx("line",{x1:"60",y1:"45",x2:"100",y2:"65",stroke:"var(--text-bright)",strokeWidth:"2"}),e.jsx("text",{x:"75",y:"78",fill:"var(--text-dim)",fontSize:"8",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"turnout"}),e.jsx("line",{x1:"140",y1:"45",x2:"140",y2:"28",stroke:"var(--red)",strokeWidth:"1.5"}),e.jsx("circle",{cx:"140",cy:"26",r:"4",fill:"var(--red)"}),e.jsx("text",{x:"140",y:"19",fill:"var(--text-dim)",fontSize:"7",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"stop"}),e.jsx("line",{x1:"180",y1:"45",x2:"180",y2:"28",stroke:"var(--accent)",strokeWidth:"1.5"}),e.jsx("polygon",{points:"180,26 175,32 185,32",fill:"var(--accent)"}),e.jsx("text",{x:"180",y:"19",fill:"var(--text-dim)",fontSize:"7",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"dist"}),e.jsx("line",{x1:"210",y1:"50",x2:"210",y2:"55",stroke:"var(--blue)",strokeWidth:"1"}),e.jsx("line",{x1:"280",y1:"50",x2:"280",y2:"55",stroke:"var(--blue)",strokeWidth:"1"}),e.jsx("line",{x1:"210",y1:"55",x2:"280",y2:"55",stroke:"var(--blue)",strokeWidth:"1",strokeDasharray:"3,2"}),e.jsx("text",{x:"245",y:"65",fill:"var(--blue)",fontSize:"7",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"track section"}),e.jsx("line",{x1:"320",y1:"38",x2:"320",y2:"52",stroke:"var(--text-bright)",strokeWidth:"3"}),e.jsx("text",{x:"315",y:"34",fill:"var(--text-dim)",fontSize:"7",fontFamily:"JetBrains Mono, monospace",textAnchor:"end",children:"buffer"}),e.jsx("line",{x1:"20",y1:"110",x2:"320",y2:"110",stroke:"var(--text-bright)",strokeWidth:"2"}),e.jsx("line",{x1:"20",y1:"130",x2:"320",y2:"130",stroke:"var(--text-bright)",strokeWidth:"2"}),e.jsx("line",{x1:"130",y1:"110",x2:"170",y2:"130",stroke:"var(--text-bright)",strokeWidth:"2"}),e.jsx("line",{x1:"170",y1:"110",x2:"210",y2:"130",stroke:"var(--text-bright)",strokeWidth:"2"}),e.jsx("text",{x:"170",y:"148",fill:"var(--text-dim)",fontSize:"8",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"scissors crossover"}),e.jsx("text",{x:"30",y:"105",fill:"var(--accent)",fontSize:"8",fontFamily:"JetBrains Mono, monospace",children:"Up "}),e.jsx("text",{x:"290",y:"143",fill:"var(--accent)",fontSize:"8",fontFamily:"JetBrains Mono, monospace",children:" Dn"})]})}),e.jsx("figcaption",{children:"Schematic symbols: Standard conventions for track, turnouts, signals, track sections, buffer stops, and crossovers."})]}),e.jsx("h3",{children:"Schematic Drawing Conventions"}),e.jsx("p",{children:"Railway schematics use a well-established set of conventions that vary by country but share common principles:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Track:"})," Drawn as single lines (one line per track), typically horizontal. Up direction (toward London, in UK convention) is usually shown on the right or at the top."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Turnouts:"})," Shown as angular forks diverging from the main line. The angle is exaggerated for visibility  a real 1-in-40 turnout with an almost imperceptible angle is drawn with a clearly visible divergence."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Signals:"})," Small symbols on the track line  a filled circle for a stop signal, an arrow for a distant signal, with the type indicated by additional markers."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Track circuits / axle counter sections:"})," Labelled sections between signals or between joints, often colour-coded on control displays (red = occupied, clear = green/white)."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Distances (chainage / mileage):"}),` Marked at key points  signals, turnouts, structures. This bridges the schematic back to the geographic world. A signaller might say "there's a track fault at 42 miles 17 chains"  a geographic reference interpreted via the schematic.`]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Platforms:"})," Shown as thick bars or rectangles beside the track line, numbered."]})]}),e.jsx("h3",{children:"The Passenger Map: A Special Case"}),e.jsx("p",{children:"The passenger-facing schematic (like the London Underground map, Paris Metro map, or Tokyo subway map) is a further simplification. It strips away even operational detail (signals, track circuits) and retains only:"}),e.jsxs("ul",{children:[e.jsx("li",{children:"Lines (colour-coded by route)"}),e.jsx("li",{children:"Stations (in correct topological order)"}),e.jsx("li",{children:"Interchange points"}),e.jsx("li",{children:"Zones or fare boundaries"})]}),e.jsxs("p",{children:["Harry Beck's design principles  using only horizontal, vertical, and 45-degree lines; enlarging the central area; equalising station spacing  have been imitated worldwide. The key design tension is between ",e.jsx("strong",{children:"topological clarity"})," and",e.jsx("strong",{children:"geographic expectation"}),". Beck's map distorts London's geography dramatically (the central area is vastly enlarged relative to the suburbs), which can mislead passengers about walking distances between stations. Many modern maps use a hybrid approach, preserving rough geographic proportions while still simplifying the route geometry."]}),e.jsx("p",{children:"Mainline rail passenger maps face an even harder design problem. Unlike metro maps where stations are close together and lines are largely self-contained, mainline networks have huge distance variations, complex branching, and overlapping services (multiple train operators on the same tracks). The UK's National Rail map, for instance, uses a geographic layout but simplifies route geometry  it's a compromise between the two extremes."}),e.jsx("h3",{children:"Digital Track Models"}),e.jsxs("p",{children:["Modern railways increasingly maintain a ",e.jsx("strong",{children:"digital twin"})," of the infrastructure  a unified data model that supports both geographic and schematic views from a single source of truth. Key standards and systems include:"]}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"railML:"})," An XML-based open data standard for exchanging railway data. It defines schemas for infrastructure (track topology, geometry, assets), timetables, and rolling stock. railML uses a topological model  the track is described as a graph of nodes (switches, crossings, buffer stops) and edges (track segments) with geographic coordinates and engineering attributes layered on."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"EU Agency for Railways RINF:"})," The Register of Infrastructure is a European database describing every line section, track, tunnel, platform, and loading gauge on the EU rail network. It enables interoperability checks  can this train physically run on this route?"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"BIM (Building Information Modelling):"})," Increasingly adopted for new rail construction, BIM creates 3D parametric models of the track and its context (earthworks, structures, services). The UK's HS2 project was designed entirely in BIM."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"OpenStreetMap (OSM):"})," The crowd-sourced mapping platform includes surprisingly detailed railway data  tracks, stations, signals, platforms, gauges, and electrification are all tagged in the OSM data model. The OpenRailwayMap rendering layer visualises this data with railway-specific styling."]})]}),e.jsx("h3",{children:"Chainage and Mileage Systems"}),e.jsxs("p",{children:["The bridge between schematic and geographic worlds is the ",e.jsx("strong",{children:"linear referencing system"}),"  a way of identifying any point on the railway by its distance along the track from a datum. Different countries use different systems:"]}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"UK: Miles and chains."}),' Inherited from the original railway companies. 1 chain = 22 yards  20.1 m. "42m 17ch" means 42 miles and 17 chains from the London terminus. Some lines count from a different origin.']}),e.jsxs("li",{children:[e.jsx("strong",{children:"Most of Europe: Kilometres."}),' "PK 127+450" means 127 km and 450 m from the line origin (PK = Point Kilomtrique in French).']}),e.jsxs("li",{children:[e.jsx("strong",{children:"Engineering chainage:"}),' Used during design and construction. Measured in metres from an arbitrary start point. "Ch 15,230" means 15,230 m from the project datum.']})]}),e.jsx("p",{children:"These systems are not always monotonic  historical line mergers, realignments, and errors can create discontinuities (jumps or overlaps in the chainage). Modern GIS systems overlay geographic coordinates on the legacy mileage system, allowing both to coexist."}),e.jsxs(N,{type:"analogy",children:["Chainage is like ",e.jsx("strong",{children:"array indexing with legacy offsets"}),". The underlying data (track position) is continuous, but the indexing scheme (mileage) has historical quirks  skipped values, off-by-one errors from line mergers, and different start-of-array points for different routes. Modern GIS systems are the equivalent of wrapping the legacy array in an abstraction layer that maps logical indices to physical positions."]}),e.jsx("h3",{children:"When to Use Which Representation"}),e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",marginBottom:"1em"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{borderBottom:"2px solid var(--border)"},children:[e.jsx("th",{style:{textAlign:"left",padding:"8px"},children:"Task"}),e.jsx("th",{style:{textAlign:"left",padding:"8px"},children:"Representation"}),e.jsx("th",{style:{textAlign:"left",padding:"8px"},children:"Why"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{style:{borderBottom:"1px solid var(--border)"},children:[e.jsx("td",{style:{padding:"8px"},children:"Designing a new alignment"}),e.jsx("td",{style:{padding:"8px"},children:"Geographic"}),e.jsx("td",{style:{padding:"8px"},children:"Must fit within real land boundaries, earthworks, and structures"})]}),e.jsxs("tr",{style:{borderBottom:"1px solid var(--border)"},children:[e.jsx("td",{style:{padding:"8px"},children:"Controlling train movements"}),e.jsx("td",{style:{padding:"8px"},children:"Schematic"}),e.jsx("td",{style:{padding:"8px"},children:"Signallers need connectivity and sequence, not geography"})]}),e.jsxs("tr",{style:{borderBottom:"1px solid var(--border)"},children:[e.jsx("td",{style:{padding:"8px"},children:"Maintenance planning"}),e.jsx("td",{style:{padding:"8px"},children:"Both"}),e.jsx("td",{style:{padding:"8px"},children:"Identify assets on schematic, locate them on the ground with geographic"})]}),e.jsxs("tr",{style:{borderBottom:"1px solid var(--border)"},children:[e.jsx("td",{style:{padding:"8px"},children:"Passenger wayfinding"}),e.jsx("td",{style:{padding:"8px"},children:"Schematic"}),e.jsx("td",{style:{padding:"8px"},children:"Topological clarity more useful than geographic accuracy"})]}),e.jsxs("tr",{style:{borderBottom:"1px solid var(--border)"},children:[e.jsx("td",{style:{padding:"8px"},children:"Signalling design"}),e.jsx("td",{style:{padding:"8px"},children:"Schematic (with chainage)"}),e.jsx("td",{style:{padding:"8px"},children:"Route logic is topological; chainage provides distance for braking calculations"})]}),e.jsxs("tr",{style:{borderBottom:"1px solid var(--border)"},children:[e.jsx("td",{style:{padding:"8px"},children:"Environmental impact assessment"}),e.jsx("td",{style:{padding:"8px"},children:"Geographic"}),e.jsx("td",{style:{padding:"8px"},children:"Must show relationship to habitats, water courses, communities"})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"8px"},children:"Timetabling and simulation"}),e.jsx("td",{style:{padding:"8px"},children:"Topological graph"}),e.jsx("td",{style:{padding:"8px"},children:"The network is modelled as a directed graph of nodes and edges with distance/time attributes"})]})]})]}),e.jsx(ce,{goTo:h,items:[{target:"m1-l2",label:"Track Geometry",desc:"The alignment geometry that geographic representations must capture."},{target:"m4-l1",label:"Block System & Signals",desc:"Signalling schematics  the most operationally critical schematic diagrams."},{target:"m4-l2",label:"Interlocking & Detection",desc:"How interlocking logic references the schematic track layout."},{target:"m8-l1",label:"Timetabling & Scheduling",desc:"Timetabling uses topological network models, not geographic ones."}]})]})}const Of=[{text:"What is the key difference between a geographic and a schematic track representation?",options:["Geographic uses colour, schematic uses black and white","Geographic preserves true spatial positions; schematic preserves topology (connectivity and sequence)","Geographic is for engineers, schematic is only for passengers","There is no meaningful difference  both show the same information"],correct:1,explanation:"Geographic representations show true spatial positions and shapes. Schematics sacrifice geographic accuracy to show the logical structure clearly  what connects to what, in what order."},{text:"What representation does a signaller in a control room typically use?",options:["Geographic (aerial view)","Schematic (track diagram)","A passenger map","A 3D model"],correct:1,explanation:"Control room displays show schematic track diagrams with real-time train positions, signal aspects, and point positions. Signallers need topology and connectivity, not geography."},{text:'What is a "linear referencing system" (chainage/mileage) used for?',options:["Measuring train length","Identifying any point on the railway by its distance along the track from a datum","Calculating ticket prices","Timing train journeys"],correct:1,explanation:'Chainage or mileage identifies locations by distance from a datum (e.g., "42 miles 17 chains from London"). It bridges the schematic and geographic worlds.'},{text:"What did Harry Beck's 1931 London Underground map pioneer?",options:["The first map printed in colour","Abandoning geographic accuracy in favour of topological clarity for passenger wayfinding","Using satellite imagery for transit maps","Showing real-time train positions"],correct:1,explanation:"Beck abandoned geography, using only horizontal, vertical, and 45-degree lines with equalised station spacing. This topological approach has been imitated by transit systems worldwide."}];function Uf(h,y){switch(h){case"m1-l1":return e.jsx(Df,{goTo:y});case"m1-l2":return e.jsx(Bf,{goTo:y});case"m1-l3":return e.jsx(qf,{goTo:y});case"m1-l4":return e.jsx(Wf,{goTo:y});default:return null}}const Lf={"m1-l1":Rf,"m1-l2":zf,"m1-l3":Nf,"m1-l4":Of};function Gf({goTo:h}){return e.jsxs(e.Fragment,{children:[e.jsxs("figure",{className:"lesson-figure",children:[e.jsx("div",{className:"cad-symbol",children:e.jsxs("svg",{viewBox:"0 0 260 180",style:{width:"100%",maxWidth:"260px"},children:[e.jsx("text",{x:"130",y:"14",fill:"var(--text-dim)",fontSize:"10",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"Borehole Log"}),e.jsx("rect",{x:"80",y:"25",width:"40",height:"20",fill:"var(--accent-secondary)",opacity:"0.3",stroke:"var(--text-bright)",strokeWidth:"1"}),e.jsx("text",{x:"128",y:"38",fill:"var(--text-dim)",fontSize:"8",fontFamily:"JetBrains Mono, monospace",children:"Topsoil"}),e.jsx("rect",{x:"80",y:"45",width:"40",height:"40",fill:"var(--accent)",opacity:"0.15",stroke:"var(--text-bright)",strokeWidth:"1"}),e.jsx("text",{x:"128",y:"68",fill:"var(--text-dim)",fontSize:"8",fontFamily:"JetBrains Mono, monospace",children:"Clay"}),e.jsx("rect",{x:"80",y:"85",width:"40",height:"35",fill:"var(--bg-hover)",stroke:"var(--text-bright)",strokeWidth:"1"}),e.jsx("text",{x:"128",y:"105",fill:"var(--text-dim)",fontSize:"8",fontFamily:"JetBrains Mono, monospace",children:"Sand"}),e.jsx("rect",{x:"80",y:"120",width:"40",height:"40",fill:"var(--border)",opacity:"0.5",stroke:"var(--text-bright)",strokeWidth:"1"}),e.jsx("text",{x:"128",y:"143",fill:"var(--text-dim)",fontSize:"8",fontFamily:"JetBrains Mono, monospace",children:"Rock"}),e.jsx("text",{x:"72",y:"30",fill:"var(--accent)",fontSize:"8",fontFamily:"JetBrains Mono, monospace",textAnchor:"end",children:"0m"}),e.jsx("text",{x:"72",y:"90",fill:"var(--accent)",fontSize:"8",fontFamily:"JetBrains Mono, monospace",textAnchor:"end",children:"5m"}),e.jsx("text",{x:"72",y:"125",fill:"var(--accent)",fontSize:"8",fontFamily:"JetBrains Mono, monospace",textAnchor:"end",children:"8m"}),e.jsx("text",{x:"72",y:"163",fill:"var(--accent)",fontSize:"8",fontFamily:"JetBrains Mono, monospace",textAnchor:"end",children:"15m"}),e.jsx("line",{x1:"75",y1:"85",x2:"125",y2:"85",stroke:"var(--blue)",strokeWidth:"1.5",strokeDasharray:"4,2"}),e.jsx("text",{x:"50",y:"85",fill:"var(--blue)",fontSize:"8",fontFamily:"JetBrains Mono, monospace",textAnchor:"end",children:"GWL "}),e.jsx("text",{x:"200",y:"24",fill:"var(--accent)",fontSize:"8",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"SPT N"}),e.jsx("text",{x:"200",y:"68",fill:"var(--text-dim)",fontSize:"9",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"N=18"}),e.jsx("text",{x:"200",y:"105",fill:"var(--text-dim)",fontSize:"9",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"N=35"}),e.jsx("text",{x:"200",y:"143",fill:"var(--text-dim)",fontSize:"9",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"N=50+"})]})}),e.jsx("figcaption",{children:"Schematic: Borehole log  soil/rock layers, groundwater level (GWL), and SPT blow counts."})]}),e.jsx("h3",{children:"Why Investigate the Ground?"}),e.jsx("p",{children:"Before you can design anything  embankments, cuttings, foundations, drainage  you must know what the ground is made of, how it behaves, and what hazards lurk beneath the surface. Ground investigation (GI) is the geotechnical equivalent of requirements gathering: skip it, and every subsequent decision is built on assumptions."}),e.jsx("p",{children:"The consequences of inadequate GI are severe: unexpected soft ground can add months to a programme and millions to costs; undetected mine workings can cause sudden collapse; unknown contamination can trigger regulatory shutdowns. The UK's Institution of Civil Engineers has estimated that inadequate site investigation contributes to the majority of construction cost overruns on civil engineering projects."}),e.jsxs("figure",{className:"lesson-figure",children:[e.jsx("div",{className:"image-placeholder",children:e.jsx("p",{children:"IMAGE NEEDED: Photo of a geotechnical borehole drilling rig in operation next to a railway, or a soil sample core being extracted. Shows the physical process of ground investigation."})}),e.jsx("figcaption",{children:"A borehole drilling rig investigating ground conditions  the geotechnical equivalent of requirements gathering."})]}),e.jsx("h3",{children:"Desk Study & Walkover Survey"}),e.jsxs("p",{children:["Every GI begins with a ",e.jsx("strong",{children:"desk study"}),": reviewing published geological maps, historical Ordnance Survey maps (which reveal old quarries, mines, landfills), aerial photographs, and existing borehole records from the British Geological Survey database. This is followed by a ",e.jsx("strong",{children:"walkover survey"}),"  physically walking the site to observe ground conditions, drainage patterns, slope instability signs (tension cracks, hummocky ground), and vegetation indicators."]}),e.jsx("p",{children:"The desk study also identifies:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Mining records:"})," In coalfield areas (South Wales, Yorkshire, Midlands, Scotland), historical mine workings can exist at shallow depth. Coal Authority records and old mine plans are essential. Unrecorded workings remain a significant hazard."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Made ground:"})," Areas of fill material from previous development  old railway embankments, demolished buildings, landfill sites. Made ground is highly variable and often poorly compacted."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Natural hazards:"})," Dissolution features in chalk and limestone (sinkholes, swallow holes), shrink-swell clays that move seasonally with moisture changes, landslide-prone slopes, and alluvial floodplains with soft, compressible soils."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Environmental constraints:"})," Sites of Special Scientific Interest (SSSIs), protected species habitats, and contaminated land registers that may affect access, methodology, and disposal requirements."]})]}),e.jsx("h3",{children:"Intrusive Investigation"}),e.jsxs("p",{children:["After the desk study, physical investigation begins. The investigation is designed in phases: a ",e.jsx("strong",{children:"preliminary investigation"})," to confirm the geological model, followed by a ",e.jsx("strong",{children:"detailed investigation"})," to obtain design parameters for specific structures."]}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Boreholes:"})," Drilled typically 1030 m deep using cable percussion or rotary methods. Produce continuous samples and allow in-situ testing at depth. Cable percussion rigs are the UK workhorse  a heavy chisel tool is repeatedly dropped to break and remove the ground, with samples taken at regular intervals. Rotary drilling uses a rotating drill bit and can penetrate hard rock. Borehole logs record every material encountered, with samples sealed and sent to the laboratory."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Trial pits:"})," Excavated by machine to 35 m depth. Cheaper and quicker than boreholes, and allow direct visual inspection of soil layers, structure, and groundwater seepage. The geologist can physically examine the exposed face  something impossible in a borehole. Limited by depth and safety (they must be shored or battered if anyone enters)."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Window samples:"})," Small-diameter (typically 50100 mm) continuous samples taken using a percussive rig. Faster and cheaper than full boreholes, useful for obtaining soil profiles to moderate depth (515 m). Commonly used to fill gaps between deeper boreholes."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Dynamic probing:"})," A cone is driven into the ground by a standard hammer, and blow counts are recorded continuously. Quick and cheap, providing a relative stiffness profile without recovering samples. Useful for mapping lateral variation across a site."]})]}),e.jsx("h3",{children:"In-Situ Testing"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"SPT (Standard Penetration Test):"})," A 63.5 kg hammer is dropped 760 mm to drive a split-barrel sampler into the ground. The number of blows (N-value) for 300 mm penetration correlates to soil strength. Quick, ubiquitous, and well-understood. The N-value is corrected for overburden pressure and energy ratio to give a standardised N value. In sands, SPT N-values directly correlate to relative density and friction angle. In clays, SPT is less reliable and other methods are preferred."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"CPT (Cone Penetration Test):"})," A cone is pushed into the ground at a steady rate (20 mm/s) while measuring tip resistance (q",e.jsx("sub",{children:"c"}),") and sleeve friction (f",e.jsx("sub",{children:"s"}),") continuously. Produces a detailed, continuous strength profile with data points every 20 mm. The friction ratio (f",e.jsx("sub",{children:"s"}),"/q",e.jsx("sub",{children:"c"}),") classifies the soil type. A piezocone (CPTu) also measures pore water pressure, adding groundwater information. More expensive than SPT but far more informative  the gold standard for site characterisation."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Pressuremeter test:"})," An inflatable probe is expanded against the borehole wall while measuring pressure and displacement. Directly measures in-situ stiffness and strength, which is particularly useful for foundation design."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Vane shear test:"})," A four-bladed vane is pushed into soft clay and rotated. The torque required to shear the clay gives the undrained shear strength directly. Essential for soft ground assessment."]})]}),e.jsx("h3",{children:"Laboratory Testing"}),e.jsx("p",{children:"Samples recovered from boreholes and trial pits are sent to a geotechnical laboratory for classification and strength testing:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Atterberg limits:"})," Determine the moisture content at which a clay changes from solid to plastic to liquid state. The ",e.jsx("em",{children:"liquid limit"})," (LL) and ",e.jsx("em",{children:"plastic limit"})," (PL) define the ",e.jsx("em",{children:"plasticity index"})," (PI = LL  PL), which classifies the clay's behaviour. High-PI clays are more prone to shrink-swell movement and are generally more problematic for construction."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Particle size distribution:"})," Sieve analysis for coarse fractions (gravel, sand) and sedimentation (hydrometer) analysis for fine fractions (silt, clay). Classifies the soil and determines its suitability as fill material."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Triaxial testing:"})," A cylindrical sample is confined in a pressurised cell and loaded to failure. Different drainage conditions (UU, CU, CD) give different strength parameters. ",e.jsx("strong",{children:"Consolidated undrained (CU)"})," tests are the standard for slope stability analysis, providing effective stress parameters c' and '."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Oedometer (consolidation) test:"})," Measures how much a saturated clay will settle under load and how quickly. Essential for predicting embankment settlement on soft ground. Produces the coefficient of consolidation (c",e.jsx("sub",{children:"v"}),") and compression index (C",e.jsx("sub",{children:"c"}),")."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Chemical testing:"})," Sulphate content, pH, and organic content of the soil, which determine the aggressiveness of the ground toward concrete foundations. BRE Special Digest 1 classifies the design sulphate class."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Compaction testing (Proctor):"})," Determines the optimum moisture content for maximum dry density  critical for specifying earthworks compaction requirements."]})]}),e.jsx("h3",{children:"Groundwater & Contamination"}),e.jsxs("p",{children:["Groundwater level and flow direction profoundly affect everything from excavation methods to long-term slope stability. Monitoring standpipes or piezometers are installed in boreholes to track water levels over time  a single reading is insufficient, as groundwater varies seasonally. ",e.jsx("strong",{children:"Response zones"})," in piezometers target specific aquifers, allowing the groundwater regime at different depths to be understood."]}),e.jsx("p",{children:"On brownfield sites (former industrial land), contaminated land assessment is mandatory. Testing covers:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Hydrocarbons:"})," From fuel storage, garages, and industrial processes. Includes total petroleum hydrocarbons (TPH), BTEX compounds, and polycyclic aromatic hydrocarbons (PAHs)."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Heavy metals:"})," Lead, cadmium, mercury, chromium, arsenic  common on former industrial sites and gas works."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Asbestos:"})," Found in demolition rubble and made ground. Requires specialist handling and disposal protocols."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Ground gas:"})," Methane and carbon dioxide from landfill, former coal workings, or organic deposits. Gas monitoring wells track concentrations over time. Significant gas levels require protection measures in structures."]})]}),e.jsxs("p",{children:["Contamination triggers a ",e.jsx("strong",{children:"risk assessment"})," (source-pathway-receptor model) to determine whether remediation is required before construction can proceed. Remediation options range from excavation and disposal (expensive) to in-situ treatment (bioremediation, chemical stabilisation) to containment (capping layers, barrier walls)."]}),e.jsx("h3",{children:"Geophysical Surveys"}),e.jsx("p",{children:"Non-intrusive geophysical methods can rapidly survey large areas, identifying anomalies that guide where to place boreholes:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Ground Penetrating Radar (GPR):"})," Transmits radar pulses into the ground and records reflections from interfaces (soil boundaries, buried structures, voids). Effective to about 510 m in dry soils, much less in clay. Used to map shallow utilities, buried foundations, and ballast thickness on existing railways."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Electrical resistivity:"})," Measures the ground's electrical resistance, which varies with soil type, moisture, and saturation. Can map buried channels, contamination plumes, and the water table over large areas."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Seismic refraction/reflection:"})," Measures the speed of seismic waves through the ground to map rock head depth and identify geological boundaries. Useful for tunnel alignment design."]})]}),e.jsxs(N,{type:"analogy",children:["Ground investigation is ",e.jsx("strong",{children:"infrastructure benchmarking and requirements gathering"}),". You would never deploy a production system without understanding the hardware it runs on  CPU specs, memory, disk I/O, network latency. A desk study is reading the vendor spec sheets. Boreholes and CPTs are running actual benchmarks. Lab testing is profiling under controlled conditions. Geophysics is a non-intrusive scan  like running ",e.jsx("code",{children:"nmap"})," before detailed penetration testing. And skipping GI is deploying to production without ever testing  sometimes it works, but when it fails, it fails catastrophically."]}),e.jsx(ce,{goTo:h,items:[{target:"m2-l2",label:"Earthworks",desc:"Using GI results to design cuttings and embankments."},{target:"m2-l3",label:"Drainage & Slope Stability",desc:"Groundwater findings drive drainage design."},{target:"m3-l1",label:"Bridges",desc:"Foundation design depends entirely on GI results."},{target:"m3-l2",label:"Tunnels & Retaining Walls",desc:"Tunnelling method selection depends on ground conditions."}]})]})}const Hf=[{text:"What is the primary purpose of a ground investigation?",options:["To find buried treasure","To determine soil properties, bearing capacity, and groundwater conditions","To plan the track alignment","To test signalling equipment"],correct:1,explanation:"Ground investigation determines soil composition, strength, water table position, and hazards. All foundation and earthwork design depends on this."},{text:"What does the Standard Penetration Test (SPT) measure?",options:["Rail hardness","Soil resistance by counting blows to drive a sampler","Water permeability of rock","Concrete strength"],correct:1,explanation:"SPT counts blows to drive a sampler 300 mm. Higher N-values = denser soil. One of the most common in-situ tests worldwide."},{text:"Why is a desk study performed before physical investigation?",options:["It is cheaper than fieldwork","It identifies geological risks, historical land use, and existing records before mobilising","It is required by law","All of the above"],correct:1,explanation:"A desk study reviews geological maps, historical records, mining data, and environmental databases to target fieldwork efficiently."}];function _f({goTo:h}){return e.jsxs(e.Fragment,{children:[e.jsxs("figure",{className:"lesson-figure",children:[e.jsx("div",{className:"cad-symbol",children:e.jsxs("svg",{viewBox:"0 0 360 130",style:{width:"100%",maxWidth:"360px"},children:[e.jsx("text",{x:"180",y:"14",fill:"var(--text-dim)",fontSize:"10",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"Cutting & Embankment"}),e.jsx("line",{x1:"10",y1:"45",x2:"170",y2:"45",stroke:"var(--text-dim)",strokeWidth:"0.5",strokeDasharray:"4,3"}),e.jsx("line",{x1:"45",y1:"45",x2:"75",y2:"85",stroke:"var(--text-bright)",strokeWidth:"1.5"}),e.jsx("line",{x1:"125",y1:"45",x2:"95",y2:"85",stroke:"var(--text-bright)",strokeWidth:"1.5"}),e.jsx("line",{x1:"75",y1:"85",x2:"95",y2:"85",stroke:"var(--text-bright)",strokeWidth:"1.5"}),e.jsx("rect",{x:"79",y:"80",width:"12",height:"5",fill:"var(--text-dim)",stroke:"var(--text-dim)",strokeWidth:"0.5"}),e.jsx("text",{x:"85",y:"105",fill:"var(--text-dim)",fontSize:"9",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"CUTTING"}),e.jsx("text",{x:"15",y:"42",fill:"var(--text-dim)",fontSize:"7",fontFamily:"JetBrains Mono, monospace",children:"OGL"}),e.jsx("line",{x1:"190",y1:"85",x2:"350",y2:"85",stroke:"var(--text-dim)",strokeWidth:"0.5",strokeDasharray:"4,3"}),e.jsx("line",{x1:"225",y1:"85",x2:"250",y2:"50",stroke:"var(--text-bright)",strokeWidth:"1.5"}),e.jsx("line",{x1:"315",y1:"85",x2:"290",y2:"50",stroke:"var(--text-bright)",strokeWidth:"1.5"}),e.jsx("line",{x1:"250",y1:"50",x2:"290",y2:"50",stroke:"var(--text-bright)",strokeWidth:"1.5"}),e.jsx("rect",{x:"264",y:"45",width:"12",height:"5",fill:"var(--text-dim)",stroke:"var(--text-dim)",strokeWidth:"0.5"}),e.jsx("text",{x:"270",y:"105",fill:"var(--text-dim)",fontSize:"9",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"EMBANKMENT"}),e.jsx("text",{x:"195",y:"82",fill:"var(--text-dim)",fontSize:"7",fontFamily:"JetBrains Mono, monospace",children:"OGL"}),e.jsx("text",{x:"180",y:"122",fill:"var(--text-dim)",fontSize:"8",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"OGL = original ground level  track sits below (cut) or above (fill)"})]})}),e.jsx("figcaption",{children:"Schematic: Cutting (excavated below ground) and embankment (filled above ground). OGL = original ground level."})]}),e.jsx("h3",{children:"Cuttings"}),e.jsxs("p",{children:["A ",e.jsx("strong",{children:"cutting"})," is an excavation through higher ground to keep the railway at the required gradient. The design challenge is the slope angle: too steep and the slopes fail; too shallow and you excavate (and dispose of) far more material than necessary."]}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Soil cuttings:"})," Slope angles typically 1V:2H to 1V:3H depending on soil type and groundwater. Require surface protection (grass, geotextile) and drainage. In over-consolidated clays (like London Clay), initial stability can be deceptive  the intact clay is strong, but over decades, progressive softening along fissures reduces strength to residual values, and delayed failures can occur 50100 years after construction."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Rock cuttings:"})," Can be steeper (up to vertical for competent rock) but require assessment of discontinuities (joints, faults, bedding planes) that could create wedge or toppling failures. A ",e.jsx("strong",{children:"stereographic analysis"})," (plotting joint orientations on a stereonet) identifies potential kinematic failure mechanisms. May need rock bolts, mesh, catch fences, or scaling (removing loose blocks)."]})]}),e.jsx("h3",{children:"Cutting Design Process"}),e.jsx("p",{children:"The design of a cutting involves several integrated analyses:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Slope stability analysis:"})," Using methods such as Bishop's simplified method or Morgenstern-Price to calculate the Factor of Safety for the proposed slope angle. The analysis uses shear strength parameters from triaxial testing, groundwater conditions from piezometers, and considers both short-term (undrained) and long-term (drained) conditions."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Drainage design:"})," Cutting slopes concentrate water runoff. Catch water drains at the crest intercept surface water before it erodes the slope face. Counterfort drains (herringbone patterns cut into the slope face, filled with drainage aggregate) lower the water table within the slope, improving stability."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Slope protection:"})," Topsoil and grass seeding for erosion protection in soil cuttings. Geotextile erosion blankets for initial establishment. Rock armour or shotcrete for unstable rock faces. Rockfall netting and catch fences where detached blocks could reach the track."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Formation design:"})," The flat base of the cutting (the formation) must provide adequate bearing capacity for the track structure. If the exposed ground is too weak, a ",e.jsx("strong",{children:"blanket layer"})," of imported granular material is placed to improve load distribution."]})]}),e.jsx("h3",{children:"Embankments"}),e.jsxs("p",{children:["An ",e.jsx("strong",{children:"embankment"})," raises the railway above surrounding ground level. They are built by placing fill material in layers (typically 200300 mm) and compacting each layer to a specified density. Key concerns:"]}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Settlement:"})," Embankments on soft ground will settle. Predicting the magnitude and rate of settlement (using consolidation theory) is critical to ensuring the track remains at the correct level. Terzaghi's one-dimensional consolidation theory and the oedometer test parameters are the tools for this prediction."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Slope stability:"})," Embankment side slopes must be stable under all conditions  including rapid drawdown after flooding and earthquake loading in seismic zones."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Material quality:"})," Fill must be suitable  not too wet, not too dry, free of large boulders and organics. Material is classified into use categories (Class 1A general fill, Class 2 selected granular, Class 6 for capping, etc.) following the Specification for Highway Works (SHW), which is also adopted for railway earthworks."]})]}),e.jsx("h3",{children:"Embankment Construction on Soft Ground"}),e.jsx("p",{children:"Building embankments on soft alluvial or peat ground is one of the most challenging geotechnical problems. Without treatment, settlement can be measured in metres and continue for decades. Techniques include:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Preloading (surcharging):"})," Building the embankment higher than required and waiting for the soft ground to consolidate (settle) under the excess load. Once settlement is largely complete, the surcharge is removed. This can take months to years depending on permeability."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Vertical drains (wick drains):"})," Prefabricated band-shaped drains installed vertically through soft clay to shorten the drainage path. Water can escape horizontally to the nearest drain rather than travelling the full depth. Combined with surcharging, this dramatically accelerates consolidation  reducing timescales from years to months."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Ground improvement  vibro-compaction:"})," A vibrating probe densifies loose granular soils in-situ by rearranging the grains into a denser packing. Suitable for sands and gravels."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Ground improvement  stone columns (vibro-replacement):"})," Columns of crushed stone installed through soft clay by a vibrating probe. The stone columns carry load and act as drainage paths. Widely used for embankments on soft alluvium."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Piling:"})," For very soft or organic ground where settlement cannot be tolerated, the embankment loads may be transferred to a deeper bearing stratum via piles. ",e.jsx("strong",{children:"Piled embankments"})," use a grid of piles with a reinforced load-transfer platform (geotextile and granular layer) distributing the embankment load to the pile caps."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Lightweight fill:"})," Replacing some or all of the conventional fill with lightweight materials  expanded polystyrene (EPS) blocks, foamed concrete, or pulverised fuel ash (PFA). EPS blocks weigh only 1% of equivalent soil, dramatically reducing the load on soft ground."]})]}),e.jsx("h3",{children:"Mass Haul"}),e.jsxs("p",{children:["A new railway produces enormous volumes of excavated material (from cuttings and tunnels) and requires enormous volumes of fill (for embankments). ",e.jsx("strong",{children:"Mass haul optimisation"})," matches cuts to fills, minimising the distance material must be transported. Mass haul diagrams plot cumulative cut/fill volumes along the route; the goal is to balance them and minimise costly import or disposal of material."]}),e.jsxs("p",{children:["The ",e.jsx("strong",{children:"mass haul diagram"})," is a graph with chainage on the x-axis and cumulative volume on the y-axis. The curve rises where there is net cut (material produced) and falls where there is net fill (material consumed). The difference between any two points gives the net volume to be transported between those locations. The gradient of the curve indicates the rate of production or consumption at that point."]}),e.jsx("p",{children:"Key optimisation considerations:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Haul distance:"})," Moving material by truck is expensive  cost increases with distance. Keeping material movements short (within the same site area) is critical."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Material suitability:"})," Not all excavated material is suitable for fill. Wet clay from deep cuttings may need to be dried or treated with lime/cement before it can be used as structural fill. Rock from tunnel excavation may need crushing."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Bulking and shrinkage:"})," Soil expands when excavated (bulking) and compresses when placed as fill (shrinkage). A 1,000 m bank volume of cutting might produce 1,200 m loose and need only 900 m to achieve the same compacted fill volume. These factors must be included in mass haul calculations."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Disposal costs:"})," Surplus material that cannot be reused must be disposed of at licensed tips. Contaminated material requires specialist disposal at significantly higher cost. Minimising disposal is both economically and environmentally important."]})]}),e.jsxs(N,{type:"analogy",children:["Mass haul optimisation is ",e.jsx("strong",{children:"resource allocation and scheduling"}),". You have a set of producers (cuttings generating spoil) and consumers (embankments needing fill). Moving material is expensive (like network bandwidth), so you want to minimise transport distance. It is essentially a supply-chain optimisation problem  the same class of problem as optimising data centre placement or CDN cache distribution. Material suitability constraints are like data format compatibility  you cannot just move any data to any consumer without transformation."]}),e.jsx("h3",{children:"The Proctor Test"}),e.jsxs("p",{children:["Before placing fill, the ",e.jsx("strong",{children:"Proctor compaction test"}),` determines the optimum moisture content (OMC) at which a soil achieves its maximum dry density. Compaction in the field is then specified as a percentage of this maximum (e.g. "achieve 95% of maximum dry density"). Too wet and the material cannot be compacted (it behaves like a slurry); too dry and it won't bind properly (it remains loose).`]}),e.jsxs("p",{children:["The test exists in two variants: the ",e.jsx("strong",{children:"standard Proctor"})," (2.5 kg rammer, light compaction  representing hand-placed fill) and the ",e.jsx("strong",{children:"modified Proctor"}),"(4.5 kg rammer, heavy compaction  representing modern machine compaction). The modified Proctor gives a higher maximum dry density at a lower OMC, reflecting the greater compactive effort of modern plant. Field compaction is verified using nuclear density gauges, sand replacement tests, or dynamic plate load tests."]}),e.jsx("h3",{children:"Victorian Earthworks"}),e.jsx("p",{children:"The UK's railway earthworks were largely built in the 1830s1870s by navvies using hand tools, horses, and simple machinery. These embankments were often constructed without compaction, using whatever material was locally available  sometimes including ash, clinker, domestic waste, and demolition rubble. After 150+ years, they continue to settle, slide, and deteriorate."}),e.jsx("p",{children:"Managing this aging infrastructure is one of Network Rail's biggest engineering challenges and costs. Key issues include:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Progressive failure:"})," Over-consolidated clay embankments built in the Victorian era are experiencing delayed failures as softening along fissures gradually reduces the clay's strength toward residual values."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Seasonal shrink-swell:"})," Clay embankments expand when wet (winter) and shrink when dry (summer), causing cyclic track geometry disturbance. Climate change is making dry summers more extreme, worsening the problem."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Vegetation:"})," Trees planted on or near Victorian slopes extract moisture, causing differential drying and movement. But removing trees can also trigger instability by removing root reinforcement and allowing water levels to rise."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Unknown construction:"})," Records of Victorian construction are sparse. The materials, geometry, and internal structure of many earthworks are unknown until they are investigated  often only after a failure has occurred."]})]}),e.jsxs("figure",{className:"lesson-figure",children:[e.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/3/3b/Tring_cutting_on_the_West_Coast_main_line_-_geograph.org.uk_-_3414657.jpg/1280px-Tring_cutting_on_the_West_Coast_main_line_-_geograph.org.uk_-_3414657.jpg",alt:"Tring cutting on the West Coast Main Line, a deep chalk cutting built in the 1830s by Robert Stephenson, still carrying trains",loading:"lazy"}),e.jsxs("figcaption",{children:["Tring cutting on the West Coast Main Line  excavated through chalk in the 1830s by Robert Stephenson's navvies, still carrying 200 km/h trains nearly two centuries later. Photo: ",e.jsx("a",{href:"https://commons.wikimedia.org/wiki/File:Tring_cutting_on_the_West_Coast_main_line_-_geograph.org.uk_-_3414657.jpg",target:"_blank",rel:"noopener noreferrer",children:"Geograph"}),", CC BY-SA 2.0"]})]}),e.jsx("h3",{children:"Earthworks Monitoring"}),e.jsx("p",{children:"Modern earthworks management increasingly relies on remote monitoring:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Inclinometers:"})," Instruments installed in boreholes that detect lateral ground movement at different depths. They reveal the depth and rate of any slip surface developing within a slope."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Piezometers:"})," Monitor pore water pressure within the slope. Rising water pressures reduce effective stress and hence stability."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"InSAR (satellite radar):"})," Synthetic aperture radar from satellites can detect millimetre-scale surface movements across entire networks. Network Rail uses InSAR to prioritise earthworks inspections  slopes showing unexpected movement are investigated first."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Weather-triggered alerts:"})," Many slope failures correlate with prolonged rainfall or rapid snowmelt. Early warning systems trigger enhanced monitoring or speed restrictions when rainfall thresholds are exceeded."]})]}),e.jsx(ce,{goTo:h,items:[{target:"m2-l1",label:"Ground Investigation",desc:"The data that drives every earthworks design decision."},{target:"m2-l3",label:"Drainage & Slope Stability",desc:"Keeping earthworks stable long-term."},{target:"m1-l1",label:"Track Structure",desc:"The track layers that sit on top of the formation."}]})]})}const If=[{text:'What is "mass haul balance" in earthworks design?',options:["Weighing all trains on the line","Balancing excavation volume from cuttings with fill needed for embankments","Distributing weight across a bridge","Calibrating track scales"],correct:1,explanation:"Mass haul balance minimises waste by matching cutting material to embankment needs. A mass haul diagram optimises material movement."},{text:"What is the biggest long-term risk with railway embankments?",options:["They block the view","Settlement and slope instability under repeated train loading","They are expensive to build","They attract wildlife"],correct:1,explanation:"Embankments can settle and slopes can become unstable due to water, vegetation loss, or climate effects, causing track geometry faults."},{text:"What is the Proctor test used for?",options:["Testing rail steel quality","Determining optimum moisture content for soil compaction","Measuring bridge deflection","Checking signal cable resistance"],correct:1,explanation:"The Proctor test finds the moisture content at which maximum compaction density is achieved  critical for durable embankments."}];function Ff({goTo:h}){return e.jsxs(e.Fragment,{children:[e.jsxs("figure",{className:"lesson-figure",children:[e.jsx("div",{className:"cad-symbol",children:e.jsxs("svg",{viewBox:"0 0 300 130",style:{width:"100%",maxWidth:"300px"},children:[e.jsx("text",{x:"150",y:"14",fill:"var(--text-dim)",fontSize:"10",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"Track Drainage"}),e.jsx("rect",{x:"40",y:"80",width:"220",height:"20",fill:"var(--bg-hover)",stroke:"var(--border-light)",strokeWidth:"0.5"}),e.jsx("text",{x:"150",y:"93",fill:"var(--text-dim)",fontSize:"8",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"subgrade"}),e.jsx("rect",{x:"50",y:"50",width:"200",height:"30",fill:"var(--border)",opacity:"0.5",stroke:"var(--text-dim)",strokeWidth:"1"}),e.jsx("text",{x:"150",y:"70",fill:"var(--text-dim)",fontSize:"8",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"ballast"}),e.jsx("rect",{x:"100",y:"42",width:"5",height:"10",fill:"var(--text-bright)",stroke:"var(--text-bright)",strokeWidth:"1"}),e.jsx("rect",{x:"195",y:"42",width:"5",height:"10",fill:"var(--text-bright)",stroke:"var(--text-bright)",strokeWidth:"1"}),e.jsx("line",{x1:"130",y1:"58",x2:"60",y2:"75",stroke:"var(--blue)",strokeWidth:"1",strokeDasharray:"2,2"}),e.jsx("polygon",{points:"60,75 66,72 64,78",fill:"var(--blue)"}),e.jsx("line",{x1:"170",y1:"58",x2:"240",y2:"75",stroke:"var(--blue)",strokeWidth:"1",strokeDasharray:"2,2"}),e.jsx("polygon",{points:"240,75 234,72 236,78",fill:"var(--blue)"}),e.jsx("text",{x:"40",y:"110",fill:"var(--blue)",fontSize:"8",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"cess"}),e.jsx("text",{x:"260",y:"110",fill:"var(--blue)",fontSize:"8",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"cess"}),e.jsx("line",{x1:"150",y1:"22",x2:"150",y2:"40",stroke:"var(--blue)",strokeWidth:"0.5"}),e.jsx("polygon",{points:"150,40 148,36 152,36",fill:"var(--blue)"}),e.jsx("text",{x:"150",y:"30",fill:"var(--blue)",fontSize:"7",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",dy:"-6",children:"rain "})]})}),e.jsx("figcaption",{children:"Schematic: Water percolates through ballast and drains to cess (trackside) drains."})]}),e.jsx("h3",{children:"Why Drainage Matters"}),e.jsx("p",{children:"Water is the enemy of railway earthworks. It softens subgrades, triggers slope failures, erodes ballast shoulders, causes frost heave, and accelerates deterioration of every material it contacts. Effective drainage is not an afterthought  it is fundamental to the integrity of the entire track structure. More railway earthwork failures are caused by water than any other factor."}),e.jsxs("p",{children:["The relationship between water and soil strength is governed by the principle of",e.jsx("strong",{children:" effective stress"}),": ' =   u, where ' is the effective stress (the stress carried by the soil skeleton),  is the total stress, and u is the pore water pressure. As water pressure (u) increases, effective stress decreases, and so does the soil's shear strength. Drainage reduces pore water pressure, maintaining effective stress and hence stability."]}),e.jsx("h3",{children:"Surface Drainage"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Cess drains:"}),' Channels running alongside the track at the edge of the ballast shoulder (the "cess"). They collect surface water runoff from the track bed and direct it to outfalls. Typically V-shaped or trapezoidal open channels, sometimes concrete-lined. Their capacity must handle the design storm event (often 1-in-100 year return period for railways).']}),e.jsxs("li",{children:[e.jsx("strong",{children:"Catch water drains:"})," Located at the top of cutting slopes to intercept surface water before it flows down the cut face and causes erosion. Critical on long or steep cutting slopes where uncontrolled surface flow would cause severe gully erosion."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Track drainage:"})," The ballast itself acts as a drainage medium  water percolates through the voids between stones. When ballast becomes fouled (clogged with fines), drainage fails and the track softens. This is a leading cause of geometry deterioration. Cleaning or replacing fouled ballast is one of the most expensive routine maintenance operations."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Formation drains:"})," Where the formation (the surface on which the ballast sits) is impermeable clay, water cannot drain downward through the ballast and pools at the ballast/formation interface. Formation drains  either trenches or geocomposite strips at formation level  collect this trapped water and convey it to outfalls."]})]}),e.jsx("h3",{children:"Subsurface Drainage"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"French drains (trench drains):"})," Trenches filled with free-draining aggregate and wrapped in geotextile filter fabric. The geotextile prevents fine soil particles from entering and clogging the drain while allowing water to pass freely. Intercept groundwater flow and lower the water table within slopes or beneath formations."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Carrier drains:"})," Perforated pipes (typically perforated plastic or porous concrete) laid in trenches with granular surround. Used for higher-capacity subsurface drainage or where water must be conveyed over longer distances to an outfall. The perforations face downward (to minimise sediment ingress) and the pipe gradient must be sufficient to maintain self-cleansing velocity."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Counterfort drains:"})," A pattern of deep trench drains cut into the face of a cutting or embankment slope, typically in a herringbone pattern. They intercept water flowing through the slope body and direct it to a main collector drain. One of the most effective remedial measures for slopes suffering water-related deterioration."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Horizontal drains:"})," Small-diameter perforated pipes drilled sub-horizontally into a slope face to intersect a water-bearing layer. The pipe drains under gravity, lowering the water table within the slope. Used where conventional trench drains cannot reach the water."]})]}),e.jsx("h3",{children:"Culverts"}),e.jsxs("p",{children:["Where a watercourse (stream, ditch, or river) must cross beneath the railway, a",e.jsx("strong",{children:"culvert"})," is provided. Types range from small-diameter pipe culverts (300 mm1,200 mm) to large box culverts capable of handling major flows. Design considerations include:"]}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Hydraulic capacity:"})," The culvert must pass the design flood (typically 1-in-100 year or 1-in-200 year return period) without the upstream water level rising high enough to threaten the track. Climate change allowances (typically +2040% on peak flow) are now standard."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Scour protection:"})," Water velocity through and downstream of culverts can erode the bed and banks. Headwalls, wingwalls, aprons, and riprap protect against scour."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Blockage risk:"})," Culvert blockage is a serious risk  backed-up water can saturate the embankment and cause failure. Trash screens protect culvert inlets but must themselves be maintained. Regular inspection and clearance is essential, particularly before and during flood seasons."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Fish passage:"})," Environmental regulations increasingly require culverts to maintain fish passage. This affects the invert level (must be buried below bed level), flow velocity (must not exceed swimming capacity), and internal conditions (natural bed material within the culvert)."]})]}),e.jsxs("figure",{className:"lesson-figure",children:[e.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/3/3a/Small_stream_flowing_through_culvert_under_railway_and_footpath_bridge_-_geograph.org.uk_-_8127469.jpg/1280px-Small_stream_flowing_through_culvert_under_railway_and_footpath_bridge_-_geograph.org.uk_-_8127469.jpg",alt:"A small stream flowing through a culvert under a railway embankment, showing how watercourses are carried beneath the track",loading:"lazy"}),e.jsxs("figcaption",{children:["A culvert carrying a stream beneath a railway embankment. Blockage of culverts like this can saturate the embankment and lead to failure. Photo: ",e.jsx("a",{href:"https://commons.wikimedia.org/wiki/File:Small_stream_flowing_through_culvert_under_railway_and_footpath_bridge_-_geograph.org.uk_-_8127469.jpg",target:"_blank",rel:"noopener noreferrer",children:"Geograph"}),", CC BY-SA 2.0"]})]}),e.jsx("h3",{children:"Slope Stability"}),e.jsxs("p",{children:["A slope fails when the driving forces (gravity, water pressure) exceed the resisting forces (soil shear strength). The ",e.jsx("strong",{children:"Factor of Safety (FoS)"})," is the ratio of resisting to driving forces. FoS > 1 means stable; FoS < 1 means failure. Design typically targets FoS of 1.31.5 for permanent slopes."]}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Circular slip:"})," The most common failure mode in clay soils. The failure surface approximates a circular arc. Analysed by ",e.jsx("strong",{children:"Bishop's simplified method"}),", which divides the soil mass into vertical slices and checks equilibrium. Modern analysis uses software (GeoSlope, Plaxis) that can search thousands of potential slip circles to find the most critical one."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Wedge failure:"})," Occurs in rock or structured soils where a planar discontinuity (bedding plane, joint) creates a sliding surface. Analysed by comparing the weight component along the plane with the shear resistance of the discontinuity surface."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Rotational failure:"})," Deep-seated circular or non-circular failures, often extending well below the toe of the slope. These can affect the track even when the visible slope face appears intact."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Flow failure:"})," In very soft or sensitive clays, or in saturated loose sands (liquefaction), the soil can behave as a fluid. Flow slides can travel large distances and are extremely destructive."]})]}),e.jsx("h3",{children:"Slope Remediation Techniques"}),e.jsx("p",{children:"When a slope is found to be unstable or has failed, remediation options include:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Regrading:"})," Reducing the slope angle (cutting back the top or building up the toe) to improve the FoS. Effective but requires land and generates/consumes material."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Drainage:"})," Lowering the water table is often the most cost-effective remediation. Counterfort drains, horizontal drains, and pumped wells all reduce pore water pressure."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Soil nailing:"})," Steel bars (typically 2030 mm diameter) are drilled and grouted into the slope at regular spacings. They reinforce the soil mass in tension, increasing the resisting forces along potential slip surfaces. The slope face is often protected with a sprayed concrete facing or steel mesh."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Retaining structures:"})," Sheet piles, contiguous or secant bored pile walls, or reinforced earth can provide structural restraint. These are expensive but may be the only option where space for regrading is unavailable."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Geosynthetic reinforcement:"})," Geogrids or woven geotextiles placed within the slope body during reconstruction provide additional tensile resistance. Used extensively in reinforced-earth embankments."]})]}),e.jsx("h3",{children:"Frost Heave & Vegetation"}),e.jsxs("p",{children:["In cold climates, water in the subgrade can freeze, forming ice lenses that push the track upward  ",e.jsx("strong",{children:"frost heave"}),". Ice lenses grow by drawing water from the surrounding unfrozen soil through capillary action. The heave can be severe  several centimetres of uplift  and is uneven, creating dangerous track geometry faults. The frost thaw cycle causes further damage: as ice melts, the previously frozen soil becomes saturated and extremely weak."]}),e.jsx("p",{children:"Prevention involves ensuring adequate drainage (dry soil doesn't heave), using non-frost-susceptible subgrade materials (granular, not silty), and providing sufficient frost-free depth above the water table. In Scandinavia and Canada, insulation layers (expanded polystyrene boards) are placed beneath the ballast to reduce frost penetration."}),e.jsxs("p",{children:[e.jsx("strong",{children:"Vegetation management"}),' is a balancing act: tree roots can stabilise slopes through mechanical reinforcement and moisture extraction, but can also block drains, grow into culverts, and destabilise structures by root intrusion into masonry joints. Leaf fall contaminates the rail head and devastates autumn adhesion (the infamous "leaves on the line"  not a joke but a genuine and serious operational problem caused by a thin, compacted layer of leaf mulch that reduces wheel-rail friction below braking thresholds).']}),e.jsx("h3",{children:"Climate Change and Earthworks"}),e.jsx("p",{children:"Climate change is intensifying the challenges for railway earthworks:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"More intense rainfall:"})," Higher peak rainfall leads to more surface erosion, higher pore water pressures in slopes, and increased flood risk for culverts. Many existing drainage systems were designed for historical rainfall patterns that no longer apply."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Hotter, drier summers:"})," Extended dry periods cause deeper desiccation cracking in clay slopes. When heavy rain follows drought, water infiltrates rapidly through cracks, causing sudden instability."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Sea level rise:"})," Coastal railways face increased erosion and flood risk. Entire sections of some coastal lines (e.g., the Dawlish sea wall on the UK's Great Western Main Line) are under threat."]})]}),e.jsxs(N,{type:"analogy",children:["Drainage is ",e.jsx("strong",{children:"garbage collection"}),". In a runtime without GC, memory (water) accumulates in places you don't want it, eventually causing crashes (slope failures). A well-designed drainage system continuously removes water before it causes problems  just as a garbage collector reclaims memory before it causes out-of-memory errors. Neglect either system and degradation is gradual, then sudden. Climate change is like a traffic spike that exceeds the GC's designed throughput  the system was sized for a different workload."]}),e.jsx(ce,{goTo:h,items:[{target:"m2-l2",label:"Earthworks",desc:"The slopes and formations that drainage protects."},{target:"m2-l1",label:"Ground Investigation",desc:"Understanding groundwater before designing drainage."},{target:"m1-l1",label:"Track Structure",desc:"Ballast as both structural layer and drainage medium."},{target:"m3-l1",label:"Bridges",desc:"Scour and flood loading  drainage at structural interfaces."}]})]})}const Vf=[{text:"What is the biggest enemy of railway earthworks?",options:["Wind","Water","Temperature","Vegetation"],correct:1,explanation:"Water causes most problems: ballast fouling, subgrade softening, slope erosion, frost heave, and embankment slips."},{text:'What is a "cess drain" in railway terms?',options:["A drain under the platform","A ditch running alongside the track at formation level","A pipe through an embankment","A drain inside a tunnel"],correct:1,explanation:"Cess drains run alongside the track collecting surface water and directing it to outfalls  the first line of defence against water damage."},{text:'What does "factor of safety" mean in slope stability?',options:["The number of safety barriers","The ratio of resisting forces to driving forces in a potential slip","Distance from track to slope edge","Number of inspections per year"],correct:1,explanation:"FoS is resisting/driving forces ratio. FoS of 1.0 = verge of failure. Design standards require  1.31.5 for permanent slopes."}];function Jf(h,y){switch(h){case"m2-l1":return e.jsx(Gf,{goTo:y});case"m2-l2":return e.jsx(_f,{goTo:y});case"m2-l3":return e.jsx(Ff,{goTo:y});default:return null}}const Kf={"m2-l1":Hf,"m2-l2":If,"m2-l3":Vf};function Pf({goTo:h}){return e.jsxs(e.Fragment,{children:[e.jsxs("figure",{className:"lesson-figure",children:[e.jsx("div",{className:"cad-symbol",children:e.jsxs("svg",{viewBox:"0 0 340 120",style:{width:"100%",maxWidth:"340px"},children:[e.jsx("text",{x:"170",y:"14",fill:"var(--text-dim)",fontSize:"10",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"Bridge Types"}),e.jsxs("g",{transform:"translate(10, 25)",children:[e.jsx("rect",{x:"5",y:"15",width:"10",height:"45",fill:"var(--border)",stroke:"var(--text-bright)",strokeWidth:"1"}),e.jsx("rect",{x:"85",y:"15",width:"10",height:"45",fill:"var(--border)",stroke:"var(--text-bright)",strokeWidth:"1"}),e.jsx("path",{d:"M 15,40 Q 50,10 85,40",fill:"none",stroke:"var(--text-bright)",strokeWidth:"1.5"}),e.jsx("line",{x1:"0",y1:"15",x2:"100",y2:"15",stroke:"var(--text-bright)",strokeWidth:"1.5"}),e.jsx("text",{x:"50",y:"75",fill:"var(--text-dim)",fontSize:"8",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"Arch"})]}),e.jsxs("g",{transform:"translate(120, 25)",children:[e.jsx("polygon",{points:"5,50 0,58 10,58",fill:"var(--text-dim)",stroke:"var(--text-bright)",strokeWidth:"1"}),e.jsx("polygon",{points:"95,50 90,58 100,58",fill:"var(--text-dim)",stroke:"var(--text-bright)",strokeWidth:"1"}),e.jsx("rect",{x:"5",y:"15",width:"90",height:"35",fill:"var(--border)",opacity:"0.2",stroke:"var(--text-bright)",strokeWidth:"1.5"}),e.jsx("text",{x:"50",y:"75",fill:"var(--text-dim)",fontSize:"8",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"Beam"})]}),e.jsxs("g",{transform:"translate(230, 25)",children:[e.jsx("polygon",{points:"5,50 0,58 10,58",fill:"var(--text-dim)",stroke:"var(--text-bright)",strokeWidth:"1"}),e.jsx("polygon",{points:"95,50 90,58 100,58",fill:"var(--text-dim)",stroke:"var(--text-bright)",strokeWidth:"1"}),e.jsx("rect",{x:"5",y:"15",width:"90",height:"35",fill:"var(--border)",opacity:"0.2",stroke:"var(--text-bright)",strokeWidth:"1.5"}),e.jsx("rect",{x:"15",y:"22",width:"70",height:"21",fill:"var(--bg-raised)",stroke:"var(--text-dim)",strokeWidth:"0.5"}),e.jsx("text",{x:"50",y:"75",fill:"var(--text-dim)",fontSize:"8",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"Box Girder"})]})]})}),e.jsx("figcaption",{children:"Schematic: Common bridge types  arch (compression), beam (bending), and box girder (torsional resistance)."})]}),e.jsx("h3",{children:"Bridge Types by Material"}),e.jsx("p",{children:"Railway bridges carry some of the heaviest, most repetitive loads of any structure. The choice of material and form depends on span, loading, site constraints, and era of construction:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Masonry arch:"})," The UK alone has roughly 30,000 masonry arch bridges, many dating from the 1840s1870s. Their compressive-strength advantage makes them remarkably durable, but they are vulnerable to scour, water ingress, and increased axle loads. Assessment of their capacity is a specialist discipline. The arch works by transferring loads through the stonework in compression to the abutments and foundations. The shape of the ",e.jsx("strong",{children:"thrust line"})," (the path of compressive force through the arch) determines whether the arch is stable  if the thrust line lies within the middle third of the arch ring, the entire section is in compression and no tensile cracking occurs.",e.jsxs("figure",{className:"lesson-figure",children:[e.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/a/a8/Ribblehead_Viaduct_Arches_-_geograph.org.uk_-_2016200.jpg/1280px-Ribblehead_Viaduct_Arches_-_geograph.org.uk_-_2016200.jpg",alt:"The Ribblehead Viaduct in North Yorkshire, England  a Victorian masonry arch railway viaduct",loading:"lazy"}),e.jsxs("figcaption",{children:["Ribblehead Viaduct, North Yorkshire  a classic Victorian masonry arch railway structure, still carrying trains since 1875. Photo: ",e.jsx("a",{href:"https://commons.wikimedia.org/wiki/File:Ribblehead_Viaduct_Arches_-_geograph.org.uk_-_2016200.jpg",target:"_blank",rel:"noopener noreferrer",children:"Geograph"}),", CC BY-SA 2.0"]})]})]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Steel:"})," Plate girders for short-medium spans (up to ~30 m), trusses for longer spans (30100+ m), and box girders for the largest. Steel is strong in tension and bending, but vulnerable to ",e.jsx("strong",{children:"fatigue"}),"  the progressive growth of cracks under repeated cyclic loading. Railway bridges experience millions of stress cycles over their design life. Welded details are classified into fatigue categories (from Class 160 down to Class 36), with each detail having a characteristic endurance curve. Poor welding details  particularly those with high stress concentration  can initiate fatigue cracks after relatively few cycles."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Wrought iron:"})," Predating steel, wrought iron was the dominant structural material of the 1850s1880s. Many Victorian railway bridges are wrought iron plate girders, riveted together. Wrought iron has different properties from steel  lower strength, more variable quality, but better corrosion resistance and more ductile behaviour. Assessment of wrought iron bridges requires specialist knowledge, and testing for defects like ",e.jsx("strong",{children:"laminations"})," (internal separation of the rolled plates) is essential."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Concrete:"})," Reinforced concrete for shorter spans, prestressed concrete for longer spans. Modern precast beam designs allow rapid construction during short possessions (track closures). Prestressed concrete uses high-strength steel tendons, tensioned before or after the concrete is cast, to keep the concrete in compression under working loads  since concrete is strong in compression but weak in tension. Less fatigue-sensitive than steel but can suffer from alkali-silica reaction (ASR), chloride-induced corrosion of reinforcement, and carbonation."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Composite:"})," Steel beams acting compositely with a concrete deck slab, connected by shear studs welded to the top flange. Combines the tensile strength of steel with the compressive strength of concrete. The composite section is significantly stiffer and stronger than either material alone. Common in modern construction, particularly for underbridges with spans of 1040 m."]})]}),e.jsx("h3",{children:"Bridge Types by Function"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Underbridge:"})," The railway crosses over another feature (road, river, valley). The railway is on top. The bridge must carry the full railway loading plus its own dead weight."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Overbridge:"})," Another feature crosses over the railway. The railway is underneath. The bridge must provide clearance for trains (the structure gauge) and may need strengthening or replacement when electrification requires increased headroom."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Footbridge:"})," Pedestrian crossing, often at stations. Must meet accessibility standards (step-free access, handrails, tactile surfaces). Can be open or enclosed."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Viaduct:"})," A long multi-span bridge, typically crossing a valley or floodplain. May contain dozens or even hundreds of spans."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Aqueduct:"})," Carries a waterway (canal or river) over the railway. Rare but operationally critical where they exist, as failure would flood the railway."]})]}),e.jsx("h3",{children:"Foundation Types"}),e.jsx("p",{children:"The bridge superstructure transfers its loads to the ground through foundations. The choice depends on ground conditions (determined by the ground investigation):"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Spread foundations (pad/strip):"})," Shallow foundations bearing directly on competent ground. Used where adequate bearing capacity exists at shallow depth. The foundation distributes the concentrated column/abutment load over a larger area of soil."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Piled foundations:"})," Where the surface soil is too weak, loads are transferred to deeper strata through piles. ",e.jsx("strong",{children:"Bored piles"})," (drilled and concreted in-situ, typically 6001,500 mm diameter) are common for railway bridges. ",e.jsx("strong",{children:"Driven piles"})," (precast concrete or steel, hammered into the ground) are used where the ground conditions suit and vibration is not a concern."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Caisson foundations:"})," For major river crossings, large hollow chambers (caissons) are sunk to bedrock or a firm bearing stratum. The caisson is then filled with concrete. This technique was used for many 19th-century river bridges and is still used for large bridge piers in deep water."]})]}),e.jsx("h3",{children:"Railway Loading"}),e.jsxs("p",{children:["Railway loading is ",e.jsx("strong",{children:"heavy"})," (up to 25 tonnes per axle for freight, even higher on some international heavy-haul networks),",e.jsx("strong",{children:" repetitive"})," (hundreds of trains per day for a 120-year design life), and generates significant ",e.jsx("strong",{children:"dynamic amplification"})," (impact from rail joints, wheel flats, hunting oscillation, and speed effects)."]}),e.jsx("p",{children:"Design loading standards include:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"UK RA system:"})," Route Availability (RA) units quantify the equivalent static loading effect of different vehicle types. RA1 is the lightest (small railcars); RA10 is the heaviest standard loading. Bridges are assessed for their RA capacity, and vehicles are assigned RA ratings  a vehicle can only use a route if every bridge on it has sufficient RA capacity."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"UIC Load Model 71 (LM71):"})," The international standard loading model: four 250 kN point loads at 1.6 m spacing on a distributed load of 80 kN/m. Represents the static effect of normal rail traffic. This is multiplied by a ",e.jsx("strong",{children:"dynamic amplification factor"})," () to account for impact effects, and by a classification factor () to adjust for different traffic types ( = 1.0 for standard, up to 1.46 for heavy freight routes)."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"SW/0 and SW/2:"})," Special load models for continuous bridges (SW/0) and heavy freight (SW/2) in the Eurocode system. SW/2 represents exceptional vehicles like nuclear flask wagons."]})]}),e.jsx("h3",{children:"Bridge Assessment vs Design"}),e.jsxs("p",{children:["Designing a new bridge and assessing an existing one are fundamentally different tasks. New design uses conservative assumptions and generous safety factors. Assessment of existing bridges must determine the ",e.jsx("em",{children:"actual"})," capacity of a structure that may be 150 years old, built to unknown standards, with deterioration that has reduced its strength."]}),e.jsx("p",{children:"The UK's bridge assessment process uses a tiered approach:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Level 1  Simple assessment:"})," Conservative hand calculations using worst-case assumptions. If the bridge passes, no further work needed."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Level 2  Refined assessment:"})," More sophisticated analysis, using measured material properties and accounting for load distribution effects. Reduces conservatism."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Level 3  Detailed assessment:"})," Includes site-specific load testing, finite element modelling, and reliability analysis. Used for bridges that fail Level 2 but where the cost of strengthening is very high."]})]}),e.jsxs("p",{children:["If a bridge cannot be proved adequate at any level, the options are:",e.jsx("strong",{children:" strengthening"})," (adding material or external reinforcement),",e.jsx("strong",{children:" weight restrictions"})," (limiting the vehicles that can cross), or",e.jsx("strong",{children:" replacement"}),"."]}),e.jsx("h3",{children:"Key Maintenance Concerns"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Scour:"})," Water erosion around bridge foundations, especially during floods. The leading cause of bridge collapse worldwide. Scour assessment examines the depth of erosion that could occur during a design flood event and whether the foundations extend deep enough to remain stable. ",e.jsx("strong",{children:"Scour protection"})," measures include riprap (dumped rock armour), concrete aprons, sheet pile collars, and grouted mattresses."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Fatigue in steel:"})," Crack initiation and growth at welds, rivet holes, and stress concentrations. Requires regular inspection (often using ultrasonic testing or magnetic particle inspection). Cracks are monitored, and if growth rates suggest the remaining fatigue life is insufficient, repairs (grinding, welding, bolted cover plates) or load restrictions are applied."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Corrosion:"})," Steel bridges require periodic painting (a full repaint cycle on a large bridge can take years and cost millions). Weathering steel (Corten) forms a protective rust layer and needs no painting, but is unsuitable in coastal or heavily polluted environments. Masonry bridges suffer mortar deterioration and water ingress that can freeze and spall stone faces."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Bridge strikes:"})," Over-height road vehicles hitting underbridges. A chronic problem causing millions in damage and disruption annually. Prevention includes height warning signs, goal-post-mounted impact beams, and electronic over-height detection systems that trigger warning signals to drivers."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Clearance for electrification:"})," Many older overbridges have insufficient headroom for overhead line equipment, requiring either track lowering, bridge jacking (lifting the bridge on hydraulic jacks and packing the abutments), or complete bridge reconstruction. This is one of the biggest cost items in electrification programmes."]})]}),e.jsx("h3",{children:"Bridge Replacement and Possessions"}),e.jsx("p",{children:'Replacing a railway bridge is a major logistical challenge because it requires closing the line (a "possession"). Modern techniques minimise possession time:'}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Weekend/bank-holiday possessions:"})," The most common approach  demolish the old bridge, install the new one, and reinstate the track within a 52-hour or 72-hour possession window. Requires meticulous planning and rehearsal."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Self-propelled modular transporters (SPMTs):"})," The new bridge deck is prebuilt alongside the railway, then wheeled into position on computer-controlled multi-wheeled transporters in a few hours. Dramatically reduces possession time."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Slide-in replacement:"})," The new bridge deck is built on a temporary platform parallel to the railway. During the possession, the old deck is slid out and the new one slid in on Teflon sliding bearings. The entire swap can be completed in under 24 hours."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Incremental launching:"})," For multi-span viaducts, segments are cast behind one abutment and pushed forward over the piers incrementally. No crane access or temporary supports needed over the obstacle being crossed."]})]}),e.jsxs(N,{type:"analogy",children:["Bridges are ",e.jsx("strong",{children:"load balancers"}),". They distribute concentrated forces (train axle loads) across foundations and the ground below, just as a load balancer distributes traffic spikes across backend servers. An overloaded bridge fails structurally; an overloaded server cluster fails in availability. Both require capacity assessment, monitoring, and periodic upgrades as demand increases. And bridge replacement during a possession is exactly like a zero-downtime deployment  build the new version alongside, then swap it in during a maintenance window."]}),e.jsx(ce,{goTo:h,items:[{target:"m3-l2",label:"Tunnels & Retaining Walls",desc:"Other major structures on the railway."},{target:"m2-l1",label:"Ground Investigation",desc:"Foundation design depends entirely on ground conditions."},{target:"m3-l3",label:"Stations & Clearances",desc:"Clearance constraints that affect bridge design."},{target:"m2-l3",label:"Drainage & Stability",desc:"Scour  where drainage and structural engineering meet."}]})]})}const Yf=[{text:"Why are railway bridge loads more challenging than road bridge loads?",options:["Trains are longer than lorries","Railway loads are much heavier and applied repeatedly over decades","Railways need wider bridges","Train vibrations damage concrete"],correct:1,explanation:"A freight wagon can weigh 100+ tonnes, and a busy line sees 200+ trains daily for a 120-year design life, requiring fatigue assessment."},{text:"What is the most common type of historic railway bridge in the UK?",options:["Steel truss","Reinforced concrete","Masonry arch","Suspension bridge"],correct:2,explanation:"The UK has ~30,000 Victorian masonry arch bridges. Arches work in compression, which masonry handles very well."},{text:"What is the difference between an overbridge and an underbridge?",options:["Overbridges are longer","An overbridge carries a road over the railway; an underbridge carries the railway over an obstacle","Overbridges are for pedestrians only","No standard difference"],correct:1,explanation:"Overbridge = carries something OVER the railway. Underbridge = carries the railway OVER something. Perspective is always from the railway."},{text:'What is "scour" at a bridge foundation?',options:["Rust on steel beams","Erosion of soil around foundations by water flow","Wear of bridge deck surface","Noise from passing trains"],correct:1,explanation:"Scour erodes riverbed material around foundations, especially during floods. It is a leading cause of bridge failure worldwide."}];function Qf({goTo:h}){return e.jsxs(e.Fragment,{children:[e.jsxs("figure",{className:"lesson-figure",children:[e.jsx("div",{className:"cad-symbol",children:e.jsxs("svg",{viewBox:"0 0 300 130",style:{width:"100%",maxWidth:"300px"},children:[e.jsx("text",{x:"150",y:"14",fill:"var(--text-dim)",fontSize:"10",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"Tunnel Cross-Sections"}),e.jsxs("g",{transform:"translate(80, 72)",children:[e.jsx("circle",{cx:"0",cy:"0",r:"40",fill:"var(--bg-hover)",stroke:"var(--text-bright)",strokeWidth:"1.5"}),e.jsx("line",{x1:"-20",y1:"22",x2:"20",y2:"22",stroke:"var(--text-bright)",strokeWidth:"1.5"}),e.jsx("text",{x:"0",y:"52",fill:"var(--text-dim)",fontSize:"9",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"Bored (TBM)"})]}),e.jsxs("g",{transform:"translate(220, 72)",children:[e.jsx("rect",{x:"-40",y:"-35",width:"80",height:"60",fill:"var(--bg-hover)",stroke:"var(--text-bright)",strokeWidth:"1.5",rx:"2"}),e.jsx("line",{x1:"-20",y1:"15",x2:"20",y2:"15",stroke:"var(--text-bright)",strokeWidth:"1.5"}),e.jsx("line",{x1:"-50",y1:"-40",x2:"50",y2:"-40",stroke:"var(--text-dim)",strokeWidth:"0.5",strokeDasharray:"3,2"}),e.jsx("text",{x:"0",y:"-44",fill:"var(--text-dim)",fontSize:"7",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"ground level"}),e.jsx("text",{x:"0",y:"42",fill:"var(--text-dim)",fontSize:"9",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"Cut-and-Cover"})]})]})}),e.jsx("figcaption",{children:"Schematic: Tunnel cross-sections  circular bored (TBM) and rectangular cut-and-cover."})]}),e.jsx("h3",{children:"Tunnel Construction Methods"}),e.jsx("p",{children:"Tunnels are among the most expensive and complex elements of railway infrastructure. The choice of construction method depends on ground conditions, depth, diameter, and length:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Cut-and-cover:"}),' Excavate a trench from the surface, build the tunnel structure, then backfill. Only feasible at shallow depth. Causes major surface disruption but is technically straightforward. Used extensively for early underground railways (the original Metropolitan Railway in London, opened 1863). Modern cut-and-cover uses secant pile walls or diaphragm walls to create a "box" excavation with minimal disturbance to adjacent structures. The technique is still used for shallow metro stations and portal approaches.']}),e.jsxs("li",{children:[e.jsx("strong",{children:"TBM (Tunnel Boring Machine):"})," A massive rotating cutter head excavates full-face while the machine simultaneously installs precast concrete segment rings behind it. Minimal surface disruption, consistent progress rates, but very high capital cost (the TBM itself costs tens of millions, and each machine is designed for a specific diameter). TBMs come in several variants depending on ground conditions:",e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"EPB (Earth Pressure Balance):"})," For soft ground. The excavated soil is retained at the face under pressure to support the ground ahead. A screw conveyor controls the rate of material removal to maintain face pressure. Used on Crossrail (Elizabeth line) through London's clay, gravel, and chalk."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Slurry TBM:"})," Bentonite slurry is pumped to the face under pressure to support the ground. Excavated material is mixed with slurry and pumped out. Suited to granular soils below the water table. Used on the Channel Tunnel's marine sections."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Hard rock TBM:"})," Disc cutters on the head break the rock by compression. No face support needed in competent rock. Progress depends on rock hardness. Used on the Gotthard Base Tunnel (57 km through the Alps)."]})]}),e.jsxs("figure",{className:"lesson-figure",children:[e.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/e/e1/2012_Eurotunnel_tunnel_boring_machine_02.JPG/1280px-2012_Eurotunnel_tunnel_boring_machine_02.JPG",alt:"A Channel Tunnel boring machine displayed as a monument, showing the massive rotating cutterhead",loading:"lazy"}),e.jsxs("figcaption",{children:["A TBM used to construct the Channel Tunnel, now displayed at the Eurotunnel site. The rotating cutterhead excavates the full tunnel face. Photo: ",e.jsx("a",{href:"https://commons.wikimedia.org/wiki/File:2012_Eurotunnel_tunnel_boring_machine_02.JPG",target:"_blank",rel:"noopener noreferrer",children:"Wikimedia Commons"}),", CC BY-SA 3.0"]})]})]}),e.jsxs("li",{children:[e.jsx("strong",{children:"NATM / SCL (New Austrian Tunnelling Method / Sprayed Concrete Lining):"}),"Excavation in stages with immediate application of sprayed concrete (shotcrete) and rock bolts to support the ground. The key principle is that the ground itself is the primary structural element  the lining provides support while the ground redistributes stress around the opening. Instrumentation (extensometers, convergence points, pressure cells) monitors the ground's behaviour in real time, and the support is adjusted accordingly. Flexible and adaptable to varying conditions. Requires skilled operatives and intensive monitoring. Used for complex geometries (station caverns, cross-passages) where a circular TBM profile is unsuitable."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Drill-and-blast:"})," In hard rock where TBMs are impractical (short tunnels where TBM mobilisation cost is not justified, or unusual cross-sections), patterns of holes are drilled into the rock face, charged with explosives, and detonated. The broken rock is removed (mucked out), and the cycle repeats. Controlled blasting techniques (smooth blasting, pre-splitting) minimise overbreak and damage to the surrounding rock."]})]}),e.jsx("h3",{children:"Tunnel Cross-Sections"}),e.jsx("p",{children:"The internal shape of a tunnel is determined by the construction method, ground conditions, and the space needed:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Circular:"})," The natural TBM profile. Structurally efficient (the circular shape distributes ground pressure uniformly), but wastes space at the bottom and top for a rectangular loading gauge. Most modern bored tunnels are circular."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Horseshoe:"})," Common in NATM construction and older tunnels. A flattened arch over straight or slightly inclined walls, with a curved invert. More space-efficient for the loading gauge than a circle."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Rectangular (box):"})," Used in cut-and-cover construction. Simple to build as a reinforced concrete frame but structurally less efficient (the flat roof span is the critical design element)."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Twin-bore vs single-bore:"})," A major design decision for double-track railways. Twin single-track bores (each ~7 m diameter) are safer (one bore can serve as an evacuation route) but cost more than a single large-bore twin-track tunnel (~1213 m diameter). The Channel Tunnel uses twin running tunnels with a central service tunnel. Crossrail uses twin bores. In contrast, some high-speed rail tunnels (like the CTRL/HS1) use twin single-track bores linked by cross-passages."]})]}),e.jsx("h3",{children:"Tunnel Linings"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Victorian brick:"})," Many UK tunnels have multi-ring brick linings, typically 35 rings thick (each ring ~115 mm), totalling 350575 mm of brickwork. Remarkably durable  some have lasted 180+ years  but increasingly requiring strengthening and waterproofing. Defects include spalling (freeze-thaw damage), mortar loss, ring separation (where the rings delaminate), and deformation under increased loading."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Precast concrete segments:"})," Modern TBM tunnels use bolted or gasketed precast segments forming a watertight ring. Typically 68 segments per ring plus a smaller key segment that locks the ring together. Segment thickness is typically 200400 mm depending on diameter and ground loads. Gaskets (EPDM rubber) between segments provide watertightness. The standard for new construction."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Sprayed concrete (shotcrete):"})," Applied in layers (typically 50100 mm per pass) with welded wire mesh or steel fibre reinforcement. Can be shaped to any profile. Often the primary lining in NATM construction. Steel fibres (3050 kg/m of concrete) are increasingly replacing mesh, as they are faster to apply and avoid the need for manual installation of mesh in the dangerous zone near the face."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Cast-in-place concrete:"}),' A secondary lining cast inside the primary support using travelling formwork (a "shutter"). Common in older tunnels and as a secondary lining over shotcrete. Provides a smooth interior surface and additional structural support.']})]}),e.jsx("h3",{children:"Tunnel Safety Systems"}),e.jsx("p",{children:"Long tunnels (over approximately 1 km) require dedicated safety systems:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Cross-passages:"})," Connecting doors between twin-bore tunnels at regular intervals (typically every 250500 m). Allow passengers and crew to evacuate from an incident tunnel into the adjacent safe tunnel."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Emergency walkways:"})," Continuous raised walkways alongside the track, allowing passengers to walk to safety. Must be at least 700800 mm wide with handrails."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Ventilation:"})," Critical for diesel traction (exhaust fumes), fire scenarios, and passenger comfort. Tunnel ventilation can be ",e.jsx("strong",{children:"natural"})," (relying on the piston effect of trains pushing air), ",e.jsx("strong",{children:"longitudinal"})," (jet fans pushing air in one direction to keep smoke downstream of the evacuation direction), or ",e.jsx("strong",{children:"transverse"})," (supply and extract ducts along the tunnel length). The Channel Tunnel has a supplementary ventilation system that can provide fresh air and extract smoke in a fire scenario."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Fire detection and suppression:"})," Linear heat detection cables, CCTV, and in some cases (particularly road tunnels) fixed firefighting systems. The Gotthard Base Tunnel has two multifunction stations within the tunnel where trains can stop in an emergency, with dedicated ventilation and access for emergency services."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Communication:"})," Radio communication (GSM-R or TETRA) must work throughout the tunnel. Leaky feeder cables or distributed antenna systems provide coverage in the confined space."]})]}),e.jsx("h3",{children:"Tunnel Maintenance Challenges"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Water ingress:"})," The persistent enemy. Water degrades linings, causes icicle formation in winter (a falling hazard and potential OLE short-circuit risk), and creates electrical hazards in electrified tunnels. Waterproofing membranes (PVC or HDPE sheets) are installed between primary and secondary linings in modern tunnels. In older tunnels, remedial waterproofing is applied by injecting resins or installing drainage channels."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Ventilation:"})," Critical for diesel traction (exhaust fumes accumulate rapidly in the confined space) and for emergency evacuation. Long tunnels require mechanical ventilation  draught-relief shafts, jet fans, or full transverse ventilation systems."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Gauging for electrification:"})," Many Victorian tunnels have tight clearances that must be enlarged to fit overhead line equipment. Solutions include track lowering (digging out the tunnel floor to lower the rail level), lining reconstruction (removing brick rings and rebuilding with a thinner concrete lining), or a combination. These are extraordinarily expensive and disruptive operations, often requiring complete closure for months."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Air quality and temperature:"})," Deep tunnels (like the London Underground's deep tube lines) can reach temperatures exceeding 35C in summer. Cooling is a major engineering challenge  the Crossrail tunnels include a chilled-water cooling system."]})]}),e.jsx("h3",{children:"Notable Railway Tunnels"}),e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",marginBottom:"1em"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{borderBottom:"2px solid var(--border)"},children:[e.jsx("th",{style:{textAlign:"left",padding:"8px"},children:"Tunnel"}),e.jsx("th",{style:{textAlign:"left",padding:"8px"},children:"Length"}),e.jsx("th",{style:{textAlign:"left",padding:"8px"},children:"Opened"}),e.jsx("th",{style:{textAlign:"left",padding:"8px"},children:"Notable feature"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{style:{borderBottom:"1px solid var(--border)"},children:[e.jsx("td",{style:{padding:"8px"},children:"Gotthard Base (Switzerland)"}),e.jsx("td",{style:{padding:"8px"},children:"57.1 km"}),e.jsx("td",{style:{padding:"8px"},children:"2016"}),e.jsx("td",{style:{padding:"8px"},children:"World's longest railway tunnel; twin bore through the Alps"})]}),e.jsxs("tr",{style:{borderBottom:"1px solid var(--border)"},children:[e.jsx("td",{style:{padding:"8px"},children:"Seikan (Japan)"}),e.jsx("td",{style:{padding:"8px"},children:"53.9 km"}),e.jsx("td",{style:{padding:"8px"},children:"1988"}),e.jsx("td",{style:{padding:"8px"},children:"Undersea tunnel linking Honshu and Hokkaido"})]}),e.jsxs("tr",{style:{borderBottom:"1px solid var(--border)"},children:[e.jsx("td",{style:{padding:"8px"},children:"Channel Tunnel (UK-France)"}),e.jsx("td",{style:{padding:"8px"},children:"50.5 km"}),e.jsx("td",{style:{padding:"8px"},children:"1994"}),e.jsx("td",{style:{padding:"8px"},children:"Three bores (two running, one service); undersea"})]}),e.jsxs("tr",{style:{borderBottom:"1px solid var(--border)"},children:[e.jsx("td",{style:{padding:"8px"},children:"Ltschberg Base (Switzerland)"}),e.jsx("td",{style:{padding:"8px"},children:"34.6 km"}),e.jsx("td",{style:{padding:"8px"},children:"2007"}),e.jsx("td",{style:{padding:"8px"},children:"Part of the NRLA Alpine transit project"})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"8px"},children:"Crossrail tunnels (London)"}),e.jsx("td",{style:{padding:"8px"},children:"21 km each"}),e.jsx("td",{style:{padding:"8px"},children:"2022"}),e.jsx("td",{style:{padding:"8px"},children:"Twin bores through central London; EPB TBMs"})]})]})]}),e.jsx("h3",{children:"Retaining Walls"}),e.jsxs("p",{children:["Where space is insufficient for natural slopes, ",e.jsx("strong",{children:"retaining walls"})," hold back the earth. The design of a retaining wall must resist the lateral earth pressure from the retained soil, plus any surcharge loads (such as highway traffic behind the wall). Lateral earth pressure increases with depth and is classified as:"]}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"At-rest pressure (K):"})," When the wall cannot move. Applies to rigid structures like basement walls."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Active pressure (K):"})," When the wall moves slightly away from the soil. The minimum lateral pressure. Applies to most free-standing retaining walls."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Passive pressure (K):"})," When the wall is pushed into the soil. The maximum lateral pressure. Mobilised at the toe of embedded walls, providing resistance."]})]}),e.jsx("p",{children:"Retaining wall types:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Gravity walls:"})," Rely on their own mass (masonry, mass concrete). Simple but bulky. Many Victorian railway walls are gravity masonry walls, still functioning but often showing signs of distress (bulging, leaning, mortar loss)."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Cantilever walls:"})," Reinforced concrete L-shape or T-shape, using the weight of retained earth on the base to resist overturning. Economical for heights up to about 68 m. The stem, base heel, and base toe are all designed as reinforced concrete elements."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Sheet pile walls:"})," Interlocking steel sheets driven into the ground. Common for temporary works (excavation support during bridge construction) and permanent waterfront structures. Can be cantilevered for modest retained heights or propped/anchored for greater heights."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Contiguous/secant bored pile walls:"}),' Rows of bored concrete piles forming a wall. Contiguous piles have small gaps between them (suitable above the water table); secant piles overlap (one set is drilled first as unreinforced "female" piles, then reinforced "male" piles are drilled overlapping them), forming a watertight wall. Standard for deep urban excavations.']}),e.jsxs("li",{children:[e.jsx("strong",{children:"Diaphragm walls:"})," Thin concrete walls cast in deep, narrow trenches excavated under bentonite slurry. Used for the deepest excavations (metro stations, deep basements). Provide both temporary and permanent structural support plus groundwater cutoff."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Reinforced earth (mechanically stabilised earth, MSE):"})," Layers of compacted fill with horizontal reinforcement strips (steel or geosynthetic) and a facing panel (precast concrete or wire mesh). Flexible, economical, and increasingly popular for railway embankment retaining, bridge abutments, and noise barriers. Can accommodate significant differential settlement."]})]}),e.jsxs(N,{type:"analogy",children:["Tunnels are ",e.jsx("strong",{children:"VPN tunnels"}),'. Both create a protected pathway through a hostile environment (rock/soil vs the public internet). Both require careful construction of the "lining" (encryption / waterproof concrete), have capacity constraints (cross-sectional area / bandwidth), and need continuous monitoring for "leaks" (water ingress / data leaks). Both are enormously expensive to retrofit once built. And the choice between twin-bore and single-bore is exactly like choosing between dedicated redundant links and a single high-bandwidth connection  twin bore costs more but gives you failover.']}),e.jsx(ce,{goTo:h,items:[{target:"m3-l1",label:"Bridges",desc:"The other major structural discipline."},{target:"m3-l3",label:"Stations & Clearances",desc:"How tunnel clearances constrain the loading gauge."},{target:"m2-l1",label:"Ground Investigation",desc:"Tunnelling method depends entirely on ground conditions."},{target:"m5-l2",label:"Overhead Line Design",desc:"Electrification constraints that drive tunnel gauge clearance."}]})]})}const Xf=[{text:"What is the key advantage of a TBM over cut-and-cover?",options:["It is always cheaper","It can bore deep tunnels without disturbing the surface","It is faster in all conditions","It produces a better-shaped tunnel"],correct:1,explanation:"TBMs bore at depth without surface disruption  essential in urban areas. The trade-off is higher equipment cost."},{text:"What is the biggest ongoing maintenance concern for Victorian-era tunnels?",options:["They are too small for modern trains","Water ingress through deteriorating brick linings","Ventilation for diesel trains","Lack of lighting"],correct:1,explanation:"Water ingress through ageing brick linings is the primary issue. Water attacks mortar, freeze-thaw spalls bricks, and leaks can create voids."},{text:"What type of retaining wall uses soil reinforcement with geotextiles or steel strips?",options:["Gravity wall","Cantilever wall","Sheet pile wall","Reinforced earth wall"],correct:3,explanation:"Reinforced earth walls use geotextile or steel strip layers within compacted fill. They are cost-effective for large heights."}];function Zf({goTo:h}){return e.jsxs(e.Fragment,{children:[e.jsxs("figure",{className:"lesson-figure",children:[e.jsx("div",{className:"cad-symbol",children:e.jsxs("svg",{viewBox:"0 0 340 110",style:{width:"100%",maxWidth:"340px"},children:[e.jsx("text",{x:"170",y:"14",fill:"var(--text-dim)",fontSize:"10",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"Platform Layouts  Plan"}),e.jsxs("g",{transform:"translate(10, 28)",children:[e.jsx("rect",{x:"5",y:"0",width:"80",height:"7",fill:"var(--bg-hover)",stroke:"var(--text-dim)",strokeWidth:"1",rx:"1"}),e.jsx("line",{x1:"5",y1:"12",x2:"85",y2:"12",stroke:"var(--text-bright)",strokeWidth:"1.5"}),e.jsx("line",{x1:"5",y1:"22",x2:"85",y2:"22",stroke:"var(--text-bright)",strokeWidth:"1.5"}),e.jsx("rect",{x:"5",y:"27",width:"80",height:"7",fill:"var(--bg-hover)",stroke:"var(--text-dim)",strokeWidth:"1",rx:"1"}),e.jsx("text",{x:"45",y:"50",fill:"var(--text-dim)",fontSize:"8",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"Side"})]}),e.jsxs("g",{transform:"translate(120, 28)",children:[e.jsx("line",{x1:"5",y1:"5",x2:"85",y2:"5",stroke:"var(--text-bright)",strokeWidth:"1.5"}),e.jsx("rect",{x:"5",y:"10",width:"80",height:"14",fill:"var(--bg-hover)",stroke:"var(--text-dim)",strokeWidth:"1",rx:"1"}),e.jsx("line",{x1:"5",y1:"29",x2:"85",y2:"29",stroke:"var(--text-bright)",strokeWidth:"1.5"}),e.jsx("text",{x:"45",y:"50",fill:"var(--text-dim)",fontSize:"8",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"Island"})]}),e.jsxs("g",{transform:"translate(230, 28)",children:[e.jsx("rect",{x:"5",y:"0",width:"80",height:"7",fill:"var(--bg-hover)",stroke:"var(--text-dim)",strokeWidth:"1",rx:"1"}),e.jsx("line",{x1:"5",y1:"12",x2:"85",y2:"12",stroke:"var(--text-bright)",strokeWidth:"1.5"}),e.jsx("line",{x1:"5",y1:"22",x2:"50",y2:"22",stroke:"var(--text-bright)",strokeWidth:"1.5"}),e.jsx("line",{x1:"50",y1:"18",x2:"50",y2:"26",stroke:"var(--text-bright)",strokeWidth:"2.5"}),e.jsx("rect",{x:"5",y:"26",width:"45",height:"7",fill:"var(--bg-hover)",stroke:"var(--text-dim)",strokeWidth:"1",rx:"1"}),e.jsx("text",{x:"45",y:"50",fill:"var(--text-dim)",fontSize:"8",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"Bay"})]}),e.jsx("text",{x:"170",y:"98",fill:"var(--text-dim)",fontSize:"8",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:" platform    track    buffer stop"})]})}),e.jsx("figcaption",{children:"Schematic: Station platform layouts  side platforms, island platform, and bay platform (dead-end track)."})]}),e.jsx("h3",{children:"Station Design Principles"}),e.jsx("p",{children:"Stations are where the railway meets the public. Design must balance operational efficiency, passenger flow, accessibility, safety, and commercial viability. A station is simultaneously a transport interchange, a public building, a retail space, and an emergency evacuation challenge."}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Passenger flow:"})," Modelled using pedestrian simulation software (Legion, MassMotion, PTV Viswalk). Peak flows determine gateline widths, staircase capacities, platform lengths, and the number of lifts. The critical design scenario is often the 15-minute peak arrival rate combined with dwell time of trains at platforms. Over-crowded platforms are a safety hazard  crowd crush incidents can occur when platform density exceeds about 4 persons/m."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Accessibility:"})," Modern standards (Equality Act / DDA in the UK, ADA in the US, TSI PRM in Europe) require step-free access to all platforms  lifts, ramps, tactile paving, hearing loops, accessible ticket machines, and information in accessible formats (audio, visual, Braille). Retrofitting accessibility into Victorian stations is one of the biggest ongoing investment programmes  Access for All in the UK has spent billions upgrading step-free access at hundreds of stations, and thousands still lack it."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Interchange design:"})," Many stations serve multiple modes  national rail, metro, bus, tram, cycling, walking. The design challenge is minimising interchange time and distance while maintaining legible wayfinding. Cross-platform interchange (step off one train, step onto the next across the same platform) is the gold standard but requires careful timetabling and platform allocation."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Fire safety and evacuation:"})," Station design must allow complete platform evacuation within prescribed time limits (typically 46 minutes). This drives the number and width of exits, the capacity of escalators and stairs, and the design of ventilation to control smoke in underground stations. The King's Cross fire of 1987 led to a complete overhaul of fire safety standards for UK underground stations."]})]}),e.jsx("h3",{children:"Platform Types"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Side platforms:"})," One platform on each side of the tracks. The simplest and most common arrangement. Passengers access from the side, and the two platforms serve trains in opposite directions. Easy to extend by lengthening at one or both ends."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Island platform:"})," A single platform between two tracks, served on both faces. Space-efficient but requires grade-separated access (subway or bridge) since passengers must cross the tracks to reach it. Common in suburban stations and metro systems. The platform must be wide enough to handle peak flows on both faces simultaneously."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Bay platform:"})," A dead-end platform alongside a through platform, used for terminating branch services. The bay track ends at a buffer stop within the station. Allows branch trains to terminate without blocking through running lines."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Terminal platform:"})," All platforms are dead-ends (e.g. London Paddington, Paris Gare du Nord, New York Penn Station). Operationally constrained because every arriving train must reverse out (or be hauled out by a shunter). Platform reoccupation time is the key capacity constraint  the time between one train departing and the next one arriving, including signal clearance, point setting, and approach time."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Through station:"})," Platforms alongside through running lines. Trains stop, load/unload, and continue. Much more capacity-efficient than terminal stations because trains don't need to reverse. The majority of intermediate stations are through stations."]})]}),e.jsx("h3",{children:"Platform-Train Interface"}),e.jsx("p",{children:"The gap between the platform edge and the train is one of the most critical safety interfaces on the railway. The gap has two components:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Lateral gap (stepping distance):"}),' The horizontal gap between the platform edge and the train body. Must be minimised (target < 75 mm on straight platforms) but cannot be zero due to vehicle dynamic movement (sway, bounce). On curved platforms, the gap increases significantly because the straight train bodyshell diverges from the curved platform edge. This is why curved platforms often have "mind the gap" warnings.']}),e.jsxs("li",{children:[e.jsx("strong",{children:"Vertical gap (stepping height):"})," The difference in height between the platform and the train floor. Modern accessibility standards target a step-free interface (zero or near-zero height difference), which requires matching the platform height to the train door sill height. Different rolling stock types have different door heights, making this problematic on routes with mixed stock."]})]}),e.jsxs("p",{children:["Solutions to platform gap issues include: ",e.jsx("strong",{children:"platform humps"})," (raised sections of platform aligned with door positions), ",e.jsx("strong",{children:"Harrington humps"}),"(small ramps at specific door positions), ",e.jsx("strong",{children:"gap fillers"})," (mechanical extendable platforms), and ",e.jsx("strong",{children:"train-mounted retractable steps"}),"."]}),e.jsx("h3",{children:"Station Throat Design"}),e.jsxs("p",{children:["The ",e.jsx("strong",{children:"throat"})," is the area of track between the station platforms and the open line, containing switches, crossovers, and junctions. Throat design determines operational flexibility  can trains cross between platforms? Can services arriving on one line depart on another? Can a terminating train reverse and depart from a different platform?"]}),e.jsx("p",{children:"The signalling implications are profound: every additional turnout adds complexity to the interlocking and increases the potential for conflicting routes. But too few turnouts restricts operational flexibility and reduces the station's capacity to handle disruption."}),e.jsx("p",{children:"Key throat design considerations:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Crossovers between running lines:"})," Allow trains to switch between the up and down lines. Essential for handling perturbation (disruption). Without crossovers, a delayed train on one line blocks everything behind it with no ability to overtake or divert."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Turnout speed:"})," The turnout geometry in the throat determines the speed at which trains can diverge. Higher-speed turnouts (1-in-20 or above) allow trains to enter platforms without slowing excessively, but they are longer and more expensive."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Simultaneous movements:"})," A well-designed throat allows multiple train movements to occur simultaneously  one arriving while another departs, or two trains entering different platforms at the same time. This requires the interlocking to define non-conflicting routes."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Shunt moves:"})," Terminal stations need the ability to move empty trains from arrival platforms to departure platforms (or to stabling sidings). These shunt moves consume throat capacity and must be factored into the timetable."]})]}),e.jsx("h3",{children:"Loading Gauge vs Structure Gauge"}),e.jsx("p",{children:"Two critical clearance concepts govern what can physically operate on a railway:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Loading gauge (kinematic envelope):"})," The maximum cross-sectional profile of a vehicle, including dynamic movement (sway, bounce, tilt, suspension deflection, and track irregularities). This is the ",e.jsx("em",{children:"vehicle"})," constraint. It is calculated by taking the static vehicle profile and adding allowances for all possible movements. In the UK, the standard vehicle loading gauge reference profiles are W6a (the most restrictive standard gauge), W8, W9, W10, W12, and GW (the least restrictive)."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Structure gauge:"})," The minimum clearance that all lineside structures (bridges, tunnels, platforms, signal gantries, equipment cabinets) must provide. This is the ",e.jsx("em",{children:"infrastructure"})," constraint. It must always be larger than the loading gauge, with a safety margin. The structure gauge is defined as a series of reference profiles that vary by line speed and location (straight vs curve, electrified vs non-electrified)."]})]}),e.jsxs("p",{children:["The ",e.jsx("strong",{children:"difference"})," between the structure gauge and the loading gauge is the available clearance margin. On curves, additional clearance (overthrow and end-throw allowances) is needed because long vehicles sweep a wider path. On electrified lines, additional clearance above the vehicle is needed for the overhead line equipment and its pantograph sweep zone."]}),e.jsx("h3",{children:"The UK Gauge Problem"}),e.jsx("p",{children:"Britain has one of the tightest loading gauges in the world  a legacy of the Victorian era when tunnels and bridges were built to just clear the trains of the day. Standard UK gauge (W6a) barely permits ISO containers on standard wagons. The height and width restrictions prevent the use of double-deck passenger trains, large freight containers, and standard European rolling stock without modification."}),e.jsx("p",{children:"Larger gauges (W8, W9, W10, W12) are being progressively cleared on strategic freight routes, but each enhancement requires:"}),e.jsxs("ul",{children:[e.jsx("li",{children:"Surveying every structure on the route (using mobile laser scanning trains)"}),e.jsx("li",{children:"Identifying all pinch points  structures where clearance is insufficient"}),e.jsx("li",{children:"Designing and implementing modifications: bridge jacking, track lowering, platform edge trimming, signal repositioning, cable route diversion"}),e.jsx("li",{children:"Coordinating possessions for the physical works"})]}),e.jsx("p",{children:"The cost is measured in hundreds of millions per route. Yet the benefits  particularly for intermodal freight (larger containers = more goods per train = fewer lorries on roads)  make gauge clearance a strategic national priority."}),e.jsxs("figure",{className:"lesson-figure",children:[e.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/4/42/Railway_Loading_gauge_UIC_and_containers_profile_-ISO.png/800px-Railway_Loading_gauge_UIC_and_containers_profile_-ISO.png",alt:"Diagram comparing UIC loading gauge profiles with ISO container profiles, showing the clearance envelopes",loading:"lazy"}),e.jsxs("figcaption",{children:["UIC loading gauge profiles overlaid with ISO container profiles. The loading gauge defines the maximum vehicle cross-section; the structure gauge must always be larger. Image: ",e.jsx("a",{href:"https://commons.wikimedia.org/wiki/File:Railway_Loading_gauge_UIC_and_containers_profile_-ISO.png",target:"_blank",rel:"noopener noreferrer",children:"Wikimedia Commons"})]})]}),e.jsx("h3",{children:"Platform Height Standards"}),e.jsx("p",{children:"Platform height varies significantly across countries and even within the same country:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"UK mainline:"})," 915 mm above rail level  one of the highest in the world, designed for slam-door stock with high floor heights. Enables near-level boarding for most modern rolling stock."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"European standard (TSI):"})," 550 mm or 760 mm above rail level. The 760 mm standard is used for high-speed and intercity platforms; 550 mm for regional services."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Low platforms:"})," Some heritage lines, freight-only lines, and some international systems use platforms as low as 200300 mm. Passengers must climb steps to board."]})]}),e.jsx("p",{children:"Mixed platform heights on the same network create significant vehicle design challenges. Trains serving both 550 mm and 760 mm platforms need either retractable steps or multi-height doorways. The mismatch between UK 915 mm platforms and European 550/760 mm platforms is one reason why through-running of European trains to UK domestic stations (beyond the international terminals) is not straightforward."}),e.jsxs(N,{type:"analogy",children:["Loading gauge is an ",e.jsx("strong",{children:"API schema contract"}),". The loading gauge is the request schema; the structure gauge is the server's capacity to accept that schema. If you upgrade your payload (bigger trains, taller containers), every downstream service (bridge, tunnel, platform) must be verified and potentially upgraded to handle it. It is exactly like upgrading an API version  you must ensure every consumer is compatible before deploying, or things break at the interfaces. Platform height mismatches are like version incompatibilities  you need adapters (retractable steps) or you must upgrade the infrastructure."]}),e.jsx(ce,{goTo:h,items:[{target:"m0-l3",label:"Developer's Mental Model",desc:"Gauge as API contract in the software mapping."},{target:"m3-l2",label:"Tunnels & Retaining Walls",desc:"Tunnels are often the binding gauge constraint."},{target:"m1-l3",label:"Switches & Crossings",desc:"The turnouts that form the station throat."},{target:"m6-l3",label:"Wheel-Rail Interface & Gauging",desc:"The vehicle side of the loading gauge equation."}]})]})}const $f=[{text:'What is the difference between "loading gauge" and "structure gauge"?',options:["They are the same thing","Loading gauge is max vehicle envelope; structure gauge is min clearance infrastructure must provide","Loading gauge is for bridges; structure gauge for tunnels","Loading gauge for freight; structure gauge for passengers"],correct:1,explanation:"Loading gauge = maximum vehicle cross-section including dynamic movements. Structure gauge = minimum clearance infrastructure provides. The gap is the safety margin."},{text:"Why does the UK have a notoriously tight loading gauge?",options:["UK trains are smaller","Victorian-era tunnels and bridges were built to smaller clearances","UK regulations are stricter","The UK uses narrower rails"],correct:1,explanation:"Early construction in the 1830s1860s created thousands of tight structures. Enlarging them is enormously expensive."},{text:'What is a "bay platform" at a station?',options:["A platform facing the sea","A dead-end platform where trains arrive/depart from one end","A curved platform","A maintenance platform"],correct:1,explanation:"A bay platform is a stub platform alongside a through platform, commonly used for branch line terminating services."}];function ep(h,y){switch(h){case"m3-l1":return e.jsx(Pf,{goTo:y});case"m3-l2":return e.jsx(Qf,{goTo:y});case"m3-l3":return e.jsx(Zf,{goTo:y});default:return null}}const tp={"m3-l1":Yf,"m3-l2":Xf,"m3-l3":$f};function ip({goTo:h}){return e.jsxs(e.Fragment,{children:[e.jsxs("figure",{className:"lesson-figure",children:[e.jsx("div",{className:"cad-symbol",children:e.jsxs("svg",{viewBox:"0 0 340 100",style:{width:"100%",maxWidth:"340px"},children:[e.jsx("text",{x:"170",y:"14",fill:"var(--text-dim)",fontSize:"10",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"Absolute Block"}),e.jsx("line",{x1:"20",y1:"48",x2:"320",y2:"48",stroke:"var(--text-bright)",strokeWidth:"2"}),e.jsx("line",{x1:"70",y1:"48",x2:"70",y2:"28",stroke:"var(--red)",strokeWidth:"1.5"}),e.jsx("circle",{cx:"70",cy:"25",r:"4",fill:"var(--red)"}),e.jsx("text",{x:"70",y:"18",fill:"var(--text-dim)",fontSize:"7",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"Sig A"}),e.jsx("line",{x1:"230",y1:"48",x2:"230",y2:"28",stroke:"var(--accent-secondary)",strokeWidth:"1.5"}),e.jsx("circle",{cx:"230",cy:"25",r:"4",fill:"var(--accent-secondary)"}),e.jsx("text",{x:"230",y:"18",fill:"var(--text-dim)",fontSize:"7",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"Sig B"}),e.jsx("line",{x1:"70",y1:"58",x2:"70",y2:"65",stroke:"var(--accent)",strokeWidth:"1"}),e.jsx("line",{x1:"230",y1:"58",x2:"230",y2:"65",stroke:"var(--accent)",strokeWidth:"1"}),e.jsx("line",{x1:"70",y1:"65",x2:"230",y2:"65",stroke:"var(--accent)",strokeWidth:"1"}),e.jsx("text",{x:"150",y:"78",fill:"var(--accent)",fontSize:"9",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"Block Section"}),e.jsx("text",{x:"150",y:"92",fill:"var(--text-dim)",fontSize:"8",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"only one train permitted in section at a time"})]})}),e.jsx("figcaption",{children:"Schematic: Absolute block  the line is divided into sections, each protected by signals. Only one train per section."})]}),e.jsx("h3",{children:"From Time-Interval to Absolute Block"}),e.jsxs("p",{children:["Early railways used ",e.jsx("strong",{children:"time-interval working"}),": a train was allowed to depart a set number of minutes after the previous one, on the assumption that the gap would provide safety. This failed catastrophically in several disasters (notably the Clayton Tunnel collision of 1861) because a delayed train could be sitting just around the corner."]}),e.jsxs("p",{children:["The industry moved to ",e.jsx("strong",{children:"space-interval working"}),", where the line is divided into sections (blocks) and only one train is permitted in each block at a time. The ",e.jsx("strong",{children:"absolute block system"})," enforces this using a combination of signals and communication between signal boxes. The principle is simple and powerful: a signal is held at danger (red) until the signaller at the next box confirms the block section is clear."]}),e.jsxs("p",{children:["The absolute block system relies on three key elements operating together: the ",e.jsx("strong",{children:"block telegraph instruments"})," (electrical devices used to communicate between adjacent signal boxes), ",e.jsx("strong",{children:"block regulations"}),"(the formal rules governing when a train may be accepted into a block section), and ",e.jsx("strong",{children:"the signals themselves"}),' (which convey the authorisation to the driver). The signaller at Box A sends "Is Line Clear?" to Box B using the block instrument. Box B checks that the previous train has passed clear of the section, then returns "Line Clear." Only then does Box A clear the starting signal. When the train passes Box B, that signaller sends "Train Out of Section" to Box A, completing the cycle.']}),e.jsx("h3",{children:"Block Instrument Types"}),e.jsx("p",{children:"Several types of block telegraph instrument have been used historically, each with specific safety characteristics:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Tyer's Electric Tablet / Token:"})," A physical token is electrically released from an instrument at one end of a single-track section. The driver must carry the token  only one can be released at a time, making it physically impossible for two trains to be in the section simultaneously. Used extensively on single-track lines."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Preece Block Instrument:"}),' A three-position needle instrument showing "Line Blocked," "Line Clear," or "Train on Line." Used on double-track lines where the physical token system is unnecessary.']}),e.jsxs("li",{children:[e.jsx("strong",{children:"Track circuit block:"})," A modern semi-automatic system where track circuits detect train presence and block instruments are replaced by electronic indications. The signaller still authorises movements, but the system prevents them from clearing a signal when the section is occupied."]})]}),e.jsx("h3",{children:"Four-Aspect Colour Light Signalling"}),e.jsx("p",{children:"Modern UK mainlines use four-aspect signals, providing three levels of advance information:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Green:"})," Line clear  at least two block sections ahead are clear. Proceed at line speed."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Double yellow:"})," Preliminary caution  two sections ahead are clear, but the third may not be. Begin preparing to brake."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Yellow:"})," Caution  the next signal is at red. Brake to be able to stop at the next signal."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Red:"})," Danger  stop and do not proceed. The section ahead is occupied or the route is not set."]})]}),e.jsxs("p",{children:["This cascade gives the driver enough braking distance at line speed. On very high-speed lines, even four aspects may be insufficient, which is one reason ETCS cab signalling is preferred for 200+ km/h operation. The signal spacing is determined by the",e.jsx("strong",{children:" braking distance"})," of the worst-performing train type that uses the route: the distance from double-yellow to red must be sufficient for that train to brake from maximum line speed to a stand."]}),e.jsx("h3",{children:"Signal Spacing and Braking Curves"}),e.jsxs("p",{children:["The spacing of signals is not arbitrary  it is calculated from the ",e.jsx("strong",{children:"braking performance"})," of trains using the route. The key calculation is: given a train travelling at maximum line speed, receiving a double-yellow aspect, can it decelerate to a stand before reaching the red signal two sections ahead? The braking model must account for gradient (downhill trains take longer to stop), rail conditions (wet or contaminated rail reduces adhesion), brake type (disc brakes vs tread brakes), and a safety margin for driver reaction time."]}),e.jsxs("p",{children:["On a 125 mph (200 km/h) line with four-aspect signalling, typical signal spacing is approximately ",e.jsx("strong",{children:"1,500 to 2,000 metres"})," between each signal. This means a driver receiving a double-yellow has approximately 3,000 to 4,000 metres to stop. On lower-speed lines (e.g., 60 mph suburban routes), signals may be as close as 500800 metres apart, which also enables shorter headways and higher train frequencies."]}),e.jsxs("div",{className:"lesson-figure-row",children:[e.jsxs("figure",{className:"lesson-figure",children:[e.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/4/43/UK_Railway_Signal_-_4_Aspect_-_Danger.svg",alt:"UK four-aspect colour light signal showing red (Danger)",loading:"lazy"}),e.jsx("figcaption",{children:"Red  Danger"})]}),e.jsxs("figure",{className:"lesson-figure",children:[e.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/b/b9/UK_Railway_Signal_-_4_Aspect_-_Caution.svg",alt:"UK four-aspect colour light signal showing single yellow (Caution)",loading:"lazy"}),e.jsx("figcaption",{children:"Yellow  Caution"})]}),e.jsxs("figure",{className:"lesson-figure",children:[e.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/8/86/UK_Railway_Signal_-_4_Aspect_-_Preliminary_Caution.svg",alt:"UK four-aspect colour light signal showing double yellow (Preliminary Caution)",loading:"lazy"}),e.jsx("figcaption",{children:"Double Yellow  Preliminary Caution"})]}),e.jsxs("figure",{className:"lesson-figure",children:[e.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/6/6f/UK_Railway_Signal_-_4_Aspect_-_Proceed.svg",alt:"UK four-aspect colour light signal showing green (Proceed)",loading:"lazy"}),e.jsx("figcaption",{children:"Green  Proceed"})]})]}),e.jsx("h3",{children:"Semaphore Signals (Historical)"}),e.jsxs("p",{children:["Before colour lights, railways used mechanical ",e.jsx("strong",{children:"semaphore"})," signals  pivoting arms on tall posts, operated by wire from the signal box lever frame. Horizontal arm = danger; angled down at 45 = clear. A few semaphore-signalled lines survive in the UK and are being progressively replaced."]}),e.jsxs("p",{children:["Semaphore signals came in two principal types: ",e.jsx("strong",{children:"home signals"})," (with a square-ended arm, painted red with a white stripe) which controlled entry into the block section, and ",e.jsx("strong",{children:"distant signals"}),` (with a fishtail/notched end, painted yellow with a black chevron) which gave advance warning of the home signal's state. A distant signal at "caution" warned the driver that the home signal ahead was at danger; a distant at "clear" indicated the home was also clear. This two-signal arrangement provided the Victorian equivalent of the yellow/green aspect system.`]}),e.jsxs("figure",{className:"lesson-figure",children:[e.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/3/3b/British_home_and_distant_railway_semaphore_RYG_signals.svg",alt:"Diagram showing British home and distant semaphore signals in their stop and clear positions, with colour coding",loading:"lazy",style:{maxWidth:"400px"}}),e.jsxs("figcaption",{children:["British home and distant semaphore signals. Horizontal arm = danger/caution; lowered arm = clear. Image: ",e.jsx("a",{href:"https://commons.wikimedia.org/wiki/File:British_home_and_distant_railway_semaphore_RYG_signals.svg",target:"_blank",rel:"noopener noreferrer",children:"Wikimedia Commons"}),", Public Domain"]})]}),e.jsx("h3",{children:"Signal Types and Functions"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Main signals (home/starter):"})," Control movements into block sections. Can display danger (red) and proceed aspects. The ",e.jsx("em",{children:"home signal"})," protects the approach to a station or junction; the ",e.jsx("em",{children:"starter"})," authorises departure into the next block section."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Subsidiary signals:"})," Small signals permitting movement at restricted speed (typically 15 mph). Includes ",e.jsx("em",{children:"calling-on"})," signals (allowing a train to enter an occupied platform), ",e.jsx("em",{children:"warning"})," signals, and ",e.jsx("em",{children:"shunt-ahead"})," signals."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Shunting signals:"})," Control low-speed movements within station/yard limits. Typically position-light (white lights in different arrangements). Two horizontal lights = stop; one diagonal pair = proceed."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Repeater signals:"})," Repeat the aspect of a signal that has poor sighting (e.g. around a curve), giving the driver earlier warning. Identified by a distinctive triangular plate."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Banner repeaters:"})," A miniature semaphore arm mounted on a post, repeating the aspect of the signal ahead. Used in locations where a full repeater is not practical."]})]}),e.jsx("h3",{children:"Route Indicators and Feather Signals"}),e.jsxs("p",{children:["At junctions where multiple routes diverge, the driver needs to know not just that the signal is clear, but ",e.jsx("em",{children:"which route"})," has been set. This is communicated by",e.jsx("strong",{children:" junction indicators"}),":"]}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Feather (junction indicator):"})," A row of white lights extending at an angle from the main signal, indicating the diverging route. A feather to the upper-left means the left-hand route is set; upper-right means the right-hand route. Multiple feathers can indicate multiple possible diverging routes."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Theatre indicator:"})," A small alphanumeric display showing a route code (letter or number) indicating which platform or route has been set. Common at complex station approaches where multiple routes diverge."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Position-light junction indicator:"})," Used on some routes where the diverging route has a lower speed limit. The driver must observe the indicator to know the permitted speed."]})]}),e.jsx("h3",{children:"AWS and TPWS"}),e.jsxs("p",{children:[e.jsx("strong",{children:"AWS (Automatic Warning System):"})," A magnet between the rails triggers an audible warning in the cab at every signal. At green, the driver hears a bell (actually a brief electronic tone on modern equipment). At any restrictive aspect, the driver hears a horn and must acknowledge within 2.5 seconds or brakes apply automatically. AWS was developed in the 1950s and is fitted across the UK network. Its limitation is that it does not distinguish between a single yellow (next signal is red) and a double yellow (two signals ahead are clear)  both give the same warning. The driver must observe the signal aspect visually."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"TPWS (Train Protection and Warning System):"})," Two pairs of loops at signals measure the train's speed. If a train passes a red signal, or approaches one too fast to stop, TPWS triggers an emergency brake application. TPWS was installed across the UK network after the Ladbroke Grove disaster (1999). It works by comparing the time a train takes to pass between two closely spaced loops  from this, the train's speed is calculated. If the speed exceeds the permitted value, the onboard TPWS equipment immediately applies the emergency brake without any driver intervention."]}),e.jsxs("p",{children:["TPWS has two operating modes: ",e.jsx("strong",{children:"Overspeed Sensor (OSS)"}),", which checks the approach speed at a restrictive signal, and ",e.jsx("strong",{children:"Train Stop System (TSS)"}),", which triggers a brake application if the train passes a signal at danger. Together, they provide a safety net that catches the vast majority of SPADs (Signals Passed at Danger) and over-speed approaches. However, TPWS has limitations: at very high speeds, a train may be travelling too fast for even an emergency brake application to prevent it reaching the hazard point  this is one reason why ETCS is required on lines above 125 mph."]}),e.jsx("h3",{children:"SPADs: Signals Passed at Danger"}),e.jsxs("p",{children:["A ",e.jsx("strong",{children:"SPAD"})," occurs when a train passes a signal displaying a red (danger) aspect without authority. SPADs are one of the most significant safety risks on the railway. Their severity depends on the ",e.jsx("strong",{children:"overrun distance"})," and what lies beyond the signal: an overlap (safe), an occupied section (collision risk), or a set of points (derailment risk). SPADs are categorised by risk: Category A (most serious, potential for collision or derailment) through to Category D (lowest risk, minimal overrun into an unoccupied overlap)."]}),e.jsxs("p",{children:["Reducing SPADs is a multi-layered challenge. Engineering measures include AWS, TPWS, and ETCS (which physically prevents SPADs by supervising the train's speed profile). Operational measures include driver training, fatigue management, improved signal sighting, and signal positioning reviews. Human factors research has identified that the most common SPAD causes are ",e.jsx("strong",{children:"distraction"}),",",e.jsx("strong",{children:" misreading the signal"})," (e.g., reading a signal intended for an adjacent track), and ",e.jsx("strong",{children:"expectation"})," (the driver expects a green signal based on previous experience and fails to register a red)."]}),e.jsxs(N,{type:"analogy",children:["The block system is a ",e.jsx("strong",{children:"mutex / semaphore"}),'  and this is not a coincidence. The computer science term "semaphore" was directly borrowed from railway signalling by Edsger Dijkstra in 1965. A railway semaphore controls access to a shared resource (the block section), permitting only one train (thread) at a time. The concepts of mutual exclusion, deadlock, and starvation all have direct railway parallels. A "deadlock" occurs when two trains on a single-track line face each other with nowhere to pass. "Starvation" occurs when low-priority freight trains are perpetually held for higher-priority passenger services and never get a path.']}),e.jsx(ce,{goTo:h,items:[{target:"m4-l2",label:"Interlocking & Train Detection",desc:"The logic that enforces block rules and detects train positions."},{target:"m4-l3",label:"ETCS, CBTC & Future",desc:"How modern systems replace lineside signals with cab signalling."},{target:"m0-l1",label:"Why Railways Work",desc:"Braking distance  the reason signalling exists."}]})]})}const np=[{text:"What is the fundamental rule of the block system?",options:["Trains must travel at constant speed","Only one train may occupy a block section at a time","Signals must change every 60 seconds","All blocks must be the same length"],correct:1,explanation:"The absolute block system ensures only one train per section. Everything in signalling exists to enforce this rule."},{text:"In four-aspect signalling, what does a double yellow signal mean?",options:["Stop immediately","Proceed with caution  next signal is red","Preliminary caution  expect next signal to be yellow","Proceed at full speed"],correct:2,explanation:"Double yellow = preliminary caution. The next signal will be yellow, and the one after that red. This gives enough advance warning for high-speed braking."},{text:"What was the original purpose of the semaphore signal?",options:["To decorate stations","To communicate movement authority using visible arm positions","To measure wind speed","To signal to passengers"],correct:1,explanation:"Semaphores use movable arms: horizontal = stop, lowered 45 = clear. They replaced time-interval working which had caused collisions."},{text:"What does AWS (Automatic Warning System) do?",options:["Automatically drives the train","Provides audible/visual cab warning when passing signals at caution or danger","Controls level crossing barriers","Manages station announcements"],correct:1,explanation:"AWS uses track magnets to trigger cab alerts. If the driver doesn't acknowledge a warning within seconds, brakes apply automatically."}];function ap({goTo:h}){return e.jsxs(e.Fragment,{children:[e.jsxs("figure",{className:"lesson-figure",children:[e.jsx("div",{className:"cad-symbol",children:e.jsxs("svg",{viewBox:"0 0 320 100",style:{width:"100%",maxWidth:"320px"},children:[e.jsx("text",{x:"160",y:"14",fill:"var(--text-dim)",fontSize:"10",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"Track Circuit Principle"}),e.jsx("line",{x1:"30",y1:"38",x2:"290",y2:"38",stroke:"var(--text-bright)",strokeWidth:"2"}),e.jsx("line",{x1:"30",y1:"52",x2:"290",y2:"52",stroke:"var(--text-bright)",strokeWidth:"2"}),e.jsx("rect",{x:"30",y:"56",width:"22",height:"10",fill:"var(--bg-hover)",stroke:"var(--accent)",strokeWidth:"1",rx:"1"}),e.jsx("text",{x:"41",y:"64",fill:"var(--accent)",fontSize:"6",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"BAT"}),e.jsx("rect",{x:"268",y:"56",width:"22",height:"10",fill:"var(--bg-hover)",stroke:"var(--blue)",strokeWidth:"1",rx:"1"}),e.jsx("text",{x:"279",y:"64",fill:"var(--blue)",fontSize:"6",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"RLY"}),e.jsx("text",{x:"160",y:"34",fill:"var(--accent-secondary)",fontSize:"7",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"current  relay energised = CLEAR"}),e.jsx("text",{x:"160",y:"80",fill:"var(--text-dim)",fontSize:"8",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"axle short-circuits  relay drops = OCCUPIED"}),e.jsx("text",{x:"160",y:"94",fill:"var(--accent)",fontSize:"7",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"fail-safe: power loss = OCCUPIED"})]})}),e.jsx("figcaption",{children:"Schematic: Track circuit  current flows through rails to a relay. A train axle short-circuits the current, indicating occupation."})]}),e.jsx("h3",{children:"What Is Interlocking?"}),e.jsxs("p",{children:["An ",e.jsx("strong",{children:"interlocking"})," is the safety logic that prevents conflicting movements. It enforces rules such as: a signal cannot clear unless all points in the route are set and detected in the correct position; points cannot move under a train; conflicting routes cannot be set simultaneously. The interlocking is the most safety-critical component of any signalling system."]}),e.jsx("p",{children:"The concept emerged after a series of catastrophic accidents in the mid-19th century where signallers inadvertently set conflicting routes. The key insight was that the rules governing safe movements could be mechanised  removing the reliance on human memory and discipline. John Saxby patented the first interlocking frame in 1856, and by the 1880s interlocking was mandatory on British railways. The principle has remained unchanged for 170 years, even as the implementation technology has evolved from mechanical levers to computers."}),e.jsx("h3",{children:"Types of Interlocking"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Mechanical:"})," Victorian-era lever frames in signal boxes, using physical tappets and locking bars to prevent conflicting lever movements. Each lever operates a signal or set of points via a wire or rod run. The locking is achieved by steel tappets on the lever mechanisms that physically prevent one lever from moving when another is in a particular position. Some are still in use  engineering marvels of 19th-century logic. A large mechanical frame like that at Shrewsbury had over 100 levers, each requiring significant physical effort to operate."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Relay:"}),' Electrical relay circuits that implement the same logic using relays wired in series and parallel. Dominated the 20th century. Fail-safe because relays are designed to drop to the safe (restrictive) state when de-energised. A typical relay interlocking room contains hundreds or thousands of relays wired into a logic network. Each relay is a vital component  designed with special materials and construction to ensure that failure always results in the contact opening (safe state). The logic is "wired in"  changing the interlocking requires physically rewiring relay circuits, a costly and time-consuming process.']}),e.jsxs("li",{children:[e.jsx("strong",{children:"SSI (Solid State Interlocking):"}),' First-generation computer-based interlocking, developed in the UK in the 1980s by BR Research, GEC, and Westinghouse. Uses triple-redundant processors with 2-out-of-3 voting. The interlocking logic is held in geographic data (the "data prep") rather than wired circuits. SSI was revolutionary because it separated the safety-critical platform (the hardware and operating software) from the application-specific data (the geographic configuration), allowing the same hardware to be deployed at different locations simply by loading different data. Over 1,200 SSIs have been installed in the UK.']}),e.jsxs("li",{children:[e.jsx("strong",{children:"CBI (Computer Based Interlocking):"})," Modern generic computer platforms running formally verified interlocking software. Multiple vendors: Siemens (Trackguard Sinet), Alstom (Smartlock), Hitachi Rail (MicroLok). All must be certified to SIL 4. CBIs typically use diverse redundancy  two independent processing channels using different hardware and/or software, both of which must agree before a safety-critical output is produced. Some CBIs implement the interlocking logic in a formally specified language that can be mathematically proven correct."]})]}),e.jsx("h3",{children:"Interlocking Tables (Control Tables)"}),e.jsxs("p",{children:["The core specification of an interlocking is the ",e.jsx("strong",{children:"control table"}),": a matrix listing every route, and for each route, the required position of every point, the track sections that must be clear, the conflicting routes that must not be set, and the overlap beyond the end signal. The data prep engineer translates track layout drawings into control tables; any error can have catastrophic consequences."]}),e.jsx("p",{children:"A typical control table entry looks like this: Route S1 to S5 requires points 101 Normal, points 103 Reverse, track sections T1-T4 clear, overlap sections T5-T6 clear, no conflict with routes S2-S3 or S7-S9. The table is exhaustive  every possible route and every possible conflict must be enumerated. For a large station with dozens of routes and hundreds of track sections, the control table can run to thousands of entries. Verification of control tables is performed using a combination of peer review, automated consistency checking, and formal methods."}),e.jsx("h3",{children:"Safety Integrity Level 4"}),e.jsxs("p",{children:["Railway signalling interlocking must meet ",e.jsx("strong",{children:"SIL 4"}),"  the highest level defined by IEC 61508 and EN 50129. This requires a tolerable hazard rate (THR) of less than ",e.jsxs("strong",{children:["10",e.jsx("sup",{children:"-9"})," dangerous failures per hour"]}),"  roughly one dangerous failure per 114,000 years of continuous operation. Achieving this requires formal methods, independent verification, diverse redundancy, and exhaustive testing."]}),e.jsx("p",{children:'The SIL 4 requirement has profound implications for the development process. EN 50128 mandates specific software development techniques at each SIL level. At SIL 4, the standard "highly recommends" formal specification (mathematical description of requirements), formal proof (mathematical verification that the implementation satisfies the specification), and model checking (exhaustive exploration of all possible system states). The development lifecycle includes independent safety assessment (ISA) by an assessor who has had no involvement in the design, and independent verification and validation (IV&V) of the safety case.'}),e.jsx("h3",{children:"Train Detection: Track Circuits"}),e.jsxs("p",{children:["A ",e.jsx("strong",{children:"track circuit"})," feeds a low-voltage electrical current through one rail and returns it through the other. When a train is present, its steel wheelsets short-circuit (shunt) the rails, causing a relay to de-energise. This is inherently",e.jsx("strong",{children:" fail-safe"}),': a broken rail, disconnected wire, or equipment failure all cause the relay to drop, indicating "occupied" (the safe state).']}),e.jsx("p",{children:"Track circuits come in several variants:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"DC track circuits:"})," The simplest form. A battery feeds current through one rail, and a relay at the far end detects it. Limited range (typically up to about 600 m) due to ballast resistance and rail-to-rail leakage. Susceptible to interference from traction return currents on electrified railways."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"AC track circuits (jointless):"})," Use audio-frequency signals (typically 1.52.5 kHz for TI21 type, or 833 Hz10 kHz for FS2500/TI21 types) that can propagate over longer distances and coexist with DC traction return currents. Frequency coding allows adjacent track circuits to use different frequencies, preventing interference. Jointless track circuits eliminate the need for insulated rail joints, which are a maintenance liability and a point of failure."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Reed relay track circuits:"})," Use tuned reed relays that respond only to specific frequencies, providing immunity to interference. Common on UK AC-electrified routes."]})]}),e.jsxs("p",{children:["A key vulnerability of all track circuits is ",e.jsx("strong",{children:"poor shunting"}),`: if the rail-head is contaminated (rust, leaf mulch, sand, or oil), the train's wheels may not make adequate electrical contact with the rail, and the track circuit fails to detect the train. This is a right-side failure (dangerous) because the track circuit shows "clear" when a train is actually present. Mitigation includes rail-head conditioning (running trains to keep the rail surface clean), enhanced shunting arrangements (additional detection points), and operational procedures for lines prone to contamination.`]}),e.jsxs("figure",{className:"lesson-figure",children:[e.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/d/d2/Clear_track_circuit.svg",alt:"Schematic diagram of a clear (unoccupied) track circuit, showing electrical current flowing through the rails to a relay",loading:"lazy",style:{maxWidth:"500px"}}),e.jsxs("figcaption",{children:["Track circuit principle: current flows through the rails to energise a relay. When a train's wheelsets short-circuit (shunt) the rails, the relay drops  indicating the section is occupied. Image: ",e.jsx("a",{href:"https://commons.wikimedia.org/wiki/File:Clear_track_circuit.svg",target:"_blank",rel:"noopener noreferrer",children:"Wikimedia Commons"})]})]}),e.jsx("h3",{children:"Train Detection: Axle Counters"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Axle counters"})," use wheel sensors at each end of a section to count axles in and out. Each sensor typically consists of two coils that detect the passage of a steel wheel through changes in the electromagnetic field. The two coils are arranged so that the direction of travel can be determined  an axle passing left-to-right produces a different signal sequence than right-to-left. When the count of axles entering equals the count leaving, the section is clear."]}),e.jsxs("p",{children:["Unlike track circuits, axle counters do not require the current to flow through the rails (beneficial for electrified track and poor-conductivity rail). They are not affected by rail-head contamination, making them immune to the poor-shunting problem that plagues track circuits. However, they are ",e.jsx("em",{children:"not"})," inherently fail-safe: if the count becomes corrupted (e.g. after a power failure, a sensor malfunction, or an electromagnetic disturbance), the section enters a ",e.jsx("strong",{children:'"disturbed" state'}),"and requires a manual reset procedure  a technician must physically verify that the section is clear before resetting the counter. This is a significant operational constraint, particularly on routes with no alternative paths."]}),e.jsxs("p",{children:["Modern axle counter systems (such as Frauscher RSR123 or Thales AzLM) incorporate extensive self-diagnostic capabilities, non-volatile counting registers that survive power failures, and redundant sensor pairs to reduce the probability of entering a disturbed state. Some systems now achieve a count accuracy better than 10",e.jsx("sup",{children:"-9"}),"per axle passage, making them viable for SIL 4 applications  but the fundamental architectural difference from track circuits (count-based vs. continuous-presence-detection) remains."]}),e.jsx("h3",{children:"Track Circuit vs Axle Counter: Design Choice"}),e.jsx("div",{className:"table-wrapper",children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Criterion"}),e.jsx("th",{children:"Track Circuit"}),e.jsx("th",{children:"Axle Counter"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{children:"Fail-safe mode"}),e.jsx("td",{children:"Inherently fail-safe (shows occupied on failure)"}),e.jsx("td",{children:"Not inherently fail-safe (may enter disturbed state)"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Rail-head contamination"}),e.jsx("td",{children:"Vulnerable (poor shunting)"}),e.jsx("td",{children:"Immune"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Broken rail detection"}),e.jsx("td",{children:"Can detect (current path broken)"}),e.jsx("td",{children:"Cannot detect"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Electrified lines"}),e.jsx("td",{children:"Complex (traction return current interference)"}),e.jsx("td",{children:"No rail interaction needed"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Insulated joints"}),e.jsx("td",{children:"Required (for conventional types)"}),e.jsx("td",{children:"Not required"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Power failure recovery"}),e.jsx("td",{children:"Immediate (relay drops to safe state)"}),e.jsx("td",{children:"May require manual reset"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Maintenance burden"}),e.jsx("td",{children:"Higher (rail bonds, insulated joints, relay calibration)"}),e.jsx("td",{children:"Lower (sensors are lineside, no rail-dependent components)"})]})]})]})}),e.jsxs(N,{type:"analogy",children:["An interlocking is a ",e.jsx("strong",{children:"formally verified state machine"}),". Each state represents a valid configuration of signals and points. Transitions (route setting, route release) are only permitted if preconditions are met. The SIL 4 requirement is essentially the railway industry demanding the rigour of formal methods  model checking, theorem proving, and exhaustive testing  long before these techniques became fashionable in software. Railway signalling is one of the oldest and most successful applications of formal verification in engineering. Track circuits are like ",e.jsx("strong",{children:"heartbeat monitors"}),"  they continuously confirm presence by measuring a physical property. Axle counters are like ",e.jsx("strong",{children:"reference counting"}),"in memory management  they track allocations and deallocations, but if the count gets corrupted, you have a memory leak (or in railway terms, a phantom train)."]}),e.jsx(ce,{goTo:h,items:[{target:"m4-l1",label:"Block System & Signals",desc:"The signals that the interlocking controls."},{target:"m4-l4",label:"Points, Routes & Level Crossings",desc:"How routes are set through the interlocking."},{target:"m4-l3",label:"ETCS, CBTC & Future",desc:"How modern systems build on interlocking principles."}]})]})}const sp=[{text:"What is the purpose of an interlocking?",options:["To lock the signalling room door","To prevent conflicting train movements by enforcing safety logic","To connect signal boxes together","To record train positions"],correct:1,explanation:"An interlocking enforces safety: if a route is set, all conflicting routes are locked out and all points locked in position."},{text:"What SIL is required for railway signalling interlockings?",options:["SIL 1","SIL 2","SIL 3","SIL 4"],correct:3,explanation:"SIL 4  the highest level, meaning <1 dangerous failure per 10 hours. Same as nuclear safety systems and aviation fly-by-wire."},{text:"How does a track circuit detect a train?",options:["Using cameras","By sensing the short-circuit created by steel wheels bridging the rails","By weighing the track","By detecting the train's radio signal"],correct:1,explanation:`Current flows through the rails. When wheelsets bridge (shunt) the rails, a relay de-energises indicating "occupied." It's fail-safe  a broken rail also triggers occupation.`},{text:"What is the main disadvantage of axle counters vs track circuits?",options:["They are less accurate","They cannot detect broken rails, and miscounts require manual reset","They are more expensive","They only work in tunnels"],correct:1,explanation:"Miscounts require a technician to physically verify the section is clear before resetting  a slow process causing delays."}];function rp({goTo:h}){return e.jsxs(e.Fragment,{children:[e.jsxs("figure",{className:"lesson-figure",children:[e.jsx("div",{className:"cad-symbol",children:e.jsxs("svg",{viewBox:"0 0 320 110",style:{width:"100%",maxWidth:"320px"},children:[e.jsx("text",{x:"160",y:"14",fill:"var(--text-dim)",fontSize:"10",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"ETCS Level 2"}),e.jsx("line",{x1:"20",y1:"70",x2:"300",y2:"70",stroke:"var(--text-bright)",strokeWidth:"2"}),e.jsx("rect",{x:"50",y:"56",width:"50",height:"12",fill:"var(--text-dim)",stroke:"var(--text-bright)",strokeWidth:"1",rx:"2"}),e.jsx("text",{x:"75",y:"65",fill:"var(--bg)",fontSize:"7",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"EVC"}),e.jsx("line",{x1:"75",y1:"56",x2:"200",y2:"30",stroke:"var(--blue)",strokeWidth:"1",strokeDasharray:"3,2"}),e.jsx("text",{x:"130",y:"38",fill:"var(--blue)",fontSize:"7",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"radio"}),e.jsx("rect",{x:"180",y:"18",width:"45",height:"18",fill:"var(--bg-hover)",stroke:"var(--blue)",strokeWidth:"1.5",rx:"2"}),e.jsx("text",{x:"202",y:"30",fill:"var(--blue)",fontSize:"8",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"RBC"}),e.jsx("rect",{x:"240",y:"18",width:"40",height:"18",fill:"var(--bg-hover)",stroke:"var(--accent-secondary)",strokeWidth:"1.5",rx:"2"}),e.jsx("text",{x:"260",y:"30",fill:"var(--accent-secondary)",fontSize:"8",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"IXL"}),e.jsx("line",{x1:"225",y1:"27",x2:"240",y2:"27",stroke:"var(--text-dim)",strokeWidth:"1"}),e.jsx("rect",{x:"120",y:"68",width:"8",height:"4",fill:"var(--accent)",rx:"1"}),e.jsx("rect",{x:"180",y:"68",width:"8",height:"4",fill:"var(--accent)",rx:"1"}),e.jsx("text",{x:"155",y:"64",fill:"var(--accent)",fontSize:"7",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"balises"}),e.jsx("line",{x1:"100",y1:"85",x2:"250",y2:"85",stroke:"var(--accent-secondary)",strokeWidth:"1.5"}),e.jsx("polygon",{points:"250,85 244,82 244,88",fill:"var(--accent-secondary)"}),e.jsx("text",{x:"175",y:"100",fill:"var(--accent-secondary)",fontSize:"8",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"Movement Authority"})]})}),e.jsx("figcaption",{children:"Schematic: ETCS Level 2  on-board EVC receives movement authority from Radio Block Centre via radio link."})]}),e.jsx("h3",{children:"ETCS: European Train Control System"}),e.jsxs("p",{children:["ETCS is the signalling component of ERTMS (European Rail Traffic Management System), designed to replace the dozens of incompatible national signalling systems across Europe. It defines a series of ",e.jsx("strong",{children:"levels"})," representing increasing degrees of integration:"]}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Level 0:"})," ETCS on-board equipment supervises speed limits but the existing national signalling system remains in control. A compatibility/migration mode."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Level 1:"})," ",e.jsx("strong",{children:"Eurobalises"})," (transponders between the rails) transmit movement authorities as the train passes over them. Lineside signals are retained. Train detection is via conventional track circuits or axle counters. An overlay on existing infrastructure. An optional enhancement is the use of",e.jsx("strong",{children:" Euroloops"})," or ",e.jsx("strong",{children:"radio infill"}),' to update the movement authority between balise groups, reducing the "information gap" problem where a train must wait to reach the next balise to receive an updated MA.']}),e.jsxs("li",{children:[e.jsx("strong",{children:"Level 2:"})," Movement authorities are transmitted continuously via radio (GSM-R) from a ",e.jsx("strong",{children:"Radio Block Centre (RBC)"}),". Eurobalises are retained only for position calibration. Lineside signals can be removed. Train detection still uses conventional track circuits or axle counters. This is the level being deployed most widely today  it is the backbone of UK's Digital Railway programme, the core of high-speed lines across Europe, and the standard for new installations worldwide."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Level 3:"})," Eliminates the need for trackside train detection entirely. Trains report their position and integrity directly via radio. Enables",e.jsx("strong",{children:" moving block"}),"  trains are separated by a safe braking distance rather than fixed block sections, dramatically increasing capacity. Still largely in development/pilot phase. The key technical challenge is ",e.jsx("strong",{children:"train integrity"}),"  the train must be able to confirm that it is complete (no vehicles have become detached) because there is no trackside equipment to verify this."]})]}),e.jsx("h3",{children:"ETCS Modes of Operation"}),e.jsxs("p",{children:["The ETCS onboard computer operates in various ",e.jsx("strong",{children:"modes"})," depending on the operational situation:"]}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Full Supervision (FS):"})," The normal operating mode. The onboard computer has a complete MA and speed profile, and continuously supervises the train's speed and position against it."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"On Sight (OS):"})," The train is permitted to proceed but must be prepared to stop within sight. Used when entering an occupied section (e.g., coupling to another train)."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Staff Responsible (SR):"})," The driver takes responsibility for safe movement. Used during degraded operation when the signalling system cannot provide a full MA."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Shunting (SH):"})," Low-speed movements within a defined area, without a formal MA. Used for yard and depot operations."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Trip:"})," The train has exceeded its authority (passed the end of MA) and the emergency brake is applied. The train must come to a complete stop before any further movement is possible."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Post Trip:"})," After a trip, the driver must acknowledge the situation and can only proceed under specific conditions with restricted speed."]})]}),e.jsx("h3",{children:"Eurobalise & RBC Architecture"}),e.jsxs("p",{children:["A ",e.jsx("strong",{children:"Eurobalise"})," is a passive or active transponder mounted between the rails. When energised by the passing train's antenna, it transmits a telegram containing position information and (in Level 1) the movement authority. Balises are installed in ",e.jsx("strong",{children:"groups"}),"  typically pairs or triplets  to provide redundancy and direction information. The spacing between balises in a group is precisely known, allowing the onboard computer to verify its position calibration."]}),e.jsxs("p",{children:["The ",e.jsx("strong",{children:"Radio Block Centre (RBC)"})," is the server-side processor in Level 2+ that manages movement authorities for all trains in its area, communicating with both trains (via radio) and the interlocking (via a standardised interface). An RBC typically manages an area of 100300 km of route. RBCs at adjacent areas communicate through a ",e.jsx("strong",{children:"handover protocol"}),"  as a train approaches the boundary between two RBC areas, the current RBC transfers responsibility to the next, ensuring seamless continuity of movement authority. The protocol is specified in UNISIG Subset-039 and must handle the transition without any gap in supervision."]}),e.jsxs("figure",{className:"lesson-figure",children:[e.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/2/26/Siemens_Eurobalise.jpg",alt:"A Siemens Eurobalise transponder  a yellow unit mounted between the rails that transmits data to passing trains",loading:"lazy"}),e.jsxs("figcaption",{children:["A Siemens Eurobalise  the passive transponder mounted between the rails. When energised by a passing train's antenna, it transmits position data and movement authorities. Photo: ",e.jsx("a",{href:"https://commons.wikimedia.org/wiki/File:Siemens_Eurobalise.jpg",target:"_blank",rel:"noopener noreferrer",children:"Wikimedia Commons"})]})]}),e.jsx("h3",{children:"Movement Authority"}),e.jsxs("p",{children:["The ",e.jsx("strong",{children:"movement authority (MA)"})," is the fundamental concept: a permission to occupy a specific section of track up to a defined end point (End of Authority, or EOA), with a supervised speed profile. The on-board computer continuously monitors the train's position and speed against the MA and applies brakes if limits are exceeded. This provides continuous protection, unlike discrete lineside signals."]}),e.jsxs("p",{children:['The MA includes far more information than a simple "go" command. It contains the',e.jsx("strong",{children:" static speed profile"})," (permanent speed limits along the route),",e.jsx("strong",{children:" gradient profile"})," (used for braking calculations),",e.jsx("strong",{children:" temporary speed restrictions"}),", and the",e.jsx("strong",{children:" danger point"})," (the point beyond the EOA where a hazard exists, such as a set of points or an occupied section). From all this data, the onboard computer calculates ",e.jsx("strong",{children:"braking curves"}),": the permitted speed at every point along the route, taking into account the train's specific braking performance, the gradient, and a margin for intervention. If the train exceeds the ",e.jsx("strong",{children:"warning speed"}),", the driver receives an audible/visual alert. If it exceeds the",e.jsx("strong",{children:" intervention speed"}),", the brakes are applied automatically."]}),e.jsx("h3",{children:"Fixed Block vs Moving Block"}),e.jsxs("div",{className:"highlight-box",children:[e.jsxs("p",{children:["In ",e.jsx("strong",{children:"fixed block"})," signalling (conventional and ETCS Levels 1/2), the track is divided into predetermined block sections defined by track circuits or axle counter boundaries. Only one train may occupy a block at a time, and the block must be completely clear before the next train may enter. This means the minimum headway includes the block length plus the braking distance, regardless of the actual position of the leading train within the block."]}),e.jsxs("p",{children:["In ",e.jsx("strong",{children:"moving block"})," (ETCS Level 3 and CBTC), there are no fixed block boundaries. Each train continuously reports its precise position, and the following train's movement authority extends to the last confirmed rear of the preceding train, plus a safety margin. This means the minimum separation is the actual braking distance plus a safety margin  no wasted space from block boundaries. Moving block can increase capacity by 2040% on busy lines."]}),e.jsx("p",{style:{margin:0},children:"The challenge of moving block is that it requires extremely reliable and continuous position reporting, guaranteed train integrity confirmation, and very low-latency radio communication. Any gap in communication forces the train to assume the worst case and brake to a stop."})]}),e.jsx("h3",{children:"CBTC for Metro/Urban Rail"}),e.jsxs("p",{children:[e.jsx("strong",{children:"CBTC (Communications-Based Train Control)"})," is the metro equivalent, using continuous radio communication between trains and a zone controller. It enables headways as short as ",e.jsx("strong",{children:"90 seconds"})," with moving block, and supports full",e.jsx("strong",{children:" ATO (Automatic Train Operation)"}),". CBTC is now the standard for new metro construction worldwide and is being retrofitted to existing metros to increase capacity without building new tunnels."]}),e.jsx("p",{children:"CBTC systems typically use Wi-Fi-based radio (IEEE 802.11) operating in the 2.4 GHz or 5.8 GHz bands, with track-mounted access points providing continuous coverage throughout tunnels and stations. The zone controller manages train separation by calculating safe movement authorities for each train based on the position and speed of surrounding trains, track topology, and station dwell requirements."}),e.jsx("p",{children:"Grades of Automation (GoA) defined by IEC 62290:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"GoA 0:"})," On-sight train operation (no protection system)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"GoA 1:"})," Non-automated (driver operates with ATP protection)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"GoA 2:"})," Semi-automated (ATO with driver for door operation and emergency)  e.g. London Elizabeth line, Paris RER A"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"GoA 3:"})," Driverless (attendant on board but no driver)  e.g. London DLR"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"GoA 4:"})," Unattended (no staff on board)  e.g. Dubai Metro, Paris Line 14, Copenhagen Metro, Nuremberg U-Bahn"]})]}),e.jsxs("p",{children:["The transition from GoA 2 to GoA 4 requires increasingly sophisticated",e.jsx("strong",{children:" platform screen doors"})," (to prevent track intrusion),",e.jsx("strong",{children:" obstacle detection"})," systems, ",e.jsx("strong",{children:"automated train dispatch"}),", and ",e.jsx("strong",{children:"remote supervision"})," from a control centre. The engineering challenge shifts from train control to managing the uncontrolled human environment around the train."]}),e.jsx("h3",{children:"Future: FRMCS and Beyond"}),e.jsxs("p",{children:["GSM-R (the railway-specific mobile radio system) is approaching end-of-life.",e.jsx("strong",{children:" FRMCS (Future Railway Mobile Communication System)"})," will replace it using 5G technology, providing higher bandwidth, lower latency, and support for video, IoT, and next-generation ETCS applications. The higher bandwidth opens possibilities for virtual coupling (trains running in close formation without physical coupling, communicating wirelessly to coordinate braking) and satellite-based positioning to supplement or replace Eurobalises."]}),e.jsxs("p",{children:["The ",e.jsx("strong",{children:"Digital Railway"})," programme in the UK aims to deploy ETCS Level 2 across the busiest parts of the network, combined with traffic management systems that optimise train running in real time. The expected benefits include a 40% increase in capacity on key corridors, reduced signalling equipment at trackside (lowering maintenance costs and improving reliability), and enabling automatic train operation on mainline railways."]}),e.jsxs(N,{type:"analogy",children:["The progression from Level 0 to Level 3 ETCS is a ",e.jsx("strong",{children:"monolith-to-microservices migration"}),". Level 0 wraps the legacy system with a thin modern layer. Level 1 adds point-to-point data exchange (like adding REST APIs to a monolith). Level 2 centralises control in a dedicated service (the RBC) communicating over a network. Level 3 fully distributes intelligence to the edge (trains report their own position), eliminating legacy infrastructure (trackside detection). Each level adds capability but introduces new failure modes and migration complexity  exactly like a microservices migration. And just like in software, the hardest part is not building the new system  it's migrating from the old one while keeping the railway running."]}),e.jsx(ce,{goTo:h,items:[{target:"m4-l1",label:"Block System & Signals",desc:"The conventional signalling that ETCS replaces."},{target:"m4-l2",label:"Interlocking & Train Detection",desc:"The interlocking remains even under ETCS."},{target:"m4-l4",label:"Points, Routes & Level Crossings",desc:"How route-setting works in the ETCS world."},{target:"m7-l1",label:"Railway Telecoms",desc:"GSM-R and FRMCS provide the radio bearer for ETCS Level 2/3."}]})]})}const op=[{text:"At ETCS Level 2, what happens to lineside signals?",options:["Painted a different colour","Removed  movement authority sent directly to cab via radio","They flash instead of steady aspects","Kept as backup"],correct:1,explanation:"ETCS L2 eliminates lineside signals. The RBC sends movement authority via GSM-R radio to the cab display (DMI)."},{text:'What is a "movement authority" in ETCS?',options:["A government permit to run trains","Permission to proceed to a specific point, with a speed profile","A timetable allocation","A driver's licence"],correct:1,explanation:"An MA tells the train how far it may proceed and at what speeds, including a supervised speed profile and target point."},{text:"What does GoA 4 mean?",options:["Partially automated with driver override","Semi-automated with driver present","Driverless with an attendant","Fully unattended operation with no staff on train"],correct:3,explanation:"GoA 4 = Unattended Train Operation (UTO). No driver, no attendant. Examples: Docklands Light Railway, many modern metros."},{text:"What is the biggest challenge of migrating from legacy to digital signalling?",options:["Digital systems are unreliable","The old system must keep running safely during transition","Not enough software engineers","Digital signals use too much electricity"],correct:1,explanation:"You cannot stop the railway. Legacy and digital must coexist during transition  like refactoring a monolith to microservices in production."}];function lp({goTo:h}){return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"cad-symbol-row",children:[e.jsxs("figure",{className:"lesson-figure",children:[e.jsx("div",{className:"cad-symbol",children:e.jsxs("svg",{viewBox:"0 0 140 100",style:{width:"100%",maxWidth:"140px"},children:[e.jsx("text",{x:"70",y:"12",fill:"var(--text-dim)",fontSize:"8",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"Point Machine"}),e.jsx("line",{x1:"10",y1:"40",x2:"130",y2:"40",stroke:"var(--text-bright)",strokeWidth:"1.5"}),e.jsx("line",{x1:"40",y1:"40",x2:"100",y2:"65",stroke:"var(--text-bright)",strokeWidth:"1.5"}),e.jsx("rect",{x:"50",y:"46",width:"18",height:"12",fill:"var(--bg-hover)",stroke:"var(--accent)",strokeWidth:"1",rx:"1"}),e.jsx("text",{x:"59",y:"55",fill:"var(--accent)",fontSize:"7",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"M"}),e.jsx("text",{x:"70",y:"80",fill:"var(--text-dim)",fontSize:"7",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"move + detect"})]})}),e.jsx("figcaption",{children:"Point machine symbol"})]}),e.jsxs("figure",{className:"lesson-figure",children:[e.jsx("div",{className:"cad-symbol",children:e.jsxs("svg",{viewBox:"0 0 140 100",style:{width:"100%",maxWidth:"140px"},children:[e.jsx("text",{x:"70",y:"12",fill:"var(--text-dim)",fontSize:"8",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"Level Crossing"}),e.jsx("line",{x1:"70",y1:"22",x2:"70",y2:"85",stroke:"var(--text-bright)",strokeWidth:"2"}),e.jsx("rect",{x:"15",y:"42",width:"110",height:"14",fill:"var(--bg-hover)",stroke:"var(--text-dim)",strokeWidth:"1",rx:"1"}),e.jsx("line",{x1:"30",y1:"40",x2:"30",y2:"28",stroke:"var(--red)",strokeWidth:"1.5"}),e.jsx("line",{x1:"30",y1:"28",x2:"60",y2:"28",stroke:"var(--red)",strokeWidth:"1.5"}),e.jsx("line",{x1:"110",y1:"58",x2:"110",y2:"70",stroke:"var(--red)",strokeWidth:"1.5"}),e.jsx("line",{x1:"110",y1:"70",x2:"80",y2:"70",stroke:"var(--red)",strokeWidth:"1.5"}),e.jsx("text",{x:"70",y:"95",fill:"var(--text-dim)",fontSize:"7",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"half-barrier"})]})}),e.jsx("figcaption",{children:"Level crossing symbol"})]})]}),e.jsx("h3",{children:"Point Machines"}),e.jsxs("p",{children:["A ",e.jsx("strong",{children:"point machine"})," is the electromechanical device that moves switch blades between their normal and reverse positions. Key types:"]}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Clamp lock (e.g., HW 2000, Alstom/Clamp Lock):"}),' An electric motor drives the blades, and a separate clamp mechanism locks them in position and provides detection. The clamp must be fully engaged before the interlocking will accept that the points are "detected and locked." The clamp lock provides both locking force and detection in a single mechanism  if the clamp cannot fully engage (e.g., an obstruction between the blade and stock rail), detection is not achieved and the signal stays at red.']}),e.jsxs("li",{children:[e.jsx("strong",{children:"HW (Hydraulic / Westinghouse) types (e.g., M63, Hy-Drive):"})," Use hydraulic power for the throw and a mechanical locking mechanism. Capable of moving high-speed turnouts with very long switch blades (up to 40 metres on high-speed lines). The hydraulic system provides smooth, controlled movement that is less likely to damage the switch blades than a violent electric throw."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"In-bearer point machines (e.g., Vossloh Cogifer CEVA, Alstom MET):"}),"Mounted within the sleeper/bearer, minimising the lineside footprint. Particularly suited to slab track and tunnel installations where space adjacent to the track is extremely limited."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Powered stretcher bars:"})," Instead of a single point machine at the toe, multiple drive units along the length of the switch ensure that long, flexible switch blades are held firmly against the stock rail along their entire length. Used on high-speed turnouts where a single point of drive cannot guarantee blade-to-rail contact over the full switch length."]})]}),e.jsxs("figure",{className:"lesson-figure",children:[e.jsx("div",{className:"image-placeholder",children:e.jsx("p",{children:"IMAGE NEEDED: Photo of a point machine (e.g., HW clamp lock type) installed beside the track at a set of switches/points, showing the mechanical linkage to the switch blades."})}),e.jsx("figcaption",{children:"A point machine installed at the trackside  the electromechanical device that moves switch blades between positions."})]}),e.jsx("h3",{children:"Detection and Proving"}),e.jsxs("p",{children:["It is not sufficient to simply command the points to move  the system must",e.jsx("strong",{children:" detect"}),' that they have actually reached the commanded position and are properly secured. Detection circuits (mechanical contacts or electronic sensors) at both the toe and heel of the switch blades confirm position. If detection is not obtained within a timeout (typically 710 seconds), a "points failure" is declared and the interlocking holds all relevant signals at danger.']}),e.jsxs("p",{children:["The detection system must confirm two conditions: that the ",e.jsx("strong",{children:"operating blade"}),'is firmly against the stock rail (the "closed" blade), and that the ',e.jsx("strong",{children:"non-operating blade"}),' has moved sufficiently far from its stock rail (the "open" blade) to allow a wheel flange to pass safely. The required gap on the open side is typically 100115 mm. If the open blade is not fully clear, a flange could strike it and cause a derailment. The detection tolerances are measured in single-digit millimetres  this is precision engineering in a lineside environment exposed to weather, vibration, and contamination.']}),e.jsx("h3",{children:"Points Heating"}),e.jsxs("p",{children:["In cold weather, snow and ice can accumulate between the switch blade and the stock rail, preventing the blade from closing properly. ",e.jsx("strong",{children:"Points heating"}),"systems combat this by warming the switch area. Technologies include:"]}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Electric trace heating:"})," Resistance heating elements installed along the stock rail and switch blade. Thermostatically controlled, activating when temperature drops below a threshold (typically 4C) and moisture is detected."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Gas heating:"})," Propane burners beneath the switch blades. More powerful than electric but requires gas supply infrastructure and is a fire risk near vegetation."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Geothermal:"})," Some systems circulate warm water from underground heat exchangers through pipes beneath the track  a sustainable solution but high capital cost."]})]}),e.jsx("p",{children:"Points heating is controlled by SCADA systems that monitor temperature and switch health remotely, activating heating proactively before conditions become hazardous. On the UK network, points heating failures during winter are one of the most common causes of disruption."}),e.jsx("h3",{children:"Route Setting Sequence"}),e.jsx("p",{children:"When a signaller (or an automated system) requests a route, the interlocking executes a rigorous five-step sequence:"}),e.jsxs("ol",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Verify no conflict:"})," Check that no conflicting route is currently set or locked. Check the route locking table for clashes."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Command points:"})," Send movement commands to all points in the route that are not already in the required position."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Detect and lock:"})," Wait for all points to report detection in the correct position. Lock them so they cannot be moved by another route request."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Check track clear:"})," Verify that all track sections in the route (and the overlap beyond the destination signal) are unoccupied."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Clear signal:"})," Only after all preceding steps are satisfied, the entrance signal is released to display a proceed aspect."]})]}),e.jsxs("p",{children:["The entire sequence typically takes 515 seconds, depending on how many points need to move and their travel time. On a busy junction where routes are set and released constantly, this cycle repeats dozens of times per hour. ",e.jsx("strong",{children:"Automatic Route Setting (ARS)"})," systems automate this process by reading the timetable and setting routes at the optimal time without signaller intervention, freeing the signaller to focus on disruption management."]}),e.jsx("h3",{children:"Route Release and Approach Locking"}),e.jsx("p",{children:"After a train has traversed a route, the sections are released progressively:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Sequential release:"})," Each track section is released as the train's tail clears it and a timer expires (ensuring a following train cannot immediately enter)."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Sectional release:"})," Similar but allows earlier release of sections behind the train, improving capacity at busy junctions. Points are released as soon as the train clears them, not waiting for the entire route to be released."]})]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Approach locking"})," is a critical safety feature. Once a signal has cleared and a train is approaching, the route cannot be cancelled immediately  doing so could cause the train to enter a danger area at speed. Instead, the signal is returned to red and an approach release timer starts (typically 120 seconds on plain line, longer on high-speed approaches). Only after the timer expires (or the train has been proved stopped) can the route be released and the points freed for another route. This ensures that a signal is never pulled back to red without adequate protection for an approaching train."]}),e.jsx("h3",{children:"Signal Overlaps"}),e.jsxs("p",{children:["Beyond every stop signal, an ",e.jsx("strong",{children:"overlap"})," is provided  an additional length of track (typically 180 m, but up to 370 m or more on high-speed routes) that must be clear and locked before the signal can show a proceed aspect. The overlap provides protection in case a driver misjudges their braking and overruns the signal."]}),e.jsxs("p",{children:['Overlap design involves trade-offs. A longer overlap provides greater safety margin but "sterilises" more track  the overlap track sections cannot be used by conflicting routes, reducing junction capacity. ',e.jsx("strong",{children:"Swinging overlaps"})," allow the overlap to be set in different directions depending on which route is next required, improving flexibility. Some modern interlockings use ",e.jsx("strong",{children:"approach-release overlaps"})," that shorten or release the overlap after a defined time, freeing the track for other movements once the approaching train has had sufficient time to stop."]}),e.jsxs("figure",{className:"lesson-figure",children:[e.jsx("div",{className:"image-placeholder",children:e.jsx("p",{children:"IMAGE NEEDED: Photo of an automatic half-barrier (AHB) level crossing with barriers lowered and warning lights flashing as a train approaches, showing the road/rail intersection."})}),e.jsx("figcaption",{children:"An automatic half-barrier level crossing  one of the highest-risk locations on the railway network."})]}),e.jsx("h3",{children:"Level Crossings"}),e.jsxs("p",{children:["Where roads cross railways at grade, ",e.jsx("strong",{children:"level crossings"})," are provided. Each type represents a different balance of safety, cost, and road-user delay:"]}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"AHB (Automatic Half Barrier):"})," Barriers close automatically when a train approaches, covering the approach (left) side only. Road users must obey flashing red lights and not weave around barriers. Triggered by traction on approach track circuits. Minimum road closure time (MRT) is a key design parameter  too short and barriers don't close in time; too long and road users become frustrated and may attempt to cross."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"AOCL (Automatic Open Crossing, Locally Monitored):"})," Warning lights only, no barriers. The driver monitors the crossing and checks it is clear before passing over. Used at low-traffic crossings on low-speed lines."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"MCB (Manually Controlled Barrier):"})," Signaller-operated full barriers with CCTV monitoring. The signaller closes the barriers, observes the crossing on CCTV to confirm it is clear, then clears the signal. Higher safety, but road closure time depends on signaller workload and observation time."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"MCB-OD (MCB with Obstacle Detection):"})," Full barriers with radar-based obstacle detection that scans the crossing area and alerts the signaller if anything remains between the barriers. Provides an additional safety layer beyond CCTV observation."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"UWC (User Worked Crossing):"})," A gate that the user (farmer, pedestrian) opens and closes. Relies on the user checking for trains. Found on rural routes. Being progressively closed or upgraded."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Footpath crossings:"}),' Pedestrian-only crossings with miniature warning lights (MWL) or, on quieter lines, simply a "Stop, Look, Listen" sign. Represent a significant safety concern, particularly at locations near schools or with elderly users.']})]}),e.jsx("h3",{children:"Level Crossing Risk Assessment"}),e.jsxs("p",{children:["Level crossings are among the highest-risk locations on the railway. In the UK, Network Rail uses the ",e.jsx("strong",{children:"All Level Crossing Risk Model (ALCRM)"})," to assess and compare risk across all crossings on the network. The model combines factors including road and rail traffic volumes, train speed, sight lines, crossing type, historical incident data, and user behaviour patterns to produce a risk score for each crossing. This score drives prioritisation of investment in upgrades, closures, and alternative provision (bridges or underpasses)."]}),e.jsxs("p",{children:["The long-term strategy is to ",e.jsx("strong",{children:"reduce the number of level crossings"}),"through closure (where alternative routes exist) or replacement with grade-separated crossings. However, with over 6,000 level crossings in the UK alone, and each closure or grade separation costing millions of pounds, this is a generational programme."]}),e.jsx("h3",{children:"The Role of the Signaller"}),e.jsx("p",{children:"The signaller (dispatcher in US terminology) is the human operator who sets routes, manages conflicts, responds to incidents, and maintains the safe flow of traffic. Even with high levels of automation, the signaller remains the decision-maker for abnormal situations  perturbations, failures, emergencies, and possessions."}),e.jsxs("p",{children:["In the era of Automatic Route Setting (ARS), the signaller's role has shifted from routine route-setting (which the computer handles far more consistently and tirelessly) to ",e.jsx("strong",{children:"exception management"}),". When a service is cancelled, a train fails, a possession overruns, or an incident occurs, the signaller must intervene to replan the service, prioritise movements, and coordinate with control room staff and train operators. This requires a deep understanding of the railway infrastructure, the timetable, and the operational rules  and the ability to make rapid decisions under pressure with incomplete information. Signaller training takes approximately 1218 months and is considered one of the most demanding roles on the railway."]}),e.jsxs(N,{type:"analogy",children:["Route setting is a ",e.jsx("strong",{children:"database transaction"}),`. It is atomic (all five steps succeed or the route is not set), consistent (the interlocking always transitions from one safe state to another), isolated (conflicting routes cannot be set simultaneously), and durable (once set, the route persists until properly released). If any step fails  points don't detect, track isn't clear, a conflict exists  the entire transaction rolls back and the signal stays at red. This is ACID compliance enforced by hardware and formal logic, with human lives depending on its correctness. The signaller's role has evolved from "manually executing transactions" to "DBA managing the cluster"  they monitor the automated system, intervene when it cannot cope, and handle the exceptions that the algorithms cannot resolve.`]}),e.jsx(ce,{goTo:h,items:[{target:"m4-l2",label:"Interlocking & Train Detection",desc:"The interlocking that executes the route-setting logic."},{target:"m1-l3",label:"Switches & Crossings",desc:"The physical track components that point machines operate."},{target:"m4-l1",label:"Block System & Signals",desc:"The signals controlled by route setting."},{target:"m7-l2",label:"SCADA & Remote Monitoring",desc:"Points heating and crossing equipment are monitored via SCADA."}]})]})}const cp=[{text:"What is the correct sequence for setting a signalled route?",options:["Clear signal, then move points, then check route","Move points, verify position, check route clear, then clear signal","Check route, clear signal, then move points","No fixed sequence"],correct:1,explanation:"The strict sequence: (1) verify no conflict, (2) move points, (3) detect points locked, (4) verify route clear, (5) clear signal."},{text:'What is a "signal overlap"?',options:["Two signals showing same aspect","A safe distance beyond a red signal kept clear in case of overrun","A redundant signal","Distance between signals on same post"],correct:1,explanation:"The overlap keeps track beyond a red signal clear and locked, providing a safety margin if a driver fails to stop exactly."},{text:"What type of level crossing uses automatic barriers triggered by approaching trains?",options:["Manually controlled (MCB)","Automatic half-barrier (AHB)","User-worked (UWC)","Occupation crossing"],correct:1,explanation:"AHB crossings use treadles or track circuits to detect trains and lower barriers automatically. Barriers cover only the approach side."}];function dp(h,y){switch(h){case"m4-l1":return e.jsx(ip,{goTo:y});case"m4-l2":return e.jsx(ap,{goTo:y});case"m4-l3":return e.jsx(rp,{goTo:y});case"m4-l4":return e.jsx(lp,{goTo:y});default:return null}}const hp={"m4-l1":np,"m4-l2":sp,"m4-l3":op,"m4-l4":cp};function up({goTo:h}){return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"cad-symbol-row",children:[e.jsxs("figure",{className:"lesson-figure",children:[e.jsx("div",{className:"cad-symbol",children:e.jsxs("svg",{viewBox:"0 0 140 110",style:{width:"100%",maxWidth:"140px"},children:[e.jsx("text",{x:"70",y:"12",fill:"var(--text-dim)",fontSize:"8",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"OLE / Catenary"}),e.jsx("line",{x1:"20",y1:"22",x2:"20",y2:"90",stroke:"var(--text-bright)",strokeWidth:"1.5"}),e.jsx("line",{x1:"20",y1:"28",x2:"100",y2:"28",stroke:"var(--text-bright)",strokeWidth:"1"}),e.jsx("line",{x1:"40",y1:"50",x2:"120",y2:"50",stroke:"var(--accent)",strokeWidth:"1.5"}),e.jsx("line",{x1:"70",y1:"28",x2:"70",y2:"50",stroke:"var(--text-dim)",strokeWidth:"0.5"}),e.jsx("line",{x1:"30",y1:"90",x2:"120",y2:"90",stroke:"var(--text-bright)",strokeWidth:"2"}),e.jsx("text",{x:"70",y:"72",fill:"var(--text-dim)",fontSize:"7",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"25 kV AC"})]})}),e.jsx("figcaption",{children:"OLE catenary"})]}),e.jsxs("figure",{className:"lesson-figure",children:[e.jsx("div",{className:"cad-symbol",children:e.jsxs("svg",{viewBox:"0 0 140 110",style:{width:"100%",maxWidth:"140px"},children:[e.jsx("text",{x:"70",y:"12",fill:"var(--text-dim)",fontSize:"8",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"Third Rail"}),e.jsx("line",{x1:"20",y1:"50",x2:"120",y2:"50",stroke:"var(--text-bright)",strokeWidth:"2"}),e.jsx("line",{x1:"20",y1:"70",x2:"120",y2:"70",stroke:"var(--text-bright)",strokeWidth:"2"}),e.jsx("rect",{x:"15",y:"75",width:"110",height:"5",fill:"var(--accent)",stroke:"var(--accent)",strokeWidth:"1",rx:"1"}),e.jsx("text",{x:"70",y:"95",fill:"var(--accent)",fontSize:"7",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"conductor rail"}),e.jsx("text",{x:"70",y:"105",fill:"var(--text-dim)",fontSize:"7",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"660750 V DC"})]})}),e.jsx("figcaption",{children:"Third rail"})]})]}),e.jsx("h3",{children:"A Brief History of Railway Electrification"}),e.jsxs("p",{children:["Railway electrification is not a modern idea. The first electric railway demonstrations took place in the 1870s and 1880s  Werner von Siemens demonstrated an electric railway at the Berlin Industrial Exhibition in 1879, and the Volk's Electric Railway opened in Brighton in 1883 (and still operates today). These early systems were all ",e.jsx("strong",{children:"direct current (DC)"}),", because DC motors were the only practical traction technology available. The challenge was always the same: DC cannot be easily transformed to higher voltages, so the supply voltage was limited to what the motors could accept directly  typically 500750 V."]}),e.jsx("p",{children:"This low voltage meant enormous currents for any meaningful power output, requiring heavy conductors and closely spaced substations. Early mainline electrification in the 1900s1930s used DC at 1,500 V or 3,000 V  higher than metro systems, but still fundamentally limited. Italy electrified major routes at 3 kV DC from the 1930s. The Netherlands adopted 1.5 kV DC. The UK Southern Railway committed to 660 V DC third rail in the 1920s1930s, a decision whose consequences persist a century later."}),e.jsxs("p",{children:["The breakthrough for mainline electrification came with ",e.jsx("strong",{children:"alternating current (AC)"})," systems. Early AC traction experiments began in the 1900s  the key advantage being that AC voltage can be stepped up for efficient long-distance transmission and stepped down onboard the train using transformers. However, early AC motors were problematic: induction motors lacked the torque characteristics needed for traction, and series-wound commutator motors (which worked well on DC) suffered from severe arcing at the commutator brushes when fed with standard 50 Hz AC."]}),e.jsxs("p",{children:["The solution adopted in Germanic countries and Scandinavia was to use a ",e.jsx("strong",{children:"lower frequency"}),". At 16 Hz (later standardised to 16.7 Hz), the commutator arcing problem was greatly reduced, and series-wound motors could operate satisfactorily on AC. This is the origin of the ",e.jsx("strong",{children:"15 kV 16.7 Hz"})," system that still serves Germany, Austria, Switzerland, Sweden, and Norway. The frequency was chosen as exactly one-third of the 50 Hz mains frequency, allowing frequency conversion by rotary converters."]}),e.jsxs("p",{children:["The modern era of railway electrification arrived in the 1950s1960s with the development of silicon rectifiers and, later, thyristor-based power electronics. These allowed trains to accept standard ",e.jsx("strong",{children:"50 Hz (or 60 Hz) AC"})," from the overhead line and rectify it onboard to DC for the traction motors. France pioneered the ",e.jsx("strong",{children:"25 kV 50 Hz"})," system on the ValenciennesThionville line in 1954, proving that standard industrial frequency AC could power mainline railways efficiently. This system became the global standard for new electrification  it was adopted by British Rail for the West Coast Main Line in the 1960s, by China, India, Turkey, and virtually every country electrifying from the 1960s onward."]}),e.jsx("h3",{children:"The Fundamental Choice: AC vs DC"}),e.jsx("p",{children:"Every electrified railway must make a foundational decision: alternating current (AC) or direct current (DC)? This choice, once made, is essentially permanent  it determines the design of substations, the overhead line or third rail, the onboard traction equipment, and even the maintenance regime for decades to come. The global railway network is split between both systems, each with distinct engineering trade-offs."}),e.jsxs("p",{children:["The physics are straightforward. ",e.jsx("strong",{children:"Power = Voltage  Current"}),". For a given power demand, higher voltage means lower current. Lower current means thinner conductors, less resistive loss (IR losses), and fewer substations needed along the route. This is why AC systems, which can use transformers to step voltage up and down efficiently, dominate modern mainline electrification."]}),e.jsx("h3",{children:"Voltage Systems Compared"}),e.jsx("div",{className:"table-wrapper",children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"System"}),e.jsx("th",{children:"Voltage"}),e.jsx("th",{children:"Where Used"}),e.jsx("th",{children:"Advantages"}),e.jsx("th",{children:"Disadvantages"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{children:"25 kV AC 50 Hz"}),e.jsx("td",{children:"25,000 V"}),e.jsx("td",{children:"UK mainlines, France (TGV), China, India, most new builds worldwide"}),e.jsx("td",{children:"Fewest substations, standard grid frequency, lowest conductor weight"}),e.jsx("td",{children:"Greater clearance needed, more complex onboard equipment, EMC challenges"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"15 kV AC 16.7 Hz"}),e.jsx("td",{children:"15,000 V"}),e.jsx("td",{children:"Germany, Austria, Switzerland, Sweden, Norway"}),e.jsx("td",{children:"High voltage benefits, lower frequency reduces inductive interference"}),e.jsx("td",{children:"Requires dedicated power generation or frequency converters, legacy system"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"3 kV DC"}),e.jsx("td",{children:"3,000 V"}),e.jsx("td",{children:"Italy, Spain (conventional), Belgium, Poland, Russia, South Africa"}),e.jsx("td",{children:"Moderate voltage, simpler onboard equipment than AC"}),e.jsx("td",{children:"Heavy conductors, substations every 15-25 km, significant resistive losses"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"1.5 kV DC"}),e.jsx("td",{children:"1,500 V"}),e.jsx("td",{children:"France (suburban), Netherlands, Japan (some lines), Hong Kong"}),e.jsx("td",{children:"Simple proven technology, adequate for suburban services"}),e.jsx("td",{children:"Substations every 5-10 km, heavy conductors, high current draw"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"750 V DC third rail"}),e.jsx("td",{children:"750 V"}),e.jsx("td",{children:"UK Southern region, London Underground, many metro systems"}),e.jsx("td",{children:"No overhead structures needed, lower visual impact, simpler infrastructure"}),e.jsx("td",{children:"Substations every 2-5 km, safety hazard at track level, limited power capacity"})]})]})]})}),e.jsx("h3",{children:"Why AC Won for Mainlines"}),e.jsxs("p",{children:["The mathematics are compelling. At 25 kV, a train drawing 4 MW of power requires only",e.jsx("strong",{children:" 160 A"}),". The same train on a 750 V DC system would draw over",e.jsx("strong",{children:" 5,300 A"}),"  thirty-three times more current. This means the DC system needs conductors with thirty-three times the cross-sectional area (or accepting enormous resistive losses), and substations spaced every few kilometres instead of every 40-80 km. AC systems can also tap directly into the national grid via standard transformers, whereas DC requires rectifier substations to convert AC from the grid."]}),e.jsx("p",{children:"The 25 kV 50 Hz system has a further advantage: it uses the standard industrial frequency, so substations simply step down the grid voltage. No frequency conversion is needed, and standard grid protection equipment can be employed. The onboard transformer steps 25 kV down to a level suitable for the traction converter (typically 12 kV), and the four-quadrant converter rectifies it and feeds the DC link that supplies the inverter-fed traction motors."}),e.jsx("h3",{children:"The 15 kV 16.7 Hz System: Why the Odd Frequency?"}),e.jsxs("p",{children:["The 15 kV 16.7 Hz system merits special attention because it represents a fascinating historical engineering compromise that has shaped an entire continent's railway infrastructure. The frequency of 16 Hz (later redefined as 16.7 Hz in 1995 to accommodate the slight frequency drift of modern static converters) was chosen in the early 1900s because it was exactly ",e.jsx("strong",{children:"one-third of the 50 Hz mains frequency"}),". This ratio allowed relatively simple rotary frequency converters  essentially a 50 Hz motor mechanically coupled to a 16.7 Hz generator  to produce the railway frequency from the public grid."]}),e.jsx("p",{children:"At 16.7 Hz, the series-wound commutator motors used in early AC locomotives experienced far less commutator arcing than at 50 Hz, because the rate of change of current (di/dt) was three times lower. The inductance of motor windings also presented less reactance at the lower frequency, allowing more power to be delivered. These motors could be designed to work satisfactorily on AC without the complex power electronics that would not be available for another half-century."}),e.jsxs("p",{children:["The consequence of this choice was the need for a ",e.jsx("strong",{children:"dedicated railway power grid"}),". Germany, Austria, and Switzerland operate an entirely separate single-phase 16.7 Hz transmission network, including:"]}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Dedicated power stations:"})," Several power plants generate exclusively at 16.7 Hz, including hydroelectric stations in the Alps and thermal plants. In Germany, DB Energie operates dedicated railway power stations."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"A 110 kV single-phase transmission network:"})," This network runs alongside or near the railway, distributing 16.7 Hz power from the generating stations and converter plants to the traction substations. Germany alone has over 7,700 km of 110 kV 16.7 Hz transmission line."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Rotary and static frequency converters:"})," Where dedicated 16.7 Hz generation is insufficient, converter stations draw power from the 50 Hz public grid and convert it to 16.7 Hz. Modern static frequency converters using IGBT technology are gradually replacing the older rotary machines, offering higher efficiency and faster response to load changes."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Central load dispatch:"})," DB Energie operates a dedicated dispatch centre that manages this railway power grid, balancing generation and load across the network independently of the public grid operator."]})]}),e.jsx("p",{children:"The cost of maintaining this parallel power infrastructure is substantial, but it provides a robust, railway-optimised supply. The lower frequency also has the incidental advantage of reduced inductive interference with lineside signalling and telecommunications cables. Modern power electronics have made the frequency choice technically obsolete  IGBT-based traction converters can equally well accept 16.7 Hz or 50 Hz  but the infrastructure legacy means the system will persist for many decades."}),e.jsx(N,{type:"info",label:"Key Standard",children:"EN 50163 defines the nominal voltages and permissible limits for all standard railway electrification systems. For 25 kV AC, the permanent minimum is 19 kV and the permanent maximum is 27.5 kV. For 750 V DC, the permanent limits are 500 V to 900 V. These limits drive the substation spacing calculations and protection settings."}),e.jsx("h3",{children:"Power Factor and Reactive Power"}),e.jsxs("p",{children:["AC traction systems do not simply draw real (active) power from the grid  they also draw ",e.jsx("strong",{children:"reactive power"}),", which loads the supply system without performing useful work. The power factor is the ratio of real power (kW) to apparent power (kVA). Early AC traction with phase-controlled thyristor converters had notoriously poor power factor, especially at low throttle settings  sometimes as low as 0.60.7. This meant the supply system had to be rated for 4070% more current than the real power demand alone would require."]}),e.jsxs("p",{children:["Modern ",e.jsx("strong",{children:"four-quadrant converters"})," (using IGBT technology) achieve near-unity power factor (0.950.99) across the full power range, dramatically reducing the reactive power burden on the supply. However, legacy rolling stock with thyristor drives may still be in service, and the supply system must be designed to accommodate their reactive power demands."]}),e.jsxs("p",{children:["At the system level, ",e.jsx("strong",{children:"reactive power compensation"})," equipment may be installed at substations or at intermediate points along the route. Static VAR compensators (SVCs) or static synchronous compensators (STATCOMs) inject or absorb reactive power dynamically to maintain the voltage profile within limits. This is particularly important on long feeder sections where voltage drop under heavy loading can push the railhead voltage below the EN 50163 minimum. Compensation also reduces the reactive power demand on the national grid connection, avoiding penalty charges from the grid operator and freeing up capacity in the supply transformers."]}),e.jsx("h3",{children:"Why DC Persists"}),e.jsxs("p",{children:["DC systems survive for two main reasons. First, ",e.jsx("strong",{children:"legacy"}),": many networks were electrified with DC in the early 20th century when AC traction technology was immature, and converting an entire network is prohibitively expensive (new substations, new overhead line, modified or replaced rolling stock, new onboard transformers). The UK's Southern region third-rail network covers 4,000+ track-km  converting to 25 kV AC overhead would cost billions and take decades. Second, ",e.jsx("strong",{children:"simplicity for metros"}),": short-distance urban railways with frequent stops benefit from dense substation spacing (needed anyway for the short headways) and third rail avoids the need for overhead structures in tight tunnels. Modern power electronics (IGBT inverters) have largely eliminated the onboard simplicity argument, but the infrastructure legacy remains."]}),e.jsxs("p",{children:["There is a third, often overlooked factor: ",e.jsx("strong",{children:"electromagnetic compatibility"}),". DC traction current does not create the alternating magnetic fields that interfere with audio-frequency track circuits and telecommunications cables. On densely signalled metro networks with track circuit train detection, the absence of 50 Hz interference simplifies the signalling design. However, DC systems bring their own EMC challenges  the harmonic content of modern IGBT inverter drives on DC trains can interfere with signalling equipment at specific frequencies, and stray DC current causes corrosion of buried metalwork (discussed in M5-L3)."]}),e.jsxs("figure",{className:"lesson-figure",children:[e.jsx("div",{className:"image-placeholder",children:e.jsx("p",{children:"IMAGE NEEDED: Photo showing 25 kV AC overhead line equipment (OLE) on a mainline railway, with visible catenary wire, contact wire, and mast structures. Contrast with a second photo or split image of a third rail (conductor rail) system."})}),e.jsx("figcaption",{children:"25 kV AC overhead electrification  the global standard for new mainline electrification, allowing substations 4080 km apart."})]}),e.jsx("h3",{children:"Third Rail Systems"}),e.jsxs("p",{children:["In a third rail system, power is delivered through a ",e.jsx("strong",{children:"conductor rail"})," mounted at track level, typically alongside the running rails. Trains collect current through",e.jsx("strong",{children:" shoe gear"}),"  spring-loaded contact shoes that press against the conductor rail. The running rails serve as the return conductor, carrying current back to the substation. Third rail is almost universally 750 V DC in modern applications (some older systems use 630 V or 660 V)."]}),e.jsx("h3",{children:"Third Rail Contact Arrangements"}),e.jsx("p",{children:"The geometry of how the current collection shoe contacts the conductor rail varies significantly between systems. Each arrangement has distinct advantages:"}),e.jsx("div",{className:"table-wrapper",children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Contact Type"}),e.jsx("th",{children:"Description"}),e.jsx("th",{children:"Where Used"}),e.jsx("th",{children:"Advantages"}),e.jsx("th",{children:"Disadvantages"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{children:"Top contact"}),e.jsx("td",{children:"Shoe rides on the upper surface of the conductor rail, which is mounted on insulators at approximately 350 mm from the running rail and about 100 mm above rail level."}),e.jsx("td",{children:"UK Southern region (Network Rail), some US commuter systems"}),e.jsx("td",{children:"Simple mounting, easy visual inspection, straightforward shoe gear design"}),e.jsx("td",{children:"Exposed to weather (ice, snow, leaves), accessible to trespassers, prone to ice formation"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Bottom contact"}),e.jsx("td",{children:"Shoe presses upward against the underside of the conductor rail, which has an inverted profile protected by a cover board on top."}),e.jsx("td",{children:"Some European metros, parts of the Berlin S-Bahn"}),e.jsx("td",{children:"Protected from weather and debris, reduced accidental contact risk, less ice accumulation"}),e.jsx("td",{children:"More complex mounting, harder to inspect, shoe gear must push upward against gravity"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Side contact"}),e.jsx("td",{children:"Shoe presses horizontally against the side of a specially profiled conductor rail, often protected by a shroud above."}),e.jsx("td",{children:"London Underground, New York Subway, many metro systems worldwide"}),e.jsx("td",{children:"Good weather protection, compact profile, effective shrouding possible"}),e.jsx("td",{children:"Lateral forces on shoe gear, more complex rail profile, alignment-critical"})]})]})]})}),e.jsxs("p",{children:["Some systems use a ",e.jsx("strong",{children:"fourth rail"}),"  a separate conductor rail for the return current, avoiding the use of the running rails for electrical return. London Underground uses a four-rail system: the positive conductor rail (side-contact, at +420 V relative to the running rails) is outside the running rails, and the negative return rail (top-contact, at 210 V relative to the running rails) is positioned between the running rails. The total traction voltage is 630 V. This arrangement keeps return current out of the running rails, which is essential for the reliable operation of DC track circuits on the Underground. It also significantly reduces stray current leakage into the tunnel structure."]}),e.jsx("h3",{children:"Current Collection: Shoe Gear and Gaps"}),e.jsx("p",{children:"The current collection shoe is a critical component. Shoe gear types include:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Gravity shoes:"})," The simplest type  a cast iron or steel shoe resting on the conductor rail under its own weight plus a light spring. Used on older stock and in low-speed applications. Contact force is relatively uncontrolled."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Spring-loaded shoes (beam type):"})," A more sophisticated design where a pivoting beam carries the contact shoe, pressed against the conductor rail by a calibrated spring. The spring force is set to provide consistent contact pressure (typically 100200 N) regardless of vertical position. Used on UK Southern region EMUs."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Pneumatic shoes:"})," Contact pressure is provided by an air cylinder, allowing the shoe to be raised and lowered on command (e.g., to retract the shoes when entering a depot for maintenance). Common on modern metro trains."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Retractable shoe gear:"})," Can be mechanically or pneumatically retracted flush with the bogie frame. Essential on dual-system trains that operate on both third rail and overhead electrification  the shoes must be retracted when running under overhead wires, and the pantograph lowered when running on third rail."]})]}),e.jsxs("p",{children:["At ",e.jsx("strong",{children:"switches, crossings, and junctions"}),", gaps in the conductor rail are unavoidable because the conductor rail cannot cross the path of wheels or moving switch blades. These gaps (typically 515 m long, sometimes longer at complex junctions) create momentary power interruptions. Trains must carry sufficient momentum to coast through the gaps, or  on modern stock  use brief battery backup to maintain auxiliary systems (lighting, HVAC, train management computers) during the interruption. On UK Southern region, some trains experience gaps of 40+ metres at complex junctions, requiring careful speed management. The conductor rail is ramped at each end of a gap to guide the shoe on and off smoothly, with a gentle vertical profile that prevents the shoe from snagging or bouncing."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Ice and contamination"})," are a persistent problem for third rail systems. Ice on the conductor rail surface prevents electrical contact, causing arcing, power loss, and potentially shoe gear damage. Mitigation includes anti-icing fluid applied by spraying trains, electric heating pads at critical locations, and running empty trains overnight to keep the rail surface clean. Autumn leaf fall can deposit a conductive organic layer on the conductor rail surface that, paradoxically, can cause both reduced contact quality and increased stray current leakage. The UK Southern region network is heavily affected by autumn adhesion issues on the conductor rail as well as on the running rails."]}),e.jsx("h3",{children:"Multi-System Rolling Stock"}),e.jsx("p",{children:"Where different electrification systems meet, trains must be capable of operating on multiple voltage systems. This is increasingly common:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Eurostar (Class 374):"})," Operates under 25 kV AC (HS1 and LGV), 3 kV DC (Belgium), and 1.5 kV DC (older Belgian lines). Three voltage systems, one train."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"UK Class 319 / Class 377:"})," Dual-system trains that switch between 25 kV AC overhead and 750 V DC third rail at the Thameslink/Brighton line boundary  using both pantograph and shoe gear."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Siemens Vectron multi-system:"})," Freight/passenger locomotive capable of operating under 1.5 kV DC, 3 kV DC, 15 kV 16.7 Hz AC, and 25 kV 50 Hz AC  all four European voltages on one machine."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Alstom Coradia Polyvalent:"})," A modular regional train platform designed for multi-system operation across French electrification boundaries (1.5 kV DC and 25 kV AC), with bi-mode diesel variants."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Stadler KISS for Westbahn:"})," Operates under both 15 kV 16.7 Hz (Austria/Germany) and 25 kV 50 Hz (planned cross-border services), demonstrating the modern approach to multi-system design for high-capacity double-deck trains."]})]}),e.jsx("h3",{children:"Multi-System Changeover: How It Works"}),e.jsx("p",{children:"The changeover between systems can happen automatically (on-the-fly switching as the train crosses a voltage boundary) or at a halt (typically at a border station). The onboard systems detect the incoming voltage and reconfigure the power electronics chain accordingly. The key components enabling multi-system operation are:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Multi-system transformer:"})," Contains multiple taps or separate windings for different AC voltages. A single transformer may have a 25 kV winding and a 15 kV winding, with the appropriate one selected automatically."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Four-quadrant converter (4QC):"})," The front-end power converter that can accept either AC or DC input. For AC input, it operates as an active rectifier with power factor correction. For DC input, it is bypassed or operates as a line filter. The 4QC feeds a common DC link bus."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"DC link bus:"})," A common intermediate DC voltage (typically 1.53.6 kV) that isolates the input supply from the traction inverter. Regardless of whether the input is 750 V DC, 3 kV DC, 15 kV AC, or 25 kV AC, the DC link operates at the same voltage, and the downstream traction inverter and motors see identical conditions."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Voltage detection system:"})," Automated sensors detect the incoming supply voltage and frequency, commanding the main circuit breaker and input contactors to reconfigure the power chain. On-the-fly changeover occurs in a dead section (neutral zone) lasting 200400 m, during which the train coasts with the main breaker open. Detection typically uses voltage transformers on the pantograph circuit."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Multiple current collectors:"})," Dual-system AC/DC trains carry both pantographs and shoe gear. Multi-system AC trains may carry different pantograph types optimised for different overhead line systems  for example, a wider pan head for the German/Swiss system versus a narrower one for the French system, to comply with different gauge limits."]})]}),e.jsx(N,{type:"info",label:"Key Standard",children:"EN 50388 specifies the requirements for the power supply interface between rolling stock and the traction power system, including voltage limits, current limits, power factor requirements, and harmonic emission limits. Multi-system rolling stock must comply with this standard for each voltage system under which it operates."}),e.jsxs("figure",{className:"lesson-figure",children:[e.jsx("div",{className:"image-placeholder",children:e.jsx("p",{children:"IMAGE NEEDED: Photo of a third rail (conductor rail) with shoe gear visible on the underside of a train collecting current, or a close-up of the conductor rail alongside the running rails showing the top-contact arrangement."})}),e.jsx("figcaption",{children:"Third rail current collection  shoe gear presses against the conductor rail at track level (750 V DC)."})]}),e.jsx("h3",{children:"Battery and Hydrogen Traction"}),e.jsx("p",{children:"Not every route justifies the capital cost of full electrification. Emerging alternatives include:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Battery-electric trains (BEMU):"})," Charge batteries under electrified sections and run on battery power over non-electrified gaps. Hitachi's Class 802 AT300 platform supports battery operation, and the Stadler FLIRT Akku operates in Germany. Typical battery range is 4080 km depending on speed and load. Charging happens rapidly at line voltage while running under the wires."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Hydrogen fuel cell trains:"})," The Alstom Coradia iLint (in commercial service in Germany since 2022) and the Stadler FLIRT H2 use hydrogen fuel cells to generate electricity. Range of 600+ km. The key challenge is hydrogen infrastructure  production, storage, and refuelling depots. Green hydrogen (from electrolysis using renewable electricity) is the target but remains expensive."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Bi-mode trains:"})," A bridge technology  trains with both electric (pantograph/shoe gear) and diesel traction equipment. Run under electric power where wires exist, switch to diesel beyond. The UK's Class 800/801/802 Hitachi Azuma fleet is bi-mode, running under 25 kV AC on the electrified sections and on diesel elsewhere."]})]}),e.jsx("h3",{children:"Battery Traction: Technical Challenges"}),e.jsx("p",{children:"Battery-electric multiple units (BEMUs) face several significant engineering challenges that distinguish them from road electric vehicles:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Energy density:"})," A modern lithium-ion battery pack achieves approximately 150250 Wh/kg at the cell level, but at the system level (including cooling, structure, battery management system, and fire protection), this drops to 100170 Wh/kg. A regional train may need 400600 kWh of usable battery capacity for a 6080 km non-electrified section, representing 35 tonnes of battery mass per vehicle. This mass penalty reduces payload capacity (fewer passengers or luggage) and increases energy consumption per km."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Charging rate:"})," Rapid charging under the wires at 25 kV is technically straightforward  the onboard transformer and converter can charge the batteries at high rates (5001,000 kW). However, battery thermal management during rapid charging is critical: lithium-ion cells degrade rapidly if charged at high rates when hot. Active liquid cooling of the battery packs is essential, adding further mass and complexity."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Cycle life and degradation:"})," Railway batteries must endure 3,0005,000 charge-discharge cycles over a 1520 year vehicle life. Calendar ageing and cycle ageing reduce capacity over time. Battery management systems must carefully control the state of charge (typically operating between 20% and 80% to maximise cycle life) and balance cells within the pack. Mid-life battery replacement is typically planned, adding to the whole-life cost."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Fire safety:"})," Lithium-ion battery thermal runaway is a serious safety concern, particularly in enclosed train environments. Battery packs must comply with fire safety standards (EN 45545 for railway rolling stock fire protection), with fire-resistant enclosures, thermal runaway propagation barriers between cell modules, gas venting systems, and fire detection and suppression systems. Battery packs are typically mounted under the vehicle floor in steel enclosures with downward venting, keeping any fire products away from the passenger saloon."]})]}),e.jsx("h3",{children:"Hydrogen Traction: Infrastructure Challenges"}),e.jsx("p",{children:"Hydrogen fuel cell trains produce electricity from the electrochemical reaction of hydrogen and oxygen, with water as the only exhaust product. The technical challenges are primarily around the hydrogen supply chain:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Hydrogen production:"}),' "Green" hydrogen from electrolysis using renewable electricity is the environmental target, but currently accounts for less than 1% of global hydrogen production. "Grey" hydrogen from steam methane reforming is cheaper but generates CO. "Blue" hydrogen adds carbon capture and storage (CCS) to the reforming process. The cost of green hydrogen (currently EUR 48/kg) must fall below approximately EUR 23/kg to be economically competitive with diesel traction over the whole vehicle life.']}),e.jsxs("li",{children:[e.jsx("strong",{children:"Storage and distribution:"})," Hydrogen is stored onboard the train as compressed gas at 350 bar (some newer designs use 700 bar for higher energy density) in composite pressure vessels mounted on the vehicle roof. A single FLIRT H2 carries approximately 160 kg of hydrogen for a 600+ km range. Refuelling infrastructure requires high-pressure hydrogen storage, compression equipment, and dispensers at depots  a single refuelling facility can cost EUR 1015 million."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Fuel cell durability:"})," Proton exchange membrane (PEM) fuel cells for railway use must achieve 25,00035,000 hours of service life. Current technology achieves 20,000+ hours, with ongoing improvements. Fuel cell degradation is accelerated by dynamic load cycling (frequent starts and stops), which is mitigated by hybridising the fuel cell with a battery pack that handles transient power demands while the fuel cell operates at a more constant output."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Depot safety:"})," Hydrogen is flammable in air at concentrations of 475%, and its flame is nearly invisible. Depot facilities must be designed with adequate ventilation, hydrogen leak detection, and exclusion zone management. Refuelling operations require trained personnel and automated safety interlocks."]})]}),e.jsxs("div",{className:"highlight-box",children:[e.jsx("p",{children:e.jsx("strong",{children:"Comparison of alternative traction energy densities:"})}),e.jsx("p",{children:"Diesel fuel: ~12,000 Wh/kg (at 40% engine efficiency, ~4,800 Wh/kg useful)"}),e.jsx("p",{children:"Hydrogen (compressed 350 bar): ~33,000 Wh/kg (at 50% fuel cell efficiency, ~16,500 Wh/kg useful, but tank system mass reduces effective density to ~1,5002,000 Wh/kg system level)"}),e.jsx("p",{children:"Lithium-ion battery: ~150250 Wh/kg cell level, ~100170 Wh/kg system level (at ~90% round-trip efficiency)"}),e.jsx("p",{style:{margin:0},children:"The energy density gap between batteries and liquid fuels remains approximately 50:1 at the system level, which is why batteries are suited to short non-electrified gaps (4080 km) while hydrogen targets longer diesel-replacement routes (200600+ km)."})]}),e.jsxs(N,{type:"analogy",children:["AC vs DC is like choosing between a ",e.jsx("strong",{children:"thin, efficient protocol and a simpler but bandwidth-heavy one"}),". AC at 25 kV is like sending compressed, high-efficiency data packets  you need fewer repeaters (substations) and thinner cables (conductors), but the encoding/decoding (transformer and rectifier onboard) is more complex. DC is like sending uncompressed data  the sender and receiver are simpler, but you need far more repeaters along the route to maintain signal strength, and the pipes must be much fatter to handle the bandwidth. Multi-system rolling stock is the polyglot microservice that can consume APIs in four different protocols. Battery and hydrogen traction are like edge computing  processing locally when you cannot reach the cloud, with the trade-off of limited local storage capacity."]}),e.jsx(ce,{goTo:h,items:[{target:"m1-l1",label:"Track Structure",desc:"The running rails serve as the electrical return conductor in both AC and DC systems."},{target:"m4-l2",label:"Interlocking & Train Detection",desc:"Traction current can interfere with track circuits used for train detection."},{target:"m3-l3",label:"Stations & Clearances",desc:"Overhead line equipment requires adequate clearance through bridges and tunnels."},{target:"m6-l2",label:"Traction & Braking",desc:"The onboard power electronics that interface with the supply system."}]})]})}const mp=[{text:"Why is 25 kV AC preferred for mainline electrification?",options:["It is safer than DC systems","Higher voltage means lower current, allowing smaller conductors and wider substation spacing (4080 km vs 35 km for DC)","AC motors are cheaper to manufacture","It was the first system invented"],correct:1,explanation:"Higher voltage means lower current for the same power. This allows lighter overhead wires, smaller conductors, and substations spaced 4080 km apart instead of every 35 km for DC systems."},{text:"What voltage does a typical third rail system use?",options:["25 kV AC","1,500 V DC","750 V DC","400 V AC"],correct:2,explanation:"750 V DC is the standard third rail voltage used on systems like the UK Southern Region and many metro networks."},{text:"What is the main disadvantage of DC traction systems?",options:["DC motors are unreliable","Higher current requires closely-spaced substations (every 35 km) and thicker conductors","DC cannot power modern trains","DC systems are incompatible with signalling"],correct:1,explanation:"Lower voltage means higher current for the same power, requiring thicker (heavier, more expensive) conductors and substations every 35 km to limit voltage drop."},{text:"Why is the rail used as the traction return conductor?",options:["It provides better electrical insulation","Regulations require it for safety reasons","It is already a continuous steel conductor running the full length of the route, avoiding a separate return wire","It reduces electromagnetic interference"],correct:2,explanation:"The running rail is already a continuous steel conductor along the entire route. Using it as the return path avoids the cost and complexity of installing a separate return wire."}];function gp({goTo:h}){return e.jsxs(e.Fragment,{children:[e.jsxs("figure",{className:"lesson-figure",children:[e.jsx("div",{className:"cad-symbol",children:e.jsxs("svg",{viewBox:"0 0 320 110",style:{width:"100%",maxWidth:"320px"},children:[e.jsx("text",{x:"160",y:"14",fill:"var(--text-dim)",fontSize:"10",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"Catenary System"}),e.jsx("line",{x1:"30",y1:"25",x2:"30",y2:"90",stroke:"var(--text-bright)",strokeWidth:"1.5"}),e.jsx("line",{x1:"290",y1:"25",x2:"290",y2:"90",stroke:"var(--text-bright)",strokeWidth:"1.5"}),e.jsx("path",{d:"M 50,30 Q 160,55 270,30",fill:"none",stroke:"var(--text-dim)",strokeWidth:"1"}),e.jsx("text",{x:"160",y:"52",fill:"var(--text-dim)",fontSize:"7",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"catenary wire"}),e.jsx("line",{x1:"100",y1:"36",x2:"100",y2:"60",stroke:"var(--text-dim)",strokeWidth:"0.5"}),e.jsx("line",{x1:"160",y1:"45",x2:"160",y2:"60",stroke:"var(--text-dim)",strokeWidth:"0.5"}),e.jsx("line",{x1:"220",y1:"36",x2:"220",y2:"60",stroke:"var(--text-dim)",strokeWidth:"0.5"}),e.jsx("line",{x1:"50",y1:"60",x2:"270",y2:"60",stroke:"var(--accent)",strokeWidth:"1.5"}),e.jsx("text",{x:"285",y:"58",fill:"var(--accent)",fontSize:"7",fontFamily:"JetBrains Mono, monospace",children:"contact"}),e.jsx("line",{x1:"20",y1:"90",x2:"300",y2:"90",stroke:"var(--text-bright)",strokeWidth:"2"}),e.jsx("text",{x:"160",y:"105",fill:"var(--text-dim)",fontSize:"7",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"contact wire staggered 200 mm for even pantograph wear"})]})}),e.jsx("figcaption",{children:"Schematic: Catenary system  catenary wire supports contact wire via droppers, keeping it level for the pantograph."})]}),e.jsx("h3",{children:"Catenary System Anatomy"}),e.jsxs("p",{children:["The overhead line equipment (OLE) that delivers power to trains is far more than a simple wire strung between poles. A modern ",e.jsx("strong",{children:"catenary system"})," is a precisely engineered assembly of components, each with a specific function:"]}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Contact wire:"})," The lower wire that the pantograph actually touches. Made from hard-drawn copper or copper-silver alloy (Cu-Ag provides higher strength and wear resistance at elevated temperatures), typically 107120 mm cross-section. Must maintain a consistent height and be free of hard spots or kinks that could damage the pantograph or cause arcing. The contact wire has a figure-of-eight or grooved profile to allow it to be gripped by the dropper clips."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Catenary (messenger) wire:"})," The upper wire that supports the contact wire. Made from bronze or copper-cadmium alloy, it follows a natural catenary curve between support points. Its role is to keep the contact wire at a uniform height  without it, the contact wire would sag under its own weight between support points."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Droppers:"}),' Vertical or near-vertical hangers connecting the catenary wire to the contact wire at regular intervals (typically 512 m). They transfer the weight of the contact wire to the catenary wire. The dropper closest to the support (the "Y-dropper" or first dropper) is critical for controlling the dynamic behaviour of the contact wire as the pantograph passes the support point.']}),e.jsxs("li",{children:[e.jsx("strong",{children:"Registration arms:"})," Horizontal arms attached to masts or portals that hold the contact wire at a precise lateral position relative to the track centreline. They allow the wire to move vertically (as the pantograph pushes it up) while constraining its lateral position. The registration arm pivots at its mast attachment to accommodate thermal movement."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Steady arms:"})," Arms at the registration point that prevent the contact wire from being pushed sideways by the passing pantograph, maintaining the stagger pattern."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Masts and portals:"})," The support structures. Single-track masts carry a cantilever arm; multi-track portals span across several tracks. Typically steel or concrete, spaced 5070 m apart on tangent track and closer on curves (down to 30 m on tight curves where the wire pull is significant)."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Insulators:"})," Porcelain or composite (silicone rubber) insulators isolate the live overhead line from the earthed support structures. They must withstand the full system voltage plus transient overvoltages from lightning and switching operations. On 25 kV systems, the creepage distance (the path over the insulator surface) must be long enough to prevent flashover even in contaminated or wet conditions."]})]}),e.jsx("h3",{children:"Catenary Types"}),e.jsx("p",{children:"Different catenary configurations are used depending on line speed and performance requirements. The choice is driven by the need for uniform elasticity along the span  that is, the contact wire should deflect by the same amount regardless of where along the span the pantograph makes contact:"}),e.jsx("div",{className:"table-wrapper",children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Type"}),e.jsx("th",{children:"Description"}),e.jsx("th",{children:"Speed Range"}),e.jsx("th",{children:"Where Used"}),e.jsx("th",{children:"Key Characteristic"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{children:"Simple suspension"}),e.jsx("td",{children:"Contact wire only, no messenger wire. Hung directly from span wires or bracket arms."}),e.jsx("td",{children:"Up to ~70 km/h"}),e.jsx("td",{children:"Tramways, depot areas, sidings"}),e.jsx("td",{children:"Large sag between supports, poor dynamic performance, cheapest to install"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Simple catenary"}),e.jsx("td",{children:"One messenger wire and one contact wire, connected by droppers. The messenger follows a catenary curve; the contact wire is nominally level."}),e.jsx("td",{children:"Up to ~160 km/h"}),e.jsx("td",{children:"Most conventional mainlines, suburban routes"}),e.jsx("td",{children:"Significant elasticity variation between mid-span (soft) and support (stiff), adequate for moderate speeds"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Stitched catenary"}),e.jsx("td",{children:'As simple catenary, but with short "stitch wires" connecting the contact wire to the messenger wire at each support point. The stitch wire runs alongside the registration arm.'}),e.jsx("td",{children:"Up to ~200 km/h"}),e.jsx("td",{children:"UK mainlines (Series 1 and Series 2 OLE), some European conventional lines"}),e.jsx("td",{children:"Stitching softens the hard spot at supports, reducing the elasticity variation. Improves dynamic contact quality at higher speeds."})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Compound catenary"}),e.jsx("td",{children:"An auxiliary (secondary) messenger wire is added between the main messenger and the contact wire, with its own droppers to the contact wire. Creates a three-level system."}),e.jsx("td",{children:"250350+ km/h"}),e.jsx("td",{children:"TGV lines (France), Shinkansen (Japan), some Chinese high-speed lines"}),e.jsx("td",{children:"Near-uniform elasticity across the entire span. The auxiliary wire redistributes forces, eliminating the soft-in-middle/stiff-at-support problem. Essential for reliable current collection at very high speed."})]})]})]})}),e.jsx("p",{children:"The German high-speed approach (Re330 catenary, used on ICE lines at 300 km/h) uses a heavily optimised simple catenary with carefully computed dropper lengths, very high wire tension (up to 27 kN on the contact wire), and close mast spacing (approximately 65 m on tangent, less on curves). This achieves sufficient elasticity uniformity for 300 km/h without the additional complexity and cost of compound catenary  demonstrating that speed capability is a function of the entire system design, not just the catenary configuration."}),e.jsx("h3",{children:"Wave Propagation and Pantograph Dynamics"}),e.jsxs("p",{children:["When the pantograph pushes up against the contact wire, it creates a ",e.jsx("strong",{children:"transverse wave"})," that propagates along the wire in both directions at a speed determined by the wire tension and mass per unit length:"]}),e.jsxs("div",{className:"highlight-box",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Wave propagation speed:"})," c = (T / m)"]}),e.jsx("p",{children:"Where T = wire tension (N) and m = mass per unit length (kg/m)."}),e.jsxs("p",{children:["For a typical 25 kV contact wire (120 mm Cu-Ag, ~1.07 kg/m) at 20 kN tension: c = (20,000 / 1.07)  ",e.jsx("strong",{children:"137 m/s  493 km/h"})]}),e.jsxs("p",{style:{margin:0},children:["For a high-speed system with 27 kN tension: c = (27,000 / 1.07)  ",e.jsx("strong",{children:"159 m/s  572 km/h"})]})]}),e.jsxs("p",{children:['The critical design parameter is the ratio of train speed to wave propagation speed. If the train approaches the wave speed, a "bow wave" effect occurs: the disturbance created by the pantograph cannot propagate ahead fast enough, causing the contact wire to pile up in front of the pantograph and lose contact behind it. The practical speed limit is typically',e.jsx("strong",{children:" 7075% of the wave propagation speed"}),". At higher ratios, contact quality degrades rapidly, with increasing arcing, wire uplift, and risk of dewirement."]}),e.jsx("p",{children:"This is why high-speed OLE uses higher wire tensions  increasing tension raises the wave speed, raising the maximum operating speed. A 350 km/h train needs a wave propagation speed of at least 470500 km/h, requiring contact wire tensions of 2530 kN. But higher tension means stronger support structures, heavier foundations, and greater thermal stress on the wire  the entire support infrastructure must be designed for these forces."}),e.jsxs("p",{children:["The interaction between pantograph and catenary is a ",e.jsx("strong",{children:"coupled dynamic system"}),". The pantograph has its own natural frequencies (typically 210 Hz for the first few modes), and the catenary has natural frequencies determined by the span length and wire properties. If these frequencies coincide, resonance can cause violent oscillation and contact loss. OLE design must ensure that the span frequencies and pantograph frequencies do not align at any operating speed  this is verified through mathematical simulation and validated by field testing."]}),e.jsx(N,{type:"info",label:"Key Standard",children:"EN 50318 specifies the validation requirements for simulation of pantograph-catenary dynamic interaction. Simulation models must be validated against measured data before they can be used to approve new OLE or pantograph designs. The standard defines acceptance criteria for contact force statistics (mean, standard deviation, maximum) and percentage of loss of contact."}),e.jsx("h3",{children:"Contact Wire Height"}),e.jsxs("p",{children:["In the UK, the nominal contact wire height is ",e.jsx("strong",{children:"4,700 mm to 5,500 mm"})," above rail level, with a standard design height of around 4,900 mm on open track. The minimum height is constrained by the structure gauge (must clear any vehicle even at maximum dynamic deflection); the maximum by the pantograph's reach. Consistency is critical: the pantograph must maintain contact with the wire across the full speed range. A sudden change in height  at a bridge approach, for example  can cause the pantograph to lose contact (creating destructive arcing) or collide with the wire at excessive uplift force. Gradual height transitions are engineered with precision, typically not exceeding a 1-in-500 gradient. In tunnels, the wire height is reduced to the minimum (as low as 4,165 mm on some UK routes) to fit within the restricted clearance."]}),e.jsx("h3",{children:"Stagger: The Zig-Zag Pattern"}),e.jsxs("p",{children:["The contact wire is not positioned directly above the track centreline. Instead, it follows a deliberate ",e.jsx("strong",{children:"zig-zag (stagger) pattern"}),", offset alternately to one side and then the other at each registration point  typically ",e.jsx("strong",{children:"+/200 to 300 mm"}),". This ensures that the pantograph carbon strip wears evenly across its full width rather than cutting a groove down the centre. Without stagger, the pantograph strip would develop a notch, leading to wire entanglement and potential dewirement."]}),e.jsx("p",{children:"On curves, the contact wire naturally offsets toward the outside of the curve (the wire cuts across the chord between registration points). This offset must be controlled to keep the wire within the pantograph's collection area (typically 275 mm from the track centre). On sharp curves, closer registration spacing and computed offset values ensure the wire remains within limits."}),e.jsx("h3",{children:"Auto-Tensioning"}),e.jsxs("p",{children:["Both the contact wire and the catenary wire must be maintained at ",e.jsx("strong",{children:"constant tension"})," regardless of temperature. Copper wire changes length by approximately 17 mm per degree Celsius per kilometre. Over a typical tensioning length of 1.5 km, a temperature swing from 10 C to +60 C would cause a length change of nearly",e.jsx("strong",{children:" 1.8 metres"}),". Auto-tensioning equipment  typically ",e.jsx("strong",{children:"balance weights"})," (concrete blocks on a pulley system with a 3:1 or 4:1 mechanical advantage) or ",e.jsx("strong",{children:"spring-based tensioners"}),"  at each end of a tensioning section takes up this slack automatically, maintaining wire tension at a constant value (typically 1015 kN for the contact wire, 1014 kN for the messenger wire)."]}),e.jsxs("p",{children:["Where two tensioning sections meet, a ",e.jsx("strong",{children:"midpoint anchor"})," fixes the wire at a specific location, with overlap sections allowing continuity of contact as the pantograph transitions from one tensioning section to the next."]}),e.jsxs("figure",{className:"lesson-figure",children:[e.jsx("div",{className:"image-placeholder",children:e.jsx("p",{children:"IMAGE NEEDED: Close-up photo of a catenary system showing the messenger wire, droppers, contact wire, and registration arm at a mast. Ideally annotated or with visible components clearly distinct."})}),e.jsx("figcaption",{children:"Catenary system anatomy  messenger wire above, contact wire below, connected by droppers, held in position by registration arms."})]}),e.jsx("h3",{children:"Pantograph Types and Design"}),e.jsxs("p",{children:["The ",e.jsx("strong",{children:"pantograph"})," is the train's current collector  a spring-loaded, articulated arm that presses a carbon or carbon-composite ",e.jsx("strong",{children:"contact strip"}),"against the overhead wire. The evolution of pantograph design reflects the increasing demands of higher speeds and heavier current collection duties:"]}),e.jsx("div",{className:"table-wrapper",children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Type"}),e.jsx("th",{children:"Description"}),e.jsx("th",{children:"Advantages"}),e.jsx("th",{children:"Disadvantages"}),e.jsx("th",{children:"Usage"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{children:"Diamond pantograph"}),e.jsx("td",{children:"Two lower arms pivot outward from the base, meeting two upper arms that converge at the pan head. Forms a diamond shape when raised."}),e.jsx("td",{children:"Symmetrical operation in both directions, robust, good lateral stability"}),e.jsx("td",{children:"Heavy (5080 kg mechanism), high aerodynamic drag and noise, complex linkage"}),e.jsx("td",{children:"Older rolling stock, some Japanese trains, heritage applications. Increasingly replaced."})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Single-arm (Z-type)"}),e.jsx("td",{children:"One lower arm and one upper arm, arranged in a Z-configuration. The arm pivots at the base and at a knee joint. The pan head is mounted on top."}),e.jsx("td",{children:"Lightweight (3050 kg), low aerodynamic drag, simple mechanism, direction-insensitive with correct design"}),e.jsx("td",{children:"Asymmetric  may have slightly different characteristics depending on direction of travel. Requires careful aerodynamic profiling."}),e.jsx("td",{children:"Dominant type worldwide for both conventional and high-speed. Brecknell Willis, Schunk, Stemmann-Technik all manufacture variants."})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Actively controlled pantograph"}),e.jsx("td",{children:"A single-arm pantograph with an actuator (pneumatic, hydraulic, or electromagnetic) at the pan head that can adjust contact force in real-time based on sensor feedback."}),e.jsx("td",{children:"Maintains optimal contact force regardless of speed, wind, or catenary irregularities. Reduces arcing, wire wear, and strip wear."}),e.jsx("td",{children:"Expensive, complex, requires sensors and control electronics. Failure mode must default to passive operation."}),e.jsx("td",{children:"High-speed applications (350+ km/h). Experimental and entering service on latest-generation high-speed trains. Being developed for the next generation of European high-speed rolling stock."})]})]})]})}),e.jsx("p",{children:"Key pantograph design parameters:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Static contact force:"})," The upward force when the train is stationary  typically 6090 N. Too little and the contact resistance causes heating and arcing; too much and the wire is pushed excessively high, changing its geometry and causing premature wear."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Aerodynamic compensation:"})," At speed, the airflow over the pantograph generates additional lift or downforce depending on the design. Modern pantographs are aerodynamically profiled to maintain a consistent contact force across the speed range. The target is a uniform mean force of about 70120 N with minimal variation."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Carbon strip wear:"})," The carbon strip wears during service and must be periodically replaced. Typical life is 10,00030,000 km depending on speed, current, and wire condition. Worn strips are detected by ultrasonic or laser measurement during depot inspections."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Pan head width:"})," Varies by application and standard. European TSI specifies 1,600 mm for high-speed (AC) and 1,950 mm for conventional DC lines. The wider strip provides a larger collection area, compensating for greater stagger on DC overhead lines and for thermal movement at lower wire heights."]})]}),e.jsx("h3",{children:"Contact Force Measurement and Standards"}),e.jsxs("p",{children:["The quality of current collection is ultimately determined by the ",e.jsx("strong",{children:"contact force"})," between pantograph and wire  and its variation over time. Contact force must stay within a specific band: high enough to maintain electrical contact (preventing arcing and wire burns) but low enough to avoid excessive wire uplift and wear. Standards governing this are:"]}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"EN 50317"}),"  specifies the requirements for measuring pantograph current collection quality in service. Defines the measurement methodology for contact force (using instrumented pantographs with accelerometers and strain gauges), arcing (optical or electrical detection), and uplift at the support (laser measurement). Tests are performed at different speeds to characterise the pantograph-catenary system across the operating range."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"EN 50367"}),"  specifies the technical criteria for the interaction between pantograph and overhead contact line. Defines the mean contact force targets and the acceptable standard deviation as a function of speed. For high-speed AC lines, the mean contact force Fm is defined as: Fm = 0.00097  v + 70 (in newtons, where v is speed in km/h). At 300 km/h, this gives a target mean force of approximately 157 N. The standard deviation must be low enough that the statistical minimum (Fm  3) remains above zero at all times  a negative contact force means loss of contact."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"TSI Energy"}),"  the European Technical Specification for Interoperability (Energy subsystem) mandates contact force and current collection quality requirements for interoperable high-speed and conventional railways. It references EN 50317 and EN 50367 and sets the acceptance criteria for new infrastructure and rolling stock."]})]}),e.jsxs("p",{children:["Loss of contact between the pantograph and wire produces ",e.jsx("strong",{children:"arcing"}),"  an electric arc that spans the gap. Arcing causes localised heating of both the contact wire and the carbon strip, accelerating wear and potentially causing hard spots (annealed copper) or burn marks on the wire. At high power draw (during acceleration), arcing can be particularly destructive. The percentage of arcing time (proportion of measurement time during which arcing occurs) is a key quality metric  modern high-speed OLE targets less than 0.1% arcing time at maximum speed."]}),e.jsx("h3",{children:"High-Speed OLE Design Approaches"}),e.jsx("p",{children:"Designing OLE for speeds above 250 km/h demands a fundamentally different engineering approach from conventional systems. The three major high-speed railway traditions have developed distinct philosophies:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"French TGV approach:"})," Uses ",e.jsx("strong",{children:"compound catenary"})," with relatively moderate wire tensions (1520 kN contact wire). The auxiliary messenger wire creates the elasticity uniformity needed for high speed. Mast spacing is typically 5463 m. The system is designed for 25 kV 50 Hz at 300320 km/h. The French approach favours the sophistication of the catenary geometry over brute-force tension."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"German ICE approach:"})," Uses ",e.jsx("strong",{children:"highly tensioned simple catenary"}),"(Re330 system, with contact wire tensions up to 27 kN and messenger wire at 21 kN). The very high tension raises the wave propagation speed, allowing 300 km/h without compound catenary. Mast spacing is approximately 65 m on tangent. This approach favours simplicity (fewer components) but requires stronger support structures and foundations to resist the high wire loads."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Japanese Shinkansen approach:"})," Uses ",e.jsx("strong",{children:"compound catenary"}),'(called "composite catenary" in Japanese terminology) with very high tensions on newer lines. The Tokaido Shinkansen originally used a heavy compound catenary design; newer lines (Tohoku, Hokkaido) have evolved to lighter, higher-tension designs. The Japanese are also pioneers in ',e.jsx("strong",{children:"actively controlled pantographs"}),"  using real-time actuators to adjust contact force  enabling reliable current collection at 320+ km/h. Aerodynamic noise from the pantograph is a major concern in Japan due to strict community noise regulations, leading to extensive pantograph fairing and noise barrier development."]})]}),e.jsx("p",{children:"In all cases, high-speed OLE requires extremely tight installation tolerances. Contact wire height must be maintained within 30 mm of design value (compared to 50 mm on conventional lines). Stagger must be precise. Every dropper length is individually calculated to account for the as-built mast positions. Installation is typically performed using specialist OLE construction trains with laser-guided wire positioning."}),e.jsx("h3",{children:"Series vs Parallel Feeding"}),e.jsxs("p",{children:["In a ",e.jsx("strong",{children:"series-fed"})," system, the overhead line is simply fed from one end by the substation. This is straightforward but suffers from voltage drop along the length, especially under heavy loading. In a ",e.jsx("strong",{children:"parallel-fed"})," system, a separate return conductor (or the rails) runs alongside the OLE and is bonded to it at intervals, creating a lower-impedance path and better voltage regulation. Most modern 25 kV systems use some form of parallel feeding, often combined with auto-transformer feeding for optimal performance."]}),e.jsx("h3",{children:"Dewirement and Wind"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Dewirement"}),"  when the contact wire becomes dislodged from the pantograph and falls to one side  is one of the most disruptive OLE failures. A dewired contact wire typically wraps around the pantograph or drapes across adjacent tracks, requiring hours to repair and potentially damaging multiple trains. It can be caused by high winds, pantograph damage, foreign objects on the OLE, or wire fatigue."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Galloping"})," occurs when ice formation on the wire creates an aerodynamic profile that causes the wire to oscillate violently in wind, potentially leading to mechanical failure. ",e.jsx("strong",{children:"Wind-blown contact wire"})," can move outside the pantograph's collection area, causing loss of contact and arcing. Many railways impose speed restrictions or line closures when wind speeds exceed 5070 mph, particularly on exposed routes and viaducts. The Great Western Main Line through the Thames Valley and the East Coast Main Line through exposed sections of Yorkshire are particularly vulnerable."]}),e.jsxs("figure",{className:"lesson-figure",children:[e.jsx("div",{className:"image-placeholder",children:e.jsx("p",{children:"IMAGE NEEDED: Photo of a raised single-arm (Z-type) pantograph pressing against the overhead contact wire, showing the carbon strip contact area. Bonus if arcing is slightly visible or the pantograph is at speed."})}),e.jsx("figcaption",{children:"A single-arm pantograph collecting current from the overhead contact wire  the interface between train and power supply."})]}),e.jsx("h3",{children:"Neutral Sections and Phase Breaks"}),e.jsxs("p",{children:["The overhead line is divided into electrically separate sections, each fed from a different substation or a different phase of the three-phase supply. Where two sections meet, a",e.jsx("strong",{children:" neutral section (phase break)"})," is installed  a short length of unpowered wire that the train must coast through with its circuit breaker open. This prevents the train from bridging two out-of-phase supplies, which would cause a massive short circuit (the phase difference between two phases at 25 kV is 43.3 kV)."]}),e.jsx("p",{children:"Drivers receive lineside indicators warning them to open the circuit breaker before entering the neutral section. Modern trains have automatic neutral section detection (using transponders or GPS) that opens and closes the circuit breaker without driver intervention. The neutral section itself is typically 200400 m long on high-speed lines to ensure the pantograph has fully cleared one electrical section before entering the next."}),e.jsx("h3",{children:"Section Insulator Types and Design"}),e.jsxs("p",{children:["The ",e.jsx("strong",{children:"section insulator"})," (also called a section break or insulated overlap) is the physical device that creates the electrical separation between adjacent fed sections or between a live section and a neutral section. Several types exist:"]}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Air gap section insulator:"})," The simplest form  a physical gap in the contact wire, bridged by insulated horns or guides that direct the pantograph across the gap. Used at low speeds (depots, sidings) and on some conventional lines. The pantograph briefly loses contact as it crosses the gap, causing a transient power interruption. Not suitable for high-speed operation due to the mechanical shock and arcing."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Insulated overlap:"})," Two contact wires run in parallel for a short distance (typically 200300 m), each belonging to a different electrical section. The pantograph transfers from one wire to the other within the overlap zone. At the midpoint of the overlap, both wires are at the same height and the pantograph is in contact with both; at the ends, one wire is raised above the pantograph's reach while the other is at normal running height. The two wires are never electrically connected because the pantograph is always in the dead section (neutral zone) when it touches both. This is the standard arrangement at phase breaks on high-speed lines."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Articulated section insulator:"})," A compact device (typically 36 m long) that allows the pantograph to pass continuously from one electrical section to the next without loss of contact. The device uses interleaved insulating and conducting elements  the pantograph slides along conducting runners separated by insulating gaps, ensuring that at any point the pantograph contacts only one electrical section. Types include the Pfisterer and Siemens designs. These are used between sub-sections within the same phase (where no neutral zone is needed) and must withstand the voltage difference between adjacent sections (typically a few hundred volts from different feeder impedances, not the full phase-to-phase voltage)."]})]}),e.jsx(N,{type:"info",label:"Key Standard",children:"EN 50119 defines the requirements for the design and installation of overhead contact lines. It specifies mechanical, electrical, and geometric parameters including minimum and maximum contact wire heights, stagger limits, wire tensions, insulation requirements, and clearance distances for voltages from 750 V DC to 25 kV AC."}),e.jsx("h3",{children:"Rigid Conductor Bar"}),e.jsxs("p",{children:["In tunnels and other locations with extremely tight clearances, conventional catenary may not fit. A ",e.jsx("strong",{children:"rigid conductor bar"}),"  an aluminium or copper bar mounted on insulators  replaces the flexible wire system. The pantograph slides along the underside of the bar. There are several types:"]}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"T-profile conductor bar:"})," An aluminium extrusion with a T-shaped cross-section, mounted inverted on insulators. The pantograph contacts the flat underside of the T. Used extensively on metro systems (Paris Mtro, for example) and in some mainline tunnel sections. Typical current capacity: 1,0002,000 A continuous."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Composite conductor bar:"})," An aluminium rail enclosing a copper contact surface on its underside. The aluminium provides the structural strength and current-carrying cross-section, while the copper provides the contact surface for the pantograph strip. This combination optimises both electrical conductivity and mechanical wear resistance."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Catenary-to-rigid transition:"})," At the boundary between flexible catenary and rigid conductor bar (typically at tunnel portals), a carefully designed transition section ensures the pantograph transfers smoothly between the two systems. The transition must accommodate the different dynamic behaviours  flexible catenary deflects under the pantograph, while rigid bar does not  and prevent the pantograph from bouncing or losing contact at the changeover point. Transition sections are typically 1020 m long with gradually increasing stiffness."]})]}),e.jsx("p",{children:"Rigid conductor bar is also used at depot and maintenance facility roofs where overhead clearance is very limited, and in cut-and-cover tunnel sections. Its main disadvantage is thermal expansion  a 100 m length of aluminium bar expands by approximately 2.3 mm per degree Celsius, so expansion joints must be provided at regular intervals (typically every 1218 m) to prevent buckling or gap formation. These expansion joints must maintain electrical continuity and a smooth running surface for the pantograph."}),e.jsx("h3",{children:"OLE Inspection and Maintenance"}),e.jsx("p",{children:"OLE is inspected using a combination of methods:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Non-contact measurement trains:"})," Instrumented pantographs with lasers and cameras measure contact wire height, stagger, wear, and uplift at line speed. Network Rail's NMT (New Measurement Train) captures OLE geometry alongside track geometry on every pass."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Visual inspection:"})," Foot patrols and helicopter/drone surveys identify physical damage, vegetation encroachment, and insulator contamination."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Contact strip analysis:"})," Examination of worn pantograph carbon strips reveals information about the OLE condition  uneven wear, burn marks, or gouges indicate wire defects."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Thermal imaging:"})," Infrared cameras detect hot spots at connections and joints, indicating high resistance that could lead to failure."]})]}),e.jsxs(N,{type:"analogy",children:["The catenary system is a ",e.jsx("strong",{children:"content delivery network (CDN)"}),". You are distributing power (content) to moving consumers (trains/users) with strict latency requirements (voltage drop/page load time). The substations are origin servers, the overhead line is the delivery network, and the registration arms are edge servers keeping the wire (delivery path) precisely positioned. Auto-tensioning is like auto-scaling  the system adapts to changing environmental conditions (temperature/traffic) to maintain consistent quality of service. Neutral sections are like DNS zone boundaries where you must ensure a clean handover between providers. Wave propagation speed is your network bandwidth  if the train (data throughput) approaches it, packets start dropping (contact loss). Actively controlled pantographs are like adaptive bitrate streaming  the client dynamically adjusts to maintain quality of service despite varying network conditions."]}),e.jsx(ce,{goTo:h,items:[{target:"m3-l3",label:"Stations & Clearances",desc:"Structure gauge must accommodate OLE  bridges and tunnels are the binding constraints."},{target:"m5-l1",label:"Traction Power Systems",desc:"The voltage system determines the OLE design parameters."},{target:"m5-l3",label:"Power Supply & Protection",desc:"How substations feed the overhead line and manage faults."},{target:"m6-l3",label:"Wheel-Rail Interface & Gauging",desc:"Pantograph gauge clearance is part of the kinematic envelope calculation."}]})]})}const fp=[{text:"Why does the contact wire follow a zig-zag pattern (stagger)?",options:["To reduce wind resistance on the wire","To spread wear evenly across the full width of the pantograph strip","To compensate for thermal expansion","To improve electrical conductivity"],correct:1,explanation:"Stagger offsets the contact wire alternately left and right of the track centreline so the pantograph strip wears evenly across its width, rather than cutting a groove in one spot."},{text:"What is a neutral section?",options:["A section of track with no signalling","A short de-energised gap where two power feeding sections meet, which the train must coast through","A platform area where trains are not allowed to stop","A section reserved for unpowered rolling stock"],correct:1,explanation:"Neutral sections are short gaps with no power that separate different feeding sections (potentially from different phases or substations). Trains coast through them to avoid short-circuiting between sections."},{text:"What maintains constant wire tension across temperature changes?",options:["Rigid supports at each mast","Auto-tensioning equipment (counterweights or spring systems) compensating for thermal expansion","The catenary wire absorbs all expansion","Expansion joints in the contact wire every 100 m"],correct:1,explanation:"Auto-tensioning systems use counterweights or springs at anchor points to maintain constant tension as the wire expands and contracts with temperature changes, ensuring consistent pantograph contact."},{text:'What is "dewirement"?',options:["Routine removal of old overhead wire","When the pantograph catches and pulls down the contact wire, typically caused by high winds or a damaged pantograph","Disconnecting a section for maintenance","A method of installing new wire"],correct:1,explanation:"Dewirement occurs when the pantograph snags and tears down the contact wire. It causes extensive damage and lengthy line closures. Common causes include high winds, ice, or a damaged pantograph."}];function pp({goTo:h}){return e.jsxs(e.Fragment,{children:[e.jsxs("figure",{className:"lesson-figure",children:[e.jsx("div",{className:"cad-symbol",children:e.jsxs("svg",{viewBox:"0 0 340 80",style:{width:"100%",maxWidth:"340px"},children:[e.jsx("text",{x:"170",y:"14",fill:"var(--text-dim)",fontSize:"10",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"Traction Power Chain"}),e.jsx("rect",{x:"10",y:"28",width:"45",height:"20",fill:"var(--bg-hover)",stroke:"var(--text-bright)",strokeWidth:"1",rx:"2"}),e.jsx("text",{x:"32",y:"42",fill:"var(--text-bright)",fontSize:"7",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"GRID"}),e.jsx("line",{x1:"55",y1:"38",x2:"72",y2:"38",stroke:"var(--text-dim)",strokeWidth:"1"}),e.jsx("polygon",{points:"72,38 67,35 67,41",fill:"var(--text-dim)"}),e.jsx("rect",{x:"72",y:"28",width:"55",height:"20",fill:"var(--bg-hover)",stroke:"var(--accent)",strokeWidth:"1",rx:"2"}),e.jsx("text",{x:"99",y:"42",fill:"var(--accent)",fontSize:"7",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"FEEDER"}),e.jsx("line",{x1:"127",y1:"38",x2:"144",y2:"38",stroke:"var(--text-dim)",strokeWidth:"1"}),e.jsx("polygon",{points:"144,38 139,35 139,41",fill:"var(--text-dim)"}),e.jsx("rect",{x:"144",y:"28",width:"40",height:"20",fill:"var(--bg-hover)",stroke:"var(--blue)",strokeWidth:"1",rx:"2"}),e.jsx("text",{x:"164",y:"42",fill:"var(--blue)",fontSize:"7",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"TSC"}),e.jsx("line",{x1:"184",y1:"38",x2:"201",y2:"38",stroke:"var(--text-dim)",strokeWidth:"1"}),e.jsx("polygon",{points:"201,38 196,35 196,41",fill:"var(--text-dim)"}),e.jsx("line",{x1:"201",y1:"38",x2:"270",y2:"38",stroke:"var(--accent)",strokeWidth:"2"}),e.jsx("text",{x:"235",y:"33",fill:"var(--accent)",fontSize:"7",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"25 kV"}),e.jsx("rect",{x:"270",y:"28",width:"50",height:"20",fill:"var(--text-dim)",stroke:"var(--text-bright)",strokeWidth:"1",rx:"2"}),e.jsx("text",{x:"295",y:"42",fill:"var(--bg)",fontSize:"7",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"TRAIN"}),e.jsx("text",{x:"170",y:"68",fill:"var(--text-dim)",fontSize:"7",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"return path via running rails"})]})}),e.jsx("figcaption",{children:"Schematic: Traction power chain  grid  feeder transformer  track switching  OLE  train."})]}),e.jsx("h3",{children:"The Power Supply Chain"}),e.jsx("p",{children:"Railway electrification does not generate its own power  it draws from the national electricity grid and distributes it to trains through a carefully engineered chain of assets. Understanding this chain is essential for appreciating both the capability and the vulnerability of an electrified railway:"}),e.jsxs("ol",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"National grid:"})," High-voltage transmission network (275 kV or 400 kV in the UK) operated by the National Grid ESO."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Grid supply point:"})," The interface between the national grid and the railway, typically at a 132 kV or 275 kV sub-transmission level."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Feeder station:"})," Connects the railway to the national grid, stepping voltage down from grid levels to the railway traction voltage. Contains transformers, circuit breakers, protection relays, and SCADA interfaces."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Track sectioning cabin / switching station:"})," Distributes power along the route and provides section switches for isolation. Located between feeder stations, they allow flexible power routing and section isolation."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Overhead line or third rail:"})," The final distribution medium that delivers power to the train."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"The train:"})," Collects power via pantograph or shoe gear, transforms/rectifies it onboard, and drives the traction motors."]})]}),e.jsxs("figure",{className:"lesson-figure",children:[e.jsx("div",{className:"image-placeholder",children:e.jsx("p",{children:"IMAGE NEEDED: Photo of a railway traction substation showing transformers, circuit breakers, and busbar equipment behind security fencing. Should convey the industrial scale of the power supply infrastructure."})}),e.jsx("figcaption",{children:"A traction feeder substation  the interface between the national electricity grid and the railway's overhead line."})]}),e.jsx("h3",{children:"Substation Types"}),e.jsx("p",{children:"The type of substation depends on whether the system is AC or DC:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"AC substations"})," contain transformers that step the grid supply down to the traction voltage (25 kV). The transformer is the critical and most expensive component  a typical 25 kV traction transformer is rated at 2040 MVA and weighs 3060 tonnes. In modern systems, ",e.jsx("strong",{children:"auto-transformer feeding"})," is used: the supply is actually 50 kV (25 kV above rail and 25 kV below, with the rail as the midpoint), and auto-transformers at regular intervals along the route balance the currents and reduce the electromagnetic footprint.",e.jsx("strong",{children:" Booster transformers"})," are an older approach that forces return current to flow through a dedicated return conductor rather than through the earth, reducing interference with telecoms and signalling."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"DC substations"})," contain rectifiers (typically 12-pulse diode or thyristor bridges) that convert the incoming AC from the grid to the required DC voltage. A 12-pulse arrangement (two 6-pulse bridges with a 30 phase shift) reduces harmonic distortion injected back into the grid. Rectifier substations are relatively compact but must be closely spaced due to the lower voltage and higher current demands of DC systems. A typical 750 V DC substation for a metro system contains two or three rectifier units, each rated at 24 MW, with DC circuit breakers and negative return busbars."]})]}),e.jsx("h3",{children:"Substation Spacing"}),e.jsx("p",{children:"Substation spacing is one of the most visible consequences of the AC vs DC choice:"}),e.jsxs("div",{className:"highlight-box",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"25 kV AC:"})," Substations every ",e.jsx("strong",{children:"4080 km"}),". Some high-speed lines manage with substations as far as 80 km apart, though 50 km is more typical for heavily trafficked routes."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"3 kV DC:"})," Substations every ",e.jsx("strong",{children:"1525 km"}),", due to lower voltage and greater resistive losses."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"750 V DC:"})," Substations every ",e.jsx("strong",{children:"25 km"}),". On busy metro lines, substations may be as close as 1.5 km apart."]}),e.jsx("p",{style:{margin:0},children:"This spacing directly drives infrastructure cost: a 100 km route electrified at 25 kV AC might need 23 substations, while the same route at 750 V DC would need 2050."})]}),e.jsx("h3",{children:"Auto-Transformer vs Booster Transformer Feeding"}),e.jsx("p",{children:"The two main feeding arrangements for 25 kV AC systems represent different approaches to managing the electromagnetic impact of traction current on the surrounding environment. Understanding their differences is essential for electrification design:"}),e.jsx("div",{className:"table-wrapper",children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Parameter"}),e.jsx("th",{children:"Booster Transformer (BT) Feeding"}),e.jsx("th",{children:"Auto-Transformer (AT) Feeding"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{children:"Principle"}),e.jsx("td",{children:"1:1 ratio transformer in series with the return conductor, forcing return current through a dedicated aerial return conductor rather than through the rails/earth."}),e.jsx("td",{children:"Feeder supplies 50 kV (25 kV positive feeder to rail, 25 kV rail to negative feeder). ATs at regular intervals provide 25 kV to the contact wire from the 50 kV supply, balancing currents between positive and negative feeders."})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Supply voltage"}),e.jsx("td",{children:"25 kV between contact wire and rail"}),e.jsx("td",{children:"50 kV between positive and negative feeders; 25 kV between contact wire and rail"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Substation spacing"}),e.jsx("td",{children:"3050 km typical"}),e.jsx("td",{children:"5080 km typical (because the 50 kV supply halves the current for given power, reducing voltage drop)"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"AT/BT spacing"}),e.jsx("td",{children:"BTs every 35 km along the route"}),e.jsx("td",{children:"ATs every 1015 km along the route"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"EMC performance"}),e.jsx("td",{children:"Good  forces return current off the earth. However, the return conductor is aerial (overhead), so some residual magnetic field remains."}),e.jsx("td",{children:"Excellent  the anti-phase currents in the positive and negative feeders create cancelling magnetic fields, dramatically reducing the net electromagnetic field at distance. Typically 1020 dB lower than BT feeding."})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Cost"}),e.jsx("td",{children:"Lower capital cost per substation, but more substations needed due to shorter feeding distances."}),e.jsx("td",{children:"Higher capital cost (AT units, negative feeder, 50 kV insulation), but fewer substations. Increasingly preferred for new-build due to superior EMC and longer feeding distances."})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Where used"}),e.jsx("td",{children:"Older UK electrification (WCML original installation), some French conventional lines"}),e.jsx("td",{children:"Modern UK schemes (GWML electrification, HS2), Japan (Shinkansen), many new-build worldwide"})]})]})]})}),e.jsx("p",{children:"In practice, many railways are converting from BT to AT feeding as they renew ageing infrastructure. The AT system's superior electromagnetic compatibility is particularly valuable on routes where the railway runs close to residential areas, hospitals, or sensitive electronic installations. The reduced interference with audio-frequency track circuits is also a significant operational benefit."}),e.jsx("h3",{children:"Harmonic Distortion and Power Quality"}),e.jsxs("p",{children:["Railway traction loads are among the most electrically demanding and disruptive loads on the national grid. The power electronics onboard trains draw current in a non-sinusoidal pattern, injecting ",e.jsx("strong",{children:"harmonic currents"})," back into the supply system. These harmonics cause voltage distortion at the grid supply point, affecting other grid users and potentially interfering with railway signalling equipment."]}),e.jsx("p",{children:"Key harmonic issues include:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Low-order harmonics (3rd, 5th, 7th):"})," Produced by older thyristor-based traction converters. These are particularly problematic because they are close to the fundamental frequency and difficult to filter. A fleet of phase-controlled thyristor trains can cause total harmonic distortion (THD) of 1020% at the supply point."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"High-order harmonics and switching noise:"})," Modern IGBT converters switch at frequencies of 14 kHz, producing harmonic clusters around the switching frequency and its multiples. While these are at higher frequencies (easier to filter), they can interfere with audio-frequency track circuits (which operate at specific frequencies from 83 Hz to 10 kHz, depending on the system) and with lineside telecommunications."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Inter-harmonics and sub-harmonics:"})," Some converter topologies produce frequencies that are not integer multiples of the fundamental. These are particularly insidious because they can beat with the fundamental frequency, creating low-frequency voltage fluctuations (flicker) that affect lighting and sensitive equipment connected to the same grid supply."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Resonance:"})," The combination of the railway's capacitance (long overhead line), inductance (transformers), and the grid impedance can create resonant circuits at specific harmonic frequencies. If a harmonic produced by a train coincides with a resonant frequency of the supply system, the harmonic voltage can be greatly amplified, causing equipment damage or protection relay maloperation."]})]}),e.jsxs("p",{children:["Power quality requirements are defined by grid codes and standards. ",e.jsx("strong",{children:"EN 50388"})," specifies the harmonic emission limits for railway rolling stock, and the grid operator typically imposes limits at the grid supply point as part of the connection agreement. Harmonic filters  passive (tuned LC circuits) or active (power electronic devices that inject anti-phase currents)  may be installed at feeder stations to ensure compliance."]}),e.jsx("h3",{children:"Earthing and Bonding Systems"}),e.jsxs("p",{children:["The ",e.jsx("strong",{children:"earthing and bonding"})," system is a critical but often overlooked aspect of railway electrification. Its functions are:"]}),e.jsxs("ul",{children:[e.jsx("li",{children:"Providing a low-impedance return path for traction current"}),e.jsx("li",{children:"Ensuring that exposed metalwork (masts, structures, fences) cannot reach dangerous voltages during a fault"}),e.jsx("li",{children:"Draining static charge and lightning-induced voltages safely to earth"}),e.jsx("li",{children:"Providing a reference potential for signalling and telecommunications equipment"})]}),e.jsx("p",{children:"On AC electrified railways, the earthing philosophy falls into two categories:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Solidly earthed systems:"})," The running rails (and the structures bonded to them) are connected to the general earth mass at every substation and at regular intervals along the route. This ensures low touch voltages on metalwork during normal operation, but during a short-circuit fault, significant current flows through the earth, potentially causing step and touch voltage hazards and interference with buried services. This approach is common in the UK."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Impedance-earthed (floating) systems:"})," The running rails are insulated from the general earth mass (by insulated rail fastenings and insulated track-to-earth connections) and connected to earth only through a defined impedance at the substation. This limits earth fault current and reduces step and touch voltages on remote structures, but allows the rail potential to rise during fault conditions. Common on European continental railways and essential for DC systems where stray current management is critical."]})]}),e.jsxs("p",{children:["The ",e.jsx("strong",{children:"bonding network"})," connects all metalwork within the railway environment  masts, signal gantries, fences, cable troughs, equipment enclosures, platform structures  to the running rails or to the earthing system. This ensures equipotential bonding: all metalwork that a person could simultaneously touch is at the same voltage, preventing dangerous potential differences. Bond connections must be low-resistance (typically less than 0.01 ohm), regularly tested, and protected against corrosion. On third-rail DC systems, bonding is particularly critical because the running rails carry hundreds of amps of return current  a broken or high-resistance rail bond can cause localised rail potential rise, creating a shock hazard at platforms and crossings."]}),e.jsx(N,{type:"info",label:"Key Standard",children:"EN 50122-1 specifies the protective provisions relating to electrical safety and earthing in fixed installations for railway traction systems. It defines permissible touch voltages, step voltages, and rail potential limits for both AC and DC systems, and specifies the requirements for earthing and bonding design."}),e.jsx("h3",{children:"SCADA and Remote Control"}),e.jsxs("p",{children:["The entire traction power network is monitored and controlled by a ",e.jsx("strong",{children:"SCADA (Supervisory Control and Data Acquisition)"})," system. From an electrical control room (ECR), operators can:"]}),e.jsxs("ul",{children:[e.jsx("li",{children:"Open and close section switches remotely to isolate faulted sections"}),e.jsx("li",{children:"Monitor voltages, currents, and temperatures at every substation and switching point"}),e.jsx("li",{children:"Receive automatic fault reports and alarm notifications"}),e.jsx("li",{children:"Manage planned isolations for maintenance possessions"}),e.jsx("li",{children:"Coordinate with signalling control centres to ensure track and power isolations are aligned"})]}),e.jsx("p",{children:"The SCADA system must itself be highly reliable  loss of SCADA does not cause a power failure, but it blinds the operators to the state of the network, requiring fallback to manual (on-site) switching. Redundant communication paths (fibre optic and microwave radio) ensure resilience."}),e.jsx("h3",{children:"Section Switching and Isolation"}),e.jsxs("p",{children:["The overhead line or third rail is divided into electrically separate ",e.jsx("strong",{children:"sections"}),", each of which can be independently energised or de-energised. ",e.jsx("strong",{children:"Section switches"}),"(motorised disconnectors) at switching stations allow maintenance teams to isolate a specific section while adjacent sections remain live. This is essential for safe working: before any work on or near the overhead line, the section must be:"]}),e.jsxs("ol",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Switched out:"})," The section switch is opened, disconnecting the section from the supply."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Proved dead:"})," A voltage detector confirms the section is de-energised."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Earthed:"})," Portable earthing equipment is connected to short-circuit the section to earth, ensuring it cannot be accidentally re-energised."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Permit to work issued:"})," A formal document authorising work on the isolated section, signed by the authorised person and the electrical control room."]})]}),e.jsx("p",{children:"This four-step isolation procedure is safety-critical. Failure to follow it  working on a live section  is invariably fatal. The vast majority of electrocution incidents on railways involve failures in the isolation procedure rather than equipment faults."}),e.jsx("h3",{children:"Protection Relay Types and Coordination"}),e.jsx("p",{children:"Electrical faults on the traction power system can be catastrophic  a short circuit between the overhead line and earth can deliver tens of thousands of amps. Protection systems must detect and clear faults within milliseconds. The principal protection relay types used in traction power systems are:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Overcurrent (OC) relays:"})," Trip the circuit breaker when current exceeds a defined threshold for a defined time. May be configured as instantaneous (trips immediately above a high threshold, for close-up faults) or inverse-time (trips after a delay that decreases as the current increases, for remote faults where some discrimination time is needed). Must be set above the maximum normal load current (including the inrush current of accelerating trains, which can be 300+ A per train) but below the minimum fault current at the far end of the protected section."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Distance (impedance) relays:"})," Measure both voltage and current to calculate the impedance (and therefore the distance) to a fault. The relay has multiple zones: Zone 1 covers approximately 80% of the protected section and trips instantaneously (50100 ms); Zone 2 covers 120% of the section and trips after a short delay (300500 ms), providing backup for the adjacent section's Zone 1; Zone 3 covers a larger area with a longer delay, providing remote backup. Distance protection is the primary protection for long 25 kV AC feeder sections."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Earth fault relays:"})," Detect current leaking to earth through damaged insulation, fallen wires, or flashover from the OLE to grounded structures. Sensitive earth fault relays can detect very low earth fault currents (down to a few amps) that might not trigger overcurrent protection  for example, a broken contact wire touching a wet wooden mast might present a high-impedance earth fault path."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Directional relays:"})," Determine whether fault current is flowing toward or away from the relay location. Essential for parallel-fed systems and ring configurations where fault current can flow in either direction. A directional overcurrent relay will only trip for faults in the protected direction, preventing unnecessary tripping for faults on adjacent sections."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Auto-reclosure:"})," Many faults on the OLE are transient (e.g., a bird or branch causing a momentary flashover). The protection system trips the circuit breaker, waits a short time (typically 1030 seconds), and attempts to re-energise. If the fault persists, the breaker trips permanently and an alarm is raised. Auto-reclosure is typically allowed once; a second trip locks out the breaker."]})]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Protection coordination"})," (also called grading or selectivity) ensures that only the circuit breaker closest to the fault trips, minimising the extent of the disruption. This is achieved by setting time delays and impedance zones so that relays closer to the fault trip before relays further away. If the local protection fails to clear the fault (breaker failure), the next relay upstream will trip after its backup delay, isolating a larger section. Protection coordination studies are performed using network simulation software, modelling fault currents at multiple locations under various network configurations (e.g., with one substation out of service for maintenance)."]}),e.jsx("h3",{children:"Power Supply Simulation and Modelling"}),e.jsxs("p",{children:["Before any new electrification scheme is built  and when changes to the timetable or rolling stock fleet are planned  detailed ",e.jsx("strong",{children:"power supply simulation"})," is performed to verify that the system can deliver adequate voltage and current to every train under all operating conditions. Simulation involves:"]}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Multi-train simulation:"})," Models every train on the network simultaneously, calculating its position, speed, and power demand at each time step (typically 1-second intervals). The timetable defines the starting conditions; the simulation applies the train's traction characteristics, the gradient profile, speed limits, and signalling constraints to compute the power drawn or regenerated at each moment."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Electrical network model:"})," The catenary, feeders, rails, auto-transformers, and substations are modelled as an electrical network with impedances, voltage sources, and load nodes. At each time step, the train power demands are applied as loads, and the network equations are solved to calculate voltage at every point, current in every conductor, and power flow through every transformer and circuit breaker."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Worst-case scenarios:"})," Simulation is run for the peak timetable (maximum number of trains), degraded conditions (one substation out of service), and abnormal operating conditions (delayed trains bunching together). The pass/fail criteria are: (a) railhead voltage must remain within EN 50163 limits at all times and locations; (b) transformer and rectifier ratings must not be exceeded; (c) conductor temperatures must remain within thermal limits."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Software tools:"})," Specialist power supply simulation packages are used, including products such as OpenTrack/OpenPowerNet (ETH Zurich origin), OSLO/TPSS (Network Rail/Atkins), and Siemens Sitras Sidytrac. These tools integrate the train dynamics, electrical network, and timetable into a unified simulation environment."]})]}),e.jsx("p",{children:"Simulation outputs drive critical design decisions: the number and rating of substations, conductor cross-sections, auto-transformer locations, and the maximum number of trains that can operate simultaneously. They also inform operational decisions  if simulation shows that a particular timetable perturbation would cause voltage collapse in a section, operators can plan mitigation in advance."}),e.jsx("h3",{children:"Electrification Clearance Assessment"}),e.jsxs("p",{children:["Before overhead line equipment can be installed on an existing route, every structure along the route  bridges, tunnels, footbridges, signal gantries, platform canopies, cable crossings  must be assessed for ",e.jsx("strong",{children:"electrical clearance"}),". This process is one of the most time-consuming and expensive aspects of an electrification programme:"]}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Minimum electrical clearance:"})," For 25 kV AC, a minimum air gap of 270 mm must be maintained between any live conductor and any earthed structure at all times, including under worst-case thermal expansion, wind deflection, and pantograph uplift. With the addition of a safety margin and installation tolerances, the practical design clearance is typically 300+ mm."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Structure assessment:"})," Every bridge, tunnel, and overline structure is surveyed (often using laser scanning / LiDAR to produce a 3D model) and assessed against the required clearance envelope. The envelope accounts for the contact wire at its maximum height (including uplift from the pantograph), the pantograph horn dimensions, and electrical clearance to the nearest earthed surface."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Mitigation options:"})," Where clearance is insufficient, options include: lowering the track (expensive, may affect drainage and level crossings); raising the bridge (often impractical for masonry arch bridges); lowering the contact wire height below the normal minimum (requires reduced speed through the restriction); installing a rigid conductor bar (reduces the required height); or reconstructing the bridge entirely."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Gauge clearance envelopes:"})," Standards such as Railway Group Standard GE/GN8573 (UK) define the electrical clearance profiles that must be maintained. The profiles are specific to the voltage system and whether the structure is earthed (bonded to the railway earth system) or not. An unearthed structure requires a larger clearance because it could develop a dangerous voltage during a flashover."]})]}),e.jsx("p",{children:"On the UK's Great Western Main Line electrification, bridge clearance issues were one of the primary sources of cost escalation and delay. Many Victorian-era overbridges had insufficient headroom for standard OLE installation, requiring track lowering or bridge reconstruction at significant cost."}),e.jsx("h3",{children:"Stray Current and Corrosion"}),e.jsxs("p",{children:["In DC systems, the return current flows through the running rails  but rails are not perfectly insulated from the ground. Some current inevitably leaks into the earth, seeking the lowest-resistance path back to the substation. This ",e.jsx("strong",{children:"stray current"}),"can flow through buried metallic structures  gas pipes, water mains, building foundations, steel-reinforced concrete  causing ",e.jsx("strong",{children:"electrolytic corrosion"})," that progressively destroys them. The anodic areas (where current leaves the structure) experience metal dissolution; the cathodic areas (where current enters) experience hydrogen evolution."]}),e.jsx("p",{children:"Mitigation strategies include:"}),e.jsxs("ul",{children:[e.jsx("li",{children:"Improving rail-to-earth resistance (insulated rail fastenings, maintaining clean ballast)"}),e.jsx("li",{children:"Installing drainage bonds to provide a controlled return path"}),e.jsx("li",{children:"Cathodic protection of buried structures (imposing an external voltage to counter the stray current effect)"}),e.jsx("li",{children:"Monitoring stray current levels continuously and triggering alarms when thresholds are exceeded"}),e.jsx("li",{children:"Stray current collection mats in tunnel inverts"})]}),e.jsx("p",{children:"AC systems largely avoid this problem because alternating current does not cause sustained electrolytic corrosion  the alternating polarity means the corrosive and depositing effects cancel out over each cycle."}),e.jsx("h3",{children:"Regenerative Braking"}),e.jsxs("p",{children:["Modern electric trains use ",e.jsx("strong",{children:"regenerative braking"}),": when braking, the traction motors act as generators, converting kinetic energy back into electrical energy and feeding it into the supply network. On AC systems, this energy flows naturally back through the grid. On DC systems, however, the rectifier substations are one-directional  they cannot feed energy back to the grid. If no other train in the section is drawing power to absorb the regenerated energy, the line voltage rises dangerously. Mitigation options include:"]}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Onboard resistor banks (rheostatic braking):"})," Dissipate excess energy as heat when the line cannot accept it. Simple and reliable but wasteful."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Inverting substations:"})," Bi-directional substations using thyristor inverters that can feed energy back to the AC grid. More expensive but recoup energy cost."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Lineside energy storage:"})," Batteries, supercapacitors, or flywheels absorb regenerated energy and release it when the next train accelerates, smoothing demand peaks and capturing otherwise wasted energy."]})]}),e.jsx("p",{children:"On a well-optimised metro system, regenerative braking can recover 2540% of the traction energy, significantly reducing the railway's electricity consumption and carbon footprint. Timetable optimisation  synchronising one train's braking with another's acceleration  maximises the proportion of regenerated energy that is reused in real time."}),e.jsx("h3",{children:"Smart Grids, Energy Storage, and Future Technologies"}),e.jsxs("p",{children:["The railway industry is increasingly adopting ",e.jsx("strong",{children:"smart grid"})," concepts: real-time monitoring and optimisation of power flow across the traction network, demand forecasting based on timetable data, and integration of trackside energy storage systems.",e.jsx("strong",{children:" Wayside energy storage"}),"  typically lithium-ion batteries or supercapacitors installed at substations  can capture regenerative braking energy, provide voltage support during peak demand, and reduce the peak power drawn from the national grid (lowering electricity costs through reduced Triad charges in the UK). Some railways are also exploring trackside solar panels on south-facing embankments and lineside wind generation to supplement the grid supply."]}),e.jsx("p",{children:"Specific energy storage technologies being deployed or trialled include:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Lithium-ion battery energy storage systems (BESS):"})," Installed at substations or trackside, these systems store regenerative braking energy and release it during peak demand. A typical installation might be 15 MWh capacity with 13 MW peak power. Battery management systems optimise charge/discharge cycles to maximise battery life (targeting 10+ years). Network Rail has trialled BESS installations on the Merseyrail network to reduce peak demand charges."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Supercapacitor (ultracapacitor) systems:"})," Offer very high power density (able to absorb or deliver large currents for short durations) but lower energy density than batteries. Ideal for capturing short regenerative braking bursts on metro systems where trains brake and accelerate frequently. Cycle life is effectively unlimited (millions of cycles). Siemens Sitras SES and ABB EnergiStore are examples deployed on metro networks worldwide."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Flywheel energy storage:"})," A spinning rotor in a vacuum enclosure stores kinetic energy. Very fast response time, high cycle life, and no chemical degradation. However, standby losses (due to bearing friction and air resistance) make flywheels less efficient for long-duration storage. The Beacon Power flywheel system was trialled on the Los Angeles Metro."]})]}),e.jsxs("p",{children:["Looking further ahead, the concept of the ",e.jsx("strong",{children:"digital railway power system"})," is emerging: an integrated platform that combines real-time traction power SCADA data, train location and power demand data (from the traffic management system), weather forecasts (affecting demand through heating/cooling loads and wind resistance), energy market data (electricity pricing), and energy storage state-of-charge into a unified optimisation engine. This engine would dynamically manage the power network to minimise cost, carbon, and risk  adjusting substation loading, energy storage dispatch, and even providing recommendations to the traffic management system to adjust train speeds or ordering to reduce peak power demand."]}),e.jsxs("p",{children:["Another area of active development is ",e.jsx("strong",{children:"vehicle-to-grid (V2G)"})," capability for battery-electric trains. When BEMUs are parked at depots overnight, their batteries could potentially provide grid balancing services  absorbing excess renewable generation (e.g., overnight wind power) and feeding it back during morning peak. This requires bidirectional depot charging infrastructure, battery management systems that can manage the additional cycles, and commercial arrangements with the grid operator. While still largely theoretical for railways, the concept has been demonstrated for road EVs and is being studied by several railway administrations."]}),e.jsxs(N,{type:"analogy",children:["The traction power supply network is ",e.jsx("strong",{children:"cloud infrastructure"}),". Substations are availability zones  lose one, and traffic must be served by its neighbours. Section switches are circuit breakers in your network layer, allowing you to isolate a failed component without bringing down the whole system. SCADA is your monitoring dashboard (Grafana/Datadog)  it does not control the service directly but gives operators visibility to make informed decisions. Protection relays are automated incident response  they detect anomalies (faults) and take corrective action (trip breakers) within milliseconds, faster than any human could react. Regenerative braking is like a serverless function returning compute credits to the pool  elegant when there is demand to absorb them, but problematic when there is not, requiring a buffer (energy storage) to avoid overloading the system. Power supply simulation is load testing your infrastructure  you model every concurrent user (train), calculate the resource demands, and verify that your capacity (substation ratings, conductor thermal limits) can handle the peak load with margin to spare. Harmonic distortion is like noisy neighbours on a shared server  your workload's side effects can degrade the performance of other tenants on the same grid, and you must comply with the provider's acceptable use policy."]}),e.jsx(ce,{goTo:h,items:[{target:"m4-l2",label:"Interlocking & Train Detection",desc:"Traction power creates EMC challenges for signalling  auto-transformer feeding reduces interference with track circuits."},{target:"m1-l1",label:"Track Structure",desc:"The running rails carry traction return current  rail bonds and insulated joints are critical for both track and power systems."},{target:"m5-l2",label:"Overhead Line Design",desc:"The OLE is the final link in the power supply chain from substation to train."},{target:"m6-l2",label:"Traction & Braking",desc:"Regenerative braking feeds energy back into the power supply system."}]})]})}const yp=[{text:"What is the typical substation spacing for 25 kV AC systems?",options:["13 km","510 km","1525 km","4080 km"],correct:3,explanation:"The high voltage of 25 kV AC allows substations to be spaced 4080 km apart, compared to every 35 km for DC systems, significantly reducing infrastructure cost."},{text:"What does an auto-transformer feeding system do?",options:["Automatically adjusts voltage for different train types","Reduces electromagnetic interference with telecoms and signalling by balancing the current flow through a return conductor","Converts AC to DC for third rail sections","Provides backup power during substation outages"],correct:1,explanation:"Auto-transformers split the supply into +25 kV and 25 kV relative to the rail, balancing current flow through a dedicated return conductor. This greatly reduces electromagnetic interference with nearby telecoms and signalling cables."},{text:"What is the main risk of stray current in DC systems?",options:["Interference with train radio communications","Electrolytic corrosion of buried metallic structures (pipes, cable sheaths, reinforcement)","Overheating of the running rails","Damage to overhead line equipment"],correct:1,explanation:"In DC systems, return current can leak from the rails into the ground and flow through buried metallic structures. This causes electrolytic corrosion that damages water pipes, gas mains, cable sheaths, and reinforced concrete."},{text:"What happens during regenerative braking?",options:["The brakes generate heat that warms the carriages","The trains motors act as generators, converting kinetic energy to electrical energy fed back to the supply","Compressed air is recovered and stored for later use","The track magnets slow the train electromagnetically"],correct:1,explanation:"During regenerative braking, traction motors run as generators. The kinetic energy of the moving train is converted to electrical energy and fed back into the supply network (or consumed by other nearby trains)."}];function xp(h,y){switch(h){case"m5-l1":return e.jsx(up,{goTo:y});case"m5-l2":return e.jsx(gp,{goTo:y});case"m5-l3":return e.jsx(pp,{goTo:y});default:return null}}const vp={"m5-l1":mp,"m5-l2":fp,"m5-l3":yp};function bp({goTo:h}){return e.jsxs(e.Fragment,{children:[e.jsxs("figure",{className:"lesson-figure",children:[e.jsx("div",{className:"cad-symbol",children:e.jsxs("svg",{viewBox:"0 0 340 90",style:{width:"100%",maxWidth:"340px"},children:[e.jsx("text",{x:"170",y:"14",fill:"var(--text-dim)",fontSize:"10",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"Rolling Stock Types"}),e.jsxs("g",{transform:"translate(10, 22)",children:[e.jsx("rect",{x:"5",y:"8",width:"70",height:"28",fill:"var(--text-dim)",stroke:"var(--text-bright)",strokeWidth:"1",rx:"3"}),e.jsx("circle",{cx:"22",cy:"44",r:"5",fill:"none",stroke:"var(--text-bright)",strokeWidth:"1.5"}),e.jsx("circle",{cx:"58",cy:"44",r:"5",fill:"none",stroke:"var(--text-bright)",strokeWidth:"1.5"}),e.jsx("text",{x:"40",y:"60",fill:"var(--text-dim)",fontSize:"8",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"Loco"})]}),e.jsxs("g",{transform:"translate(120, 22)",children:[e.jsx("rect",{x:"5",y:"12",width:"90",height:"24",fill:"var(--text-dim)",stroke:"var(--text-bright)",strokeWidth:"1",rx:"4"}),e.jsx("circle",{cx:"22",cy:"44",r:"5",fill:"none",stroke:"var(--text-bright)",strokeWidth:"1.5"}),e.jsx("circle",{cx:"78",cy:"44",r:"5",fill:"none",stroke:"var(--text-bright)",strokeWidth:"1.5"}),e.jsx("line",{x1:"48",y1:"12",x2:"48",y2:"5",stroke:"var(--accent)",strokeWidth:"1"}),e.jsx("line",{x1:"42",y1:"5",x2:"54",y2:"5",stroke:"var(--accent)",strokeWidth:"1.5"}),e.jsx("text",{x:"50",y:"60",fill:"var(--text-dim)",fontSize:"8",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"EMU"})]}),e.jsxs("g",{transform:"translate(240, 22)",children:[e.jsx("rect",{x:"5",y:"8",width:"70",height:"28",fill:"var(--bg-hover)",stroke:"var(--text-bright)",strokeWidth:"1",rx:"2"}),e.jsx("circle",{cx:"22",cy:"44",r:"5",fill:"none",stroke:"var(--text-bright)",strokeWidth:"1.5"}),e.jsx("circle",{cx:"58",cy:"44",r:"5",fill:"none",stroke:"var(--text-bright)",strokeWidth:"1.5"}),e.jsx("text",{x:"40",y:"60",fill:"var(--text-dim)",fontSize:"8",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"Wagon"})]})]})}),e.jsx("figcaption",{children:"Schematic: Rolling stock types  locomotive, EMU (with pantograph), and freight wagon."})]}),e.jsx("h3",{children:"A Brief History of Locomotive Development"}),e.jsxs("p",{children:["The evolution of the locomotive mirrors the broader arc of industrial technology. Understanding where traction technology came from illuminates ",e.jsx("em",{children:"why"})," modern rolling stock is designed the way it is."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"The steam era (18041960s):"}),` Richard Trevithick's 1804 locomotive at Penydarren demonstrated that smooth steel wheels on smooth steel rails could generate enough adhesion to haul useful loads  a fact that was far from obvious at the time. The Stephensons' Rocket (1829) established the multi-tube boiler and blast pipe arrangement that made steam locomotives practical. For over a century, steam dominated. The technology peaked with machines like the LNER A4 Pacifics (holder of the world steam speed record at 126 mph), the GWR Kings, and the massive American "Big Boy" 4-8-8-4 articulated locomotives for Union Pacific freight. Steam locomotives were thermally inefficient (typically 68% thermal efficiency), labour-intensive to operate (requiring a driver and fireman), and required extensive infrastructure  water troughs, coaling facilities, ash pits, and turntables.`]}),e.jsxs("p",{children:[e.jsx("strong",{children:"The diesel transition (1930s1970s):"}),` Diesel traction offered transformative advantages: 2535% thermal efficiency, one-person operation, instant availability (no hours of "raising steam"), lower maintenance costs, and the ability to run in multiple with other locomotives under a single driver's control. The UK's Modernisation Plan of 1955 accelerated the transition, though the rush to dieselise produced some unreliable early types (the notorious Clayton Class 17 and North British Class 21). By the late 1960s, steam had been eliminated from mainline service in most industrialised nations. Successful UK types like the Class 47 (512 built) and Class 37 (309 built) served for decades.`]}),e.jsxs("p",{children:[e.jsx("strong",{children:"The electric age (1880spresent):"})," Electric traction appeared early  the first electric railway was Siemens' demonstration line in 1879  but required costly infrastructure. Where electrification was justified by traffic density, electric traction proved superior: higher power-to-weight ratio, zero point-of-use emissions, lower maintenance, and the ability to regenerate braking energy. The UK electrified the West Coast Main Line (25 kV AC) in the 1960s and the East Coast Main Line progressively through the 1980s1991. Today, electric traction handles the vast majority of passenger-km in countries with extensive electrification (Switzerland: 100%, Netherlands: 76%, UK: approximately 38% of route-km but carrying over 70% of passenger journeys)."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Emerging technologies (2020s):"})," Battery, hydrogen fuel cell, and bi-mode traction are filling the gap on non-electrified routes where full electrification is not economically justified. The UK's HydroFLEX demonstrator (Class 799) and Germany's Coradia iLint hydrogen trains represent the frontier. Battery-electric multiple units like the Class 230 are being trialled for branch-line services."]}),e.jsxs("figure",{className:"lesson-figure",children:[e.jsx("div",{className:"image-placeholder",children:e.jsx("p",{children:"IMAGE NEEDED: Side-by-side or collage comparison showing the evolution of railway traction: a historic steam locomotive (e.g., Mallard or Rocket), a diesel locomotive (e.g., Class 66), and a modern electric multiple unit (e.g., Class 800 Azuma or a Eurostar)."})}),e.jsx("figcaption",{children:"The evolution of railway traction  from steam to diesel to electric, each generation delivering transformative efficiency improvements."})]}),e.jsx("h3",{children:"Locomotives: The Dedicated Traction Unit"}),e.jsxs("p",{children:["A ",e.jsx("strong",{children:"locomotive"})," is a vehicle whose sole purpose is to produce tractive effort. It hauls coaches (passenger) or wagons (freight) but carries no payload itself. Locomotives come in three main flavours based on their power source:"]}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Diesel-electric:"})," A diesel engine drives a generator (or alternator), which produces electricity to power traction motors on the axles. The diesel engine never directly drives the wheels. This decoupling allows the engine to run at optimal speed while the electrical transmission handles the variable speed/torque demands. Dominant for freight and non-electrified passenger services worldwide. Modern examples include the Class 66 (3,300 hp, EMD prime mover, used extensively for UK freight) and the GE Evolution Series in North America (4,400 hp, Tier 4 emissions compliant)."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Electric:"})," Draws power from the infrastructure (overhead catenary or third rail) and feeds it through a transformer and power electronics to traction motors. Higher power-to-weight ratio than diesel, lower maintenance costs, and zero point-of-use emissions. The workhorse of electrified mainlines. Multi-system electric locomotives like the Siemens Vectron can operate under four different voltage systems (1.5 kV DC, 3 kV DC, 15 kV 16.7 Hz AC, 25 kV 50 Hz AC), enabling seamless cross-border operation."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Battery and hydrogen:"})," Emerging alternatives for non-electrified routes where full electrification is not economically justified. Battery locos store energy in lithium-ion packs; hydrogen locos use fuel cells to generate electricity. Both are zero-emission at point of use but face range and refuelling/recharging constraints. Battery-electric shunters are already commercially viable for depot and yard duties where routes are short and charging infrastructure can be concentrated."]})]}),e.jsx("h3",{children:"Multiple Units: Distributed Traction"}),e.jsxs("p",{children:["A ",e.jsx("strong",{children:"multiple unit (MU)"})," is a self-propelled train where traction equipment is distributed throughout the formation rather than concentrated in a single locomotive. The principal types are:"]}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"DMU (Diesel Multiple Unit):"})," Each power car has its own diesel engine and transmission. Common on rural and branch lines. UK examples include the Class 158 (express) and Class 156 (regional)."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"EMU (Electric Multiple Unit):"})," Draws current from OLE or third rail. The dominant type for suburban, regional, and high-speed passenger services. The UK fleet includes Class 395 Javelin (HS1), Class 700 Thameslink, and Class 385 (Scotland)."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"BMU (Battery Multiple Unit):"})," Charges batteries under electrified sections and runs on battery power beyond the wires. A bridge technology for partially electrified routes."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Bi-mode (BMX):"})," Carries both electric and diesel traction equipment. Runs on electric power under the wires, switches to diesel beyond. The UK's Class 800/801/802 Azuma fleet is the largest bi-mode fleet in the world."]})]}),e.jsxs("p",{children:["Why distribute traction? Because spreading motors across more axles gives ",e.jsx("strong",{children:"better adhesion utilisation"})," (more driven wheels sharing the tractive effort), faster acceleration, more uniform braking, and lower axle loads. A 12-car EMU with motors on half its axles can accelerate far more briskly than a locomotive hauling 12 passive coaches with the same total power, because it has six times as many driven axles sharing the effort."]}),e.jsx("h3",{children:"EMU and DMU Formation Types"}),e.jsx("p",{children:"Multiple units are built in fixed formations of varying length, designed to be coupled together in revenue service to match capacity to demand:"}),e.jsx("div",{className:"table-wrapper",children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Formation"}),e.jsx("th",{children:"Typical Configuration"}),e.jsx("th",{children:"Use Case"}),e.jsx("th",{children:"UK Example"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{children:"2-car"}),e.jsx("td",{children:"DMSO + DMS (both motor cars, or one motor + one trailer)"}),e.jsx("td",{children:"Branch lines, rural services, low-demand routes"}),e.jsx("td",{children:"Class 150/153/156 DMU"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"3-car"}),e.jsx("td",{children:"DMSO + TS + DMS (driving motor + trailer + driving motor)"}),e.jsx("td",{children:"Regional services, medium demand"}),e.jsx("td",{children:"Class 158/170 DMU"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"4-car"}),e.jsx("td",{children:"DMSO + MSO + TS + DMS (two motor cars, one trailer with pantograph, one driving trailer)"}),e.jsx("td",{children:"Suburban and intercity, backbone formation"}),e.jsx("td",{children:"Class 350/377/700 EMU"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"5-car"}),e.jsx("td",{children:"DMS + TS + MS + TS + DMS"}),e.jsx("td",{children:"High-capacity suburban"}),e.jsx("td",{children:"Class 345 (Elizabeth line)"})]})]})]})}),e.jsxs("p",{children:["Vehicle designation codes follow a standard pattern: ",e.jsx("strong",{children:"D"})," = Driving (has a cab),",e.jsx("strong",{children:"M"})," = Motor (has traction equipment), ",e.jsx("strong",{children:"S"})," = Standard class,",e.jsx("strong",{children:"F"})," = First class, ",e.jsx("strong",{children:"O"})," = Open saloon, ",e.jsx("strong",{children:"T"})," = Trailer (unpowered), ",e.jsx("strong",{children:"P"}),' = Pantograph. So "DMSO" is a Driving Motor Standard Open vehicle. When units couple, the electrical and pneumatic connections are made through automatic couplers at the outer ends, and the TMS of both units establishes communication over the WTB so that the driver in the leading cab can control the entire formation as a single entity. Coupling and uncoupling in service typically takes 25 minutes and is performed by the driver from the cab (for automatic couplers) or by a shunter on the ground (for semi-permanent bar couplers).']}),e.jsx("h3",{children:"High-Speed Trainsets"}),e.jsx("p",{children:"High-speed trains (250+ km/h) fall into two architectural families:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Power-car (locomotive) bookends:"})," The original TGV concept  two power cars at each end with unpowered articulated coaches between them. The power cars contain all traction equipment. This concentrates complexity in two vehicles and keeps the coaches simple and lightweight. TGV, KTX, and early Eurostar use this layout."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Distributed traction:"})," Traction motors distributed under some or all coaches. Used by ICE 3, Shinkansen N700, AGV, and modern Eurostar e320. Better adhesion utilisation, no wasted space in power cars, and more seats per metre of train length. The dominant trend for new high-speed trains."]})]}),e.jsx("p",{children:"Articulation  where adjacent vehicles share a bogie at the joint rather than each having its own bogies  is used on TGV, AGV, and some metro trainsets. Articulated trains are shorter, lighter, and have better ride quality (fewer bogies, lower centre of gravity at the joints), but individual vehicles cannot be easily detached for maintenance."}),e.jsx("h3",{children:"High-Speed Families in Detail"}),e.jsx("p",{children:"The world's major high-speed train families each reflect distinct engineering philosophies:"}),e.jsx("div",{className:"table-wrapper",children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Family"}),e.jsx("th",{children:"Country"}),e.jsx("th",{children:"Max Speed"}),e.jsx("th",{children:"Architecture"}),e.jsx("th",{children:"Key Innovation"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{children:"Shinkansen (N700S)"}),e.jsx("td",{children:"Japan"}),e.jsx("td",{children:"300 km/h"}),e.jsx("td",{children:"Distributed traction, non-articulated, 16-car fixed formation"}),e.jsx("td",{children:"Supreme earthquake resilience (ECDS braking), extreme reliability (average delay under 1 minute/year), tilting on N700S"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"TGV (Duplex/M)"}),e.jsx("td",{children:"France"}),e.jsx("td",{children:"320 km/h (service)"}),e.jsx("td",{children:"Power-car bookends, articulated coaches"}),e.jsx("td",{children:"Double-deck cars maximising capacity (1,268 seats in duplex), world rail speed record holder (574.8 km/h, 2007)"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"ICE (3neo/4)"}),e.jsx("td",{children:"Germany"}),e.jsx("td",{children:"320 km/h"}),e.jsx("td",{children:"Distributed traction, non-articulated"}),e.jsx("td",{children:"Multi-system capability (Germany, Austria, Switzerland, Belgium, Netherlands under different voltages), wide-body design"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Pendolino (ETR 675)"}),e.jsx("td",{children:"Italy"}),e.jsx("td",{children:"250 km/h"}),e.jsx("td",{children:"Distributed traction with active tilting"}),e.jsx("td",{children:"Active tilt up to 8 degrees allows 25-40% higher curve speeds on conventional lines without track modification"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"AVE (Talgo/S-106)"}),e.jsx("td",{children:"Spain"}),e.jsx("td",{children:"330 km/h"}),e.jsx("td",{children:"Power-car bookends, Talgo articulated coaches with independent wheels"}),e.jsx("td",{children:"Gauge-changing bogies for seamless 1,435 mm to 1,668 mm transition"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"CR400 (Fuxing)"}),e.jsx("td",{children:"China"}),e.jsx("td",{children:"350 km/h (service)"}),e.jsx("td",{children:"Distributed traction, 8/16-car"}),e.jsx("td",{children:"Highest sustained commercial speed worldwide, Chinese-developed standards (replacing CRH licence-built designs)"})]})]})]})}),e.jsx("h3",{children:"Coaches: Hauled Passenger Vehicles"}),e.jsxs("p",{children:["Traditional ",e.jsx("strong",{children:"coaches"})," are unpowered passenger vehicles hauled by a locomotive. They persist for long-distance and sleeper services where flexibility matters: a loco-hauled train can be lengthened or shortened by adding or removing coaches, and a failed locomotive can be swapped without withdrawing the entire train. Multiple units, by contrast, are fixed formations  you cannot easily detach a single car."]}),e.jsx("h3",{children:"Interior Design and Accessibility"}),e.jsxs("p",{children:["Interior design is driven by both commercial requirements and mandatory standards, particularly for accessibility. The ",e.jsx("strong",{children:"PRM TSI"})," (Persons with Reduced Mobility Technical Specification for Interoperability) and the UK's RVAR (Rail Vehicle Accessibility Regulations) 2010 define minimum requirements:"]}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Wheelchair spaces:"})," Minimum dimensions (1,300 mm x 750 mm), located adjacent to accessible doors, with appropriate restraint systems and call-for-aid buttons."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Accessible toilets:"})," Universal access toilets (UAT) large enough for wheelchair users (minimum 1,700 mm x 1,500 mm), with grab rails, emergency alarms, and controlled-emission toilet (CET) systems that use vacuum to minimise water usage and eliminate trackside discharge."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Seat pitch:"})," Standard class seat pitch is typically 780840 mm (comparable to premium economy in aviation). First class offers 1,0001,100 mm. Seat width in standard class is typically 440480 mm in a 2+2 layout or 420450 mm in a 2+3 layout. These dimensions are fiercely debated because they directly affect capacity and revenue."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Gangway width:"})," Minimum 550 mm clear width throughout the train for accessibility, with 850 mm preferred for smooth passenger flow."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Visual and audible information:"})," Next-stop displays, audio announcements, and tactile indicators for visually impaired passengers. Real-time information screens showing connections, delays, and onward travel options."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Step-free access:"})," Platform-train interface gap must not exceed 75 mm horizontal and 50 mm vertical at designated accessible doors. Where this cannot be achieved by platform design, manual or automatic boarding ramps are provided."]})]}),e.jsx("h3",{children:"Freight Wagons: A Diverse Fleet"}),e.jsx("p",{children:"The freight wagon fleet is enormously diverse because cargo types vary so widely:"}),e.jsx("div",{className:"table-wrapper",children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Wagon Type"}),e.jsx("th",{children:"Cargo"}),e.jsx("th",{children:"Key Feature"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{children:"Flat wagon"}),e.jsx("td",{children:"Steel, timber, containers"}),e.jsx("td",{children:"Open deck, versatile loading"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Hopper"}),e.jsx("td",{children:"Coal, aggregate, grain"}),e.jsx("td",{children:"Bottom-discharge doors for rapid unloading"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Tank wagon"}),e.jsx("td",{children:"Petroleum, chemicals, milk"}),e.jsx("td",{children:"Sealed cylindrical vessel, hazmat rated"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Intermodal (well/spine)"}),e.jsx("td",{children:"ISO containers"}),e.jsx("td",{children:"Low deck height to fit containers within gauge"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Box wagon (van)"}),e.jsx("td",{children:"Packaged goods, automotive"}),e.jsx("td",{children:"Enclosed, weatherproof, side or end doors"})]})]})]})}),e.jsx("p",{children:"Standardisation of the freight fleet is notoriously difficult because each commodity demands different loading, unloading, containment, and environmental protection. The result is hundreds of sub-types, each with unique maintenance requirements."}),e.jsx("h3",{children:"Freight Wagon Coupling Types"}),e.jsx("p",{children:"The coupling system used on freight wagons has profound implications for operational efficiency and is one of the most persistent legacy constraints in European railways:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Buffers-and-chain (screw coupling):"})," The traditional European system. Two side buffers on each wagon end absorb compressive forces, while a central screw coupling (a threaded link tightened by hand) transmits tensile forces. Coupling and uncoupling requires a shunter to stand between the wagons  a dangerous task and one of the most significant sources of freight railway injuries. The system limits train length (longitudinal forces become unmanageable beyond about 750 m), restricts maximum trailing load, and prevents automatic coupling. It persists because the European freight wagon fleet numbers approximately 600,000 vehicles, and retrofitting them all simultaneously is logistically and financially enormous."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Automatic couplers (AAR/Janney type):"})," The North American standard since 1893. A knuckle coupler that mates automatically when wagons are pushed together. No person needs to stand between vehicles. Can transmit both tensile and compressive forces through a single coupler, enabling heavier trains (up to 3+ km, 15,000+ tonnes in North America). The Russian SA-3 coupler is a similar automatic type used across the former Soviet Union railway network."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Digital Automatic Coupling (DAC):"}),' The European rail freight sector is developing DAC to replace buffers-and-chain. DAC combines mechanical coupling with automatic air brake and electrical/data connections (power supply and communication for smart wagon applications). The EU-funded DAC4EU project is testing prototypes. Migration requires a "big bang" conversion or extended dual-compatibility transition, neither of which is straightforward. The business case rests on enabling longer, heavier trains, reducing shunting time, improving safety, and enabling digitalisation of freight operations.']})]}),e.jsx("h3",{children:"Vehicle Architecture"}),e.jsx("p",{children:"Modern rolling stock is modular. The principal architectural components are:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Carbody:"})," The structural shell  aluminium extrusion (lightweight, corrosion-resistant, used on most modern EMUs), stainless steel (durable, fire-resistant, used on metro stock), or mild steel with anti-corrosion coatings (heavier but cheaper, used on freight wagons and some coaches). The carbody must meet crashworthiness standards (EN 15227) defining resistance to collision scenarios  a front-end impact at 36 km/h, an impact with a heavy road vehicle at a level crossing, and a train-to-train collision at the coupling."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Bogies (trucks):"})," The wheel assemblies that carry the carbody. Contain wheelsets, primary and secondary suspension, traction motors (if powered), brake discs, and associated equipment. Fabricated from welded steel. The bogie frame is one of the most fatigue-critical components  it experiences millions of stress cycles during its service life. Non-destructive testing (ultrasonic, magnetic particle inspection) is performed at regular overhaul intervals."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Couplers:"})," Mechanical, pneumatic, and electrical connections between vehicles. ",e.jsx("strong",{children:"Automatic couplers"})," (Scharfenberg type is dominant in Europe; Dellner is common in Scandinavia) combine all three  mechanical coupling, pneumatic brake pipe connection, and electrical/data connections  in a single unit that mates automatically when the vehicles are pushed together. Screw couplings with side buffers persist on freight and loco-hauled stock in the UK and Europe."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Gangways:"})," Enclosed walkways between vehicles allowing passenger and crew movement through the train. Modern gangways are wide (800+ mm), fully enclosed, and provide a continuous floor for accessibility. They incorporate bellows (rubber or fabric) that accommodate the relative movement between vehicles on curves and through turnouts."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Doors:"})," Sliding plug doors with obstacle detection, controlled by the driver or guard. Safety-critical: a door open on the wrong side at a platform is a serious hazard. Modern door control systems include platform detection (using transponders or position systems), selective door opening (opening only on the platform side), and door-state monitoring reported to the TMS. Dwell time is strongly influenced by door width and number  wide doors (1,300 mm+) significantly reduce boarding/alighting time and hence station stop time."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"HVAC:"})," Heating, ventilation, and air conditioning units mounted on the roof or underfloor. Must maintain comfort across a wide temperature range (20 C to +40 C external) and highly variable passenger loads (empty to crush-loaded). Modern units use heat pump technology for energy efficiency. Fresh air supply rates are specified in EN 13129 and are critical for passenger health  lessons reinforced during the COVID-19 pandemic."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Passenger information systems (PIS):"})," Internal displays, audio announcements, real-time journey information, and external destination indicators. Fed by the TMS and increasingly by real-time data feeds (next-stop information, connection status, service alerts)."]})]}),e.jsx("h3",{children:"Crashworthiness: Passive Safety Design"}),e.jsxs("p",{children:[e.jsx("strong",{children:"EN 15227"})," defines four collision design scenarios that all new rolling stock must address:"]}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Scenario 1:"})," Front-end collision between two identical trains at a closing speed determined by vehicle category (e.g. 36 km/h for Category C-I passenger trains)."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Scenario 2:"})," Collision with a freight wagon at 36 km/h (freight wagon stationary on an adjacent track)."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Scenario 3:"})," Collision with a large road vehicle (15 tonnes) at a level crossing at the train's line speed up to 110 km/h."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Scenario 4:"})," Impact with a low obstacle (e.g. car on a level crossing, or animal)  the vehicle must remain on the track and the driver's survival space must be maintained."]})]}),e.jsxs("p",{children:["Compliance is achieved through ",e.jsx("strong",{children:"crash energy management (CEM)"}),"  controlled progressive deformation of sacrificial structures at the vehicle ends. Modern cab-end designs incorporate multiple crush zones: an anti-climber (prevents one vehicle riding up over another), a main energy absorber (typically an aluminium honeycomb or tube-deformation element designed to absorb a specified energy at a controlled force level), and a strong structural backbone behind the sacrificial zone that protects the driver and passengers. The survival space for the driver must be maintained after the design collision scenario  there must be no intrusion into the cab beyond defined limits. Finite element analysis (FEA) is the primary tool for demonstrating compliance, validated by component crush tests and sometimes full-scale impact tests."]}),e.jsx(N,{type:"info",label:"Key Standard",children:"EN 15227 (Railway applications  Crashworthiness requirements for railway vehicle bodies) classifies vehicles into categories C-I through C-IV based on their operational context. Category C-I covers mainline passenger vehicles and requires the most stringent collision performance. Category C-III covers freight locomotives. The standard specifies mean deformation forces, maximum deceleration limits (5g for passengers in seats with tables, 10g for standing passengers), and survival space requirements for crew and passengers."}),e.jsx("h3",{children:"The Train Management System (TMS)"}),e.jsxs("p",{children:["The ",e.jsx("strong",{children:"TMS"})," is the onboard computer network that monitors and controls all vehicle subsystems. It uses standardised bus architectures:"]}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"MVB (Multifunction Vehicle Bus):"})," IEC 61375. A real-time fieldbus within a single vehicle, connecting doors, HVAC, brakes, traction, and diagnostics controllers."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"WTB (Wire Train Bus):"})," IEC 61375. A train-wide bus connecting vehicles in a consist, allowing the driver's cab to communicate with every car."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"TCN Ethernet:"})," Modern fleets are migrating to Ethernet-based train communication networks (ETB, ECN) for higher bandwidth, supporting CCTV, PIS, and predictive maintenance data streams."]})]}),e.jsx("p",{children:"The TMS architecture is event-driven and message-passing. Subsystem controllers publish status and subscribe to commands. The driver's display aggregates data from every node in the train  fault codes, temperatures, speeds, door states, brake pressures  into a single operational picture."}),e.jsx("h3",{children:"Vehicle Numbering Systems"}),e.jsx("p",{children:"Every rail vehicle carries a unique identifier used for fleet management, maintenance tracking, and operational control. Two systems dominate:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"TOPS (Total Operations Processing System):"}),' The UK system, introduced by British Rail in the 1970s, based on an IBM mainframe system originally developed for Southern Pacific Railroad. TOPS assigns each locomotive and multiple unit a class number and individual number. Diesel locomotives are Classes 0169, electric locomotives 7099 (though many gaps exist), DMUs 100199, and EMUs 300399 (broadly). The system is still used by Network Rail and operators for real-time tracking of every vehicle on the network. TOPS numbers appear as (for example) "66 001"  Class 66, vehicle number 001.']}),e.jsxs("li",{children:[e.jsx("strong",{children:"UIC (EVN  European Vehicle Number):"})," A 12-digit number assigned to every rail vehicle in Europe under the ERA's vehicle register. The structure is: 2 digits for interoperability capability and vehicle type, 2 digits for country code (e.g. 70 = United Kingdom), 4 digits for technical characteristics and serial number, 3 digits for individual vehicle number, and 1 check digit calculated using the Luhn algorithm. This number is painted on the vehicle side and recorded in the European Centralised Virtual Vehicle Register (ECVVR). It enables cross-border vehicle tracking and maintenance record management."]})]}),e.jsx("h3",{children:"Maintenance Regimes"}),e.jsx("p",{children:"Rolling stock maintenance follows a structured regime of increasing depth and interval:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Daily/pre-service checks:"})," Walk-around inspection, fluid levels, brake tests, door function, PIS check. Performed by the driver or depot staff before each service day."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"A-exam (minor):"})," Every 26 weeks. More detailed inspection, lubrication, consumable replacement (brake pads, wiper blades, toilet servicing), and download of diagnostic data from the TMS."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"B-exam (intermediate):"})," Every 36 months. Component testing, bogie inspection, wheel profile measurement, underframe cleaning, and replacement of life-limited parts."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"C-exam (major):"})," Every 48 years. Full vehicle strip-down, bogie overhaul, wheelset replacement or re-profiling, motor overhaul, carbody repaint, interior refurbishment. Requires the vehicle to be out of service for weeks."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"D-exam (heavy overhaul):"})," Every 1220 years (if the vehicle has that lifespan). Complete structural inspection, rewiring, system upgrades, and life extension works."]})]}),e.jsx("h3",{children:"Depot Operations and Fleet Maintenance"}),e.jsx("p",{children:"A train maintenance depot is a complex industrial facility optimised for throughput of maintenance activities while minimising the time vehicles spend out of service:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Depot layout:"})," Typically includes a reception area for incoming trains, a washing plant (automatic external wash), a fuelling point (for diesel stock) or stabling roads with shore power supply (for electric stock), internal maintenance roads with inspection pits, wheel lathes for in-situ wheel re-profiling, overhead cranes for component swaps (bogies, traction motors, transformers), and a stores facility for spare parts. Large depots can stable and maintain 50100 vehicles simultaneously."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Wheel lathe operations:"})," Underfloor wheel lathes allow wheel re-profiling without removing the wheelset from the vehicle. The vehicle is driven over the lathe, which machines the wheel tread back to the design profile. A full re-profile takes 2040 minutes per wheelset. Wheel diameter is recorded after each cut; when the wheel reaches its minimum diameter (typically 5080 mm less than new), the entire wheelset must be replaced  a much more invasive operation requiring the bogie to be dropped."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Bogie drop:"})," For major maintenance, the entire bogie is removed from under the vehicle using a bogie drop  a section of track that can be lowered hydraulically while the carbody is supported on jacks. The bogie is then moved to a separate workshop for overhaul (wheelset replacement, bearing renewal, suspension component inspection, motor overhaul, brake rigging inspection)."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Fleet management software:"})," Modern depots use enterprise asset management (EAM) systems that schedule maintenance based on mileage, calendar time, and condition data from the TMS. The system tracks every component's life, generates work orders, manages parts inventory, and reports fleet availability and reliability KPIs."]})]}),e.jsxs("p",{children:["The industry is moving toward ",e.jsx("strong",{children:"condition-based maintenance (CBM)"}),"  using real-time data from onboard sensors (vibration, temperature, current, pressure) to predict when components will need attention, rather than maintaining on fixed time intervals. This reduces both costs and unplanned failures. Predictive analytics and machine learning are increasingly applied to fleet telemetry data to identify degrading components before they fail."]}),e.jsx(N,{type:"info",label:"Key Metric",children:'Fleet availability is typically measured as MTIN (Mean Time In service / (Mean Time In service + Mean Time Out of service)). A well-maintained passenger fleet targets 8592% availability, meaning that on any given day, at least 85% of the fleet is available for traffic. The remaining vehicles are undergoing scheduled maintenance, awaiting parts, or being repaired after faults. Unplanned failures that cause in-service disruption ("fleet incidents") are tracked separately as MDBF (Mean Distance Between Failures)  a key contractual KPI in modern franchise and concession agreements.'}),e.jsx("h3",{children:"Certification and Approvals"}),e.jsxs("p",{children:["Before a new vehicle can enter service, it must be ",e.jsx("strong",{children:"authorised"}),". In Europe, this means compliance with ",e.jsx("strong",{children:"TSIs (Technical Specifications for Interoperability)"}),"covering rolling stock, noise, accessibility, safety in tunnels, and more. The process involves type testing (demonstrating compliance with each requirement through laboratory and on-track tests), independent safety assessment (ISA), review by a Notified Body (NoBo), and formal authorisation by the national safety authority (e.g. ORR in the UK) or the European Union Agency for Railways (ERA). The process typically takes 24 years and costs millions."]}),e.jsx("p",{children:"Key test campaigns include:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Dynamic testing:"})," Running the vehicle at line speed (and typically 10% above) on a test track, measuring ride quality, stability, and wheel-rail forces to EN 14363."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Electromagnetic compatibility (EMC):"})," Verifying the vehicle does not interfere with signalling track circuits or other railway systems."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Brake testing:"})," Emergency and service brake performance across the speed range, in dry and wet conditions, on gradients."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Crashworthiness:"})," Demonstrating compliance with collision scenarios (EN 15227)  usually through finite element simulation validated by component tests."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Fire safety:"})," Material fire testing (EN 45545) for all interior materials  flame spread, smoke density, toxicity."]})]}),e.jsxs(N,{type:"analogy",children:["A train is a ",e.jsx("strong",{children:"distributed system on wheels"}),". Each vehicle is a node. The TMS is the message bus (think Kafka or RabbitMQ). Doors, HVAC, traction, and braking are all microservices communicating over the bus, publishing events and subscribing to commands. The driver's cab is the dashboard or CLI  a single pane of glass aggregating telemetry from every node. When you couple two trains together, you are merging two clusters and the WTB handles service discovery. When a subsystem faults, it publishes a diagnostic event and degrades gracefully, just like a circuit breaker pattern. The vehicle numbering system (TOPS/UIC EVN) is the DNS of the railway  a unique, globally resolvable identifier for every node on the network, enabling fleet management systems to track, query, and command any vehicle anywhere."]}),e.jsx(ce,{goTo:h,items:[{target:"m5-l1",label:"Electrification Principles",desc:"How electric traction draws power from the infrastructure."},{target:"m4-l1",label:"Block System & Signals",desc:"Onboard signalling equipment (AWS, TPWS, ETCS) fitted to rolling stock."},{target:"m8-l1",label:"Timetable Planning",desc:"Vehicle performance characteristics determine journey times and headways."}]})]})}const jp=[{text:"What advantage does distributed traction (multiple units) have over locomotive-hauled trains?",options:["Lower manufacturing cost per vehicle","Better adhesion utilisation, acceleration, and braking because powered axles are spread throughout the train","Simpler maintenance requirements","Higher maximum speed capability"],correct:1,explanation:"Distributing traction across the train means more axles contribute to adhesion, giving better acceleration and braking. It also spreads the weight more evenly and eliminates the need to run a locomotive around at termini."},{text:"What bus system is commonly used for onboard train communication?",options:["CAN bus from the automotive industry","MVB (Multifunction Vehicle Bus) or Ethernet-based TCN (Train Communication Network)","USB connected devices throughout the train","Bluetooth mesh networking"],correct:1,explanation:"MVB and TCN (standardised in IEC 61375) are purpose-built train communication networks. Modern trains increasingly use Ethernet-based TCN for higher bandwidth and easier integration."},{text:"What does TSI stand for in railway certification?",options:["Train Safety Inspection","Technical Specification for Interoperability  EU standards ensuring cross-border compatibility","Traction System Interface","Track-Side Infrastructure"],correct:1,explanation:"TSIs are EU regulations that define requirements each subsystem must meet to allow trains to operate across national borders. They cover rolling stock, signalling, infrastructure, energy, and more."},{text:"Why are multiple units (EMUs/DMUs) preferred for commuter services?",options:["They are quieter than locomotive-hauled trains","Fast acceleration from distributed traction, no need to run around the locomotive at termini, and efficient use of platform length","They can carry more passengers per train","They require fewer staff to operate"],correct:1,explanation:"Multiple units accelerate faster (more powered axles), can depart in either direction without a locomotive run-around, and every metre of the train is usable passenger space  all critical for high-frequency commuter operations."}];function wp({goTo:h}){return e.jsxs(e.Fragment,{children:[e.jsxs("figure",{className:"lesson-figure",children:[e.jsx("div",{className:"cad-symbol",children:e.jsxs("svg",{viewBox:"0 0 340 70",style:{width:"100%",maxWidth:"340px"},children:[e.jsx("text",{x:"170",y:"14",fill:"var(--text-dim)",fontSize:"10",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"Traction Power Flow"}),e.jsx("rect",{x:"5",y:"28",width:"45",height:"20",fill:"var(--bg-hover)",stroke:"var(--accent)",strokeWidth:"1",rx:"2"}),e.jsx("text",{x:"27",y:"42",fill:"var(--accent)",fontSize:"7",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"25kV"}),e.jsx("line",{x1:"50",y1:"38",x2:"62",y2:"38",stroke:"var(--text-dim)",strokeWidth:"1"}),e.jsx("polygon",{points:"62,38 57,35 57,41",fill:"var(--text-dim)"}),e.jsx("rect",{x:"62",y:"28",width:"45",height:"20",fill:"var(--bg-hover)",stroke:"var(--text-bright)",strokeWidth:"1",rx:"2"}),e.jsx("text",{x:"84",y:"42",fill:"var(--text-bright)",fontSize:"7",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"XFMR"}),e.jsx("line",{x1:"107",y1:"38",x2:"119",y2:"38",stroke:"var(--text-dim)",strokeWidth:"1"}),e.jsx("polygon",{points:"119,38 114,35 114,41",fill:"var(--text-dim)"}),e.jsx("rect",{x:"119",y:"28",width:"50",height:"20",fill:"var(--bg-hover)",stroke:"var(--blue)",strokeWidth:"1",rx:"2"}),e.jsx("text",{x:"144",y:"42",fill:"var(--blue)",fontSize:"7",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"INVERTER"}),e.jsx("line",{x1:"169",y1:"38",x2:"181",y2:"38",stroke:"var(--text-dim)",strokeWidth:"1"}),e.jsx("polygon",{points:"181,38 176,35 176,41",fill:"var(--text-dim)"}),e.jsx("rect",{x:"181",y:"28",width:"48",height:"20",fill:"var(--bg-hover)",stroke:"var(--accent-secondary)",strokeWidth:"1",rx:"2"}),e.jsx("text",{x:"205",y:"42",fill:"var(--accent-secondary)",fontSize:"7",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"MOTOR"}),e.jsx("line",{x1:"229",y1:"38",x2:"241",y2:"38",stroke:"var(--text-dim)",strokeWidth:"1"}),e.jsx("polygon",{points:"241,38 236,35 236,41",fill:"var(--text-dim)"}),e.jsx("rect",{x:"241",y:"28",width:"45",height:"20",fill:"var(--bg-hover)",stroke:"var(--text-bright)",strokeWidth:"1",rx:"2"}),e.jsx("text",{x:"263",y:"42",fill:"var(--text-bright)",fontSize:"7",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"WHEEL"}),e.jsx("text",{x:"170",y:"62",fill:"var(--accent-secondary)",fontSize:"7",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:" regen braking returns energy to OLE"})]})}),e.jsx("figcaption",{children:"Schematic: Traction power flow  25 kV  transformer  inverter  motor  wheel. Regenerative braking reverses the flow."})]}),e.jsx("h3",{children:"Electric Traction: The Modern Standard"}),e.jsxs("p",{children:["The vast majority of new rolling stock uses ",e.jsx("strong",{children:"AC induction motors"})," (also called asynchronous motors), which have displaced the older DC motors that dominated for a century. An induction motor has no brushes, no commutator, and almost no wearing parts  it is mechanically simple and electrically robust. The speed of an induction motor is controlled by varying the frequency and voltage of the AC supply, which is the job of the",e.jsx("strong",{children:" IGBT inverter"})," (Insulated-Gate Bipolar Transistor). Newer designs are adopting ",e.jsx("strong",{children:"SiC (silicon carbide) MOSFETs"}),", which switch faster, operate at higher temperatures, and reduce power losses by 2030% compared to silicon IGBTs."]}),e.jsx("h3",{children:"Permanent Magnet Synchronous Motors (PMSM)"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Permanent magnet synchronous motors (PMSM)"})," are emerging as the next generation, offering higher power density and efficiency than induction motors. The rotor contains rare-earth permanent magnets (neodymium-iron-boron) that create the magnetic field without external excitation, eliminating rotor losses. PMSMs are more compact and lighter for the same power output. Alstom's Coradia and some Bombardier/Alstom Talent variants use PMSMs. The main disadvantage is cost and dependence on rare-earth supply chains."]}),e.jsx("p",{children:"The advantages of PMSM over asynchronous induction motors are significant and are driving adoption despite the higher procurement cost:"}),e.jsx("div",{className:"table-wrapper",children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Parameter"}),e.jsx("th",{children:"Asynchronous Induction Motor"}),e.jsx("th",{children:"PMSM"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{children:"Efficiency"}),e.jsx("td",{children:"9094%"}),e.jsx("td",{children:"9597%"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Power density (kW/kg)"}),e.jsx("td",{children:"1.01.5"}),e.jsx("td",{children:"2.03.0"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Rotor losses"}),e.jsx("td",{children:"Significant (induced currents)"}),e.jsx("td",{children:"Near zero (permanent magnets)"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Cooling requirements"}),e.jsx("td",{children:"Forced air or liquid cooling"}),e.jsx("td",{children:"Often self-cooled or simpler cooling"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Speed control"}),e.jsx("td",{children:"V/f control or vector control"}),e.jsx("td",{children:"Field-oriented control (FOC) mandatory"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Rare-earth dependency"}),e.jsx("td",{children:"None"}),e.jsx("td",{children:"High (neodymium, dysprosium)"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Fault mode risk"}),e.jsx("td",{children:"Relatively benign (can be de-excited)"}),e.jsx("td",{children:"Back-EMF persists at speed (cannot be de-excited), requires careful fault management"})]})]})]})}),e.jsxs("p",{children:["A critical safety consideration with PMSMs is that the permanent magnets generate a back-EMF (voltage) whenever the rotor turns, and this cannot be switched off. If a short circuit develops in the motor windings, the back-EMF will drive a fault current that generates heat and potentially fire. Induction motors can be de-excited (the field disappears when the inverter is disconnected), but PMSMs cannot. This requires additional fault management  for example, the ability to mechanically disconnect the motor from the axle (a clutch mechanism) or to short-circuit the motor windings in a controlled manner to limit fault current. Research into ",e.jsx("strong",{children:"ferrite-based"})," and",e.jsx("strong",{children:" magnet-free synchronous reluctance"})," motors aims to reduce rare-earth dependency while retaining some efficiency advantages."]}),e.jsxs("figure",{className:"lesson-figure",children:[e.jsx("div",{className:"image-placeholder",children:e.jsx("p",{children:"IMAGE NEEDED: Photo of a traction motor (AC induction type) either mounted in a bogie or on a test stand, showing the compact cylindrical motor and its mounting arrangement. Alternatively, an underfloor view of a modern EMU showing traction equipment."})}),e.jsx("figcaption",{children:"A modern AC induction traction motor  no brushes, no commutator, and almost no wearing parts."})]}),e.jsx("h3",{children:"Power Electronics in Detail"}),e.jsxs("p",{children:['The power electronics chain in a modern EMU looks like this: AC from the catenary is stepped down by the transformer, rectified to DC by a four-quadrant converter (which also handles regenerative braking and power factor correction), smoothed by a DC link capacitor, and then inverted back to variable-frequency AC by the IGBT inverter to feed the traction motors. The four-quadrant converter is "four-quadrant" because it can handle power flow in both directions and at both polarities  essential for regenerative braking. This chain also enables ',e.jsx("strong",{children:"regenerative braking"}),": when the motors are used as generators, kinetic energy is converted back to electrical energy and fed into the catenary for other trains to use  or dissipated in resistor banks if the catenary cannot accept it."]}),e.jsx("p",{children:"The key semiconductor devices and their characteristics are:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"IGBT (Insulated-Gate Bipolar Transistor):"}),' The workhorse of modern traction inverters since the 1990s, replacing GTO thyristors. IGBTs combine the high-current capability of bipolar transistors with the voltage-controlled gate of MOSFETs. Traction-grade IGBTs handle 3.3 kV or 6.5 kV blocking voltage and 1,0003,000 A continuous current. They switch at 5002,000 Hz in traction applications. The switching frequency determines the quality of the AC waveform fed to the motors and the level of audible switching noise (the characteristic "whine" of modern EMUs is the inverter switching frequency and its harmonics). Higher switching frequencies produce smoother waveforms and less torque ripple but generate more switching losses (heat).']}),e.jsxs("li",{children:[e.jsx("strong",{children:"SiC MOSFET (Silicon Carbide Metal-Oxide-Semiconductor Field-Effect Transistor):"}),"The emerging replacement for silicon IGBTs. SiC is a wide-bandgap semiconductor that can operate at higher temperatures (200 C+ junction vs 150 C for silicon), higher switching frequencies (520 kHz), and with significantly lower switching and conduction losses. A SiC-based traction inverter can be 3050% smaller and 2030% lighter than an equivalent silicon IGBT unit, while reducing energy consumption by 510% over a duty cycle. The Shinkansen N700S was one of the first high-speed trains to deploy SiC traction inverters in revenue service."]})]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Cooling"})," is critical for power electronics. Traction inverters dissipate tens of kilowatts of heat in a compact volume. Cooling methods include forced-air cooling (air blown over heatsinks by fans  simple but bulky, and performance degrades in tunnels where ambient temperature rises), liquid cooling (water-glycol circuits with radiators  more effective and compact, dominant on modern high-power applications), and heat pipe cooling (passive two-phase systems used in some designs). The cooling system must maintain junction temperatures below the device rating across the full operating envelope, including worst-case scenarios like sustained full-power operation in a tunnel on a hot day with degraded cooling (fan failure or reduced airflow)."]}),e.jsx("h3",{children:"Diesel Traction: Three Transmission Types"}),e.jsx("p",{children:"Diesel traction comes in three transmission variants, though one dominates overwhelmingly:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Diesel-electric:"})," The diesel engine drives an alternator. The AC output is rectified and fed to traction motor inverters (or directly to DC motors in older designs). The engine and wheels are ",e.jsx("em",{children:"never"})," mechanically coupled. This gives smooth, controllable power delivery across the full speed range and is by far the dominant type worldwide  from shunters to 4,000 hp mainline freight locomotives."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Diesel-hydraulic:"})," The engine drives a hydraulic torque converter, which transmits power to the wheels via a gearbox and cardan shafts. Lighter than diesel-electric for the same power, but more mechanically complex. Used historically in Germany (V200) and the UK (Western class). Now largely niche."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Diesel-mechanical:"})," A conventional gearbox connects the engine to the wheels, like a road vehicle. Only viable at low power (shunters, railcars). The torque multiplication limits make it impractical for heavy traction."]})]}),e.jsx("h3",{children:"Braking Systems: Multiple Modes, One Goal"}),e.jsxs("p",{children:["Railway braking is not a single system but a carefully orchestrated ",e.jsx("strong",{children:"blend"})," of multiple braking modes, each contributing at different speed ranges:"]}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Friction braking (disc or tread):"})," Brake pads pressed against disc rotors (modern) or directly against the wheel tread (older). The fundamental braking mode, effective at all speeds. Generates heat and wear."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Dynamic/regenerative braking:"})," Traction motors run as generators, converting kinetic energy to electrical energy. Dominant at higher speeds where it is most efficient. Fades at low speed, so friction brakes must take over."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Magnetic track brakes:"})," Electromagnets lowered onto the rail head, creating friction independent of wheel-rail adhesion. Used for emergency braking on high-speed trains (ICE, TGV) and trams."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Eddy current brakes:"})," Magnets induce eddy currents in the rail, creating a retarding force without physical contact. Non-wearing but heats the rail. Used on some high-speed trains."]})]}),e.jsx("h3",{children:"The Westinghouse Principle: Fail-Safe by Design"}),e.jsx("div",{className:"highlight-box",children:e.jsxs("p",{children:["The ",e.jsx("strong",{children:"continuous automatic air brake"}),", invented by George Westinghouse in 1869, is one of the most elegant safety designs in all engineering. A brake pipe runs the entire length of the train, charged with compressed air (typically 5 bar). This air pressure",e.jsx("em",{children:"holds the brakes off"}),". When the driver (or any fault) reduces brake pipe pressure, a triple valve on each vehicle detects the drop and applies the brakes from a local reservoir. If the train separates, the brake pipe breaks, pressure drops to zero, and every vehicle brakes automatically. The default state is ",e.jsx("strong",{children:"brakes on"}),'. The system must be actively maintained in the "brakes off" state. This is fail-safe by physics.']})}),e.jsx("h3",{children:"Braking Distance Calculations"}),e.jsx("p",{children:"Braking distance is the fundamental constraint that determines safe signal spacing, approach speeds, and stopping margins. The calculation involves several components:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Reaction/perception time:"})," The time between the driver perceiving a stop signal (or receiving an automatic brake command) and the brake system beginning to apply force. For a driver-initiated brake application, this is typically 24 seconds. For an automatic system (TPWS, ETCS), it is the system reaction time  typically 0.51.5 seconds depending on the technology."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Brake build-up time:"})," The time for brake cylinder pressure to reach full application after the command is given. In a long freight train with a conventional brake pipe, the propagation delay from the locomotive to the last wagon can be 1020 seconds. In a modern EMU with electronically controlled brakes (EP braking), this is near-instantaneous (under 1 second)."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Deceleration phase:"})," Governed by the available braking force (which depends on brake type, adhesion conditions, and speed) and the train's mass. The basic relationship is: distance = v/(2a), where v is speed and a is deceleration. But the deceleration is not constant  regenerative braking fades at low speed, adhesion varies, and gradient affects the net force."]})]}),e.jsx("p",{children:"For a typical modern passenger EMU travelling at 160 km/h (44.4 m/s) with a full-service deceleration of 0.9 m/s, the deceleration distance alone is approximately 1,100 metres. Adding reaction time, brake build-up, and safety margins, the total stopping distance from full speed might be 1,4001,600 metres. Emergency braking (higher deceleration, typically 1.01.3 m/s) reduces the distance but at the cost of passenger comfort and increased wheel flat risk. For high-speed trains at 300 km/h, emergency braking distances can exceed 3,000 metres  which is why high-speed lines require in-cab signalling (ETCS Level 2) with continuous supervision rather than lineside signals that might not be visible at such distances."}),e.jsx(N,{type:"info",label:"Key Calculation",children:"The simplified braking distance formula on level track is: d = (v / 2a) + (v  t), where d is stopping distance (m), v is initial speed (m/s), a is deceleration (m/s), and t is the combined reaction and build-up time (s). On a gradient, the effective deceleration becomes (a  g  sin ), where  is the gradient angle. A 1% falling gradient (1 in 100) reduces effective deceleration by approximately 0.1 m/s, adding significantly to the stopping distance at high speed."}),e.jsx("h3",{children:"Vehicle Dynamics: Hunting Oscillation"}),e.jsxs("p",{children:["At speed, railway vehicles can develop a lateral oscillation called ",e.jsx("strong",{children:"hunting"}),". This arises from the conical profile of the wheel tread: as a wheelset displaces laterally, the difference in rolling radius between the two wheels causes it to steer back, but momentum carries it past centre, triggering an oscillation. Below the ",e.jsx("strong",{children:"critical speed"}),", the oscillation is damped and stable. Above it, the oscillation grows and can become violent  a severe safety risk. The critical speed depends on the cone angle (conicity), bogie design, and damping. ",e.jsx("strong",{children:"Yaw dampers"}),"  hydraulic dampers resisting rotational movement of the bogie  are the primary means of raising the critical speed and ensuring stability at operating speeds."]}),e.jsx("h3",{children:"Suspension: Two Stages"}),e.jsxs("p",{children:["Railway vehicles use a ",e.jsx("strong",{children:"two-stage suspension"})," system:"]}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Primary suspension:"})," Between the axle (wheelset) and the bogie frame. Stiff springs (coil or rubber-chevron) and viscous dampers handling high-frequency inputs from rail irregularities. Must be stiff enough to maintain wheel-rail contact geometry while soft enough to isolate the bogie frame from the worst impacts. Rubber-chevron springs (V-shaped rubber elements bonded to metal plates) provide both spring and damping functions in a compact, maintenance-free unit."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Secondary suspension:"})," Between the bogie frame and the carbody. Soft springs (air springs are now standard on passenger stock) providing ride comfort by isolating the body from bogie movements. Air springs consist of a rubber bellows filled with compressed air, whose stiffness varies with pressure. This allows ",e.jsx("strong",{children:"automatic levelling"}),"  the air pressure is adjusted by a levelling valve to maintain constant floor height regardless of passenger load (an empty train and a crush-loaded train sit at the same height). Lateral and vertical dampers complement the air springs."]})]}),e.jsx("h3",{children:"Active Suspension and Tilting Systems"}),e.jsxs("p",{children:["Some high-speed trains use ",e.jsx("strong",{children:"active tilting"})," (e.g. Pendolino, Alstom Avelia) where the carbody is tilted into curves by hydraulic or electromechanical actuators, allowing higher curve speeds without exceeding passenger comfort limits. The tilt system senses lateral acceleration via accelerometers and gyroscopes and tilts the body up to 8 degrees to compensate. Tilting trains can run 2540% faster through curves than non-tilting stock on the same track, making them attractive for upgrading winding conventional lines (like the UK's West Coast Main Line) without rebuilding the alignment."]}),e.jsxs("p",{children:["Beyond tilting, ",e.jsx("strong",{children:"active lateral suspension"})," systems use actuators (hydraulic or electromechanical) between the bogie and carbody to counteract lateral oscillations and improve ride quality. These systems measure lateral acceleration of the carbody and apply corrective forces through the actuators. The control loop operates at frequencies up to 1020 Hz, addressing the body's lateral and yaw modes. Active suspension can reduce lateral acceleration at the passenger level by 3050% compared to passive suspension alone, enabling either higher speeds on existing track or improved comfort at current speeds. The Shinkansen N700 series uses active suspension as standard."]}),e.jsx("h3",{children:"Ride Quality Measurement"}),e.jsx("p",{children:"Ride quality is quantified using standardised metrics that relate measured accelerations to human comfort perception:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"EN 12299 (Ride comfort):"})," The European standard for measuring and evaluating ride quality. It defines the ",e.jsx("strong",{children:"NMV (N_MV)"}),' index, calculated from weighted RMS accelerations in lateral (y) and vertical (z) directions measured on the vehicle floor. The weighting filters model human sensitivity to vibration at different frequencies. An NMV value below 1.5 is considered "very comfortable", 1.52.5 is "comfortable", 2.53.5 is "acceptable", and above 4.5 is "very uncomfortable". Measurements are taken over track sections of defined length and averaged.']}),e.jsxs("li",{children:[e.jsx("strong",{children:"Sperling ride index (Wz):"}),' An older German standard still widely used, particularly in Asia. The Wz index uses a different frequency weighting but yields a similar comfort scale: Wz below 2.5 is "good", 2.53.0 is "acceptable for operation", and above 3.0 indicates a problem requiring investigation. The Sperling method evaluates lateral (Wz_y) and vertical (Wz_z) directions separately.']})]}),e.jsx("p",{children:"Track recording vehicles and instrumented revenue trains continuously monitor ride quality across the network. Deterioration in ride indices triggers track maintenance (tamping, grinding) or vehicle investigation (suspension fault, flat wheel). The linkage between vehicle dynamics, track condition, and ride quality is one of the most data-intensive areas of modern railway engineering, and a prime candidate for machine learning approaches."}),e.jsx("h3",{children:"Tractive Effort and Power"}),e.jsxs("p",{children:["A vehicle's performance is characterised by its ",e.jsx("strong",{children:"tractive effort curve"}),"  a graph of force at the wheel rim against speed. At low speed, tractive effort is limited by ",e.jsx("strong",{children:"adhesion"}),` (the maximum force the wheel-rail contact can transmit without slipping, typically 2535% of axle weight). As speed increases, the motor reaches its maximum power and tractive effort falls as 1/V (since Power = Force  Velocity). At higher speeds, the motor reaches its maximum voltage and enters a "field weakening" or "constant power" regime where both torque and current decrease. The intersection of the tractive effort curve with the resistance curve (aerodynamic drag + rolling resistance + gradient) determines the vehicle's `,e.jsx("strong",{children:"balancing speed"}),"  the maximum speed on level track."]}),e.jsx("h3",{children:"Adhesion Management"}),e.jsx("p",{children:"Maximising the tiny adhesion budget between steel wheel and steel rail is a constant battle:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Wheel Slide Protection (WSP):"})," The railway equivalent of ABS. Sensors monitor wheel speed; if a wheel decelerates too rapidly (indicating a slide), brake pressure to that axle is momentarily reduced to allow the wheel to recover grip. Essential for safe braking on contaminated rails."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Traction control:"})," Monitors wheel speed during acceleration. If a wheel spins faster than adjacent wheels (indicating loss of adhesion), torque to that motor is reduced until grip is restored."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Sanders:"})," Nozzles that deposit sand directly onto the rail ahead of the wheel to increase the friction coefficient. Activated automatically by WSP/traction control or manually by the driver. Critical in autumn leaf-fall conditions."]})]}),e.jsx("h3",{children:"Sanding Systems in Detail"}),e.jsx("p",{children:"Sanding is deceptively simple in concept but operationally critical. Modern sanding systems are far more sophisticated than the gravity-fed sandboxes of steam-era locomotives:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Pneumatic sanding:"})," Compressed air feeds sand from a hopper through nozzles positioned precisely 2030 mm above the rail, just ahead of the leading wheels. Sand delivery rate is typically 0.42.0 kg/minute per nozzle, depending on conditions. Too little sand and adhesion is not restored; too much and it can clog point mechanisms and insulate track circuits (preventing train detection  a safety-critical failure)."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Automatic activation:"})," Modern vehicles activate sanding automatically under WSP intervention, during emergency braking, and when traction control detects wheelslip. Some systems use predictive activation based on GPS location (known low-adhesion locations) or railhead condition sensors."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Sand capacity management:"})," A typical EMU carries 4080 kg of sand per vehicle. In severe autumn conditions (leaf mulch contamination), sand consumption can deplete supplies within a single shift, requiring mid-day depot visits for refilling  a serious operational disruption. Sand hoppers must be heated to prevent moisture ingress and clumping, which would block the delivery system precisely when it is most needed."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Rail-head treatment trains (RHTT):"}),' During the autumn leaf-fall season, dedicated trains spray high-pressure water jets (and sometimes Sandite  a gel containing sand and steel particles) onto the railhead to remove the compressed leaf mulch layer that causes catastrophic adhesion loss. This contamination layer (sometimes called "black ice on rails") can reduce the friction coefficient from a normal 0.30.4 down to 0.010.05, making braking almost impossible.']})]}),e.jsx("h3",{children:"Wheel Flats: Development, Detection, and Consequences"}),e.jsxs("p",{children:["A ",e.jsx("strong",{children:"wheel flat"})," develops when a wheel locks during braking and slides along the rail surface. The sliding contact grinds a flat spot into the circular tread. The severity depends on slide duration and speed  a brief slide at low speed might produce a minor flat of a few millimetres, while a prolonged slide at high speed can create a flat 5080 mm long and several millimetres deep. A flat wheel produces a periodic impact each revolution, with impact force proportional to the flat size, vehicle speed, and unsprung mass. These impacts:"]}),e.jsxs("ul",{children:[e.jsx("li",{children:"Damage the rail (creating dents that initiate rolling contact fatigue)"}),e.jsx("li",{children:"Accelerate bearing degradation"}),e.jsx("li",{children:"Cause unacceptable noise and vibration for passengers"}),e.jsx("li",{children:"Can fracture the wheel if the flat is severe enough (thermal damage and stress concentration)"})]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Wheel Impact Load Detectors (WILD)"})," are trackside monitoring systems that measure the dynamic vertical force each wheel applies to the rail as a train passes. Strain gauges or fibre-optic sensors mounted on the rail measure the force signature. A healthy wheel produces a smooth, sinusoidal force variation; a flat wheel produces a sharp impact spike once per revolution. WILD systems are deployed at strategic locations on the network and automatically flag vehicles with impact forces exceeding thresholds (typically three levels: alert, caution, and stop  requiring immediate withdrawal from service). Network Rail's GOTCHA system and the North American WILD network are examples. Real-time data feeds from WILD stations enable fleet managers to schedule re-profiling before a flat reaches the mandatory withdrawal limit."]}),e.jsx("h3",{children:"Pantograph-Catenary Dynamic Interaction"}),e.jsxs("p",{children:["For electric traction, the interface between the vehicle's ",e.jsx("strong",{children:"pantograph"})," and the overhead ",e.jsx("strong",{children:"catenary"})," (contact wire) is a critical dynamic system. The pantograph must maintain continuous electrical contact with the contact wire while accommodating height variations, wire sag between supports, changes at section breaks, and aerodynamic forces  all at speeds up to 300+ km/h. From the vehicle perspective:"]}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Contact force:"})," The pantograph must apply an upward static force (typically 70120 N) plus a dynamic component to follow the wire. Too little force and the pantograph lifts off, causing arcing that erodes both the carbon contact strip and the copper wire. Too much force and the wire is pushed up excessively, causing wave propagation in the catenary that can lead to dewirement (the wire being displaced from the pantograph head  a catastrophic event that can bring down the entire catenary span)."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Aerodynamic effects:"})," At high speed, aerodynamic forces on the pantograph (both lift and drag) become significant and speed-dependent. The pantograph must be designed so that the aerodynamic uplift supplements the static force without exceeding the maximum contact force limit. Some high-speed pantographs use active control (actuators that adjust contact force based on real-time measurement) to maintain optimal contact across the speed range."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Multiple pantograph operation:"}),' When two or more pantographs are raised on the same catenary span (as when two units are coupled), the trailing pantograph encounters the wave disturbance created by the leading pantograph. This "wake effect" limits the number of pantographs that can be raised simultaneously and may require reduced speed or increased pantograph spacing. EN 50367 specifies requirements for pantograph-catenary interaction performance.']})]}),e.jsxs(N,{type:"analogy",children:["The braking system is a ",e.jsx("strong",{children:"consensus algorithm"}),`. Multiple independent braking modes (friction, dynamic, magnetic) must agree on the correct deceleration and blend their contributions smoothly. If regenerative braking fails (the catenary cannot accept power), friction brakes compensate automatically  like a node failure in a Raft cluster where remaining nodes maintain consensus. The Westinghouse brake is the ultimate fail-safe: its default state is "brakes on," like a dead man's switch or a watchdog timer. If the supervising process (brake pipe pressure) stops, the system reverts to the safe state without any active intervention. The power electronics chain is a `,e.jsx("strong",{children:"data pipeline"}),": raw power (input) passes through a series of transformations (transformer, rectifier, DC link, inverter)  each stage reshaping the signal for the next consumer, just like an ETL pipeline transforming raw data into the format required by downstream services. SiC MOSFETs replacing silicon IGBTs is like upgrading from HDD to SSD  the interface is the same, but throughput increases while energy consumption drops."]}),e.jsx(ce,{goTo:h,items:[{target:"m0-l1",label:"Why Railways Work",desc:"Adhesion fundamentals that constrain everything in this lesson."},{target:"m1-l2",label:"Track Geometry",desc:"Cant and curvature create the forces that dynamics must handle."},{target:"m4-l1",label:"Block System & Signals",desc:"Braking curves are the foundation of signal spacing."},{target:"m5-l1",label:"Electrification Principles",desc:"Catenary design determines pantograph interaction constraints."}]})]})}const kp=[{text:"What is the Westinghouse principle?",options:["Brakes are applied by electrically energising the brake calipers","The continuous brake pipe is pressurised to hold brakes off; loss of pressure applies brakes automatically (fail-safe)","Each vehicle has an independent braking system with no train-wide connection","Braking force is proportional to train speed"],correct:1,explanation:"The Westinghouse automatic air brake keeps the brake pipe pressurised to hold brakes off. Any loss of pressure (including a train separation) automatically applies brakes throughout the train  an inherently fail-safe design."},{text:"What causes hunting oscillation in railway vehicles?",options:["Uneven ballast beneath the track","The conical wheel profile creates lateral instability at high speed as the wheelset oscillates between the rails","Crosswinds push the train side to side","Worn brake pads cause vibration"],correct:1,explanation:"Conical wheel treads provide self-centring at low speed, but above a critical speed the wheelset oscillates laterally with increasing amplitude. Suspension damping and bogie design are critical to control this."},{text:"What is the purpose of wheel slide protection (WSP)?",options:["To prevent wheels from spinning during acceleration","To prevent wheel lock-up during braking (like ABS in cars), maintaining adhesion and preventing flat spots on wheels","To protect the rail surface from excessive wear","To reduce noise during braking"],correct:1,explanation:"WSP modulates braking force to prevent wheels locking and sliding on the rail. Locked wheels lose adhesion and develop damaging flat spots that require expensive wheel re-profiling."},{text:"What is the difference between primary and secondary suspension?",options:["Primary is for passenger vehicles; secondary is for freight","Primary (axle-to-bogie) handles high-frequency vibrations; secondary (bogie-to-body) provides ride comfort for low-frequency movements","Primary uses springs; secondary uses dampers","Primary is active; secondary is passive"],correct:1,explanation:"Primary suspension sits between wheelset and bogie frame, absorbing high-frequency track irregularities. Secondary suspension sits between bogie and vehicle body, filtering low-frequency movements for passenger comfort."}];function Tp({goTo:h}){return e.jsxs(e.Fragment,{children:[e.jsxs("figure",{className:"lesson-figure",children:[e.jsx("div",{className:"cad-symbol",children:e.jsxs("svg",{viewBox:"0 0 280 100",style:{width:"100%",maxWidth:"280px"},children:[e.jsx("text",{x:"140",y:"14",fill:"var(--text-dim)",fontSize:"10",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"Wheel Profile"}),e.jsx("rect",{x:"60",y:"30",width:"120",height:"20",fill:"var(--text-dim)",stroke:"var(--text-bright)",strokeWidth:"1.5",rx:"2"}),e.jsx("rect",{x:"45",y:"28",width:"18",height:"24",fill:"var(--text-dim)",stroke:"var(--text-bright)",strokeWidth:"1.5",rx:"1"}),e.jsx("line",{x1:"65",y1:"48",x2:"175",y2:"52",stroke:"var(--accent)",strokeWidth:"1",strokeDasharray:"3,2"}),e.jsx("rect",{x:"55",y:"52",width:"130",height:"10",fill:"var(--border)",stroke:"var(--text-bright)",strokeWidth:"1",rx:"1"}),e.jsx("text",{x:"43",y:"22",fill:"var(--accent)",fontSize:"8",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"flange"}),e.jsx("text",{x:"120",y:"44",fill:"var(--text-bright)",fontSize:"8",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"tread"}),e.jsx("text",{x:"200",y:"58",fill:"var(--text-dim)",fontSize:"7",fontFamily:"JetBrains Mono, monospace",children:"rail"}),e.jsx("text",{x:"200",y:"45",fill:"var(--accent)",fontSize:"7",fontFamily:"JetBrains Mono, monospace",children:"1:20 taper"}),e.jsx("text",{x:"140",y:"82",fill:"var(--text-dim)",fontSize:"8",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"conical tread enables self-centering"})]})}),e.jsx("figcaption",{children:"Schematic: Wheel profile  conical tread (1:20 taper) and flange on rail head. The taper provides kinematic steering."})]}),e.jsx("h3",{children:"The Wheel Profile: Why Cones Steer"}),e.jsxs("p",{children:["A railway wheel is not cylindrical  its tread has a ",e.jsx("strong",{children:"conical taper"}),", typically between 1:20 and 1:40 (the tread slopes inward by 1 mm for every 20-40 mm of width). This simple geometric fact is what allows railway vehicles to steer without any steering mechanism. When a wheelset shifts laterally, the wheel on the side towards which it has shifted rolls on a larger diameter, while the opposite wheel rolls on a smaller diameter. Since both wheels are rigidly connected by the axle and rotate at the same angular velocity, the difference in rolling radius causes the wheelset to naturally steer back towards the centre  a self-centering behaviour called ",e.jsx("strong",{children:"kinematic steering"}),"."]}),e.jsx("p",{children:"The key parts of the wheel profile are:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Tread:"})," The conical running surface that contacts the rail head. Carries the vertical load."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Flange:"})," The raised inner edge that acts as a safety net, preventing derailment when the conical self-steering is insufficient (tight curves, switches). The flange should ",e.jsx("em",{children:"not"})," contact the rail in normal running  it only engages on sharp curves and through turnouts."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Flange root:"})," The transition zone between tread and flange. A critical area for stress concentration and wear."]})]}),e.jsx("h3",{children:"Wheel Profile Optimisation"}),e.jsx("p",{children:"The choice of wheel profile has profound effects on vehicle dynamics, wear rates, noise, and curving behaviour. Different profiles represent different engineering trade-offs:"}),e.jsx("div",{className:"table-wrapper",children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Profile"}),e.jsx("th",{children:"Origin"}),e.jsx("th",{children:"Equivalent Conicity"}),e.jsx("th",{children:"Characteristics"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{children:"S1002"}),e.jsx("td",{children:"UIC/Europe standard"}),e.jsx("td",{children:"Moderate (0.100.20 on 60E1 rail)"}),e.jsx("td",{children:'The "universal" European freight and passenger profile. Good all-round performance but relatively high conicity can cause hunting on high-speed stock. Widely used as a reference profile for standardisation.'})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"P8"}),e.jsx("td",{children:"UK (BR/RSSB)"}),e.jsx("td",{children:"Low-moderate (0.050.15 on CEN60E1)"}),e.jsx("td",{children:"Designed for UK conditions. Lower conicity than S1002 for better high-speed stability. Narrower flange tip to improve switch negotiation. The default profile for UK passenger stock."})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"P12"}),e.jsx("td",{children:"UK (freight)"}),e.jsx("td",{children:"Higher than P8"}),e.jsx("td",{children:"Designed for UK freight wagons. Thicker flange to accommodate higher wear rates and less frequent re-profiling on freight stock."})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"UIC-ORE S1002"}),e.jsx("td",{children:"UIC (worn)"}),e.jsx("td",{children:"Variable"}),e.jsx("td",{children:'A "pre-worn" variant designed to reach a stable worn shape quickly, reducing the initial period of rapid profile change after re-profiling.'})]})]})]})}),e.jsxs("p",{children:[e.jsx("strong",{children:"Equivalent conicity ()"}),' is the key parameter characterising the wheel-rail profile combination. It represents the effective taper of the contact geometry and determines the wavelength of the kinematic oscillation (sinusoidal movement) and the critical speed for hunting. Conicity depends on both the wheel and rail profiles and changes as they wear. EN 14363 specifies conicity ranges for vehicle acceptance testing: if conicity falls outside the acceptable range for the vehicle type, either the wheel or rail profile must be changed. Too low conicity means poor self-centering (the vehicle "wanders" laterally); too high conicity reduces the critical speed and may cause hunting within the operating speed range.']}),e.jsxs("figure",{className:"lesson-figure",children:[e.jsx("div",{className:"image-placeholder",children:e.jsx("p",{children:"IMAGE NEEDED: Close-up photo or diagram of a railway wheel profile showing the conical tread taper, flange, and flange root. Ideally cross-sectional view showing how the wheel sits on the rail with the contact geometry visible."})}),e.jsx("figcaption",{children:"Cross-section of a railway wheel on a rail  the conical tread taper enables self-steering without any steering mechanism."})]}),e.jsx("h3",{children:"The Rail Profile: Matching Partner"}),e.jsxs("p",{children:["The standard European rail profile is ",e.jsx("strong",{children:"60E1"})," (formerly UIC60), weighing 60 kg per metre. The rail head has a carefully designed radius (typically 300 mm crown radius) that must be compatible with the wheel profile to ensure the correct contact geometry. The ",e.jsx("strong",{children:"gauge face"}),"  the inner face of the rail head  is where the wheel flange makes contact on curves. The interaction between wheel profile and rail profile determines contact stresses, wear patterns, noise generation, and vehicle dynamic behaviour."]}),e.jsx("h3",{children:"The Contact Patch: Hertzian Contact Theory"}),e.jsx("div",{className:"highlight-box",children:e.jsxs("p",{children:["The contact area between a single wheel and the rail is approximately ",e.jsx("strong",{children:"1 cm"})," roughly the size of a postage stamp. A typical passenger vehicle has 8 wheels, meaning the entire weight of a 45-tonne vehicle (carrying 200 passengers) is transmitted to the rails through eight postage-stamp-sized patches. A fully loaded freight wagon at 25 tonnes per axle concentrates over 12 tonnes on each of these tiny areas, generating contact stresses exceeding ",e.jsx("strong",{children:"1,000 MPa"}),"  comparable to the yield strength of the steel itself. This extreme stress concentration drives wear, fatigue, and noise."]})}),e.jsxs("p",{children:["The contact mechanics are described by ",e.jsx("strong",{children:"Hertz theory"})," (for the normal contact  the vertical force and contact area shape) and ",e.jsx("strong",{children:"Kalker's theory"}),"(for the tangential contact  creep forces that provide traction, braking, and steering). The contact patch is elliptical, typically 1015 mm long and 812 mm wide. The pressure distribution is parabolic, peaking at the centre. The exact size and shape depend on the profiles of both wheel and rail, the normal load, and the material properties. Computer programs like CONTACT (Kalker's program) and FASTSIM are used to calculate contact forces for vehicle dynamics simulation."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Hertzian contact"}),` in more detail: Heinrich Hertz's 1882 theory describes the elastic contact between two curved bodies. For the wheel-rail case, the two "bodies" are the wheel tread (with its transverse and longitudinal radii of curvature) and the rail head (with its crown radius and effectively infinite longitudinal radius). The theory predicts:`]}),e.jsxs("ul",{children:[e.jsx("li",{children:"The contact patch is an ellipse with semi-axes a (in the rolling direction) and b (transverse)."}),e.jsx("li",{children:"The patch dimensions scale as the cube root of the normal force: doubling the force increases the contact area by only 26% (2^(1/3)  1.26), so the peak pressure increases significantly with load."}),e.jsx("li",{children:"The maximum contact pressure (at the centre of the ellipse) is p = (3N)/(2ab), where N is the normal force."}),e.jsx("li",{children:"The subsurface stress field has a maximum shear stress at a depth of approximately 0.5b below the surface  this is where fatigue cracks typically initiate."})]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Kalker's theory"}),` extends Hertz to handle the tangential (shear) forces that arise from "creep"  the tiny relative sliding between wheel and rail surfaces that is essential for traction, braking, and curving. Creep is not slipping in the conventional sense; it is an elastic phenomenon where part of the contact patch adheres while the rest slides. The ratio of tangential force to normal force increases with creep (the relative velocity difference divided by the rolling velocity) up to a saturation point, beyond which gross sliding occurs. Kalker's CONTACT program provides an exact numerical solution; his simplified algorithm FASTSIM (used in most real-time vehicle dynamics simulations) approximates the solution with high accuracy at a fraction of the computational cost.`]}),e.jsx("h3",{children:"Wear Patterns and Maintenance"}),e.jsx("p",{children:"The relentless contact between wheel and rail produces characteristic wear patterns:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Hollow wear (wheels):"})," The tread wears into a concave profile over time, changing the contact geometry, worsening dynamic behaviour, and eventually requiring re-profiling. Wheel lathes cut the tread back to the design profile  a costly but essential maintenance activity."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Gauge-corner wear (rails):"})," On curves, the wheel flange contacts the gauge corner of the high rail, wearing it away and potentially creating a dangerously thin rail head. Rail grinding restores the profile and removes surface-initiated fatigue cracks."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Rolling Contact Fatigue (RCF):"})," Repeated high stresses cause subsurface cracks (head checking, squats, shells) that can propagate to rail breaks if not managed. A balance must be struck between wear (which removes cracked material) and fatigue (which creates it)."]})]}),e.jsx("h3",{children:"Rail Grinding Strategies"}),e.jsx("p",{children:"Rail grinding is one of the most important maintenance activities for managing the wheel-rail interface. Specialised grinding trains carry rotating grinding stones that reprofile the rail head to a target cross-section. There are fundamentally different strategies:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Preventive grinding:"}),` Regular, light grinding passes (removing 0.10.3 mm per pass) at relatively frequent intervals (annually or bi-annually) to maintain the rail profile close to the design shape and to remove surface-initiated fatigue cracks before they propagate. This "little and often" approach is widely considered best practice because it keeps contact geometry optimal, controls rolling contact fatigue, and maximises rail life. The total metal removed over the rail's life is less than with corrective grinding, because the rail is never allowed to deteriorate to a point where heavy metal removal is needed.`]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Corrective grinding:"})," Heavy grinding (removing 0.52.0 mm per pass, multiple passes) to restore a severely worn or damaged rail profile. Required when preventive grinding has not been performed or when defects have developed. More metal is removed, more grinding passes are required (consuming more possessions and more grinding stone life), and the rail's total service life is reduced compared to a preventive regime."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Asymmetric rail profiles:"})," On curves, the high rail and low rail experience very different contact conditions. Modern grinding practice often specifies",e.jsx("strong",{children:"different target profiles"})," for the high and low rails to optimise the contact geometry for curving. For example, the high rail may be ground with a wider gauge-face relief to reduce flange contact forces, while the low rail may receive a profile that steers the contact patch towards the centre of the rail head. This approach can reduce wear rates, noise, and RCF simultaneously but requires careful profile design and quality control during grinding."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Acoustic grinding:"})," A variant of preventive grinding specifically targeting the very short-wavelength roughness (10100 mm) that is responsible for rolling noise. By smoothing the rail to a roughness level below 5 dB re 1 m (measured as the roughness level spectrum to EN 15610), rolling noise can be reduced by 38 dB  a significant improvement given that 3 dB represents a halving of acoustic power."]})]}),e.jsx("h3",{children:"Wheel and Rail Defect Types"}),e.jsx("p",{children:"Beyond general wear patterns, specific defect types require monitoring and intervention:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Wheel flats:"})," Caused by wheel slide during braking  the locked wheel slides along the rail, grinding a flat spot. Creates a periodic impact noise and can damage the rail. Wheel Slide Protection (WSP) systems prevent most flats, but contaminated rails can still cause them. Wheel flats exceeding 4060 mm in length (depending on the standard) require the vehicle to be taken out of service for re-profiling."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Head checking (gauge corner cracking):"})," A family of fine surface cracks on the rail head, angled at 1030 to the running direction. Caused by repeated shearing forces at the contact patch. If not removed by grinding, cracks can propagate downward and lead to rail breaks."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Squats:"})," Dark depressions on the rail head with associated subsurface cracking. A form of rolling contact fatigue that develops where surface irregularities (dents, welds) create stress concentrations. Advanced squats can cause sudden rail breaks."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Corrugation:"}),' Periodic undulations of the rail surface (wavelength typically 3080 mm for "short pitch" or 150450 mm for "long pitch"). Causes excessive noise and vibration. Multiple mechanisms including differential wear, plastic flow, and dynamic instabilities. Removed by rail grinding.']}),e.jsxs("li",{children:[e.jsx("strong",{children:"Shelling:"})," Subsurface fatigue cracking that causes pieces of the rail head to break away, leaving a rough, pitted surface. Occurs in the gauge corner of high rails on curves."]})]}),e.jsx("h3",{children:"Flange Climb Derailment: The Nadal Criterion"}),e.jsxs("p",{children:["One of the most critical safety concerns at the wheel-rail interface is ",e.jsx("strong",{children:"flange climb derailment"}),"  a mechanism where the wheel flange rides up and over the rail head, causing the vehicle to leave the track. This typically occurs on sharp curves, particularly through turnouts and crossings, when lateral forces are high and vertical load is low."]}),e.jsxs("p",{children:["The ",e.jsx("strong",{children:"Nadal criterion"})," (published by M.J. Nadal in 1908) establishes the limiting ratio of lateral force (Y) to vertical force (Q) at the wheel-rail contact beyond which flange climb can occur:"]}),e.jsx("div",{className:"highlight-box",children:e.jsxs("p",{children:[e.jsx("strong",{children:"Y/Q  tan(  arctan ) / (1 +  tan )"}),e.jsx("br",{}),"where  is the flange angle (typically 6872 for modern profiles) and  is the friction coefficient at the flange-rail contact (typically 0.30.5). For typical values, the critical Y/Q ratio is approximately ",e.jsx("strong",{children:"0.8"}),". If Y/Q exceeds this limit for a sufficient duration and distance, the flange will climb over the rail."]})}),e.jsx("p",{children:'The Nadal criterion is conservative because it assumes steady-state conditions, whereas real flange climb requires the high Y/Q ratio to be sustained over a sufficient distance (the "climb distance"  typically at least 2 metres). Nonetheless, it remains the fundamental safety criterion used in vehicle acceptance testing (EN 14363) and operational monitoring. Factors that increase the risk of flange climb include:'}),e.jsxs("ul",{children:[e.jsx("li",{children:"Low vertical wheel load (unloaded or lightly loaded vehicle, or dynamic load reduction on uneven track)"}),e.jsx("li",{children:"High lateral force (tight curves, misaligned track, switch negotiation)"}),e.jsx("li",{children:"High friction coefficient at the flange contact (dry conditions, contaminated rail)"}),e.jsx("li",{children:"Worn wheel profiles with low flange angle"}),e.jsx("li",{children:"Stiff bogie designs with poor curving capability"})]}),e.jsx("p",{children:"Mitigation strategies include maintaining adequate flange angles through re-profiling, gauge-face lubrication to reduce flange friction, track geometry maintenance to limit lateral forces, and bogie designs with radial steering (allowing the wheelsets to adopt a more nearly radial position in curves, reducing the angle of attack and hence the lateral flange force)."}),e.jsx("h3",{children:"Noise: The Unavoidable Consequence"}),e.jsx("p",{children:"The wheel-rail interface is the dominant source of railway noise:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Rolling noise:"})," Generated by surface roughness on both wheel and rail. The rougher the surfaces, the louder the noise. Acoustic rail grinding smooths the rail to reduce roughness and can cut rolling noise by 3-5 dB."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Curve squeal:"})," A high-pitched tonal noise caused by the wheel flange sliding against the gauge face of the rail on tight curves. Mitigation includes friction modifiers (top-of-rail lubrication), wheel dampers, and flange lubrication."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Impact noise:"})," Generated at rail joints, switches, and crossings where the wheel encounters a discontinuity. Swing-nose crossings and continuously welded rail reduce this significantly."]})]}),e.jsxs("p",{children:["Additional mitigation measures include ",e.jsx("strong",{children:"rail dampers"})," (tuned absorbers clamped to the rail web that reduce radiation from the rail), ",e.jsx("strong",{children:"wheel dampers"}),"(constrained-layer damping rings fitted to the wheel web), and ",e.jsx("strong",{children:"noise barriers"}),"alongside the track."]}),e.jsx("h3",{children:"EU Noise TSI and Freight Wagon Retrofit"}),e.jsxs("p",{children:["The ",e.jsx("strong",{children:"EU Noise TSI"})," (Technical Specification for Interoperability relating to noise) sets mandatory pass-by noise limits for new rolling stock, measured at 25 metres from the track centreline at a reference speed. For freight wagons, the dominant noise mitigation measure has been the replacement of ",e.jsx("strong",{children:"cast-iron brake blocks"})," with",e.jsx("strong",{children:" composite (K-block or LL-block) brake blocks"}),". Cast-iron blocks roughen the wheel tread through wear, creating a corrugated surface that radiates significantly more noise. Composite blocks produce a smooth tread, reducing rolling noise by approximately 810 dB  a dramatic reduction (10 dB represents a halving of perceived loudness)."]}),e.jsxs("p",{children:["The retrofit of Europe's approximately 600,000 freight wagons from cast-iron to composite brake blocks has been one of the largest noise reduction programmes in transport history. Some countries (Switzerland, Germany, the Netherlands) have implemented noise-differentiated track access charges  ",e.jsx("strong",{children:"charging higher fees for noisy wagons"})," to incentivise the retrofit. Switzerland went further and banned wagons with cast-iron brake blocks on its network from 2020. The programme has reduced rail freight noise levels along heavily trafficked corridors by 510 dB, benefiting millions of residents alongside railway lines."]}),e.jsx("h3",{children:"Loading Gauge, Structure Gauge, and Kinematic Envelope"}),e.jsx("p",{children:"Three nested envelopes define what can physically fit on the railway:"}),e.jsx("div",{className:"table-wrapper",children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Envelope"}),e.jsx("th",{children:"Definition"}),e.jsx("th",{children:"Controlled By"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{children:"Static vehicle outline"}),e.jsx("td",{children:"The physical cross-section of the vehicle at rest, centred on track"}),e.jsx("td",{children:"Vehicle manufacturer"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Kinematic envelope"}),e.jsx("td",{children:"Static outline + dynamic movements (suspension deflection, body roll, lateral play) + tolerances"}),e.jsx("td",{children:"Vehicle + track interaction"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Structure gauge"}),e.jsx("td",{children:"The minimum clearance all infrastructure must provide, always larger than the kinematic envelope"}),e.jsx("td",{children:"Infrastructure manager"})]})]})]})}),e.jsx("p",{children:"The UK's tight loading gauge (a legacy of the Victorian era when tunnels and bridges were built to just clear the trains of the day) is one of the most persistent constraints in British railway engineering. Standard UK gauge profiles (W6a, W7, W8, W9, W10, W12) define progressively larger envelopes. Clearing a route for a larger gauge means surveying every bridge, tunnel, platform, signal gantry, and piece of lineside equipment and modifying anything that infringes  a process costing hundreds of millions of pounds per route."}),e.jsx("h3",{children:"Gauge Clearance Process"}),e.jsxs("p",{children:["When a new or modified vehicle is introduced, or when infrastructure changes, a ",e.jsx("strong",{children:"gauge clearance"})," assessment is required. The vehicle's static outline is calculated, then all dynamic movements are added: suspension deflections, body roll on canted track, lateral displacement from track irregularities, and manufacturing tolerances. The result is the kinematic envelope, which must fit within the structure gauge at every point on the route. Modern gauge clearance uses 3D digital models of both the vehicle and the infrastructure, but on older routes, physical measurement trains (New Measurement Train, track recording vehicles) are still used to verify clearances."]}),e.jsx("h3",{children:"Interoperability: Crossing Borders"}),e.jsx("p",{children:"Cross-border rail operation faces formidable technical barriers: different track gauges, electrification voltages, signalling systems, and loading gauges. Solutions include:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Gauge-changing bogies:"})," The Talgo system (used on Spanish trains crossing to France) automatically adjusts wheelset spacing as the train passes through a gauge-change facility at walking speed. The wheels are unlocked, spread or narrowed by guide rails, and re-locked  all without stopping."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Multi-system locomotives:"})," Locomotives like the Siemens Vectron or Alstom Prima can operate under multiple voltages and frequencies (1.5 kV DC, 3 kV DC, 15 kV 16.7 Hz AC, 25 kV 50 Hz AC) and switch between them on the fly. They also carry multiple signalling systems (ETCS + national systems)."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"TSI compliance:"})," The EU's Technical Specifications for Interoperability define common standards for rolling stock, infrastructure, signalling, noise, accessibility, and safety in tunnels, aiming to create a single European railway area where any compliant vehicle can operate on any compliant route."]})]}),e.jsx("h3",{children:"Gauge Conversion Projects"}),e.jsx("p",{children:"Some of the world's most ambitious railway engineering projects involve converting entire networks from one track gauge to another:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Spain:"})," The Spanish national network was built to Iberian gauge (1,668 mm), incompatible with the standard gauge (1,435 mm) used in the rest of Europe. Spain's high-speed network was built to standard gauge from the outset, creating a dual-gauge country. Talgo's gauge-changing technology allows passenger trains to transition between gauges seamlessly. Freight interoperability remains a challenge  a third rail (allowing both gauges on the same track) has been installed on some corridors, and full gauge conversion of the conventional network is under long-term consideration."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Baltic states (Rail Baltica):"})," Estonia, Latvia, and Lithuania inherited Russian broad gauge (1,520 mm) from the Soviet era. The Rail Baltica project is constructing a new standard-gauge (1,435 mm) high-speed line connecting Tallinn to the Polish border, integrating the Baltic states into the European standard-gauge network. This is a greenfield new-build rather than a conversion, but it will transform the region's rail connectivity with the rest of Europe."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Australia:"})," Australia historically had three different gauges across its states (1,600 mm in Victoria, 1,435 mm in New South Wales, 1,067 mm in Queensland), requiring passengers and freight to change trains at state borders. Standardisation to 1,435 mm has been progressively implemented on key interstate corridors, though substantial sections of narrow gauge remain in Queensland and Western Australia."]})]}),e.jsx("h3",{children:"Vehicle Dynamics Simulation Tools"}),e.jsx("p",{children:"Modern rolling stock design and certification relies heavily on multi-body dynamics (MBD) simulation software that models the complete vehicle as a system of interconnected rigid and flexible bodies moving over a track with realistic geometry and irregularities:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"VAMPIRE (Vehicle dynAMic Performance Investigation Running on a computEr):"}),"Developed by British Rail Research, now maintained by DeltaRail/Resonate. The dominant tool in the UK for vehicle dynamics assessment and acceptance testing. VAMPIRE models the vehicle as a multi-body system with detailed wheel-rail contact geometry, suspension elements, and track irregularity inputs. It is used to demonstrate compliance with EN 14363 (running behaviour) and the Nadal criterion (derailment safety), and to calculate forces for fatigue assessment of track components. Network Rail requires VAMPIRE assessments for vehicle acceptance on the UK network."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"SIMPACK:"})," A commercial MBD simulation package from Dassault Systemes, widely used internationally. SIMPACK can model highly complex vehicle configurations including flexible bodies (for carbody structural vibration), detailed suspension models (non-linear springs, hydraulic dampers with temperature dependence), and multiple wheel-rail contact algorithms. It integrates with FEA software for stress analysis and with control system tools (Simulink) for modelling active suspension and traction/braking control."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"VI-Rail (VI-Grade):"})," Another widely used commercial MBD tool for railway vehicle dynamics, based on the Adams solver. Used by manufacturers including Alstom and Siemens for vehicle design optimisation."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"GENSYS:"})," A Swedish MBD code developed by DEsolver, particularly strong in wheel-rail contact modelling and used extensively in Scandinavian markets."]})]}),e.jsx("p",{children:"These simulation tools are essential for the vehicle approval process because physical testing of every operating scenario is prohibitively expensive and time-consuming. Simulations model the vehicle response to thousands of track sections with varying geometry, irregularities, and speed, predicting forces, accelerations, and safety metrics that are then validated against a targeted set of physical track tests. The combination of simulation and selective physical testing is codified in EN 14363, which defines when simulation can substitute for testing and the validation requirements."}),e.jsx("h3",{children:"Track Access Charges and Vehicle Characteristics"}),e.jsxs("p",{children:["The forces a vehicle imposes on the track infrastructure are not merely a technical concern  they have direct financial consequences through ",e.jsx("strong",{children:"track access charges"}),". Infrastructure managers (like Network Rail in the UK) charge train operators for the damage their vehicles cause to the track. The charge structure reflects the key vehicle characteristics that drive infrastructure wear:"]}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Axle load:"})," The single most important factor. Track damage (rail wear, ballast degradation, formation stress) increases approximately with the ",e.jsx("strong",{children:"fourth power of axle load"}),"  doubling axle load increases damage by roughly 16 times. This is why a 25-tonne-per-axle freight wagon causes dramatically more damage than a 7-tonne-per-axle passenger coach, even per tonne of payload."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Unsprung mass:"})," The mass of components below the primary suspension (wheelsets, axleboxes, traction motors on axle-hung designs, brake discs). High unsprung mass amplifies dynamic forces at rail joints, switches, and track irregularities. Reducing unsprung mass (e.g. by using frame-mounted rather than axle-hung motors, or by using lighter wheel designs) reduces track damage and is reflected in lower variable charges on some networks."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Speed:"})," Higher speed increases dynamic forces and aerodynamic effects (ballast disturbance from air pressure waves). Track damage generally increases with speed, reflected in distance-based charges that may vary by speed band."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Suspension characteristics:"}),' Vehicles with poor curving behaviour (stiff bogies, high angle of attack) impose higher lateral forces on curves, accelerating gauge-face wear. Some charging frameworks include a "vehicle track interaction" factor based on curving performance.']}),e.jsxs("li",{children:[e.jsx("strong",{children:"Brake type:"})," As noted in the noise section, cast-iron tread brakes roughen the wheel, which in turn roughens the rail through the dynamic interaction. Networks with noise-differentiated charging penalise vehicles with cast-iron brake blocks."]})]}),e.jsx(N,{type:"info",label:"Key Principle",children:"Network Rail's Variable Usage Charge (VUC) is the primary mechanism for recovering infrastructure wear costs from train operators. The charge per vehicle-mile varies by vehicle type, reflecting the damage relationship. A loaded freight wagon at 25.5 tonnes per axle may pay 1020 times the per-mile charge of a passenger EMU coach at 10 tonnes per axle. This creates a direct financial incentive for freight operators to invest in track-friendly vehicle designs (lower axle loads, improved suspension, composite brake blocks)  aligning commercial incentives with infrastructure sustainability."}),e.jsxs(N,{type:"analogy",children:["The wheel-rail contact patch is like a ",e.jsx("strong",{children:"network socket"}),"  incredibly small but carrying enormous loads. All the data (forces) between vehicle and infrastructure passes through this tiny interface. Hertzian contact theory is the ",e.jsx("strong",{children:"protocol specification"}),"for this socket  it defines the relationship between the input (normal force, geometry) and the output (contact area, pressure distribution), just as TCP defines the relationship between data payload and packet structure. Kalker's creep theory adds the ",e.jsx("strong",{children:"flow control layer"}),", governing how tangential forces (throughput) relate to creep (congestion). The loading gauge is a ",e.jsx("strong",{children:"strict API schema"}),". If your vehicle (the request payload) exceeds the structure gauge (the server's accepted schema), it physically cannot pass  it hits a bridge or platform. Unlike software, there is no graceful degradation, no 413 Payload Too Large response. It is a bridge strike: violent, expensive, and potentially fatal. This is why gauge clearance is treated with the same rigour as API contract testing in safety-critical systems. Track access charges are the",e.jsx("strong",{children:"cloud computing bill"}),"  heavier resource usage (higher axle loads, worse suspension) generates proportionally higher charges, incentivising efficient resource consumption."]}),e.jsx(ce,{goTo:h,items:[{target:"m1-l1",label:"Track Structure",desc:"Rail profiles and how the track layer interfaces with wheels."},{target:"m3-l3",label:"Stations & Clearances",desc:"Structure gauge and loading gauge clearance envelopes in detail."},{target:"m5-l1",label:"Electrification Principles",desc:"Pantograph height and gauge constraints on overhead line equipment."},{target:"m1-l2",label:"Track Geometry",desc:"Curvature and cant determining the forces at the wheel-rail contact."}]})]})}const Sp=[{text:"What is the approximate size of the contact patch between a wheel and rail?",options:["About 100 cm  the size of a playing card","About 10 cm  the size of a coin","About 1 cm  the size of a postage stamp","About 0.1 cm  the size of a pinhead"],correct:2,explanation:"The contact patch is only about 1 cm  roughly the size of a small coin or postage stamp. This tiny area carries the entire load of the vehicle, creating very high contact stresses."},{text:"Why does the railway wheel have a conical tread profile?",options:["To reduce contact area and minimise friction","The cone enables self-centring/self-steering: the wheel traces a larger radius on the outer rail on curves, naturally guiding the wheelset","To allow the wheel to run on different gauge tracks","To improve braking performance on wet rails"],correct:1,explanation:"The conical profile means a lateral shift changes the effective rolling radius on each wheel. On a curve, the outer wheel runs on a larger diameter, covering more distance per revolution  naturally steering the wheelset around the curve."},{text:"What is the difference between loading gauge and structure gauge?",options:["They are interchangeable terms","Loading gauge is the maximum vehicle envelope (including dynamics); structure gauge is the minimum clearance infrastructure must provide. Structure gauge must be larger than loading gauge.","Loading gauge applies only to freight; structure gauge to passengers","Loading gauge is a European standard; structure gauge is a UK standard"],correct:1,explanation:"Loading gauge defines the maximum space a vehicle can occupy including dynamic movements. Structure gauge defines the minimum clearance that infrastructure (bridges, tunnels, platforms) must provide. The difference is the safety margin."},{text:"What is gauge-corner cracking?",options:["Cracking in the rail web caused by temperature changes","Fatigue cracking on the rail head gauge corner caused by repeated wheel contact, which can lead to rail breaks if undetected","Cracks in the wheel flange from hitting the rail gauge face","Damage to check rails in turnouts"],correct:1,explanation:"Gauge-corner cracking (a type of rolling contact fatigue) develops where the wheel contacts the gauge corner of the rail head. Cracks propagate downward and can cause sudden rail fractures if not detected and treated by grinding or re-railing."}];function Ap(h,y){switch(h){case"m6-l1":return e.jsx(bp,{goTo:y});case"m6-l2":return e.jsx(wp,{goTo:y});case"m6-l3":return e.jsx(Tp,{goTo:y});default:return null}}const Cp={"m6-l1":jp,"m6-l2":kp,"m6-l3":Sp};function Mp({goTo:h}){return e.jsxs(e.Fragment,{children:[e.jsxs("figure",{className:"lesson-figure",children:[e.jsx("div",{className:"cad-symbol",children:e.jsxs("svg",{viewBox:"0 0 320 90",style:{width:"100%",maxWidth:"320px"},children:[e.jsx("text",{x:"160",y:"14",fill:"var(--text-dim)",fontSize:"10",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"GSM-R Network"}),e.jsx("rect",{x:"10",y:"30",width:"50",height:"16",fill:"var(--text-dim)",stroke:"var(--text-bright)",strokeWidth:"1",rx:"2"}),e.jsx("text",{x:"35",y:"41",fill:"var(--bg)",fontSize:"7",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"Train"}),e.jsx("line",{x1:"60",y1:"38",x2:"90",y2:"38",stroke:"var(--blue)",strokeWidth:"1",strokeDasharray:"3,2"}),e.jsx("text",{x:"75",y:"32",fill:"var(--blue)",fontSize:"6",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"radio"}),e.jsx("rect",{x:"90",y:"30",width:"35",height:"16",fill:"var(--bg-hover)",stroke:"var(--blue)",strokeWidth:"1",rx:"2"}),e.jsx("text",{x:"107",y:"41",fill:"var(--blue)",fontSize:"7",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"BTS"}),e.jsx("line",{x1:"125",y1:"38",x2:"140",y2:"38",stroke:"var(--text-dim)",strokeWidth:"1"}),e.jsx("rect",{x:"140",y:"30",width:"35",height:"16",fill:"var(--bg-hover)",stroke:"var(--blue)",strokeWidth:"1",rx:"2"}),e.jsx("text",{x:"157",y:"41",fill:"var(--blue)",fontSize:"7",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"BSC"}),e.jsx("line",{x1:"175",y1:"38",x2:"190",y2:"38",stroke:"var(--text-dim)",strokeWidth:"1"}),e.jsx("rect",{x:"190",y:"30",width:"35",height:"16",fill:"var(--bg-hover)",stroke:"var(--accent)",strokeWidth:"1",rx:"2"}),e.jsx("text",{x:"207",y:"41",fill:"var(--accent)",fontSize:"7",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"MSC"}),e.jsx("line",{x1:"225",y1:"38",x2:"240",y2:"38",stroke:"var(--text-dim)",strokeWidth:"1"}),e.jsx("rect",{x:"240",y:"30",width:"65",height:"16",fill:"var(--bg-hover)",stroke:"var(--accent-secondary)",strokeWidth:"1",rx:"2"}),e.jsx("text",{x:"272",y:"41",fill:"var(--accent-secondary)",fontSize:"7",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"Control Centre"}),e.jsx("line",{x1:"90",y1:"55",x2:"305",y2:"55",stroke:"var(--accent-secondary)",strokeWidth:"1.5"}),e.jsx("text",{x:"200",y:"68",fill:"var(--accent-secondary)",fontSize:"7",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"fibre backbone"})]})}),e.jsx("figcaption",{children:"Schematic: GSM-R  cab radio connects via base stations (BTS) and controllers (BSC/MSC) to control centres over fibre."})]}),e.jsx("h3",{children:"A Brief History of Railway Communications"}),e.jsxs("p",{children:["Communication has been essential to railway safety since the very earliest lines. The first railways had no means of communication between stations at all  policemen stood at intervals along the line and used hand signals (flags by day, oil lamps by night) to indicate whether the line ahead was clear. The ",e.jsx("strong",{children:"electric telegraph"}),", adopted by the Great Western Railway in the 1830s, was the first transformative technology: it allowed signalmen at adjacent stations to exchange messages about train movements faster than the trains themselves could travel. The block signalling system described in Module 4 was built entirely on the telegraph as its communication bearer."]}),e.jsxs("p",{children:["As railways grew more complex, so did their communication needs. ",e.jsx("strong",{children:"Lineside telephones"}),"were installed at signals and in tunnels so that drivers of failed trains could contact the signaller. These were typically connected to omnibus circuits  a single pair of wires shared by multiple phones along a section of route, with selective ringing to call specific locations. Internal telephone networks connected signal boxes, stations, depots, and control offices using dedicated railway switchboard exchanges, entirely separate from the public telephone network."]}),e.jsxs("p",{children:["The introduction of ",e.jsx("strong",{children:"cab radio"})," from the 1960s onward was a major leap. In the UK, the National Radio Network (NRN) provided open-channel VHF radio for general communication, while",e.jsx("strong",{children:"Cab Secure Radio (CSR)"}),", introduced in the 1980s, gave each driver a direct, selectable speech link to the signaller controlling their section. CSR operated in the UHF band and used a system of shore-based base stations connected to the signalling control point. However, these analogue systems were proprietary, offered no data capability, provided poor audio quality in many areas, and were specific to individual countries  a train crossing from France into Belgium had to switch to entirely different radio equipment."]}),e.jsxs("figure",{className:"lesson-figure",children:[e.jsx("div",{className:"image-placeholder",children:e.jsx("p",{children:"IMAGE NEEDED: Photo of a GSM-R radio mast or base station alongside a railway line, or a photo of a cab radio unit inside a train driver's cab showing the GSM-R handset/display."})}),e.jsx("figcaption",{children:"GSM-R infrastructure  dedicated railway radio providing safety-critical voice and data communication along the track corridor."})]}),e.jsx("h3",{children:"The Birth of GSM-R"}),e.jsxs("p",{children:["The transition from analogue to digital radio was driven by two forces: the need for interoperable cross-border communication in Europe, and the requirement for a reliable data bearer to support ETCS (European Train Control System). Public mobile networks like GSM were considered but rejected because railways need guaranteed coverage along track corridors (including tunnels and cuttings), prioritised access during emergencies, and specialised features that commercial networks do not provide. The result was ",e.jsx("strong",{children:"GSM-R"}),"  a dedicated railway variant of the GSM standard, specified by the ",e.jsx("strong",{children:"EIRENE"}),"(European Integrated Railway Radio Enhanced Network) project under UIC coordination."]}),e.jsxs("p",{children:["The EIRENE specifications comprise two key documents: the ",e.jsx("strong",{children:"Functional Requirements Specification (FRS)"}),", which defines what the system must do from an operational perspective, and the ",e.jsx("strong",{children:"System Requirements Specification (SRS)"}),", which defines the technical implementation. Together these mandate the railway-specific features that distinguish GSM-R from commercial GSM, while keeping the underlying technology standard enough to leverage commercial GSM equipment and chipsets."]}),e.jsx("h3",{children:"GSM-R Architecture and Frequency Planning"}),e.jsxs("p",{children:[e.jsx("strong",{children:"GSM-R (Global System for Mobile Communications  Railway)"})," operates in dedicated frequency bands (876880 MHz uplink, 921925 MHz downlink) reserved exclusively for railway use across Europe. This is a narrow allocation  just 4 MHz in each direction, providing 19 ARFCN (Absolute Radio Frequency Channel Number) carriers. The architecture follows the standard GSM model  Base Transceiver Stations (BTS) along the track connected via a Base Station Controller (BSC) to a Mobile Switching Centre (MSC)  but adds railway-specific functionality."]}),e.jsxs("p",{children:["Cell planning for GSM-R is fundamentally different from commercial mobile networks. Commercial networks optimise for ",e.jsx("strong",{children:"area coverage"}),"  serving populations distributed across a two-dimensional plane. GSM-R optimises for ",e.jsx("strong",{children:"linear corridor coverage"}),"  serving trains moving along a one-dimensional track. This means base stations are placed along the trackside, typically every 37 km in open terrain, with directional antennas aimed along the track in both directions. The coverage pattern is a long, narrow strip rather than the hexagonal cells of commercial planning."]}),e.jsx("div",{className:"highlight-box",children:e.jsxs("p",{children:["GSM-R coverage requirements mandate a minimum field strength of ",e.jsx("strong",{children:"-92 dBm"})," at the train antenna for 95% of the time and 95% of locations along the track. In practice, network planners target significantly better coverage to ensure reliability. Coverage must be continuous  there must be ",e.jsx("strong",{children:"no gaps"}),", even in cuttings, on embankments, in tunnels, on bridges, or at stations."]})}),e.jsx("h3",{children:"Coverage in Challenging Environments"}),e.jsx("p",{children:"Providing seamless coverage in tunnels is one of the most demanding aspects of GSM-R deployment. Tunnels block radio signals from external base stations, requiring dedicated in-tunnel coverage solutions. Three approaches are commonly used:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Leaky feeder (radiating cable):"})," A coaxial cable with slots cut in its outer conductor, strung along the tunnel wall. Radio energy leaks continuously from the cable, providing uniform coverage throughout the tunnel. This is the most common solution for railway tunnels and is also used in deep cuttings."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Distributed antenna systems (DAS):"})," Discrete antennas spaced along the tunnel, fed by fibre optic links from a base station at the tunnel portal. Suitable for longer tunnels where leaky feeder attenuation would be excessive."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Dedicated tunnel base stations:"})," Small BTS units installed in equipment niches within the tunnel, connected to the core network by fibre. Used in very long tunnels (such as the Channel Tunnel or base tunnels in the Alps)."]})]}),e.jsxs("p",{children:["Adjacent cells must have sufficient ",e.jsx("strong",{children:"overlap"}),"  typically 200500 metres of dual coverage  to ensure reliable handover. This overlap distance must account for the maximum train speed: at 300 km/h, a train covers 500 metres in just 6 seconds, so the handover procedure must complete well within that window."]}),e.jsx("h3",{children:"GSM-R Features for Railway Operations"}),e.jsx("p",{children:"GSM-R provides several features that distinguish it from commercial mobile networks:"}),e.jsx("div",{className:"table-wrapper",children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Feature"}),e.jsx("th",{children:"Description"}),e.jsx("th",{children:"Operational Purpose"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Railway Emergency Call (REC)"})}),e.jsx("td",{children:"High-priority group call that pre-empts all other traffic and connects immediately to all parties in the affected area"}),e.jsx("td",{children:"Broadcast emergency warnings (e.g., obstruction on track, runaway vehicle) to all trains and the signaller simultaneously"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Voice Group Call Service (VGCS)"})}),e.jsx("td",{children:"One signaller can speak to all trains in a defined group call area"}),e.jsx("td",{children:"Broadcasting speed restrictions, operational instructions, or coordinating during degraded working"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Voice Broadcast Service (VBS)"})}),e.jsx("td",{children:"One-to-many announcement  listeners cannot respond"}),e.jsx("td",{children:"Mass notifications where responses are not needed"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Functional Addressing"})}),e.jsx("td",{children:"Calls routed by operational identity (train running number, controller role) rather than physical phone number"}),e.jsx("td",{children:'Call "the 14:30 Edinburgh" regardless of which handset or cab is running that service'})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Location-Dependent Addressing"})}),e.jsx("td",{children:"Calls routed based on the train's current geographic location"}),e.jsx("td",{children:'A driver pressing "call signaller" is automatically connected to whichever signaller controls the area they are currently in'})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"enhanced Multi-Level Precedence and Pre-emption (eMLPP)"})}),e.jsx("td",{children:"Priority system with multiple levels  emergency calls pre-empt lower-priority traffic"}),e.jsx("td",{children:"Ensures safety-critical calls always get through, even when the network is busy"})]})]})]})}),e.jsx("h3",{children:"Enhanced Railway Emergency Call (eREC)"}),e.jsxs("p",{children:["The Railway Emergency Call is arguably the most safety-critical feature of GSM-R. When a driver or signaller initiates an REC, the system must establish the call to all relevant parties within a defined area in under ",e.jsx("strong",{children:"2 seconds"})," (the EIRENE requirement). The call is established with the highest priority level and will pre-empt any existing lower-priority calls if network resources are constrained."]}),e.jsxs("p",{children:["The ",e.jsx("strong",{children:"enhanced REC (eREC)"}),` adds further capabilities to the basic emergency call. It supports multiple simultaneous emergency call areas, allows the call originator's location to be transmitted to all recipients, and provides confirmation that the call has been received. The eREC also supports a "shunting emergency stop" variant for use in yards and depots where the standard geographic emergency call area may not be appropriate. When an eREC is initiated, all trains in the affected area receive an audible and visual alert in the cab, and the call is automatically recorded for subsequent investigation.`]}),e.jsx("h3",{children:"Why Railways Need Their Own Network"}),e.jsxs("p",{children:["The question of why railways cannot simply use commercial 4G or 5G networks is frequently asked. The answer lies in the unique requirements of safety-critical railway communication. Commercial networks are designed for best-effort service  coverage may be excellent in urban areas but sparse in rural cuttings and tunnels where railways run. During major incidents or public events, commercial networks become congested as thousands of users compete for capacity, precisely when railway communication is most critical. Railways require",e.jsx("strong",{children:" guaranteed Quality of Service (QoS)"}),", deterministic call setup times (under 2 seconds for emergency calls), and continuous coverage along every metre of track regardless of population density."]}),e.jsx("p",{children:"Furthermore, ETCS Level 2 and Level 3 rely on a continuous data connection between the Radio Block Centre (RBC) and the onboard ETCS computer. This data link carries Movement Authorities, position reports, and emergency stop commands. If the radio link fails, the train must assume the worst case and brake to a stop. GSM-R provides this data bearer with the reliability, coverage, and handover performance that safety-critical train control demands. The data rates are modest (9.6 kbps circuit-switched) because ETCS messages are small, but the reliability and latency requirements are stringent."}),e.jsx("h3",{children:"Handover Performance for ETCS"}),e.jsx("p",{children:"When a train moves from one GSM-R cell to the next, the radio connection must be handed over without interrupting the ETCS data session. The EIRENE and UNISIG specifications define strict handover performance requirements:"}),e.jsx("div",{className:"highlight-box",children:e.jsxs("p",{children:["The maximum permissible communication interruption during handover for ETCS is",e.jsx("strong",{children:" less than 0.5 seconds"}),". If the interruption exceeds this threshold, the ETCS onboard system begins a connection supervision timer. If the connection is not restored within approximately ",e.jsx("strong",{children:"20 seconds"})," (configurable per route), the train initiates an ",e.jsx("strong",{children:"emergency brake application"}),". This makes handover reliability a direct safety concern  a poorly performing radio network does not just degrade service quality, it stops trains."]})}),e.jsx("p",{children:"The EuroRadio protocol (UNISIG Subset-037) sits on top of the GSM-R bearer and provides a safe application layer for ETCS messages. It uses cryptographic authentication to prevent spoofing of train control messages, sequence numbering to detect lost or duplicated messages, and session management to handle the inevitable radio interruptions during handover or coverage gaps. The protocol is designed to be tolerant of brief interruptions while still detecting genuine communication failures that require the train to stop."}),e.jsx("p",{children:"At high speeds, handovers occur frequently. A train travelling at 300 km/h through cells spaced 5 km apart will perform a handover approximately every 60 seconds. On routes with smaller cells (urban areas, complex junctions), the handover rate can be much higher. Each handover must succeed reliably, making radio network quality a persistent engineering concern on high-speed routes."}),e.jsx("h3",{children:"The GSM-R Interference Problem"}),e.jsxs("p",{children:["GSM-R faces a growing interference problem from commercial mobile networks. The GSM-R downlink band (921925 MHz) is immediately adjacent to the commercial 900 MHz band used by public operators for 4G LTE and, increasingly, 5G NR. Commercial base stations transmitting at high power levels in the 925 MHz and above range can cause ",e.jsx("strong",{children:"adjacent channel interference"}),"and ",e.jsx("strong",{children:"intermodulation products"})," that degrade GSM-R reception on trains."]}),e.jsx("p",{children:'The problem is particularly acute because GSM-R train-mounted antennas are designed to receive weak signals from distant lineside base stations (as low as -92 dBm), while simultaneously being exposed to powerful commercial signals from nearby urban base stations. The dynamic range required of the receiver is enormous. Even with guard bands and receiver filtering, the sheer power differential between the wanted GSM-R signal and the unwanted commercial signal can cause receiver desensitisation  effectively "blinding" the GSM-R radio.'}),e.jsx("p",{children:"Mitigation strategies include fitting improved receiver filters to train radios, coordinating with commercial operators to limit transmission power near railway lines, and in some cases deploying additional GSM-R base stations to increase the wanted signal level. This interference issue is one of the factors driving the urgency of the migration to FRMCS, which will operate in different frequency bands with modern wideband technology less susceptible to narrowband interference."}),e.jsx(N,{type:"info",label:"Key Standard",children:"ECC Report 229 and subsequent updates from CEPT document the GSM-R interference problem and define mitigation measures. National regulators (such as Ofcom in the UK and BNetzA in Germany) have imposed specific conditions on commercial operators to protect railway communications, but the problem intensifies as commercial networks densify."}),e.jsx("h3",{children:"FRMCS: The Future of Railway Communication"}),e.jsxs("p",{children:["GSM-R is based on 2G technology that is approaching end of life. The mobile industry has ceased developing GSM chipsets, and spectrum pressure from commercial operators is increasing. The railway sector is therefore developing ",e.jsx("strong",{children:"FRMCS (Future Railway Mobile Communication System)"}),", which will be based on ",e.jsx("strong",{children:"3GPP standards (4G LTE and 5G NR)"})," with railway-specific enhancements defined by the ",e.jsx("strong",{children:"Mission Critical (MCX)"})," service framework."]}),e.jsx("p",{children:"The MCX framework, originally developed for public safety (police, fire, ambulance), provides three core services that map directly to railway needs:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"MCPTT (Mission Critical Push-to-Talk):"})," Replaces GSM-R voice group calls and emergency calls with an IP-based push-to-talk service that supports group calls, broadcast calls, priority, and pre-emption  but over a broadband bearer."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"MCData (Mission Critical Data):"})," Provides reliable data transport for ETCS messages and other safety-critical data, replacing the circuit-switched 9.6 kbps data channel with packet-switched broadband data."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"MCVideo (Mission Critical Video):"})," Enables real-time video streaming from trains  a capability that GSM-R simply cannot support. Applications include forward-facing camera feeds for remote monitoring, CCTV for security, and video communication between drivers and controllers."]})]}),e.jsx("h3",{children:"FRMCS Architecture: Network Slicing and Edge Computing"}),e.jsxs("p",{children:["One of the most significant architectural advances in FRMCS is the use of ",e.jsx("strong",{children:"5G network slicing"}),". A network slice is a logically isolated virtual network running on shared physical infrastructure, with guaranteed performance characteristics. FRMCS defines multiple slices for different classes of railway traffic:"]}),e.jsx("div",{className:"table-wrapper",children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Network Slice"}),e.jsx("th",{children:"Traffic Type"}),e.jsx("th",{children:"QoS Requirements"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Critical communications"})}),e.jsx("td",{children:"ETCS data, emergency calls"}),e.jsx("td",{children:"Ultra-high reliability (99.999%), low latency (<100 ms), guaranteed bandwidth"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Performance communications"})}),e.jsx("td",{children:"Operational voice, CCTV, diagnostics"}),e.jsx("td",{children:"High reliability (99.99%), moderate latency, substantial bandwidth"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Business communications"})}),e.jsx("td",{children:"Passenger Wi-Fi, infotainment"}),e.jsx("td",{children:"Best-effort, high bandwidth, standard reliability"})]})]})]})}),e.jsx("p",{children:"This slicing architecture means that a single FRMCS network can simultaneously carry safety-critical ETCS messages (with guaranteed ultra-low latency and high reliability), operational CCTV streams (with high bandwidth), and passenger internet access (with best-effort delivery)  all without the different traffic types interfering with each other. Each slice has its own dedicated resource allocation, QoS policies, and security isolation."}),e.jsxs("p",{children:[e.jsx("strong",{children:"Multi-access Edge Computing (MEC)"})," is another key FRMCS concept. By placing computing resources at the network edge (at or near base stations), latency-sensitive applications can process data locally without round-tripping to a central data centre. For railways, this enables applications like real-time video analytics at lineside locations, low-latency ETCS message processing, and local caching of data for trains in areas with limited backhaul capacity."]}),e.jsx("h3",{children:"The Transition Period: Dual-Mode Operation"}),e.jsx("p",{children:'The migration from GSM-R to FRMCS is a multi-decade programme that cannot be achieved as a "big bang" cutover. During the transition period, which may extend from the late 2020s into the 2040s, the railway must operate both networks simultaneously. This creates significant engineering challenges:'}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Dual-mode train radios:"})," Trains must carry radios capable of operating on both GSM-R and FRMCS, automatically selecting the appropriate network depending on which is available in the current location. The onboard ETCS system must be able to maintain a data session regardless of which bearer network is in use."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Network interworking:"})," A train on the FRMCS network must be able to communicate with a signaller whose control centre is still connected via GSM-R, and vice versa. Interworking gateways must translate between the two systems transparently."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Parallel infrastructure:"})," During the transition, infrastructure managers must maintain both GSM-R base stations and FRMCS base stations  doubling the lineside radio infrastructure until GSM-R can be decommissioned on each route."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Spectrum management:"})," The allocation of spectrum for FRMCS must be coordinated with the eventual release of the GSM-R spectrum. Candidate bands include the 900 MHz range (refarmed from GSM-R), 1900 MHz, and portions of the 700 MHz band."]})]}),e.jsx("p",{children:"The first pilot deployments of FRMCS are expected in the late 2020s on new high-speed lines and greenfield routes, where there is no legacy GSM-R to interwork with. Brownfield migration of existing routes will follow, with the pace dictated by the lifecycle of existing GSM-R equipment and the availability of dual-mode train radios. Full migration across the European network is not expected before 20402050."}),e.jsx("h3",{children:"Cybersecurity for Railway Communications"}),e.jsx("p",{children:"As railway communication systems move from isolated analogue networks to IP-based digital infrastructure, cybersecurity becomes a critical concern. GSM-R, being based on 2G technology, has known security weaknesses  the A5/1 encryption algorithm has been publicly broken, and the lack of mutual authentication means that rogue base stations (IMSI catchers) could theoretically intercept or spoof railway communications."}),e.jsxs("p",{children:["The European standard ",e.jsx("strong",{children:"TS 50701"})," (Railway applications  Cybersecurity) provides a framework for managing cyber risk in railway systems, including telecommunications. It is based on the IEC 62443 series for industrial automation and control system security, adapted for the railway domain. Key principles include:"]}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Defence in depth:"})," Multiple layers of security controls, so that the failure of any single control does not compromise the system."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Security zones and conduits:"})," The railway network is divided into zones with defined security levels, and all communication between zones passes through controlled conduits with appropriate filtering and monitoring."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Secure by design:"})," Security requirements are integrated from the earliest stages of system specification, not bolted on after deployment."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Lifecycle security management:"})," Security is maintained throughout the system lifecycle  from procurement through operation to decommissioning  with regular vulnerability assessments and patching."]})]}),e.jsx("p",{children:"FRMCS inherits the significantly stronger security architecture of 4G/5G, including mutual authentication (the train authenticates the network and vice versa), strong encryption (128-bit or 256-bit AES), and secure key management. However, the expanded attack surface of an IP-based broadband network  with more applications, more interfaces, and more connected devices  means that ongoing security management will be more complex than for the relatively simple GSM-R system it replaces."}),e.jsxs(N,{type:"analogy",children:["GSM-R is like a ",e.jsx("strong",{children:"dedicated VPN for railway operations"}),'. Just as a corporate VPN provides guaranteed bandwidth, encryption, and priority over the public internet, GSM-R provides a private, prioritised communication channel that cannot be degraded by public traffic. The railway emergency call is like a P0 incident alert that pre-empts all other traffic and pages every on-call engineer simultaneously. Functional addressing is like DNS for trains  you address the service by name ("the 14:30 to Edinburgh") and the network resolves it to the correct physical endpoint, no matter which hardware is running that service instance. The migration from GSM-R to FRMCS is like migrating from a monolithic VPN to a ',e.jsx("strong",{children:"zero-trust architecture with service mesh"}),"  the new system provides finer-grained security, better observability, and the ability to run multiple isolated services (network slices) on shared infrastructure. And just like any major infrastructure migration, you must run both systems in parallel during the transition, with careful interworking to ensure nothing breaks."]}),e.jsx(N,{type:"info",label:"Key Standard",children:"The EIRENE specifications (Functional Requirements Specification and System Requirements Specification) define all GSM-R features. ETCS data communication over GSM-R is specified in UNISIG Subset-037 (EuroRadio protocol) and Subset-039 (radio interface). FRMCS is specified in UIC FRMCS Functional Working Group documents, building on 3GPP MCX standards (TS 22.280, TS 22.179, TS 22.282). Cybersecurity for railway communications is addressed by TS 50701 and the IEC 62443 series."}),e.jsx(ce,{goTo:h,items:[{target:"m4-l3",label:"ETCS & Moving Block",desc:"ETCS Level 2/3 depends entirely on GSM-R (and future FRMCS) for its radio data link to the train. Handover reliability directly affects train operation."},{target:"m8-l2",label:"Disruption Management",desc:"Emergency calls and group communication are critical tools during operational disruption."},{target:"m5-l1",label:"Electrification Principles",desc:"Radio masts and power supplies share lineside infrastructure corridors with electrification equipment."},{target:"m7-l2",label:"Fibre Networks & SCADA",desc:"The fibre backbone provides the backhaul connectivity that connects GSM-R/FRMCS base stations to the core network."}]})]})}const Ep=[{text:"Why do railways operate their own dedicated radio network (GSM-R) instead of using public mobile networks?",options:["Public networks are too expensive for railway use","Railways need guaranteed coverage along the track, priority access, and safety-critical features like railway emergency calls that public networks cannot provide","Public networks do not support voice calls","Government regulations prohibit railways from using commercial networks"],correct:1,explanation:"Public networks are optimised for population density, not linear coverage along rail corridors. GSM-R guarantees continuous coverage, offers priority pre-emption during emergencies, and provides railway-specific features such as functional addressing and group calls that commercial networks lack."},{text:'What is "functional addressing" in GSM-R?',options:["Assigning a fixed phone number to each base station",'Calling a role or function (e.g. "driver of train 1A42") rather than a personal number, so the call reaches whoever currently holds that role',"Encrypting voice calls for security purposes","Routing calls through the nearest control centre automatically"],correct:1,explanation:'Functional addressing decouples the call destination from a specific SIM or person. A signaller can call "the driver of 1A42" without knowing who is driving or which handset they carry. The network resolves the function to the current registered user, which is essential for operational flexibility.'},{text:"How does ETCS Level 2 depend on GSM-R?",options:["GSM-R powers the onboard ETCS computer","GSM-R provides the radio data link over which the Radio Block Centre sends movement authorities to the train","GSM-R is only used for voice communication, not for ETCS data","ETCS Level 2 uses Wi-Fi, not GSM-R"],correct:1,explanation:"At ETCS Level 2, lineside signals are removed and movement authorities are transmitted digitally from the Radio Block Centre (RBC) to the train via GSM-R circuit-switched data. If the GSM-R link is lost, the train must brake to a stop, making GSM-R a safety-critical dependency."},{text:"What is FRMCS and why is it being developed?",options:["A new type of train detection system to replace track circuits","The Future Railway Mobile Communication System, a successor to GSM-R based on modern broadband standards (e.g. 5G/LTE) to support higher data rates and future digital railway needs","A fibre-optic cable standard for railway tunnels","A French signalling protocol used on high-speed lines"],correct:1,explanation:"GSM-R is based on 2G technology that is approaching obsolescence, with limited data bandwidth. FRMCS will use LTE/5G bearers to provide higher throughput for video, IoT, and next-generation train control (ETCS over IP), while maintaining the railway-specific features that GSM-R provides."}];function Dp({goTo:h}){return e.jsxs(e.Fragment,{children:[e.jsxs("figure",{className:"lesson-figure",children:[e.jsx("div",{className:"cad-symbol",children:e.jsxs("svg",{viewBox:"0 0 280 100",style:{width:"100%",maxWidth:"280px"},children:[e.jsx("text",{x:"140",y:"14",fill:"var(--text-dim)",fontSize:"10",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"Fibre Ring Topology"}),e.jsx("rect",{x:"15",y:"35",width:"45",height:"18",fill:"var(--bg-hover)",stroke:"var(--accent)",strokeWidth:"1",rx:"2"}),e.jsx("text",{x:"37",y:"47",fill:"var(--accent)",fontSize:"7",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"Node A"}),e.jsx("rect",{x:"117",y:"22",width:"45",height:"18",fill:"var(--bg-hover)",stroke:"var(--accent)",strokeWidth:"1",rx:"2"}),e.jsx("text",{x:"139",y:"34",fill:"var(--accent)",fontSize:"7",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"Node B"}),e.jsx("rect",{x:"220",y:"35",width:"45",height:"18",fill:"var(--bg-hover)",stroke:"var(--accent)",strokeWidth:"1",rx:"2"}),e.jsx("text",{x:"242",y:"47",fill:"var(--accent)",fontSize:"7",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"Node C"}),e.jsx("rect",{x:"117",y:"55",width:"45",height:"18",fill:"var(--bg-hover)",stroke:"var(--accent)",strokeWidth:"1",rx:"2"}),e.jsx("text",{x:"139",y:"67",fill:"var(--accent)",fontSize:"7",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"Node D"}),e.jsx("line",{x1:"60",y1:"40",x2:"117",y2:"33",stroke:"var(--accent-secondary)",strokeWidth:"1.5"}),e.jsx("line",{x1:"162",y1:"33",x2:"220",y2:"40",stroke:"var(--accent-secondary)",strokeWidth:"1.5"}),e.jsx("line",{x1:"220",y1:"48",x2:"162",y2:"60",stroke:"var(--accent-secondary)",strokeWidth:"1.5"}),e.jsx("line",{x1:"117",y1:"60",x2:"60",y2:"48",stroke:"var(--accent-secondary)",strokeWidth:"1.5"}),e.jsx("text",{x:"140",y:"50",fill:"var(--accent-secondary)",fontSize:"7",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"ring"}),e.jsx("text",{x:"140",y:"88",fill:"var(--text-dim)",fontSize:"7",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"resilient: survives single fibre break"})]})}),e.jsx("figcaption",{children:"Schematic: Fibre optic network in resilient ring topology  if one link fails, traffic reroutes the other way."})]}),e.jsx("h3",{children:"The Railway Fibre Backbone"}),e.jsxs("p",{children:["Modern railways are underlaid by extensive ",e.jsx("strong",{children:"fibre optic networks"})," that run alongside the track in cable troughs, buried ducts, or strung from overhead line equipment structures. These fibre backbones carry an enormous variety of data: signalling commands and indications between interlockings and control centres, CCTV feeds from stations and level crossings, voice and data traffic for operational telephony, passenger information system updates, traction power SCADA telemetry, train describer data, and increasingly the backhaul for GSM-R and FRMCS base stations. A major railway route may have fibre cables containing 48, 96, or even 288 individual fibres, with each fibre capable of carrying tens of gigabits per second using wavelength-division multiplexing (WDM)."]}),e.jsxs("p",{children:["Railway fibre networks have a significant advantage over commercial telecoms in one respect: they follow ",e.jsx("strong",{children:"linear corridors"})," that connect major population centres, which is exactly the topology that long-haul telecoms networks need. Many railway infrastructure managers lease spare fibre capacity (or dark fibre) to commercial telecommunications providers, generating revenue that helps fund railway maintenance. Network Rail's subsidiary Network Rail Telecom, for example, operates one of the largest fibre networks in the UK, with commercial telecoms companies paying to use spare fibres that run alongside the tracks. This symbiotic relationship means that the railway's telecom infrastructure is often far more capable than what the railway itself needs operationally."]}),e.jsx("h3",{children:"Network Topology: Core, Distribution, and Access"}),e.jsxs("p",{children:["A well-designed railway telecoms network follows a ",e.jsx("strong",{children:"three-tier hierarchical architecture"}),", analogous to the core/distribution/access model used in enterprise networking:"]}),e.jsx("div",{className:"table-wrapper",children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Layer"}),e.jsx("th",{children:"Function"}),e.jsx("th",{children:"Typical Equipment"}),e.jsx("th",{children:"Locations"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Core"})}),e.jsx("td",{children:"High-capacity backbone connecting major nodes; carries aggregated traffic between regions"}),e.jsx("td",{children:"DWDM optical transponders, core routers, SDH/OTN multiplexers"}),e.jsx("td",{children:"Major control centres, data centres, regional hubs (typically 515 per national network)"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Distribution"})}),e.jsx("td",{children:"Aggregates traffic from access nodes and routes it to the core; provides resilient ring structures"}),e.jsx("td",{children:"CWDM/DWDM mux, MPLS PE routers, Ethernet aggregation switches"}),e.jsx("td",{children:"Major stations, signalling centres, junctions (every 2050 km along routes)"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Access"})}),e.jsx("td",{children:"Connects end devices (signals, CCTV cameras, phones, SCADA RTUs) to the distribution layer"}),e.jsx("td",{children:"Industrial Ethernet switches, media converters, serial-to-IP gateways"}),e.jsx("td",{children:"Signal equipment rooms, lineside equipment rooms, stations, substations"})]})]})]})}),e.jsx("p",{children:"The core layer typically operates at 10 Gbps or 100 Gbps per wavelength, with multiple wavelengths per fibre. The distribution layer runs at 110 Gbps, and the access layer connects end devices at 100 Mbps to 1 Gbps. This hierarchical structure allows the network to scale efficiently: adding a new CCTV camera at a station only affects the local access switch and its uplink to the distribution layer, without impacting the core."}),e.jsxs("figure",{className:"lesson-figure",children:[e.jsx("div",{className:"image-placeholder",children:e.jsx("p",{children:"IMAGE NEEDED: Photo of fibre optic cable trough running alongside railway track, or a railway equipment room showing fibre patch panels, Ethernet switches, and DWDM equipment in standard rack cabinets."})}),e.jsx("figcaption",{children:"Railway fibre backbone  cables running alongside the track carry signalling, CCTV, SCADA, and communication data at gigabit speeds."})]}),e.jsx("h3",{children:"DWDM and CWDM on Railway Fibre"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Wavelength Division Multiplexing (WDM)"})," is the technology that makes railway fibre networks so versatile. Instead of using a single wavelength of light on each fibre, WDM sends multiple wavelengths (colours) simultaneously, each carrying an independent data stream. This effectively multiplies the capacity of each fibre by the number of wavelengths."]}),e.jsx("p",{children:"Two variants are used on railway networks:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"CWDM (Coarse WDM):"})," Uses widely spaced wavelengths (20 nm apart), supporting up to 18 channels per fibre. CWDM is lower cost because it uses uncooled lasers, but supports shorter distances (typically up to 80 km without amplification). Used on the distribution layer where moderate capacity is needed at reasonable cost."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"DWDM (Dense WDM):"})," Uses tightly spaced wavelengths (0.8 nm or less apart), supporting 40, 80, or even 96+ channels per fibre. DWDM requires temperature-stabilised lasers and optical amplifiers (EDFAs) but can carry enormous capacity over long distances. Used on the core backbone where maximum capacity and reach are needed."]})]}),e.jsx("p",{children:"The practical benefit is that different railway systems can each be assigned their own wavelength on the same fibre: one wavelength for signalling, another for SCADA, another for CCTV, another for operational telephony, and so on. Each wavelength is logically independent, providing isolation between different traffic types without needing separate physical fibres. If a new application needs connectivity (say, a new FRMCS backhaul service), a new wavelength can be provisioned on the existing fibre without disturbing anything already running."}),e.jsx("h3",{children:"From SDH to IP/MPLS: The Transmission Migration"}),e.jsxs("p",{children:["Many railway fibre networks were originally built using ",e.jsx("strong",{children:"SDH (Synchronous Digital Hierarchy)"})," transmission technology  the standard backbone technology of the 1990s and 2000s. SDH provides fixed-bandwidth circuits with deterministic latency and",e.jsx("strong",{children:"sub-50ms protection switching"})," (automatic rerouting around a fibre break in under 50 milliseconds). These characteristics made SDH ideal for carrying safety-critical signalling data, where predictable performance matters more than raw bandwidth efficiency."]}),e.jsxs("p",{children:["However, SDH is a circuit-switched technology that allocates fixed bandwidth whether or not it is being used, making it inefficient for bursty IP traffic like CCTV, web browsing, and file transfers. As more railway applications become IP-based, infrastructure managers are migrating their backbone networks to ",e.jsx("strong",{children:"IP/MPLS (Multi-Protocol Label Switching)"}),". MPLS provides the traffic engineering, QoS guarantees, and fast reroute capabilities that railways need, while efficiently supporting both legacy circuit-emulation services (for older signalling equipment that still expects SDH-like interfaces) and modern IP services."]}),e.jsx("div",{className:"highlight-box",children:e.jsxs("p",{children:["The migration from SDH to IP/MPLS is one of the most significant  and most delicate  infrastructure transformations on modern railways. Signalling systems designed to run over SDH circuits must be migrated to IP-based transport without any interruption to service. This typically involves ",e.jsx("strong",{children:"circuit emulation services (CES)"})," that make the MPLS network appear as a traditional SDH circuit to legacy equipment, allowing gradual migration without requiring simultaneous replacement of all end equipment."]})}),e.jsx("h3",{children:"Network Architecture and Resilience"}),e.jsxs("p",{children:["Railway fibre networks are typically configured in ",e.jsx("strong",{children:"ring topologies"})," to provide resilience. If a cable is cut at one point (a frequent occurrence during construction work, cable theft, or flooding), traffic can be rerouted around the ring in the opposite direction. The transmission technology provides automatic protection switching that restores connectivity within 50 milliseconds of a fibre break  fast enough that signalling systems do not lose communication."]}),e.jsx("p",{children:"Modern MPLS networks implement multiple resilience mechanisms:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Fast Reroute (FRR):"})," Pre-computed backup paths that traffic can switch to within 50 ms of detecting a link failure, matching SDH protection performance."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Dual-homing:"})," Critical sites (control centres, major interlockings) are connected to two different distribution nodes via diverse fibre routes, so that a single cable cut cannot isolate the site."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Geographic diversity:"})," Ring fibres are routed via physically different paths where possible (e.g., one fibre along the up line, one along the down line, or one along the railway and one via a third-party duct route) to minimise the risk of a single incident (such as a contractor cutting through a cable trough) severing both paths."]})]}),e.jsx("h3",{children:"Lineside Equipment Rooms (LERs)"}),e.jsxs("p",{children:["The active network equipment that connects the fibre backbone to end devices is housed in",e.jsx("strong",{children:"Lineside Equipment Rooms (LERs)"}),"  small, secure buildings or cabinets located at intervals along the railway. LERs are the railway equivalent of a telecommunications exchange or a network PoP (Point of Presence). They typically contain:"]}),e.jsxs("ul",{children:[e.jsx("li",{children:"Network switches and routers for the distribution and access layers"}),e.jsx("li",{children:"Optical fibre termination panels and patch frames"}),e.jsx("li",{children:"Power distribution boards with battery backup (typically 28 hours autonomy)"}),e.jsx("li",{children:"SCADA Remote Terminal Units (RTUs) for local infrastructure monitoring"}),e.jsx("li",{children:"GSM-R or FRMCS base station equipment (where co-located)"}),e.jsx("li",{children:"Environmental monitoring sensors (temperature, humidity, intrusion detection)"})]}),e.jsx("p",{children:"The environment inside an LER must be carefully controlled. Railway equipment rooms face extreme conditions: temperatures can range from -25 to +55 degrees C (particularly in unventilated metal cabinets in summer sun), humidity varies with weather and ventilation, and electromagnetic interference from traction power systems and passing trains can be severe. Equipment must be rated for extended temperature ranges (typically EN 50155 for railway rolling stock applications or EN 50121 for EMC compliance). Power supplies must handle the voltage fluctuations common on railway DC distribution systems, and battery backup ensures continued operation during power interruptions."}),e.jsx("h3",{children:"SCADA: Supervisory Control and Data Acquisition"}),e.jsxs("p",{children:[e.jsx("strong",{children:"SCADA (Supervisory Control and Data Acquisition)"})," systems are the eyes and hands of railway infrastructure management. A SCADA system collects real-time data from sensors distributed across the railway and presents it to operators in a control centre, allowing them to monitor conditions and send commands to remote equipment. In the railway context, SCADA monitors and controls a wide range of assets:"]}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Point heaters:"})," Electric heaters fitted to switches and crossings to prevent them freezing in winter. SCADA monitors ambient temperature and activates heaters automatically or on operator command."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Pumping stations:"})," Railways in low-lying areas or with deep cuttings need pumps to remove groundwater and rainwater. SCADA monitors water levels and pump status, alerting operators to failures before flooding occurs."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Tunnel ventilation:"})," Fans in long tunnels that manage air quality, temperature, and smoke extraction in emergencies. SCADA controls fan speed and direction and monitors air quality sensors."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Traction power switchgear:"})," Circuit breakers and isolators in substations and track sectioning points. SCADA allows remote switching of power sections for maintenance or fault isolation without sending a technician to site."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Level crossing equipment:"})," Barrier mechanisms, warning lights, and detection loops at road-rail interfaces. SCADA monitors equipment health and logs operational events."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Bridge and tunnel monitoring:"})," Structural sensors, water level gauges at river crossings, and movement detectors on bridges and embankments."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Lineside equipment rooms:"})," Temperature, humidity, power supply status, and intruder alarms in remote equipment cabinets."]})]}),e.jsx("h3",{children:"SCADA Protocols and Data Transport"}),e.jsx("p",{children:"The communication between SCADA field devices (sensors, actuators, RTUs) and the central SCADA master station uses specialised protocols designed for reliable telemetry over potentially unreliable communication links:"}),e.jsx("div",{className:"table-wrapper",children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Protocol"}),e.jsx("th",{children:"Standard"}),e.jsx("th",{children:"Characteristics"}),e.jsx("th",{children:"Railway Usage"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"IEC 60870-5-101"})}),e.jsx("td",{children:"IEC"}),e.jsx("td",{children:"Serial (RS-232/485), poll-response, low bandwidth"}),e.jsx("td",{children:"Legacy installations, serial links to older RTUs"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"IEC 60870-5-104"})}),e.jsx("td",{children:"IEC"}),e.jsx("td",{children:"TCP/IP based, event-driven with spontaneous reporting, standardised timestamps"}),e.jsx("td",{children:"Most new railway SCADA deployments in Europe; the de facto standard for IP-based railway SCADA"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"DNP3"})}),e.jsx("td",{children:"IEEE 1815"}),e.jsx("td",{children:"TCP or serial, multi-drop, robust error checking, report-by-exception"}),e.jsx("td",{children:"Common in North American railways and some UK installations"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"OPC-UA"})}),e.jsx("td",{children:"IEC 62541"}),e.jsx("td",{children:"Platform-independent, service-oriented, built-in security, information modelling"}),e.jsx("td",{children:"Emerging standard for next-generation systems; enables SCADA-to-IT integration and data analytics platforms"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Modbus TCP"})}),e.jsx("td",{children:"Modbus.org"}),e.jsx("td",{children:"Simple register-based protocol, widely supported, minimal security"}),e.jsx("td",{children:"Simple devices (temperature sensors, power meters) where full SCADA protocol is overkill"})]})]})]})}),e.jsx("p",{children:'IEC 60870-5-104 (often shortened to "IEC 104") is the dominant protocol for new railway SCADA installations in Europe. It supports spontaneous event reporting (the RTU sends data when a state changes, rather than waiting to be polled), timestamped data (essential for post-incident analysis), and a structured information model that standardises how different types of measurement and command are represented.'}),e.jsxs("p",{children:["The trend in newer systems is toward ",e.jsx("strong",{children:"OPC-UA (Unified Architecture)"}),", which provides a richer information model, built-in security (encryption, authentication, authorisation), and platform independence. OPC-UA also bridges the traditional gap between SCADA (Operational Technology / OT) and enterprise IT systems, enabling SCADA data to be consumed directly by analytics platforms, digital twin applications, and asset management systems without custom protocol translation."]}),e.jsx("h3",{children:"Remote Condition Monitoring and IoT"}),e.jsxs("p",{children:["Traditionally, railway infrastructure was maintained by regular manual inspection: a technician walking the track, checking point mechanisms, verifying signal lamp voltages, and inspecting lineside equipment. This approach is labour-intensive, exposes workers to the hazards of the railway environment, and can only detect failures after they have occurred (or are visibly imminent). SCADA and remote condition monitoring represent a fundamental shift towards ",e.jsx("strong",{children:"predictive and condition-based maintenance"}),"."]}),e.jsx("p",{children:"Modern SCADA systems do far more than simple alarm monitoring. They capture time-series data that reveals trends: a point machine taking progressively longer to complete its stroke indicates developing mechanical resistance that will eventually cause a failure. Pump run-times increasing over weeks suggest rising water tables or deteriorating pump performance. By analysing these trends, maintenance teams can intervene before a failure disrupts train services  the difference between a planned overnight repair and an emergency closure during the morning peak."}),e.jsxs("p",{children:["Beyond traditional SCADA, railways are increasingly deploying ",e.jsx("strong",{children:"IoT (Internet of Things) sensors"})," for more granular condition monitoring:"]}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Vibration monitoring:"})," Accelerometers mounted on bearings, rail joints, and bridge structures detect developing mechanical faults through changes in vibration signature. Frequency-domain analysis can distinguish between different failure modes (e.g., bearing wear vs. rail corrugation vs. loose fastening)."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Acoustic monitoring:"})," Microphones mounted trackside listen for the characteristic sounds of flat wheels, cracked rails, or failing bearings as trains pass. Machine learning classifiers can identify specific defect types from audio patterns."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Temperature and strain gauges:"})," Continuous monitoring of rail temperature (critical for predicting rail buckling in hot weather) and structural strain on bridges and viaducts."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Weather stations:"})," Lineside weather sensors providing localised wind speed, temperature, rainfall, and humidity data for operational decision-making (e.g., imposing speed restrictions during high winds)."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Water level sensors:"})," Ultrasonic or pressure-based sensors in drainage systems, culverts, and at flood-prone locations, providing early warning of flooding."]})]}),e.jsx("h3",{children:"Digital Twin Concepts for Infrastructure"}),e.jsxs("p",{children:["The concept of a ",e.jsx("strong",{children:"digital twin"}),"  a continuously updated digital replica of a physical asset  is gaining traction in railway infrastructure management. A digital twin of a railway route would integrate data from multiple sources: the design-as-built 3D model, real-time SCADA and IoT sensor data, historical maintenance records, inspection reports, traffic loading data, and environmental conditions. This integrated model allows engineers to visualise the current state of the infrastructure, simulate the effect of different maintenance interventions, and predict future degradation."]}),e.jsx("p",{children:"For example, a digital twin of a bridge might combine the structural finite element model (from original design), real-time strain gauge and accelerometer data (from IoT sensors), traffic loading records (from train describer data showing the mass and speed of every crossing), temperature records (from weather stations), and inspection photographs (from drone surveys). By feeding all of this into a structural analysis engine, the twin can estimate remaining structural life, flag locations where degradation is accelerating, and recommend optimal maintenance timing."}),e.jsx("p",{children:"Digital twins are still in relatively early adoption on railways, but pilot projects are demonstrating significant benefits: reduced inspection costs (by targeting inspections where the twin indicates concern), better maintenance planning (by predicting failures before they cause operational impact), and improved renewal planning (by understanding true asset condition rather than relying on age-based assumptions)."}),e.jsx("h3",{children:"Cybersecurity for Operational Technology (OT) Networks"}),e.jsxs("p",{children:["Railway SCADA and condition monitoring systems are ",e.jsx("strong",{children:"Operational Technology (OT)"}),"networks  they control physical processes and equipment, not just process data. A cybersecurity breach in an OT network has fundamentally different consequences from an IT breach: rather than data theft or service disruption, the risk is physical damage, safety incidents, or loss of control over critical infrastructure."]}),e.jsx("p",{children:"The convergence of OT and IT networks  driven by the migration to IP-based SCADA protocols, IoT sensor deployments, and the desire to integrate operational data with enterprise analytics  creates new attack vectors that did not exist when SCADA systems ran on isolated serial networks. Key cybersecurity principles for railway OT include:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Network segmentation:"})," OT networks must be isolated from corporate IT networks and the internet by industrial demilitarised zones (DMZ) with firewalls and data diodes. Data can flow from OT to IT for analytics, but IT systems should never have direct access to OT control functions."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Secure-by-design protocols:"})," Migrating from legacy protocols (like Modbus, which has no authentication) to secure protocols (like OPC-UA with TLS encryption) reduces the attack surface at the protocol level."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Intrusion detection:"})," Network monitoring tools that understand OT protocols can detect anomalous traffic patterns that might indicate an attack  for example, an unexpected SCADA command being sent to a traction power circuit breaker."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Supply chain security:"})," Ensuring that firmware updates for RTUs, PLCs, and network equipment come from verified sources and have not been tampered with."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Incident response:"}),' OT-specific incident response plans that account for the safety implications of taking systems offline  you cannot simply "patch and reboot" a SCADA system that is currently controlling live traction power distribution.']})]}),e.jsx("p",{children:"The integration of SCADA data with asset management systems creates a powerful feedback loop: real-time condition data informs maintenance planning, maintenance records are linked to asset performance histories, and the whole system feeds into lifecycle cost models that guide renewal and investment decisions. This data-driven approach to infrastructure management is one of the most significant transformations occurring in railway engineering today  but it must be built on a foundation of robust cybersecurity."}),e.jsxs(N,{type:"analogy",children:["The three-tier railway telecoms architecture is ",e.jsx("strong",{children:"exactly like a cloud-native application stack"}),". The core fibre network is your cloud backbone (AWS Transit Gateway or Azure Virtual WAN). The distribution layer is your regional VPCs with their peering connections. The access layer is your application subnets and security groups. DWDM wavelengths are like VLANs or VPC subnets  logical isolation on shared physical infrastructure. SCADA is ",e.jsx("strong",{children:"Prometheus and Grafana for physical assets"}),". Every point heater, pump, and ventilation fan is an instrumented service emitting metrics. IEC 104 is the scrape protocol (like Prometheus's HTTP pull), the fibre network is the transport layer, and the control centre dashboard is Grafana  visualising time-series data, setting alert thresholds, and enabling operators to drill down into anomalies. The OT cybersecurity challenge is like securing a Kubernetes cluster that controls physical actuators  you need network policies, RBAC, image scanning, and runtime monitoring, but the consequences of a breach are physical rather than digital."]}),e.jsx(N,{type:"info",label:"Key Standards",children:"IEC 60870-5-104 defines the dominant SCADA protocol for IP-based railway telemetry. OPC-UA (IEC 62541) is the emerging standard for next-generation OT integration. Cybersecurity for railway OT is governed by TS 50701 (railway-specific) and the IEC 62443 series (industrial automation security). Network equipment for railway environments must comply with EN 50155 (rolling stock electronics) and EN 50121 (electromagnetic compatibility)."}),e.jsx(ce,{goTo:h,items:[{target:"m5-l2",label:"Power Supply & Substations",desc:"SCADA monitors and controls traction power distribution switchgear and substations."},{target:"m4-l2",label:"Interlockings",desc:"Signalling systems share the fibre backbone and interlocking data flows through the same network."},{target:"m1-l3",label:"Maintenance & Inspection",desc:"SCADA-driven condition monitoring and digital twins are replacing traditional manual inspection regimes."},{target:"m8-l2",label:"Disruption Management",desc:"SCADA alerts on infrastructure failures feed directly into disruption management processes."},{target:"m7-l1",label:"Railway Telecoms  GSM-R & FRMCS",desc:"GSM-R and FRMCS base stations rely on the fibre backbone for backhaul connectivity to the core network."}]})]})}const Rp=[{text:"What is the primary purpose of a railway fibre-optic backbone network?",options:["Providing Wi-Fi to passengers on board trains","Carrying high-bandwidth data for signalling control, SCADA telemetry, telephony, and operational communications between locations along the route","Replacing copper rails for traction return current","Broadcasting live CCTV footage to the public"],correct:1,explanation:"Railway fibre networks run along the lineside connecting signalling centres, stations, depots, and control rooms. They carry safety-critical signalling data, SCADA telemetry, operational voice and data, and corporate traffic  forming the digital backbone of railway operations."},{text:"What does SCADA stand for, and what does it do on a railway?",options:["Signal Control And Data Acquisition  it sets signal aspects","Supervisory Control And Data Acquisition  it remotely monitors and controls distributed equipment such as points heaters, pumps, and power supplies","Standard Communication And Display Architecture  it drives passenger information screens","Systematic Check And Diagnostic Analysis  it runs automated track inspections"],correct:1,explanation:"SCADA systems collect real-time telemetry from thousands of remote sensors and devices (water pumps, point heaters, tunnel ventilation fans, electrical switchgear) and present it to operators who can monitor status and send control commands without visiting the site."},{text:"How does remote condition monitoring via SCADA improve maintenance compared to manual inspection?",options:["It completely eliminates the need for any human involvement in maintenance","It detects faults and trends continuously in real time, enabling predictive maintenance and faster response, rather than relying on periodic manual visits that might miss developing failures","It is cheaper because SCADA hardware costs less than employing staff","It only provides historical data and cannot alert on live conditions"],correct:1,explanation:"Manual inspection is periodic  a fault developing between visits goes undetected until the next check. SCADA provides continuous monitoring with real-time alarms and trend analysis, allowing maintainers to intervene before failure occurs and to prioritise work based on actual condition rather than fixed schedules."},{text:"How can a railway generate commercial revenue from its fibre-optic network?",options:["By charging passengers to use on-train Wi-Fi","By leasing spare fibre capacity (dark fibre) to telecommunications companies, since the railway corridor provides a valuable continuous duct route between cities","By selling the copper cables that fibre replaced","By providing broadband to lineside residents for free and claiming government subsidies"],correct:1,explanation:"Railway routes provide continuous wayleaves between major population centres  exactly what telecoms companies need. Spare fibres (dark fibre) in railway cable routes can be leased to commercial providers, generating significant non-fare revenue. Network Rail in the UK does this through its telecoms business."}];function Bp({goTo:h}){return e.jsxs(e.Fragment,{children:[e.jsxs("figure",{className:"lesson-figure",children:[e.jsx("div",{className:"cad-symbol",children:e.jsxs("svg",{viewBox:"0 0 300 70",style:{width:"100%",maxWidth:"300px"},children:[e.jsx("text",{x:"150",y:"14",fill:"var(--text-dim)",fontSize:"10",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"PIS Data Flow"}),e.jsx("rect",{x:"5",y:"28",width:"55",height:"20",fill:"var(--bg-hover)",stroke:"var(--accent)",strokeWidth:"1",rx:"2"}),e.jsx("text",{x:"32",y:"42",fill:"var(--accent)",fontSize:"7",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"Darwin"}),e.jsx("line",{x1:"60",y1:"38",x2:"77",y2:"38",stroke:"var(--text-dim)",strokeWidth:"1"}),e.jsx("polygon",{points:"77,38 72,35 72,41",fill:"var(--text-dim)"}),e.jsx("rect",{x:"77",y:"28",width:"60",height:"20",fill:"var(--bg-hover)",stroke:"var(--blue)",strokeWidth:"1",rx:"2"}),e.jsx("text",{x:"107",y:"42",fill:"var(--blue)",fontSize:"7",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"CIS Server"}),e.jsx("line",{x1:"137",y1:"34",x2:"160",y2:"28",stroke:"var(--text-dim)",strokeWidth:"0.8"}),e.jsx("line",{x1:"137",y1:"38",x2:"160",y2:"38",stroke:"var(--text-dim)",strokeWidth:"0.8"}),e.jsx("line",{x1:"137",y1:"42",x2:"160",y2:"48",stroke:"var(--text-dim)",strokeWidth:"0.8"}),e.jsx("rect",{x:"160",y:"20",width:"55",height:"14",fill:"var(--bg-hover)",stroke:"var(--accent)",strokeWidth:"0.8",rx:"2"}),e.jsx("text",{x:"187",y:"30",fill:"var(--accent)",fontSize:"7",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"Displays"}),e.jsx("rect",{x:"160",y:"35",width:"55",height:"11",fill:"var(--bg-hover)",stroke:"var(--text-dim)",strokeWidth:"0.8",rx:"2"}),e.jsx("text",{x:"187",y:"43",fill:"var(--text-dim)",fontSize:"6",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"PA / Audio"}),e.jsx("rect",{x:"160",y:"47",width:"55",height:"11",fill:"var(--bg-hover)",stroke:"var(--accent-secondary)",strokeWidth:"0.8",rx:"2"}),e.jsx("text",{x:"187",y:"55",fill:"var(--accent-secondary)",fontSize:"6",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"App / Web"})]})}),e.jsx("figcaption",{children:"Schematic: Passenger information  train data flows from Darwin to station CIS servers, then to displays, PA, and apps."})]}),e.jsx("h3",{children:"Passenger Information Systems: From Boards to Broadband"}),e.jsxs("p",{children:["Getting accurate, timely information to passengers is one of the most visible aspects of railway telecommunications. The evolution of ",e.jsx("strong",{children:"passenger information systems (PIS)"}),"mirrors the broader digital transformation of railways. Early systems consisted of printed timetable boards and manual announcements by station staff. These gave way to electromechanical split-flap (Solari) displays, then to ",e.jsx("strong",{children:"dot matrix LED displays"})," capable of showing dynamic real-time information, and most recently to full-colour TFT/LCD screens that can display rich content including maps, service alerts, and advertising."]}),e.jsxs("p",{children:["At a modern station, the ",e.jsx("strong",{children:"Customer Information System (CIS)"})," encompasses multiple display and audio technologies working in concert:"]}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Main departure boards:"})," Large LED or LCD screens in concourses showing the next 1020 departures with platform numbers, calling points, expected times, and delay/cancellation information."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Platform indicators:"})," Displays on each platform showing the next 13 services from that platform, with calling points and expected arrival times."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Customer help points:"})," Interactive screens or audio intercoms providing direct communication with a control centre or information staff."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Public address (PA) systems:"})," Automated and live audio announcements covering arrivals, departures, delays, platform changes, and safety information. Modern PA systems use ",e.jsx("strong",{children:"text-to-speech (TTS)"})," engines to automatically generate announcements from data feeds, supplemented by pre-recorded station-specific messages and live announcements from staff."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Visual alert systems:"})," Hearing loops and visual notification displays that meet accessibility requirements under the Persons of Reduced Mobility Technical Specification for Interoperability (PRM-TSI)."]})]}),e.jsx("p",{children:"All of these systems are driven by a common data source  the real-time train running information provided by Darwin or equivalent national systems."}),e.jsxs("figure",{className:"lesson-figure",children:[e.jsx("div",{className:"image-placeholder",children:e.jsx("p",{children:"IMAGE NEEDED: Photo of a modern railway station departure board (LED or LCD type) showing real-time train information, or a split image showing both a large concourse departure board and a platform indicator display."})}),e.jsx("figcaption",{children:"Station departure boards  the most visible output of the railway's passenger information system, driven by real-time train data."})]}),e.jsx("h3",{children:"Darwin Architecture: The Data Engine"}),e.jsxs("p",{children:["In the UK, the central system that fuses timetable information with real-time train running data is called ",e.jsx("strong",{children:"Darwin"}),"  a real-time data aggregation and prediction platform operated by National Rail Enquiries (a subsidiary of the Rail Delivery Group). Darwin is the authoritative source of real-time train information for the entire GB rail network, serving data to every station departure board, every rail app, and every journey planner in the country."]}),e.jsx("p",{children:"Darwin ingests data from multiple upstream sources:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"ITPS (Integrated Train Planning System):"})," The planned timetable  the baseline schedule that defines every service."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"TRUST (Train Running Under System TOPS):"})," Real-time train movement events from the signalling system, reporting when each train arrives at, departs from, or passes timing points."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Train Describer feeds:"})," Fine-grained train position data from signalling berth-stepping (described below)."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"TOC/FOC inputs:"})," Train Operating Companies and Freight Operating Companies provide cancellation notices, short-formation alerts, and other service-level information."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Platform allocations:"})," From station management systems or manual input."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Delay attribution:"})," Reasons for delays, fed back from the delay attribution process."]})]}),e.jsxs("p",{children:["Darwin processes these inputs through ",e.jsx("strong",{children:"prediction algorithms"})," that estimate future arrival and departure times at all downstream stations. The algorithms account for timetabled dwell times, sectional running times, speed restrictions, junction conflicts, rolling stock performance characteristics, and historical patterns. When a train is running late, Darwin does not simply add the current delay to all future scheduled times; it models the likely recovery (or further deterioration) based on the specific circumstances. This is why estimated times on departure boards sometimes change non-linearly as a train approaches."]}),e.jsx("h3",{children:"Darwin Data Distribution: Push Port and APIs"}),e.jsx("p",{children:"Darwin distributes its output through several channels:"}),e.jsx("div",{className:"table-wrapper",children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Interface"}),e.jsx("th",{children:"Technology"}),e.jsx("th",{children:"Consumers"}),e.jsx("th",{children:"Use Case"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Push Port"})}),e.jsx("td",{children:"Apache ActiveMQ (STOMP protocol), XML messages"}),e.jsx("td",{children:"Station CIS systems, TOC back-office systems, data analytics platforms"}),e.jsx("td",{children:"Real-time streaming of all train status updates; consumers subscribe to topics and receive push notifications"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"OpenLDBWS"})}),e.jsx("td",{children:"SOAP web service"}),e.jsx("td",{children:"Third-party app developers, journey planners"}),e.jsx("td",{children:"Request/response queries for departure boards, service details, arrivals at specific stations"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"LDBWS Staff"})}),e.jsx("td",{children:"SOAP web service (extended version)"}),e.jsx("td",{children:"Licensed industry users"}),e.jsx("td",{children:"Enhanced version with additional fields (e.g., reasons for cancellation, formation data)"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Huxley2"})}),e.jsx("td",{children:"Open-source REST proxy"}),e.jsx("td",{children:"Developers who prefer REST/JSON over SOAP/XML"}),e.jsx("td",{children:"Wraps OpenLDBWS in a RESTful JSON API for easier consumption"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Knowledge Base"})}),e.jsx("td",{children:"XML reference data"}),e.jsx("td",{children:"All consumers"}),e.jsx("td",{children:"Station codes, TOC codes, CRS codes, and other reference data needed to interpret Darwin messages"})]})]})]})}),e.jsx("p",{children:"The Push Port is the primary real-time interface. It publishes XML messages for every train status change: schedule updates, platform changes, delay reasons, cancellations, and formation changes. Consumers connect to the ActiveMQ message broker, subscribe to relevant topics, and receive a continuous stream of updates. A typical Push Port feed generates thousands of messages per minute during peak hours."}),e.jsx("h3",{children:"Onboard PIS and Train Connectivity"}),e.jsxs("p",{children:["Passenger information is not limited to stations  modern trains carry their own",e.jsx("strong",{children:"onboard PIS"})," systems that provide information inside the train. These typically include:"]}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Interior display screens:"})," LCD screens above doors or in vestibules showing the next station, calling points, connection information, and service disruption messages."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Automated PA announcements:"}),' GPS-triggered or beacon-triggered announcements ("The next station is...") using pre-recorded or synthesised speech.']}),e.jsxs("li",{children:[e.jsx("strong",{children:"External destination displays:"})," LED or LCD displays on the train exterior showing the service destination and via points."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Seat reservation displays:"})," Small screens above or beside each seat showing reservation status on services that offer reservations."]})]}),e.jsxs("p",{children:["Modern onboard PIS systems receive their data via ",e.jsx("strong",{children:"cellular connectivity"}),"(4G/5G modems on the train roof), which also provides the ",e.jsx("strong",{children:"passenger Wi-Fi"}),"service. The train's onboard network typically aggregates multiple cellular connections (bonding connections from different mobile operators for redundancy and bandwidth), and distributes internet access and PIS data throughout the train via Ethernet and Wi-Fi access points in each coach."]}),e.jsxs("p",{children:["The quality of onboard connectivity is a major passenger satisfaction factor and a significant engineering challenge. Trains move at high speed through varying terrain  urban areas with good cellular coverage, rural areas with sparse coverage, tunnels with no coverage, and railway cuttings that attenuate signals. Solutions include trackside small cells (dedicated base stations along the route), train-mounted multi-operator SIM arrays, and in-tunnel connectivity systems. Some operators are investing in ",e.jsx("strong",{children:"trackside Wi-Fi"}),"infrastructure  a continuous chain of access points along the route that provides dedicated high-bandwidth connectivity to passing trains."]}),e.jsx("h3",{children:"Train Describers: Tracking Every Train"}),e.jsxs("p",{children:["The data that drives passenger information ultimately originates from the",e.jsx("strong",{children:" signalling system"}),". When a train passes a signal or occupies a track circuit, the interlocking registers the event. A ",e.jsx("strong",{children:"train describer (TD)"}),"system takes these raw signalling events and associates them with train identities. Each train service is assigned a four-character ",e.jsx("strong",{children:"headcode"}),' (e.g., 1A23) that identifies its class, route, and sequence. As the train progresses through the signalling system, the train describer "steps" the headcode forward from berth to berth (a berth being a defined location in the signalling system, typically a signal or track section).']}),e.jsx("p",{children:"The data flow is remarkably elegant: trackside detection equipment (track circuits or axle counters) detects the presence of a train. The interlocking registers the occupation and reports it to the train describer. The train describer matches the occupation to a known train identity and publishes a berth-step message. This message propagates to the control centre displays (showing the signaller where every train is), to Darwin (which calculates estimated arrival times), and ultimately to the departure boards on platforms and the apps on passengers' phones. The entire chain  from wheel touching rail to information appearing on a screen  typically completes in under 10 seconds."}),e.jsx("h3",{children:"Train Describer Message Types"}),e.jsx("p",{children:"Train describer systems communicate using standardised message types. In the UK, the two primary message classes are:"}),e.jsx("div",{className:"table-wrapper",children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Message Class"}),e.jsx("th",{children:"Type"}),e.jsx("th",{children:"Content"}),e.jsx("th",{children:"Example"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{rowSpan:4,children:e.jsx("strong",{children:"S-class (Signalling)"})}),e.jsx("td",{children:"SF"}),e.jsx("td",{children:"Signal state change (aspect change)"}),e.jsx("td",{children:"Signal EC410 changed to Green"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"SG"}),e.jsx("td",{children:"Signal state change to new aspect"}),e.jsx("td",{children:"Signal KX001 changed to Double Yellow"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"SH"}),e.jsx("td",{children:"Signal state change to another aspect"}),e.jsx("td",{children:"Signal KX001 changed to Red"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"SP / SS"}),e.jsx("td",{children:"Route set / cancelled indicators"}),e.jsx("td",{children:"Route set from signal EC410 via point 401A"})]}),e.jsxs("tr",{children:[e.jsx("td",{rowSpan:4,children:e.jsx("strong",{children:"C-class (Train movement)"})}),e.jsx("td",{children:"CA"}),e.jsx("td",{children:"Berth step  train steps from one berth to another"}),e.jsx("td",{children:"Headcode 1A23 stepped from berth EC0410 to EC0412"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"CB"}),e.jsx("td",{children:"Berth cancel  train identity removed from berth (usually at end of journey)"}),e.jsx("td",{children:"Headcode 1A23 cancelled from berth KX0001"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"CC"}),e.jsx("td",{children:"Berth interpose  train identity manually placed in berth (e.g., at origin station)"}),e.jsx("td",{children:"Headcode 1A23 interposed into berth EC0401"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"CT"}),e.jsx("td",{children:"Heartbeat  periodic message confirming the TD link is alive"}),e.jsx("td",{children:"TD area EC heartbeat at 14:30:00"})]})]})]})}),e.jsxs("p",{children:[e.jsx("strong",{children:"C-class messages"})," are the primary source of real-time train position data. The CA (berth step) message is the most common and most important  it indicates that a known train has moved from one location to another. These messages are published to the Network Rail data feeds and consumed by TRUST, Darwin, and numerous other downstream systems.",e.jsx("strong",{children:"S-class messages"})," provide signalling state information  signal aspects, route settings, and track circuit states  which are used by control centre displays and can be analysed to understand junction utilisation, signal approach patterns, and infrastructure performance."]}),e.jsx("p",{children:'Each train describer covers a defined geographic area (typically aligned with a signalling control area) and publishes messages to a feed identified by the TD area code (a two-character identifier like "EC" for East Coast, "WA" for Waterloo, etc.). The Network Rail Open Data platform provides access to TD feeds for registered developers, enabling third-party applications to track train movements in near-real-time.'}),e.jsx("h3",{children:"Automatic Route Setting (ARS)"}),e.jsxs("p",{children:["In a modern signalling control centre, the signaller does not manually set every route for every train. ",e.jsx("strong",{children:"Automatic Route Setting (ARS)"})," is a software system that automatically sets routes (clears signals and moves points) for trains according to the timetable, freeing signallers to focus on exception handling and disruption management."]}),e.jsx("p",{children:"The ARS algorithm works by maintaining a model of the current track state (which sections are occupied, which routes are set, which signals are showing what aspect) and the planned timetable (which train is due at which location at what time). For each approaching train, ARS calculates the optimal time to set the route  typically a few minutes before the train arrives  considering:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Timetable compliance:"})," Routes are set to deliver trains according to the planned schedule, maintaining the correct order and timing."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Conflict resolution:"})," When two trains need conflicting routes through a junction, ARS uses priority rules (typically based on the timetable and delay status) to determine which train goes first."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Route availability:"})," ARS will not attempt to set a route if the points are locked by another route, if the track sections are occupied, or if there are any safety restrictions in place."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Advance route setting:"})," ARS aims to set routes far enough in advance that trains see a clear signal sequence (green or double-yellow) and do not need to brake unnecessarily, improving line speed and capacity."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Regulation decisions:"})," In some implementations, ARS can make simple regulation decisions  for example, holding a train at a platform for an additional 30 seconds to improve a connection or to let a faster train pass on an adjacent line."]})]}),e.jsx("p",{children:"During normal operation, ARS handles 8095% of route-setting automatically. The signaller monitors the system and intervenes when the situation departs from the timetable  for example, during disruption when trains are running out of sequence, or when special movements (engineering trains, light engine movements) need manual routing. The signaller can override ARS at any time, and ARS will not set a route that the interlocking considers unsafe  it works within the safety envelope provided by the interlocking, not outside it."}),e.jsx("h3",{children:"Centralised Control Centres"}),e.jsxs("p",{children:["The trend in modern railway operation is towards ",e.jsx("strong",{children:"centralised control centres"}),"that integrate multiple functions previously handled in separate locations. A traditional railway might have signallers in local signal boxes, electrical controllers in traction power control rooms, incident managers in a separate operations centre, and passenger information staff at individual stations. A modern integrated control centre brings all of these functions together under one roof, enabling faster decision-making and better coordination during disruption."]}),e.jsxs("p",{children:["Network Rail's ",e.jsx("strong",{children:"Rail Operating Centres (ROCs)"})," are the UK example of this approach. Each ROC controls signalling across a wide geographic area using workstation-based signalling controls (replacing traditional lever frames and panel displays), monitors traction power distribution, manages incidents, coordinates passenger information, and interfaces with train operators and emergency services. The ROC concept consolidates what was previously distributed across hundreds of signal boxes into roughly a dozen large centres, each staffed 24/7 with signallers, electrical controllers, incident officers, and customer information specialists."]}),e.jsx("h3",{children:"Traffic Management Systems (TMS)"}),e.jsxs("p",{children:["Beyond basic ARS, modern control centres increasingly use sophisticated ",e.jsx("strong",{children:"Traffic Management Systems (TMS)"})," that provide a higher level of operational intelligence. While ARS automates route setting for individual trains, a TMS takes a network-wide view and optimises the overall flow of traffic, resolving conflicts and minimising total delay across the network."]}),e.jsx("p",{children:"Key TMS platforms used on the UK railway include:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"IECC (Integrated Electronic Control Centre):"})," The original Network Rail workstation-based signalling control system, providing electronic route setting with ARS capability. IECC replaced panel signal boxes from the 1990s onward and remains in widespread use."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Gemini:"})," A more recent signalling control system with enhanced TMS capabilities, including improved conflict prediction, better decision-support tools for signallers during disruption, and tighter integration with passenger information and traction power SCADA."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Luminate (formerly TM):"})," Network Rail's next-generation Traffic Management system, designed to provide network-wide optimisation. Luminate uses advanced algorithms to predict conflicts 3060 minutes ahead, suggest optimal regulation strategies, and calculate the network-wide impact of different operational decisions."]})]}),e.jsxs("p",{children:["A TMS differs from simple ARS in that it considers the ",e.jsx("strong",{children:"global optimum"}),"rather than just the local situation at each junction. For example, ARS at a junction might give priority to the train that arrives first, but a TMS might recognise that holding that train for 60 seconds would allow a heavily delayed connecting service to pass first, reducing total passenger delay across the network. This kind of network-level optimisation requires real-time data about every train on the network, sophisticated prediction algorithms, and decision-support tools that present options to the signaller or controller."]}),e.jsx("h3",{children:"Video Walls and Display Technologies"}),e.jsxs("p",{children:["The visual centrepiece of a modern control centre is the ",e.jsx("strong",{children:"video wall"}),"  a large-format display system that presents the geographic overview of the controlled area, showing track layout, train positions, signal aspects, and traction power status. Video walls serve as the shared situational awareness display for the entire control room team."]}),e.jsx("p",{children:"Modern video walls use several technologies:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Rear-projection cubes:"})," DLP (Digital Light Processing) projection units tiled together. Each cube is an independent display unit, and they are arranged in a grid to create a seamless large display. This was the dominant technology for control room video walls for many years due to reliability and image quality."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Narrow-bezel LCD panels:"})," Thin-bezel LCD screens tiled together. Modern panels have bezels as thin as 0.88 mm, making the joins nearly invisible. Lower cost than rear-projection but requires more careful calibration to match brightness and colour across panels."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"LED direct-view displays:"})," Arrays of LED modules creating a seamless display with no bezels at all. Increasingly favoured for new installations due to zero-bezel appearance, high brightness, and excellent viewing angles. Pixel pitch (typically 1.22.5 mm for control room applications) determines the minimum comfortable viewing distance."]})]}),e.jsxs("p",{children:["The video wall is driven by a ",e.jsx("strong",{children:"video wall controller"}),"  a specialised computing system that composites multiple input sources (signalling overview, CCTV feeds, SCADA displays, weather information) and distributes them across the display surface. The controller allows operators to dynamically resize and reposition windows, zoom into areas of interest, and bring up additional information sources as needed."]}),e.jsx("h3",{children:"Human Factors in Control Room Design"}),e.jsxs("p",{children:["The design of a railway control room is not just a technology challenge  it is a",e.jsx("strong",{children:"human factors"})," challenge. Operators work 812 hour shifts monitoring complex systems, making safety-critical decisions under time pressure, and coordinating with multiple teams. Poor control room design leads to fatigue, errors, missed alarms, and slower response to incidents."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"ISO 11064"})," (Ergonomic design of control centres) provides the framework for control room design, covering:"]}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Workstation layout:"})," Optimal positioning of screens, input devices, and communication equipment to minimise head and eye movement. Primary displays should be within 15 degrees of the operator's natural line of sight; secondary information within 30 degrees."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Lighting:"})," Controlled ambient lighting (typically 300500 lux) that allows screen readability without glare, with task lighting for paper-based activities. Windows require automated blinds to control daylight."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Noise:"})," Background noise levels below 45 dB(A) for tasks requiring concentration, with acoustic treatment to manage noise from multiple operators, telephones, and equipment."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Alarm management:"})," A rationalised alarm system that presents only actionable alarms at an appropriate rate (ISO 11064 guidance suggests no more than 612 alarms per operator per hour during normal operation). Alarm floods during incidents must be managed by suppression, shelving, and prioritisation so that critical alarms are not lost in noise."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Colour coding and symbology:"})," Standardised use of colour and symbols across all displays, so that information is immediately interpretable. Red for danger / occupied, green for clear, yellow for caution  applied consistently across signalling, SCADA, and passenger information displays."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Team coordination:"})," The physical layout must support communication between roles  signallers need to confer with electrical controllers, incident managers need line of sight to the signalling overview, and customer information staff need access to operational status. The layout should facilitate this without creating excessive noise or distraction."]})]}),e.jsx("div",{className:"highlight-box",children:e.jsxs("p",{children:["Research into control room incidents consistently shows that the majority of operational errors are not caused by technology failures but by ",e.jsx("strong",{children:"human factors"}),": alarm fatigue (operators ignoring or acknowledging alarms without investigating), mode confusion (not understanding the current state of an automated system), and communication failures (between roles or between shifts). Good control room design directly mitigates these risks and is as much a safety investment as the signalling interlocking itself."]})}),e.jsx("h3",{children:"Modern Control Room Software Architecture"}),e.jsx("p",{children:"The software systems in a modern control centre are complex, safety-critical, and highly integrated. The signalling control system presents a geographic overview of track layout, signal aspects, point positions, and train locations on large video walls and individual workstations. Operators interact through a point-and-click interface to set routes, place or remove restrictions, and manage the ARS system."}),e.jsx("p",{children:"Alongside the signalling system, the control centre runs traction power SCADA displays (showing substation status, feeder currents, and section switch positions), CCTV systems (aggregating feeds from hundreds of platform and level crossing cameras), the train describer display (showing the real-time position map of every train), and communications systems (GSM-R voice terminals, telephone recording, and intercom). All of these systems must interoperate. When an incident occurs  say a traction power fault causing a section to de-energise  the SCADA system alerts the electrical controller, the signalling system shows affected signals reverting to red, the train describer shows trains stopping, and the incident management system is activated to coordinate the response and push passenger information updates. This integrated view, with all systems visible in a single space, dramatically reduces response times compared to the old model of separate control rooms communicating by telephone."}),e.jsxs("p",{children:["Modern control centre architectures are increasingly moving toward ",e.jsx("strong",{children:"service-oriented and microservice-based designs"}),", where individual functional components (signalling HMI, SCADA display, train describer, ARS, TMS, CCTV viewer) are independently developed and deployed services that communicate through defined APIs and message brokers. This architectural approach improves maintainability, allows individual components to be updated without replacing the entire system, and enables integration of new data sources and applications as they become available."]}),e.jsxs(N,{type:"analogy",children:["The data pipeline from timetable to train describer to passenger display is a",e.jsx("strong",{children:" real-time streaming architecture"}),". The trackside detection is the event source (like a Kafka producer emitting click events). The train describer is the stream processor (a Kafka Streams or Flink job) that enriches raw events with state (train identity). Darwin is the downstream consumer that joins the stream with a reference dataset (the timetable), applies windowed aggregations (arrival time predictions), and publishes to multiple sinks (departure boards, web APIs, mobile push notifications). The whole system is event-driven, near-real-time, and must handle thousands of events per second with low latency. The Push Port is literally an ActiveMQ message broker  this is enterprise messaging middleware running at national scale. ARS is like an auto-scaling controller or Kubernetes scheduler  it makes routine decisions autonomously based on declared intent (the timetable), but escalates exceptions to the human operator (the signaller). The TMS is like a fleet orchestrator that optimises across the whole cluster rather than making decisions per-node. And the control room video wall is your Grafana dashboard  a single pane of glass showing all the metrics that matter, designed so that a human can spot anomalies at a glance."]}),e.jsx(N,{type:"info",label:"Open Data",children:"The UK's Darwin data feeds are available as open data, enabling third-party developers to build apps and services on top of real-time train running information. The Huxley2 open-source proxy and the National Rail OpenLDBWS SOAP/REST APIs provide access to departure boards, service details, and real-time predictions. Network Rail's Open Data Feeds provide direct access to train describer (TD) messages, TRUST movements, and timetable data via authenticated STOMP connections. This open data ecosystem has spawned dozens of independent rail apps, journey planners, and data visualisations  a rare example of a safety-critical industry embracing open data principles."}),e.jsx(N,{type:"info",label:"Key Standards",children:"ISO 11064 governs ergonomic design of control centres. IEC 62682 provides guidance on alarm management. The Darwin system interfaces are documented by National Rail Enquiries. Network Rail Open Data feeds are specified in the NROD wiki. Train describer message formats follow the Signal Box Area ID and Berth naming conventions defined in Network Rail's sectional appendices."}),e.jsx(ce,{goTo:h,items:[{target:"m4-l2",label:"Interlockings",desc:"Train describers derive their data directly from interlocking indications and track circuit states."},{target:"m8-l1",label:"Timetable Planning",desc:"The planned timetable is the baseline against which all real-time information is compared, and ARS uses it to set routes automatically."},{target:"m6-l1",label:"Rolling Stock Types",desc:"Onboard passenger information systems receive data from Darwin and display it within the train."},{target:"m4-l3",label:"ETCS & Moving Block",desc:"Under ETCS Level 2/3, train position data comes from the RBC rather than traditional track circuits, changing how train describers work."},{target:"m7-l2",label:"Fibre Networks & SCADA",desc:"All control centre systems depend on the fibre backbone for data transport, and SCADA displays are integrated alongside signalling controls."}]})]})}const zp=[{text:'What is a "train describer" in railway operations?',options:["A printed timetable showing train descriptions to passengers","A system that tracks train identities (headcodes) as they move through the signalling system, passing the identity from one berth to the next as track circuits activate","A database containing technical specifications of every locomotive","A radio system where drivers describe their train consist to the signaller"],correct:1,explanation:"Train describers automatically step a four-character train identity (headcode like 1A42) from berth to berth as the train occupies and clears track circuits. This gives signallers and downstream systems a real-time picture of which train is where, forming the basis of all passenger information and performance monitoring."},{text:"What is the data pipeline from train detection to a passenger departure screen?",options:["GPS on trains sends location directly to platform screens","Track circuits/axle counters detect the train  the train describer identifies it  the control system calculates expected times  data is published to Darwin/feeds  departure boards display the information","Drivers manually radio their position, which is typed into the display system by station staff","Satellite tracking feeds a central AI that predicts arrivals"],correct:1,explanation:"The pipeline starts with physical detection (track circuits or axle counters), which feeds the train describer to identify the train. Timetable and real-time data are combined in systems like TRUST, published via Darwin (the UK data feed), and consumed by station departure boards, apps, and websites  a chain of systems from trackside sensor to passenger screen."},{text:"What role does a centralised control centre play in modern railway operations?",options:["It replaces all local signal boxes but has no involvement in passenger information","It integrates signalling control, train regulation, incident management, and information coordination into one location, enabling a unified operational view and faster decision-making","It only manages freight movements, not passenger services","It is purely an administrative office with no real-time operational function"],correct:1,explanation:"Modern control centres (like the UK Rail Operating Centres) bring together signallers, train controllers, information staff, and incident managers in one room. This co-location dramatically improves communication and decision speed during disruption compared to the traditional model of hundreds of separate signal boxes."},{text:"What is Darwin in the context of UK railway passenger information?",options:["A biological research programme funded by Network Rail","A national real-time data feed that aggregates timetable, train running, and disruption information and distributes it to apps, websites, and station displays","A software tool used only by train drivers to view their schedule","An internal staff rostering system for train operating companies"],correct:1,explanation:"Darwin is the UK rail industry data hub operated by National Rail Enquiries. It ingests schedule data, real-time train movements from TRUST, and operator-entered disruption messages, then publishes a unified feed that third-party apps (Trainline, Citymapper, etc.) and station departure boards consume to show passengers accurate live information."}];function qp(h,y){switch(h){case"m7-l1":return e.jsx(Mp,{goTo:y});case"m7-l2":return e.jsx(Dp,{goTo:y});case"m7-l3":return e.jsx(Bp,{goTo:y});default:return null}}const Np={"m7-l1":Ep,"m7-l2":Rp,"m7-l3":zp};function Wp({goTo:h}){return e.jsxs(e.Fragment,{children:[e.jsxs("figure",{className:"lesson-figure",children:[e.jsx("div",{className:"cad-symbol",children:e.jsxs("svg",{viewBox:"0 0 400 140",style:{width:"100%",maxWidth:"400px"},children:[e.jsx("text",{x:"200",y:"14",fill:"var(--text-dim)",fontSize:"10",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"Time-Distance (String) Diagram"}),e.jsx("line",{x1:"60",y1:"25",x2:"60",y2:"120",stroke:"var(--text-dim)",strokeWidth:"1"}),e.jsx("line",{x1:"60",y1:"120",x2:"380",y2:"120",stroke:"var(--text-dim)",strokeWidth:"1"}),e.jsx("text",{x:"55",y:"35",fill:"var(--text-dim)",fontSize:"7",fontFamily:"JetBrains Mono, monospace",textAnchor:"end",children:"Stn A"}),e.jsx("text",{x:"55",y:"60",fill:"var(--text-dim)",fontSize:"7",fontFamily:"JetBrains Mono, monospace",textAnchor:"end",children:"Stn B"}),e.jsx("text",{x:"55",y:"85",fill:"var(--text-dim)",fontSize:"7",fontFamily:"JetBrains Mono, monospace",textAnchor:"end",children:"Stn C"}),e.jsx("text",{x:"55",y:"115",fill:"var(--text-dim)",fontSize:"7",fontFamily:"JetBrains Mono, monospace",textAnchor:"end",children:"Stn D"}),e.jsx("line",{x1:"60",y1:"32",x2:"380",y2:"32",stroke:"var(--border)",strokeWidth:"0.5",strokeDasharray:"2,3"}),e.jsx("line",{x1:"60",y1:"57",x2:"380",y2:"57",stroke:"var(--border)",strokeWidth:"0.5",strokeDasharray:"2,3"}),e.jsx("line",{x1:"60",y1:"82",x2:"380",y2:"82",stroke:"var(--border)",strokeWidth:"0.5",strokeDasharray:"2,3"}),e.jsx("line",{x1:"60",y1:"112",x2:"380",y2:"112",stroke:"var(--border)",strokeWidth:"0.5",strokeDasharray:"2,3"}),e.jsx("text",{x:"80",y:"132",fill:"var(--text-dim)",fontSize:"7",fontFamily:"JetBrains Mono, monospace",children:"06:00"}),e.jsx("text",{x:"180",y:"132",fill:"var(--text-dim)",fontSize:"7",fontFamily:"JetBrains Mono, monospace",children:"07:00"}),e.jsx("text",{x:"280",y:"132",fill:"var(--text-dim)",fontSize:"7",fontFamily:"JetBrains Mono, monospace",children:"08:00"}),e.jsx("polyline",{points:"80,32 120,57 125,57 180,112",fill:"none",stroke:"var(--accent)",strokeWidth:"1.5"}),e.jsx("polyline",{points:"100,32 140,57 148,57 190,82 198,82 260,112",fill:"none",stroke:"var(--blue)",strokeWidth:"1.5"}),e.jsx("polyline",{points:"200,112 250,82 255,82 300,57 308,57 360,32",fill:"none",stroke:"var(--accent-secondary)",strokeWidth:"1.5"}),e.jsx("line",{x1:"240",y1:"28",x2:"260",y2:"28",stroke:"var(--accent)",strokeWidth:"1.5"}),e.jsx("text",{x:"265",y:"31",fill:"var(--text-dim)",fontSize:"7",fontFamily:"JetBrains Mono, monospace",children:"fast"}),e.jsx("line",{x1:"290",y1:"28",x2:"310",y2:"28",stroke:"var(--blue)",strokeWidth:"1.5"}),e.jsx("text",{x:"315",y:"31",fill:"var(--text-dim)",fontSize:"7",fontFamily:"JetBrains Mono, monospace",children:"stopping"})]})}),e.jsx("figcaption",{children:"CAD diagram: Time-distance (string) diagram  the fundamental timetable planning tool. Lines represent train paths; horizontal segments show station dwell times."})]}),e.jsx("h3",{children:"The Timetable as the Master Plan"}),e.jsxs("p",{children:["The ",e.jsx("strong",{children:"timetable"})," is the single document that coordinates every element of a railway into a coherent whole. It specifies, for every train on the network, the departure and arrival time at every calling point, the route to be taken, the platform to be used, the connections to be maintained with other services, and the rolling stock formation to be deployed. It is the contract between the railway and its passengers, and the instruction set that drives the entire operational machine. Without a timetable, a railway is merely infrastructure sitting idle."]}),e.jsx("p",{children:"A timetable is not simply a list of times. It is the output of an extraordinarily complex planning process that must reconcile the demands of passenger and freight customers with the physical constraints of the infrastructure, the availability and capability of rolling stock, the working patterns of train crew, and the maintenance needs of every asset on the railway. Getting this wrong means trains that cannot physically run, crews that are unavailable, conflicts at junctions, and a cascade of delays across the network."}),e.jsx("h3",{children:"Inputs to Timetable Planning"}),e.jsxs("p",{children:["Building a timetable requires assembling a vast collection of inputs from across every engineering and operational discipline. ",e.jsx("strong",{children:"Service requirements"})," come first: the desired frequency, stopping pattern, journey time, and first/last service for each route, driven by demand analysis and franchise or concession obligations. On a busy commuter corridor, this might mean 12 trains per hour in the peak; on a rural branch, one every two hours."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Rolling stock availability and performance"})," defines what is physically possible. Each train type has a known acceleration curve, maximum speed, and braking performance, which together determine the minimum journey time between any two points. The number of available units constrains the maximum number of simultaneous services. Maintenance schedules remove vehicles from service at regular intervals, and depot capacity limits how many trains can be stabled and prepared overnight."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Crew availability"})," is equally critical. Drivers and conductors have legal limits on continuous driving time (typically 4.5 hours without a break in the UK), daily and weekly working hours, mandatory rest periods, and route knowledge requirements. A driver can only work a service if they are signed off to operate the traction type and know the route. Crew diagrams must be built in parallel with the timetable, and a service that is feasible from a rolling stock perspective may be impossible if no qualified crew is available."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Infrastructure capability"})," is the hard ceiling. Line speeds, the number of tracks, signalling headways, junction layouts, platform lengths, and the capacity of station throats all impose absolute constraints. If a junction can only handle 24 movements per hour and you are already scheduling 22, adding two more express services is not a simple matter of finding free slots."]}),e.jsx("h3",{children:"Time-Distance Diagrams (Train Graphs / Bildfahrplan)"}),e.jsxs("p",{children:["The ",e.jsx("strong",{children:"time-distance diagram"}),"  known in German-speaking railways as a",e.jsx("em",{children:"Bildfahrplan"})," and sometimes called a ",e.jsx("strong",{children:"train graph"})," or"," ",e.jsx("strong",{children:"string diagram"}),"  is the single most important tool in timetable planning. It is a two-dimensional graph with ",e.jsx("strong",{children:"time"})," on the horizontal axis and"," ",e.jsx("strong",{children:"distance along the route"})," on the vertical axis. Each train is represented by a line whose slope indicates speed: a steep line (covering distance quickly) represents a fast train, while a shallow line indicates a slow service. A horizontal line segment means the train is stationary (dwelling at a station or waiting in a loop)."]}),e.jsx("p",{children:"Reading a time-distance diagram reveals the entire operational picture at a glance. Where two lines cross, the trains pass each other (on double track, this is routine; on single track, one must wait in a loop). Where two lines converge, they are using the same track in the same direction  the gap between them represents the headway. Where lines diverge or merge at a junction, the spacing reveals whether there are conflicts. Stations appear as horizontal bands, and the dwell time is visible as the width of the horizontal segment where a train line flattens."}),e.jsxs("p",{children:["The power of this representation is that ",e.jsx("strong",{children:"capacity constraints become visual"}),". A bottleneck section appears as a zone where lines are tightly packed. A conflict at a flat junction shows up as lines crossing within the junction zone. A missed connection is visible as a departing train line beginning before the arriving train line reaches the station. Timetable planners spend much of their working lives constructing and adjusting these diagrams, threading new train paths through gaps in the existing pattern."]}),e.jsxs("figure",{className:"lesson-figure",children:[e.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/8/8a/Bildfahrplan_Zuerich-Bern_2016.svg/1280px-Bildfahrplan_Zuerich-Bern_2016.svg.png",alt:"Time-distance diagram (Bildfahrplan) showing train paths between Zurich and Bern, with time on the horizontal axis and stations on the vertical axis",loading:"lazy"}),e.jsxs("figcaption",{children:["A Bildfahrplan (time-distance diagram) for the ZurichBern corridor. Each diagonal line is a train path; steeper lines are faster services. The regular, symmetric pattern reflects the Swiss Taktfahrplan (clock-face timetable). Image: ",e.jsx("a",{href:"https://commons.wikimedia.org/wiki/File:Bildfahrplan_Zuerich-Bern_2016.svg",target:"_blank",rel:"noopener noreferrer",children:"Wikimedia Commons"}),", CC BY-SA 4.0"]})]}),e.jsx("div",{className:"highlight-box",children:e.jsxs("p",{children:[e.jsx("strong",{children:"How to read a train graph:"})," (1) Identify the time axis  hours are marked along the top or bottom, usually in 24-hour format. (2) Identify station names along the vertical axis  distance between them is to scale. (3) Each diagonal line is one train: follow it left to right to see its journey through time. (4) Where a line flattens horizontally, the train is stopped. (5) Parallel lines moving in the same direction represent successive trains; their horizontal gap is the headway. (6) Lines moving in opposite directions crossing at a point represent trains passing each other. (7) Convergence of lines toward a single point indicates a capacity pinch point."]})}),e.jsx("h3",{children:"Running Time Calculation"}),e.jsxs("p",{children:["Before a train path can be placed on the timetable, the planner must know how long the journey takes. The ",e.jsx("strong",{children:"running time calculation"})," is a step-by-step process that determines the ",e.jsx("strong",{children:"technical minimum running time"})," (the fastest the train can physically complete the journey) and then adds various allowances to produce the"," ",e.jsx("strong",{children:"sectional running time"})," used in the timetable. The steps are as follows:"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Step 1: Build the speed profile."})," For each section of track, determine the maximum permitted speed. This is the lower of the ",e.jsx("strong",{children:"line speed"})," (set by the infrastructure  track geometry, signalling, and structures) and the ",e.jsx("strong",{children:"rolling stock maximum speed"}),". The output is a stepped profile of maximum speed against distance. At junctions, crossovers, and temporary speed restrictions, the profile dips. Through stations where the train does not stop, the profile may be limited by platform curvature or point speed restrictions."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Step 2: Apply gradient and curvature resistance."})," On uphill gradients, the available tractive effort is partly consumed overcoming gravity, reducing the achievable speed. On curves, cant deficiency limits the speed independently of the line speed. The running time calculation must model the train's acceleration and speed maintenance on each gradient and curve, using the known tractive effort and resistance curves for the specific rolling stock type. The ",e.jsx("strong",{children:"Davis equation"})," models resistance as a function of speed: R = A + Bv + Cv, where A is rolling resistance, B is flange and track resistance, and C is aerodynamic drag."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Step 3: Calculate acceleration and braking."})," At each calling point, the train must decelerate from line speed to a stop and then accelerate back to line speed. The braking distance depends on the initial speed, braking rate (typically 0.51.0 m/s for service braking), and gradient. The acceleration distance depends on the power-to-weight ratio. Both consume time beyond what a non-stopping train would take. For a typical suburban EMU stopping at a station on level track, the time penalty for the stop is approximately 3060 seconds depending on line speed, plus the dwell time."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Step 4: Add dwell times."})," At each calling point, the train must stop for passengers to board and alight. Dwell times range from 30 seconds at a quiet suburban station to 23 minutes at a busy interchange. The planned dwell time must be realistic based on observed passenger volumes, door width and number, step-free access requirements, and whether the station is a crew change point or has on-train catering operations."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Step 5: Sum the components."})," The total of running time between each station pair, plus dwell times, gives the ",e.jsx("strong",{children:"technical minimum journey time"}),". This is the fastest the service can run under ideal conditions with no other traffic on the railway."]}),e.jsx("h3",{children:"Pathing Allowances"}),e.jsx("p",{children:"The technical minimum running time is never used directly in the timetable. Several categories of allowance are added to produce the timetabled running time:"}),e.jsx("div",{className:"table-wrapper",children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Allowance Type"}),e.jsx("th",{children:"Purpose"}),e.jsx("th",{children:"Typical Magnitude"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsxs("td",{children:[e.jsx("strong",{children:"Engineering allowance"})," (pathing time)"]}),e.jsx("td",{children:"Time added to resolve conflicts with other train paths. If a fast train must follow a slower train for a section before overtaking, the additional time beyond the technical minimum is captured here. It reflects the reality that trains do not run in isolation."}),e.jsx("td",{children:"Variable  0 to several minutes per section, depending on congestion"})]}),e.jsxs("tr",{children:[e.jsxs("td",{children:[e.jsx("strong",{children:"Performance allowance"})," (recovery time)"]}),e.jsx("td",{children:"Time added beyond the technical minimum to allow a train to recover from minor delays. Provides resilience so that a small perturbation does not cascade. Distributed along the route, typically weighted toward the end of the journey where cumulative delays are greatest."}),e.jsx("td",{children:"Typically 58% of the technical minimum running time (e.g., 35 min on a 60-min journey)"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Station allowance"})}),e.jsx("td",{children:"Additional dwell time above the operational minimum to allow for passenger flow variability, accessibility needs, and operational contingency. Provides buffer for higher-than-expected boarding times."}),e.jsx("td",{children:"1530 seconds per calling point, more at major stations"})]})]})]})}),e.jsx("p",{children:"The art of placing recovery time is crucial to timetable quality. Placing too little leaves the timetable fragile  any delay propagates to the destination. Placing too much wastes capacity and delivers unnecessarily slow journeys. Modern practice uses historical performance data to identify where delays most commonly arise and concentrates recovery time at those points. After a known bottleneck (a busy junction, a constrained station approach), a larger allowance is inserted. On free-running sections with few interactions, minimal allowance is needed."}),e.jsx("h3",{children:"Rolling Stock Diagramming"}),e.jsxs("p",{children:["Once the timetable defines every train service, the next planning stage is the"," ",e.jsx("strong",{children:"rolling stock diagram"})," (unit diagram or vehicle diagram). This assigns specific train units to specific services throughout the day, ensuring that every timetabled service has a vehicle and that every vehicle returns to a location where it can be maintained, refuelled, or stabled overnight."]}),e.jsx("p",{children:"A rolling stock diagram is a graph showing, for each unit, its sequence of duties through the day: the first service it works, where it goes, what it does next, when and where it is coupled or uncoupled, and when it returns to depot. The key constraints are:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Fleet size:"})," The number of available units sets the absolute maximum number of simultaneous services. If 40 units are available and the peak timetable requires 38 in service, only 2 are spare for failures or maintenance. This is an extremely thin margin."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Mileage balancing:"})," Maintenance is triggered by mileage and calendar intervals. Units should accumulate mileage at roughly equal rates so that they present for exam at predictable intervals and do not all become due simultaneously."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Coupling and uncoupling:"})," On many routes, peak-hour trains are formed of multiple units coupled together (e.g., two 4-car units making an 8-car train) which are then split for off-peak services. Coupling and uncoupling takes 515 minutes depending on coupler type and requires a shunter or trained driver. The diagram must schedule these operations at stations with suitable facilities and in time windows that do not delay revenue services."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Depot access:"})," Units must visit a depot at regular intervals for fuelling (diesel), cleaning, and scheduled examinations. The diagram must route each unit through a depot visit at intervals compliant with the maintenance plan."]})]}),e.jsx("h3",{children:"Crew Diagrams"}),e.jsxs("p",{children:["In parallel with rolling stock diagrams, ",e.jsx("strong",{children:"crew diagrams"})," (driver and conductor rosters) must be built. A crew diagram assigns each driver or conductor to a sequence of duties through their working day, complying with a complex set of rules:"]}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Route knowledge:"})," A driver may only operate over routes for which they hold current route knowledge. This requires initial route learning (riding the route with an instructor, learning signals, gradients, speed restrictions, and unusual features) and periodic refresher trips to maintain competence. If a driver has not worked a route for a defined period (typically 612 months), their route knowledge lapses and they must re-learn it before working services on that route."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Traction knowledge:"})," Similarly, drivers must be trained and assessed on each type of rolling stock they operate. A driver qualified on a Class 390 Pendolino cannot simply step onto a Class 800 Azuma without conversion training."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Hours of work and fatigue management:"})," The Railways and Other Guided Transport Systems (Safety) Regulations 2006 (ROGS) require that train operating companies have fatigue management systems. Typical limits include: maximum 12-hour shift, maximum 4.5 hours continuous driving without a break, minimum 12-hour rest between duties, and limits on the proportion of night shifts in a roster cycle. Fatigue risk scoring tools are used to assess whether proposed rosters create unacceptable fatigue risk."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Sign-on and sign-off time:"})," A driver does not simply walk onto a train. They must sign on at their home depot, receive any notices (speed restrictions, altered working), check their route and traction competence for the day's diagram, and walk to the platform. This takes 1530 minutes. Similarly, at the end of duty they must complete any defect reports and sign off. The crew diagram must account for these non-revenue periods."]})]}),e.jsx("h3",{children:"Depot Planning and Empty Coaching Stock Movements"}),e.jsxs("p",{children:["Trains do not materialise at platforms. Every service that begins at a terminus must first travel from a depot or stabling point to the platform as an"," ",e.jsx("strong",{children:"Empty Coaching Stock (ECS)"})," movement. These movements are invisible to passengers but must be timetabled, pathed through the signalling system, and resourced with a driver. On a major network, ECS movements can account for 1015% of all train movements."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Depot planning"})," determines where each unit is stabled overnight and how it reaches its first service of the day. Key considerations include:"]}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Depot capacity:"})," The number of stabling roads and their length. A depot designed for 20 x 4-car units cannot stable 25 without creative stacking (berthing units behind each other on the same road), which complicates morning departures as inner units cannot leave until outer ones are moved."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Servicing facilities:"})," Fuelling points, cleaning roads, watering points (for toilet tanks), and maintenance bays. Not all depots have all facilities, so some units must make positioning moves to depots with specific capabilities."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"ECS journey time:"})," A depot 30 minutes from the terminus means the first ECS move must depart 30+ minutes before the first revenue service, consuming path capacity on the approach tracks during a period when other early services are also starting."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Strategic stabling:"})," To reduce ECS mileage, some units are stabled at intermediate stations or in dedicated sidings close to where they start service, rather than returning to the main depot every night. This requires secure stabling facilities and local servicing capability."]})]}),e.jsx("h3",{children:"Freight Path Planning"}),e.jsx("p",{children:"Freight trains present unique timetabling challenges. They are typically much slower than passenger services (75 mph maximum for most UK freight versus 125 mph for express passenger trains), much heavier (up to 2,000+ tonnes gross), and much longer (up to 775 metres on permitted routes). Their slower speed means they occupy track sections for longer, consuming more capacity per path than a passenger train."}),e.jsx("p",{children:"Freight paths must be planned with regard to several specific constraints:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Gauge clearance:"}),` Certain freight flows (e.g., 9'6" high-cube shipping containers on standard wagons) exceed the normal loading gauge and require routes that have been gauge-cleared with sufficient structure clearances. These`," ",e.jsx("strong",{children:"gauge-cleared routes"})," (such as the W10, W12, or W12a gauges in the UK) constrain which paths freight can use."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Route availability (RA):"})," Heavy freight trains impose high axle loads (up to 25.5 tonnes on some flows) that not all routes can support. The route availability number of each line section limits which wagons can use it."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Dangerous goods:"})," Trains carrying dangerous goods (petroleum, chemicals, nuclear flasks) have specific routing restrictions, speed limits, and requirements for avoiding certain tunnels, stations, and populated areas. These are governed by the Regulations concerning the International Carriage of Dangerous Goods by Rail (RID)."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Pathing slots:"})," In the UK, Network Rail offers standardised freight path slots at key capacity constraints. Freight operators bid for these slots during the timetable planning process. Where demand exceeds available capacity (common at bottleneck locations), paths are allocated according to a defined priority framework."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Terminal access:"})," Freight trains must be able to enter and leave freight terminals, private sidings, and intermodal yards. Access often requires running over single-lead junctions that have limited capacity. The time needed for loading and unloading constrains the number of train paths the terminal can handle per day."]})]}),e.jsx("h3",{children:"Timetable Modelling Tools"}),e.jsx("p",{children:"Modern timetable planning relies on specialist software tools to model the infrastructure, simulate train movements, and identify conflicts. The most widely used tools include:"}),e.jsx("div",{className:"table-wrapper",children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Tool"}),e.jsx("th",{children:"Developer"}),e.jsx("th",{children:"Key Capabilities"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"RailSys"})}),e.jsx("td",{children:"Rail Management Consultants (RMCon), Germany"}),e.jsx("td",{children:"Microscopic simulation of train movements on detailed infrastructure models. Used for timetable construction, capacity analysis, and delay propagation studies. Widely used across European railways and by consultancies."})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"OpenTrack"})}),e.jsx("td",{children:"OpenTrack Railway Technology, ETH Zurich spin-off"}),e.jsx("td",{children:"Microscopic simulation with detailed signalling and interlocking modelling. Strong in ETCS simulation. Used by SBB, DB, and many academic institutions for research and operational planning."})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"VISION"})}),e.jsx("td",{children:"Resonate (formerly Luminary), UK"}),e.jsx("td",{children:"The primary timetable planning tool used by Network Rail. Produces working timetables, validates conflicts, and generates train graph outputs. Integrated with the UK's timetable planning process."})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"LUKS"})}),e.jsx("td",{children:"VIA Consulting, Germany"}),e.jsx("td",{children:"Capacity analysis tool implementing the UIC 406 compression method. Used for strategic capacity studies."})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"OnTime"})}),e.jsx("td",{children:"Bane NOR / Jernbanedirektoratet, Norway"}),e.jsx("td",{children:"Delay propagation simulation using stochastic methods. Models the probability distribution of delays rather than deterministic times."})]})]})]})}),e.jsxs("p",{children:["These tools model the railway at a ",e.jsx("strong",{children:"microscopic"})," level: every signal, every point, every gradient, and the exact speed profile of each train type. They can validate whether a proposed timetable is feasible (no two trains in the same block section simultaneously), estimate running times to the second, and simulate the effect of perturbations through stochastic delay injection. Macroscopic models provide faster but less detailed analysis for strategic planning."]}),e.jsx("h3",{children:"Constraints and Conflicts"}),e.jsxs("p",{children:["The timetable planner must satisfy a long list of physical constraints simultaneously.",e.jsx("strong",{children:" Minimum headway"})," is the closest spacing at which two successive trains can safely follow each other, set by the signalling system. On a four-aspect colour-light route, this is typically 2 to 3 minutes; with ETCS Level 2, it can be brought below 2 minutes under ideal conditions. Every pair of successive trains on the same track must respect this minimum."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Junction conflicts"})," arise wherever routes cross or converge. Two trains approaching a flat junction from different directions cannot occupy the junction simultaneously. The timetable must sequence them with sufficient separation, including the time for points to move and be detected. At complex junctions like those found approaching major termini, the number of possible conflicts multiplies rapidly, and resolving them is one of the hardest parts of timetable construction."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Platform reoccupation time"})," sets a minimum gap between one train departing a platform and the next arriving. This includes the time for the departing train to clear the platform, the signal controlling the platform to clear, and the approaching train to be signalled in and brought to a stand. Typically 3 to 5 minutes at a terminus, less at a through station. ",e.jsx("strong",{children:"Turnaround times"})," at terminal stations must allow for the driver to change ends, the train to be checked, and any cleaning or coupling/uncoupling to be completed. ",e.jsx("strong",{children:"Crew rest"})," requirements may further extend the minimum turnaround if the driver has reached the end of their permitted driving period."]}),e.jsx("h3",{children:"Working Timetable vs Public Timetable"}),e.jsxs("p",{children:["The ",e.jsx("strong",{children:"Working Timetable (WTT)"})," is the railway's internal operational document. It contains every scheduled train movement, including empty coaching stock (ECS) workings, light engine movements, freight paths, engineering trains, and test runs that passengers never see. Times are given to the half-minute (e.g. 14:32:30). The WTT also specifies routing, line usage, speed restrictions, and any special operating instructions for each service. This is the document that signallers and controllers work from."]}),e.jsxs("p",{children:["The ",e.jsx("strong",{children:"public timetable"})," is a simplified extract showing only passenger-carrying services, rounded to the nearest minute, with user-friendly station names and connection information. The difference between the two can be significant: on a busy main line, up to half of all train movements may be non-passenger workings that are invisible to the travelling public but critical to railway operation."]}),e.jsx("h3",{children:"The December 2018 Timetable Crisis"}),e.jsx("p",{children:"The May 2018 timetable change on the UK railway stands as a cautionary tale about the consequences of timetable planning failure. Govia Thameslink Railway (GTR) and Northern introduced new timetables that represented the most ambitious changes in a generation  thousands of services altered simultaneously to take advantage of the Thameslink Programme infrastructure. The result was months of chaos: mass cancellations, severe overcrowding, stranded passengers, and enormous reputational damage to the railway industry."}),e.jsx("p",{children:"The root causes were multiple and systemic. The infrastructure works (particularly at London Bridge) were delivered late, compressing the time available for timetable validation. Driver training on new routes could not be completed in time because the training paths required access to the same infrastructure that was still under construction. Rolling stock diagrams were built on optimistic assumptions about fleet availability. The scale of change was unprecedented  rather than incremental adjustments, entire timetable structures were rewritten  and the interdependencies between the Thameslink core, GTR suburban services, and Northern meant that problems in one area cascaded across all three."}),e.jsx("div",{className:"highlight-box",children:e.jsxs("p",{children:[e.jsx("strong",{children:"Key lessons from the 2018 timetable crisis:"})," (1) Never introduce large-scale timetable changes until all infrastructure, rolling stock, and crew prerequisites are confirmed as delivered. (2) Build in fallback positions  a known-good timetable that can be reverted to if the new one fails. (3) Validate the complete system (timetable + rolling stock diagrams + crew diagrams) as an integrated whole, not as separate workstreams. (4) Allow adequate time for crew route learning and traction training before the implementation date. (5) Test the timetable through simulation under degraded conditions, not just the ideal case."]})}),e.jsxs(N,{type:"analogy",children:["Timetable planning is a ",e.jsx("strong",{children:"combinatorial optimisation problem"})," and, in the general case, it is NP-hard. The planner is attempting to fit hundreds or thousands of train paths into a finite time-space graph while satisfying hard constraints (headways, junction conflicts, platform occupancy) and optimising soft objectives (journey time, connections, crew efficiency). No algorithm can guarantee the global optimum in polynomial time. In practice, railways use a combination of heuristic search, simulation, and iterative refinement, much like solving a large constraint-satisfaction problem with backtracking. Think of it as scheduling thousands of long-running processes on a distributed system with shared resources, mutex locks (junctions), and strict latency requirements (journey times) where the scheduler itself takes months to run. Rolling stock and crew diagrams are like container orchestration and on-call rosters  they must be solved jointly with the workload schedule, because a perfectly planned timetable that has no drivers or no trains is useless, exactly as a Kubernetes deployment with no nodes or an incident runbook with no on-call engineers."]}),e.jsxs(N,{label:"Timetable Development Cycle",children:["In the UK, the timetable changes twice a year (May and December). The planning process begins around 18 months before the change date, with train operators submitting bids for paths to Network Rail. These are processed through the ",e.jsx("strong",{children:"Informed Traveller"})," milestones: D-40 weeks (draft timetable offered), D-26 weeks (firm timetable published internally), D-12 weeks (public timetable published). Late changes after D-12 require formal approval and are strongly discouraged because they disrupt crew and stock planning that has already been built around the timetable. The European equivalent is the annual timetable change in December, coordinated across all member railways through the Forum Train Europe (FTE) process, which allocates international paths up to 18 months in advance."]}),e.jsx(ce,{goTo:h,items:[{target:"m4-l1",label:"Block System & Signals",desc:"Signalling headway is the fundamental constraint on timetable density."},{target:"m6-l1",label:"Rolling Stock Types",desc:"Vehicle performance characteristics (acceleration, max speed) determine feasible journey times."},{target:"m1-l2",label:"Track Geometry",desc:"Line speed and curvature constraints feed directly into timetable journey times."},{target:"m3-l1",label:"Earthworks & Drainage",desc:"Infrastructure capability and maintenance needs shape available capacity."}]})]})}const Op=[{text:"Why is railway timetabling often described as a constraint-satisfaction problem?",options:["Because trains must satisfy passenger complaints","Because the timetable must simultaneously satisfy many hard constraints (infrastructure capacity, junction conflicts, turnaround times, crew rules) and soft constraints (even spacing, connections) with limited resources","Because there is always exactly one valid timetable solution","Because constraints only apply to freight, not passenger services"],correct:1,explanation:"A timetable must respect infrastructure limits (block sections, junction conflicts, platform availability), rolling stock and crew diagrams, minimum turnaround times, connection requirements, and maintenance windows  all simultaneously. Finding a feasible solution that also optimises commercial objectives is a classic constraint-satisfaction/optimisation problem."},{text:"What is the difference between the Working Timetable (WTT) and the public timetable?",options:["They are identical documents published in different formats","The WTT contains precise timings to the half-minute at every timing point including passing times and pathing allowances, while the public timetable shows only scheduled station stops rounded to whole minutes","The WTT is only used during engineering works, and the public timetable is for normal operations","The public timetable is more detailed because it includes platform numbers"],correct:1,explanation:"The WTT is the operational document with half-minute precision at every timing point (including junctions and passing loops where the train does not stop), plus engineering and pathing allowances. The public timetable is a simplified extract showing only calling points at rounded minutes  the same relationship as internal API contracts vs. a public-facing user interface."},{text:"Which of the following is NOT a typical input to the timetabling process?",options:["Infrastructure capability (line speeds, platform lengths, junction capacity)","Rolling stock fleet availability and performance characteristics","The colour scheme of the train operating company","Crew working-time regulations and depot locations"],correct:2,explanation:"Timetabling inputs include infrastructure data (routes, speeds, capacity), rolling stock (fleet size, acceleration, max speed), crew constraints (shift length, route knowledge), commercial requirements (frequency, connections), and maintenance windows. The livery or branding of the operator has no bearing on the timetable."},{text:"Why is the general railway timetabling problem considered NP-hard?",options:["Because railways use a non-polynomial track gauge","Because the number of possible combinations of train paths, platforms, and timings grows combinatorially, making it computationally infeasible to guarantee finding an optimal solution for real-sized networks in polynomial time","Because timetables must be recalculated every day",'Because NP stands for "National Planning" which is always difficult'],correct:1,explanation:"With thousands of trains, hundreds of junctions, and minute-by-minute time slots, the solution space is astronomically large. The problem has been formally shown to be NP-hard, meaning no known algorithm can guarantee an optimal solution in polynomial time. In practice, heuristics, decomposition, and iterative methods are used to find good-enough solutions."}];function Up({goTo:h}){return e.jsxs(e.Fragment,{children:[e.jsxs("figure",{className:"lesson-figure",children:[e.jsx("div",{className:"cad-symbol",children:e.jsxs("svg",{viewBox:"0 0 400 120",style:{width:"100%",maxWidth:"400px"},children:[e.jsx("text",{x:"200",y:"14",fill:"var(--text-dim)",fontSize:"10",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"Capacity Constraints  Flat Junction"}),e.jsx("line",{x1:"20",y1:"55",x2:"380",y2:"55",stroke:"var(--text-bright)",strokeWidth:"2"}),e.jsx("line",{x1:"20",y1:"70",x2:"380",y2:"70",stroke:"var(--text-bright)",strokeWidth:"2"}),e.jsx("line",{x1:"200",y1:"55",x2:"300",y2:"25",stroke:"var(--text-bright)",strokeWidth:"2"}),e.jsx("line",{x1:"210",y1:"55",x2:"310",y2:"25",stroke:"var(--text-bright)",strokeWidth:"2"}),e.jsx("line",{x1:"200",y1:"70",x2:"300",y2:"100",stroke:"var(--text-bright)",strokeWidth:"2"}),e.jsx("line",{x1:"210",y1:"70",x2:"310",y2:"100",stroke:"var(--text-bright)",strokeWidth:"2"}),e.jsx("circle",{cx:"205",cy:"62",r:"12",fill:"none",stroke:"var(--red)",strokeWidth:"1.5",strokeDasharray:"3,2"}),e.jsx("text",{x:"205",y:"66",fill:"var(--red)",fontSize:"7",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"conflict"}),e.jsx("text",{x:"40",y:"50",fill:"var(--text-dim)",fontSize:"8",fontFamily:"JetBrains Mono, monospace",children:"Up Main "}),e.jsx("text",{x:"330",y:"80",fill:"var(--text-dim)",fontSize:"8",fontFamily:"JetBrains Mono, monospace",children:" Down Main"}),e.jsx("text",{x:"310",y:"22",fill:"var(--accent)",fontSize:"7",fontFamily:"JetBrains Mono, monospace",children:"Branch"}),e.jsx("line",{x1:"80",y1:"78",x2:"160",y2:"78",stroke:"var(--accent)",strokeWidth:"1"}),e.jsx("polygon",{points:"80,78 86,75 86,81",fill:"var(--accent)"}),e.jsx("polygon",{points:"160,78 154,75 154,81",fill:"var(--accent)"}),e.jsx("text",{x:"120",y:"90",fill:"var(--accent)",fontSize:"7",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"min headway"})]})}),e.jsx("figcaption",{children:"CAD schematic: Flat junction  the classic capacity constraint where diverging/converging routes create conflict points."})]}),e.jsx("h3",{children:"What Is Capacity?"}),e.jsxs("p",{children:["Railway capacity is not a single number. It is a complex, context-dependent measure of how many trains can use a piece of infrastructure in a given time period while maintaining an acceptable level of performance. A line that can theoretically handle 30 trains per hour when every train is identical and perfectly timed may manage only 20 in practice once you account for a mix of fast and slow services, junction conflicts, dwell time variability, and the need for recovery time. Capacity is always a trade-off between ",e.jsx("strong",{children:"volume"})," (number of trains), ",e.jsx("strong",{children:"heterogeneity"})," (mix of train types), ",e.jsx("strong",{children:"average speed"}),", and ",e.jsx("strong",{children:"reliability"}),"."]}),e.jsxs("p",{children:["The ",e.jsx("strong",{children:"weakest link"})," determines the capacity of the whole route. A four-track main line can carry enormous volumes, but if it funnels through a two-track section, a flat junction, or a constrained station throat, the capacity of the entire corridor is limited to what that bottleneck can handle. Identifying and relieving these bottlenecks is one of the most important tasks in railway planning. Common bottlenecks include single-track sections, flat junctions (where routes cross at grade), station approaches with insufficient platform tracks, and terminal stations with limited platform reoccupation rates."]}),e.jsx("h3",{children:"Factors Driving Capacity"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Signalling headway"})," is the starting point. The minimum time between successive trains is set by the signalling system: on conventional four-aspect signalling, headways are typically 2 to 3 minutes; ETCS Level 2 with moving block can reduce this toward 90 seconds in ideal conditions. But signalling headway is only the theoretical minimum. In practice, several other factors consume capacity."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Train type mix"})," is a major capacity killer. When fast and slow trains share the same tracks, the fast trains catch up with the slower ones, consuming more capacity than either type would in isolation. A stopping service occupying a platform for two minutes at each station creates gaps that a following express cannot use. Segregating fast and slow traffic onto separate tracks (where available) dramatically increases capacity, which is why many major routes have four tracks: two fast, two slow."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Junction complexity"})," consumes capacity through conflicting movements. At a flat junction where two routes merge, every train from one route blocks trains from the other. The capacity cost is proportional to the number of conflicting movements and the time each conflict occupies the junction. Grade-separated junctions (flyovers or dive-unders) eliminate these conflicts entirely but cost tens or hundreds of millions to build.",e.jsx("strong",{children:" Dwell times"})," at stations are another variable: if a train dwells for 60 seconds instead of the planned 45, it consumes 15 seconds of the following train's headway, and that perturbation propagates backward through every following service."]}),e.jsxs("figure",{className:"lesson-figure",children:[e.jsx("div",{className:"image-placeholder",children:e.jsx("p",{children:"IMAGE NEEDED: Photo of a busy flat junction or station throat showing converging/diverging tracks with multiple trains visible, illustrating the capacity bottleneck concept. Alternatively, a train-graph (time-distance diagram) showing train paths."})}),e.jsx("figcaption",{children:"A complex junction where capacity is constrained  the weakest link determines the capacity of the entire route."})]}),e.jsx("h3",{children:"UIC Code 406 Capacity Methodology"}),e.jsxs("p",{children:["The International Union of Railways (UIC) published ",e.jsx("strong",{children:"UIC Code 406"})," in 2004 (revised 2013) as the standard methodology for measuring and comparing railway line capacity. It provides a rigorous, reproducible method that is now used across Europe and beyond. The method works through a defined sequence of steps:"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Step 1: Define the infrastructure section."})," The line is divided into sections between junctions, where the traffic pattern is homogeneous. Each section is analysed independently."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Step 2: Assemble the timetable."})," All train paths in the section for the analysis period (typically one hour or the peak period) are plotted on a time-distance diagram."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Step 3: Compression."})," This is the core of the method. All train paths are slid together on the time axis until each consecutive pair is separated by exactly the"," ",e.jsx("strong",{children:"minimum headway time"}),". No buffer time, no recovery time  just the bare minimum safe separation defined by the signalling system. The result is the"," ",e.jsx("strong",{children:"compressed timetable graph"}),", which represents the minimum time window in which the same set of trains could theoretically run."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Step 4: Calculate the capacity consumption ratio."})," The"," ",e.jsx("strong",{children:"capacity consumption"})," is expressed as:"]}),e.jsxs("div",{className:"highlight-box",children:[e.jsx("p",{children:e.jsx("strong",{children:"Capacity consumption = (compressed time + buffer time supplement) / available time"})}),e.jsxs("p",{children:["Where ",e.jsx("em",{children:"compressed time"})," is the duration of the compressed timetable graph,"," ",e.jsx("em",{children:"buffer time supplement"})," is additional time recommended for quality and stability (typically calculated as a function of the number of trains and average buffer time), and"," ",e.jsx("em",{children:"available time"})," is the total time window being analysed (e.g., 60 minutes for an hourly analysis, or the full peak period)."]})]}),e.jsx("p",{children:"UIC 406 provides recommended thresholds for capacity consumption. These thresholds indicate when a line section is approaching its practical limit:"}),e.jsx("div",{className:"table-wrapper",children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Line Type"}),e.jsx("th",{children:"Recommended Maximum Capacity Consumption"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{children:"Dedicated suburban / commuter"}),e.jsx("td",{children:"85%"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Dedicated high-speed line"}),e.jsx("td",{children:"75%"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Mixed-traffic line (suburban + intercity + freight)"}),e.jsx("td",{children:"75%"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Peak hour on any line type"}),e.jsx("td",{children:"85% (accepting reduced quality)"})]})]})]})}),e.jsx("p",{children:"Exceeding these thresholds does not mean trains will crash  it means the timetable becomes increasingly fragile. Small perturbations cannot be absorbed, delays cascade, and punctuality deteriorates rapidly. The thresholds are lower for mixed-traffic lines because heterogeneity increases the number of potential conflicts and the buffer time consumed by speed differences."}),e.jsx("h3",{children:"Headway Calculations: A Worked Example"}),e.jsxs("p",{children:["Understanding headway calculations requires working through the components that determine how closely two trains can follow each other. The ",e.jsx("strong",{children:"minimum headway"})," at any point on the network is the sum of several time components:"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Signalling headway on plain line"})," (four-aspect colour-light): The minimum headway is the time for the first train to clear enough block sections ahead of the second train that the second train always sees a green (or at worst, double-yellow) aspect. With four-aspect signalling, the second train needs three clear block sections ahead. The headway therefore depends on block section length, train speed, and train length:"]}),e.jsxs("div",{className:"highlight-box",children:[e.jsx("p",{children:e.jsx("strong",{children:"Minimum headway = sighting time + (3  block section running time) + clearing time"})}),e.jsxs("p",{children:["Where ",e.jsx("em",{children:"sighting time"})," is the time from when the driver can see the signal to when the train reaches it (typically 710 seconds), ",e.jsx("em",{children:"block section running time"})," is the time to traverse one block section at the prevailing speed, and ",e.jsx("em",{children:"clearing time"})," is the time for the entire train to pass beyond the signal and for the track circuit to clear (train length  speed + track circuit de-energisation time, typically 35 seconds)."]})]}),e.jsx("p",{children:"For a typical UK main line with 1,200-metre block sections and trains running at 160 km/h (44 m/s): block section running time = 1200  44 = 27 seconds. Minimum headway = 10 + (3  27) + 8 = 99 seconds, or approximately 1 minute 40 seconds. In practice, 2 minutes is a common minimum headway on well-designed four-aspect routes."}),e.jsxs("p",{children:[e.jsx("strong",{children:"Station headway"})," is more complex because it includes additional components: the ",e.jsx("strong",{children:"approach locking time"})," (the time a signal must remain at danger after being set, before the route can be released  typically 120 seconds on UK infrastructure), the ",e.jsx("strong",{children:"route setting and proving time"})," (interlocking processing + points movement + detection, typically 1020 seconds), and the ",e.jsx("strong",{children:"overlap clearing time"})," (the time for the departing train to clear the overlap beyond the platform starting signal). These components mean station headway is typically 34 minutes, even where plain-line headway is 2 minutes."]}),e.jsx("h3",{children:"Flat Junction vs Grade-Separated Junction"}),e.jsxs("p",{children:["The capacity impact of junction design is dramatic and often underestimated. Consider a junction where a branch line diverges from a main line. At a ",e.jsx("strong",{children:"flat junction"}),", trains from the branch must cross the main line tracks at grade, creating conflicting movements. Each conflict occupies the junction for a defined period (typically 24 minutes including approach locking and overlap clearing), during which no other conflicting movement can occur."]}),e.jsx("div",{className:"table-wrapper",children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Junction Type"}),e.jsx("th",{children:"Conflicting Moves"}),e.jsx("th",{children:"Typical Capacity Impact"}),e.jsx("th",{children:"Cost to Build"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{children:"Flat junction (two routes merge)"}),e.jsx("td",{children:"Every branch train conflicts with opposing main-line trains"}),e.jsx("td",{children:"Each branch train consumes 35 minutes of main-line capacity"}),e.jsx("td",{children:"Minimal (just track and points)"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Grade-separated (flyover / dive-under)"}),e.jsx("td",{children:"Zero conflicting movements"}),e.jsx("td",{children:"Branch and main-line trains are independent"}),e.jsx("td",{children:"Typically 50200M depending on site"})]})]})]})}),e.jsx("p",{children:"To illustrate: if a main line runs 16 trains per hour (tph) and a branch adds 4 tph via a flat junction, the 4 branch trains each consume approximately 3 minutes of main-line capacity, totalling 12 minutes lost per hour. This effectively reduces the main-line capacity to 12 tph  a 25% reduction  unless the timetable can arrange for branch trains to use natural gaps between main-line services. With a flyover, the branch trains impose zero capacity cost on the main line."}),e.jsx("p",{children:"Major grade-separation projects in the UK include the Hitchin flyover (2014, enabling additional Thameslink services), the proposed flyover at Croydon on the Brighton Main Line, and the flat junctions at places like Castlefield in Manchester that constrain capacity across an entire region."}),e.jsx("h3",{children:"Four-Tracking and Line Capacity Improvements"}),e.jsxs("p",{children:["When a two-track railway is at capacity, the most direct (though most expensive) solution is ",e.jsx("strong",{children:"four-tracking"}),": adding two additional tracks alongside the existing two. This roughly doubles capacity and, crucially, allows the separation of fast and slow traffic. The fast pair carries express and intercity services at full line speed; the slow pair carries stopping services and freight. This eliminates the capacity-killing effect of speed differential."]}),e.jsx("p",{children:"Four-tracking is extremely expensive in built-up areas because it requires land acquisition, bridge widening, station reconstruction, and often the relocation of utilities. Alternatives that deliver partial capacity benefits at lower cost include:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Passing loops:"})," Short sections of double track on an otherwise single-track line, allowing trains to pass. Each loop adds capacity but the overall line capacity remains constrained by the single-track sections between loops."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Dynamic passing loops:"})," On double track, short sections of additional track that allow a fast train to overtake a slow one. Effective where the speed differential is large and overtaking opportunities are limited."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Signalling upgrades:"})," Shortening block sections reduces headway without any civil engineering. Migrating from three-aspect to four-aspect signalling, or from fixed-block to ETCS Level 2, can deliver 2040% headway improvement."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Platform lengthening:"})," Running longer trains (more carriages) carries more passengers without increasing the number of train paths required."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Junction grade separation:"})," As discussed above, eliminating flat junction conflicts frees capacity on the main line."]})]}),e.jsx("h3",{children:"Non-Linear Capacity Degradation"}),e.jsx("div",{className:"highlight-box",children:e.jsxs("p",{children:["Railway capacity degrades ",e.jsx("strong",{children:"non-linearly"}),". Adding one more train to a lightly loaded network has almost no impact on performance. But adding one more train to a network already running at 85% of theoretical capacity can cause widespread delay because every interaction between trains becomes a potential conflict. Each additional train does not just occupy its own path; it interacts with every other train it passes, follows, or meets at a junction. The number of pairwise interactions grows quadratically with the number of trains, and the probability that at least one interaction causes a delay grows exponentially. This is why railways typically plan to use only 75-85% of theoretical capacity, reserving the remainder as ",e.jsx("strong",{children:"buffer time"})," to absorb perturbations without them cascading into systemic delay."]})}),e.jsx("h3",{children:"Possessions: Engineering Access"}),e.jsxs("p",{children:["Railway infrastructure requires regular maintenance: rail grinding, tamping, signalling renewals, bridge inspections, vegetation clearance, electrification maintenance, and major renewals of track, structures, and systems. Most of this work cannot be done while trains are running, either because it is physically impossible (you cannot tamp track under a moving train) or because it is unsafe. The ",e.jsx("strong",{children:"possession"})," is the formal mechanism by which a section of track is closed to traffic and handed over to engineering teams."]}),e.jsx("p",{children:"Possessions represent a fundamental tension in railway management. Operations wants every minute of every day to run trains. Engineering wants long, frequent access windows to maintain the infrastructure efficiently. Short possessions (a few hours at night) are operationally convenient but inefficient for engineering: significant time is lost setting up and closing down worksites, and complex work cannot be completed. Long weekend possessions are more efficient for engineering but disrupt services and require expensive bus replacement arrangements."}),e.jsx("h3",{children:"Possession Management Lifecycle"}),e.jsx("p",{children:"A possession does not simply happen. It passes through a defined lifecycle of planning, approval, delivery, and handback, governed by rigorous processes to ensure safety and minimise disruption:"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Planning phase:"})," The engineering team identifies the work required, the access needed (which tracks, for how long, at what times), the plant and materials to be delivered, and the impact on train services. This planning begins months or even years in advance for major possessions. The request is submitted to the capacity planning team, who assess the impact and seek to minimise disruption by combining work packages, using mid-week overnight access where possible, and scheduling the heaviest disruption outside peak travel periods."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"T-12 to T-3 milestones:"})," In the UK, Network Rail's planning milestones count backward from the timetable implementation date. These milestones impose discipline on the planning process:"]}),e.jsx("div",{className:"table-wrapper",children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Milestone"}),e.jsx("th",{children:"Weeks Before"}),e.jsx("th",{children:"Key Activity"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"T-36"})}),e.jsx("td",{children:"36 weeks"}),e.jsx("td",{children:"Strategic planning: major possessions and blockades confirmed in principle. Engineering access strategy agreed."})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"T-26"})}),e.jsx("td",{children:"26 weeks"}),e.jsx("td",{children:"Firm dates and durations confirmed for all major possessions. Train service impact assessment begins."})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"T-18"})}),e.jsx("td",{children:"18 weeks"}),e.jsx("td",{children:"Detailed possession plans published. Train operators begin planning revised timetables and bus replacements."})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"T-12"})}),e.jsx("td",{children:"12 weeks"}),e.jsx("td",{children:"Informed Traveller: public timetable published. Passenger information about disruption must be available. Late possession requests after T-12 require exceptional approval."})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"T-6"})}),e.jsx("td",{children:"6 weeks"}),e.jsx("td",{children:"Confirmed Plan of Work: all engineering works confirmed, safe systems of work designed, plant and material deliveries scheduled."})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"T-3"})}),e.jsx("td",{children:"3 weeks"}),e.jsx("td",{children:"Final confirmation. All changes frozen. Possession pack issued containing detailed timings, safe work plans, and handback procedures."})]})]})]})}),e.jsx("h3",{children:"Worksite Protection and Safe Systems of Work"}),e.jsxs("p",{children:["When engineering staff enter the railway to work, they must be protected from moving trains. The ",e.jsx("strong",{children:"safe system of work"})," defines how this protection is provided. On Network Rail infrastructure, the primary methods are:"]}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Possession of the line:"})," The formal closure of the line to all traffic. Protection is provided by placing ",e.jsx("strong",{children:"protection limits"}),"  detonators, marker boards, and blocked signals  at defined distances from the worksite. The"," ",e.jsx("strong",{children:"Engineering Supervisor (ES)"})," or"," ",e.jsx("strong",{children:"Person in Charge of Possession (PICOP)"})," is responsible for confirming protection is in place before work begins and for ensuring it is maintained throughout."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Line blockage:"})," A less formal arrangement for lower-risk work, where the signaller blocks the signals protecting the section and confirms to the person in charge that no trains will enter. Suitable for short-duration, low-risk work such as inspections."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Separated work:"})," Work that does not require line closure because it is carried out at a safe distance from the running line (e.g., work on a structure adjacent to but not fouling the track). Workers must still be briefed on the hazards and must not encroach within the minimum safe distance."]})]}),e.jsx("p",{children:"The handback process is equally critical. Before the line is returned to traffic, the engineering team must confirm that all equipment and personnel are clear of the line, all temporary speed restrictions are in place if required, and the infrastructure is safe for the passage of trains. The signaller then removes the protection and restores normal working. Any failure in this process can have catastrophic consequences  a train entering a worksite is one of the most serious safety scenarios on the railway."}),e.jsx("h3",{children:"Line Blockage and Alternative Transport"}),e.jsxs("p",{children:["When a line is closed for engineering work, passengers must still be able to travel. The arrangements for ",e.jsx("strong",{children:"alternative transport"})," (typically rail replacement bus services) are a major logistical undertaking. Bus companies must be contracted months in advance, routes planned, stops identified (often not at the station itself but at nearby road access points), and drivers briefed. Journey times by bus are typically 23 times longer than by train, and capacity is much lower: a single 12-car train carries 800+ passengers; a bus carries 5070."]}),e.jsx("p",{children:"Where possible, train services are diverted via alternative routes rather than replaced by buses, but this depends on the availability of diversionary routes with appropriate clearances, electrification, and capacity. For major blockades, a combination of diversions and bus replacements is usually needed, along with extensive passenger information campaigns starting weeks before the closure. The cost of alternative transport and the economic impact of longer journey times are significant factors in the business case for any possession."}),e.jsx("h3",{children:"The Beeching Report and Capacity Decisions"}),e.jsxs("p",{children:["No discussion of British railway capacity is complete without reference to the"," ",e.jsx("strong",{children:"Beeching Report"}),". In 1963, Dr Richard Beeching, Chairman of British Railways, published ",e.jsx("em",{children:"The Reshaping of British Railways"}),", recommending the closure of approximately 6,000 route-miles (over a third of the network) and 2,363 stations. The analysis was based on traffic data showing that many rural lines and branch lines carried tiny volumes of traffic at enormous cost: one-third of the route-miles carried only 1% of the traffic."]}),e.jsx("p",{children:"The closures were implemented through the mid-1960s, permanently removing capacity from the network. While many of the closed lines were genuinely uneconomic at the time, the decisions were made without anticipating future growth. Several closed routes are now sorely missed as the railway has grown  particularly former cross-country links that would today relieve pressure on congested routes via London. The cost of reinstating closed railways is vastly higher than the savings from closing them: land has been sold, buildings demolished, formations built over, and planning consent for new railways in populated areas is extraordinarily difficult to obtain."}),e.jsx("div",{className:"highlight-box",children:e.jsxs("p",{children:[e.jsx("strong",{children:"Capacity decisions are irreversible."})," Closing a railway line or removing a track saves money today but eliminates optionality for the future. Building new capacity is orders of magnitude more expensive than retaining existing capacity. This asymmetry means that capacity reduction decisions should be made with extreme caution and a long time horizon. The Beeching closures are the most dramatic illustration of this principle in British railway history, but the same logic applies to every decision to remove a passing loop, close a station, or single a double-track section."]})}),e.jsxs(N,{type:"analogy",children:["Railway capacity degrades like ",e.jsx("strong",{children:"network performance under load"}),". A network link at 50% utilisation handles traffic smoothly. At 80%, queuing theory tells us that latency rises sharply. At 95%, the system is effectively saturated: any packet (train) that arrives slightly out of expected timing causes a queue that propagates backward. The relationship between utilisation and delay follows a hockey-stick curve, not a straight line. This is why network engineers provision bandwidth well below theoretical maximum, and why railway planners never fill the timetable to 100%. Possessions are the railway equivalent of scheduled maintenance windows in production systems: you must take systems offline to patch and upgrade them, and the negotiation over when and for how long mirrors exactly the tension between SRE teams and product teams arguing over deployment windows. The UIC 406 compression method is essentially the same as calculating the theoretical throughput of a pipeline by removing all idle cycles and measuring the minimum cycle time  the ratio of busy cycles to total available cycles gives you utilisation, and queuing theory tells you the rest."]}),e.jsxs(N,{label:"UIC Capacity Method",children:["The International Union of Railways (UIC) defines a standard methodology for capacity analysis in UIC Code 406. It works by compressing all train paths in a timetable onto a time-distance diagram until they are separated by exactly the minimum headway, then measuring the ratio of ",e.jsx("strong",{children:"consumed capacity"})," (compressed timetable duration) to",e.jsx("strong",{children:" available capacity"})," (the time window). A ratio above 0.75 on mixed-traffic lines indicates that the infrastructure is approaching its practical limit and further services will degrade reliability. The method is applied per infrastructure section (between junctions), and the section with the highest consumption ratio is the binding constraint for the corridor. Importantly, the method captures the effect of heterogeneity: a mix of fast and slow trains compresses less efficiently than a homogeneous service pattern, correctly reflecting the higher capacity cost of mixed traffic."]}),e.jsx(ce,{goTo:h,items:[{target:"m4-l1",label:"Block System & Signals",desc:"Signalling headway is the fundamental determinant of line capacity."},{target:"m1-l1",label:"Track Structure",desc:"Track maintenance (tamping, grinding) drives the need for engineering possessions."},{target:"m5-l1",label:"Electrification Principles",desc:"OLE maintenance adds another dimension to possession planning."},{target:"m3-l3",label:"Stations & Clearances",desc:"Station throat layout and platform capacity are common bottlenecks."}]})]})}const Lp=[{text:"Why does capacity degrade non-linearly as utilisation increases on a railway line?",options:["Because trains physically slow down when the line is busy","Because as more trains are added, small delays propagate and amplify through the timetable due to tighter headways and fewer recovery margins, causing disproportionate reliability loss","Because track circuits can only handle a fixed number of trains per hour","Because signalling systems deliberately slow trains at high utilisation"],correct:1,explanation:"At low utilisation, delays are absorbed by generous gaps between trains. As paths are packed tighter, a small delay to one train blocks the next, which blocks the next  a cascade effect. Research shows that pushing utilisation above ~75% causes reliability to collapse disproportionately, similar to how network throughput degrades as bandwidth saturation approaches."},{text:"How is a capacity bottleneck typically identified on a railway network?",options:["By counting the total number of stations on a route","By analysing the section with the most restrictive headway (fewest possible train paths per hour), often at flat junctions, single-line sections, or approaches to major termini","By measuring the speed limit of each track section","By surveying passenger opinions on crowding"],correct:1,explanation:"The bottleneck is the point that constrains the throughput of the entire route  often a flat junction where paths conflict, a two-track section amid four-track railway, or a terminus throat with limited platform access. Capacity analysis identifies these chokepoints because adding trains elsewhere is pointless if the bottleneck cannot handle them."},{text:'What is a "possession" in railway engineering?',options:["Ownership of a section of railway by a train operating company","A planned period during which a section of track is taken out of traffic for engineering work, requiring careful coordination with the timetable","A legal term for land adjacent to the railway","The time a train occupies a platform at a station"],correct:1,explanation:"Possessions are planned closures of track sections for maintenance, renewals, or enhancements. They must be planned months in advance, coordinated with train operators (who may need diversionary routes or bus replacement), and are a major constraint on both capacity and the delivery of engineering projects."},{text:"What is the relationship between signal headway and line capacity?",options:["Headway and capacity are unrelated","Shorter headways allow more trains per hour; headway is determined by signal spacing, braking distance, and overlap length, making it the primary determinant of maximum line capacity","Longer headways increase capacity by giving trains more room","Headway only affects freight capacity, not passenger services"],correct:1,explanation:"Headway is the minimum time separation between consecutive trains, set by signal spacing, sighting distance, braking curves, and safety overlaps. Line capacity in trains per hour is approximately 60/headway-in-minutes. Reducing headway from 3 to 2 minutes increases theoretical capacity from 20 to 30 trains per hour  which is why signalling upgrades (like ETCS with moving block) are capacity interventions."}];function Gp({goTo:h}){return e.jsxs(e.Fragment,{children:[e.jsxs("figure",{className:"lesson-figure",children:[e.jsx("div",{className:"cad-symbol",children:e.jsxs("svg",{viewBox:"0 0 400 110",style:{width:"100%",maxWidth:"400px"},children:[e.jsx("text",{x:"200",y:"14",fill:"var(--text-dim)",fontSize:"10",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"Disruption Response  Decision Flow"}),e.jsx("rect",{x:"150",y:"25",width:"100",height:"20",fill:"var(--red)",opacity:"0.2",stroke:"var(--red)",strokeWidth:"1.5",rx:"3"}),e.jsx("text",{x:"200",y:"38",fill:"var(--red)",fontSize:"8",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"INCIDENT"}),e.jsx("line",{x1:"200",y1:"45",x2:"200",y2:"52",stroke:"var(--text-dim)",strokeWidth:"1"}),e.jsx("polygon",{points:"200,52 197,48 203,48",fill:"var(--text-dim)"}),e.jsx("line",{x1:"200",y1:"52",x2:"80",y2:"65",stroke:"var(--text-dim)",strokeWidth:"1"}),e.jsx("line",{x1:"200",y1:"52",x2:"200",y2:"65",stroke:"var(--text-dim)",strokeWidth:"1"}),e.jsx("line",{x1:"200",y1:"52",x2:"320",y2:"65",stroke:"var(--text-dim)",strokeWidth:"1"}),e.jsx("rect",{x:"35",y:"65",width:"90",height:"20",fill:"var(--bg-hover)",stroke:"var(--accent)",strokeWidth:"1",rx:"3"}),e.jsx("text",{x:"80",y:"78",fill:"var(--accent)",fontSize:"7",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"Short-turn / Cancel"}),e.jsx("rect",{x:"155",y:"65",width:"90",height:"20",fill:"var(--bg-hover)",stroke:"var(--blue)",strokeWidth:"1",rx:"3"}),e.jsx("text",{x:"200",y:"78",fill:"var(--blue)",fontSize:"7",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"Divert / Reroute"}),e.jsx("rect",{x:"275",y:"65",width:"90",height:"20",fill:"var(--bg-hover)",stroke:"var(--accent-secondary)",strokeWidth:"1",rx:"3"}),e.jsx("text",{x:"320",y:"78",fill:"var(--accent-secondary)",fontSize:"7",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"Bus Replacement"}),e.jsx("line",{x1:"80",y1:"85",x2:"200",y2:"95",stroke:"var(--text-dim)",strokeWidth:"0.5"}),e.jsx("line",{x1:"200",y1:"85",x2:"200",y2:"95",stroke:"var(--text-dim)",strokeWidth:"0.5"}),e.jsx("line",{x1:"320",y1:"85",x2:"200",y2:"95",stroke:"var(--text-dim)",strokeWidth:"0.5"}),e.jsx("text",{x:"200",y:"105",fill:"var(--accent-secondary)",fontSize:"8",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:" Recovery Plan  Normal Service"})]})}),e.jsx("figcaption",{children:"CAD diagram: Disruption response decision flow  incident triggers decision between operational response strategies."})]}),e.jsx("h3",{children:"When Things Go Wrong"}),e.jsxs("p",{children:["No railway runs to time every day. Disruptions are an inherent part of railway operation, arising from an enormous range of causes: ",e.jsx("strong",{children:"infrastructure failures"})," (signal faults, points failures, rail breaks, power supply trips, overhead line damage),",e.jsx("strong",{children:" rolling stock failures"})," (traction faults, door failures, brake faults, pantograph damage), ",e.jsx("strong",{children:"external events"})," (trespass, fatalities, flooding, extreme heat causing rail buckling, autumn leaf contamination, snow and ice), and ",e.jsx("strong",{children:"operational causes"})," (crew unavailability, late dispatch, extended dwell times from heavy loading). Each type of disruption has different characteristics in terms of duration, geographic extent, and the number of services affected."]}),e.jsx("p",{children:"The scale of disruption varies enormously. A single points failure at a busy junction can delay dozens of trains within minutes as the conflict propagates through the network. A fatality on the line typically closes the route for at least 90 minutes. A major infrastructure failure, such as a signalling power supply losing all feeds, can shut down an entire area for hours. The interconnected nature of railway networks means that a disruption in one location rarely stays local: delays propagate along routes, across junctions, and into connecting services, amplifying far beyond the original incident."}),e.jsx("h3",{children:"Delay Attribution in Detail"}),e.jsxs("p",{children:["Understanding why trains are late is critical for both performance management and financial accountability. ",e.jsx("strong",{children:"Delay attribution"})," is the process of determining the root cause of every delay above a threshold (typically 3 minutes in the UK) and assigning responsibility to the party that caused it. In a vertically separated railway like the UK's, where one company (Network Rail) manages the infrastructure and dozens of operators run the trains, this has direct financial consequences: the responsible party pays compensation to those affected through the ",e.jsx("strong",{children:"Schedule 8"})," performance regime."]}),e.jsxs("p",{children:["The ",e.jsx("strong",{children:"TRUST"})," (Train Running Under System TOPS) system is the backbone of delay attribution in the UK. TRUST automatically records the actual arrival and departure time of every train at every timing point, by reading train describer data and comparing it with the planned timetable. When a train passes a timing point more than a defined threshold late (3 minutes for delay attribution, 1 minute for On Time measurement), TRUST generates a delay record. The ",e.jsx("strong",{children:"delay attributor"}),"  typically a staff member in the Network Rail control centre or the train operator's control  then assigns a"," ",e.jsx("strong",{children:"cause code"})," and ",e.jsx("strong",{children:"responsible manager"})," to each delay."]}),e.jsxs("figure",{className:"lesson-figure",children:[e.jsx("div",{className:"image-placeholder",children:e.jsx("p",{children:"IMAGE NEEDED: Photo of a modern railway control centre/control room showing operators at workstations with large display screens showing train positions and network status (a signalling control centre or Network Rail ROC)."})}),e.jsx("figcaption",{children:"A railway control centre  where operators monitor train movements, manage disruptions, and coordinate real-time responses across the network."})]}),e.jsxs("p",{children:["Attribution is harder than it sounds. A train arriving 10 minutes late at its destination may have been delayed by a signal fault (infrastructure), a door fault (operator), and congestion caused by a preceding train that was itself delayed by a crew shortage (a different operator). Unpicking these chains of causation requires detailed logs from signalling systems, train describer records, control room logs, and often professional judgement. The UK system uses a standardised set of ",e.jsx("strong",{children:"delay attribution codes"})," grouped by category: track faults (100-series), signalling faults (200-series), electrical supply faults (300-series), rolling stock faults (400-series), traincrew causes (500-series), station causes (600-series), external causes (700-series), and miscellaneous/unattributed (800/900-series)."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Delay minutes"})," are the fundamental unit of measurement. A train that arrives 5 minutes late at one timing point and 7 minutes late at the next has accumulated 2 additional delay minutes in that section. The total delay minutes across all trains, all timing points, and all causes is the master metric for railway performance. In a typical year, the UK network generates tens of millions of delay minutes, and reducing this figure by even a few percent requires sustained effort across every discipline."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Reactionary delay"})," is the delay suffered by one train as a consequence of another train's lateness. It is typically larger than the primary delay that caused it. A single 5-minute primary delay at a busy junction can generate 30 or more minutes of reactionary delay across following and connecting services. The"," ",e.jsx("strong",{children:"reactionary delay multiplier"}),"  the ratio of total reactionary delay to primary delay  is a key indicator of network resilience. A high multiplier (above 2.53.0) indicates that the timetable and infrastructure are so congested that small perturbations amplify severely. Reducing this multiplier is a central concern of real-time traffic management."]}),e.jsx("h3",{children:"Schedule 8 Performance Regime"}),e.jsxs("p",{children:["The ",e.jsx("strong",{children:"Schedule 8"})," regime is the financial mechanism that incentivises performance in the UK's vertically separated railway. It is part of every track access agreement between Network Rail and train operators. The core principle is simple: the party that causes delay pays the party that suffers it."]}),e.jsxs("p",{children:["Each train operator has a ",e.jsx("strong",{children:"benchmark"}),"  an agreed level of performance (delay minutes per service) that represents the expected performance under normal conditions. Network Rail also has benchmarks for infrastructure-caused delay. When actual performance is worse than the benchmark, the responsible party pays compensation. When it is better, the party receives a bonus. The payment rates are calibrated to reflect the financial impact of delay on operators (lost revenue from passengers claiming delay-repay compensation, reduced demand from poor reliability) and are expressed in pounds per delay minute."]}),e.jsx("p",{children:"The Schedule 8 payment rates vary by operator and by time of day, reflecting the different revenue impacts of delay. A delay minute on a packed commuter service in the morning peak has a higher financial impact (and hence a higher Schedule 8 rate) than the same delay on a lightly loaded mid-morning service. Typical payment rates range from 20 to over 100 per delay minute depending on the operator and service. In aggregate, Schedule 8 payments transfer hundreds of millions of pounds per year between Network Rail and operators."}),e.jsx("div",{className:"highlight-box",children:e.jsxs("p",{children:[e.jsx("strong",{children:"Schedule 8 is a two-way mechanism."})," When Network Rail causes delay (e.g., signal failure), it pays the affected operators. When an operator causes delay (e.g., a train breaks down and blocks the line), that operator pays Network Rail and any other operators whose services were disrupted. When an operator performs better than its benchmark, Network Rail pays the operator a bonus. This creates financial incentives for all parties to invest in reliability and minimise the impact of disruptions."]})}),e.jsx("h3",{children:"Contingency Planning"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Contingency plans"})," are pre-prepared responses to foreseeable disruption scenarios. Rather than replanning from scratch under time pressure, control staff can reach for a documented plan that has been developed, reviewed, and agreed in advance. For a major junction, the contingency plan might specify: if the junction is blocked, divert services A and B via route X, cancel services C and D, and terminate service E at station Y. Having these plans ready allows faster, more consistent responses than ad-hoc replanning under pressure."]}),e.jsx("p",{children:"Contingency plans are developed through a structured process:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Scenario identification:"})," Determine the most likely and most impactful disruption scenarios for each part of the network. These typically include: loss of a key junction, loss of a major station, power supply failure, and complete line blockage between key nodes. Historical incident data guides the selection."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Response design:"})," For each scenario, design a service plan that can be implemented quickly. This includes which services to cancel, which to divert, where to terminate and turn services, how to manage rolling stock and crew that become displaced, and how to provide passenger information."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Resource validation:"})," Confirm that the contingency plan is physically feasible  that the diversionary routes have capacity, that rolling stock can be turned at the proposed short-termination points, and that crew have route knowledge for the alternative workings."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Tabletop exercises:"})," Rehearse the plan with all parties (signallers, controllers, operators, station staff) to test understanding and identify gaps. Lessons are fed back into plan revisions."]})]}),e.jsxs("p",{children:["The best contingency plans are ",e.jsx("strong",{children:"scenario-specific and pre-calculated"}),". They specify exact train identities, revised stopping patterns, platform allocations, and crew movements. They can be implemented within minutes of the triggering incident being confirmed. Poor contingency plans are vague (stating only general principles), untested, and require significant on-the-spot invention that delays the response."]}),e.jsx("h3",{children:"Control Room Communication Protocols"}),e.jsxs("p",{children:["During a significant incident, ",e.jsx("strong",{children:"communication"})," between multiple parties determines whether the response is coordinated or chaotic. The key parties in a major incident are: the ",e.jsx("strong",{children:"signaller"})," controlling the affected area, the"," ",e.jsx("strong",{children:"Network Rail control centre"})," (route control or the national operations centre), the affected ",e.jsx("strong",{children:"train operators' control rooms"}),", the"," ",e.jsx("strong",{children:"British Transport Police"})," (if a safety or security incident), and"," ",e.jsx("strong",{children:"station staff"})," at affected stations."]}),e.jsx("p",{children:"Protocols specify:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Initial notification:"})," The signaller or first-aware party notifies the Network Rail route control centre immediately. A standard template captures the key facts: location, nature of incident, lines affected, estimated duration, trains immediately affected."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Conference call:"})," For significant incidents, a conference call is established within minutes, bringing together all affected parties. The Network Rail controller chairs the call, and a formal structure is followed: situation update, agreed actions, next call time."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Decision authority:"})," Clearly defined roles determine who can authorise cancellations, diversions, and bus replacements. In the UK, the Network Rail route controller can authorise changes to the operational plan; the operator's controller authorises cancellations of their own services."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Structured communication:"})," The use of standard terminology and structured message formats (similar to aviation communication protocols) reduces misunderstanding. Key information is repeated back to confirm understanding."]})]}),e.jsx("h3",{children:"Customer Information During Disruption"}),e.jsx("p",{children:"Passengers stranded by disruption need accurate, timely information to make decisions. The information chain runs from the control room through multiple channels to the passenger:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"National Rail Enquiries (NRE):"})," The central information source, providing real-time updates via its website, app, and phone service. NRE receives data from the Darwin system, which aggregates real-time train running information from TRUST and operator feeds."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Station announcements and displays:"})," Customer Information Systems (CIS) at stations display real-time departures fed by Darwin. During disruption, these should show revised departure times, cancellations, and platform changes. However, the quality of station announcements varies: automated announcements may lag behind the real situation, and manual announcements depend on station staff being informed by the control room."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Social media:"})," Train operators and Network Rail use Twitter/X and other platforms for real-time disruption updates. Social media has become one of the primary channels through which passengers receive disruption information, often faster than official station displays."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"On-train announcements:"})," The driver or conductor should make regular announcements to passengers on affected trains. This depends on the control room communicating the situation to train crew promptly  a weak link in many incidents."]})]}),e.jsx("p",{children:"The quality of customer information during disruption is consistently identified as one of the weakest aspects of the UK railway's disruption response. Common failures include conflicting information from different channels, delays in updating departure boards, failure to communicate the reason for disruption, and the absence of clear advice on alternative routing options."}),e.jsx("h3",{children:"Real-Time Replanning and Recovery Strategies"}),e.jsxs("p",{children:["When a significant disruption occurs, ",e.jsx("strong",{children:"signallers"})," and ",e.jsx("strong",{children:"control room staff"})," must replan the service in real time. This involves deciding which trains to hold, which to cancel, which to divert via alternative routes, where to short-terminate services and turn them around, and how to manage passenger connections. These decisions must be made rapidly under pressure, often with incomplete information about when the disruption will be resolved."]}),e.jsxs("p",{children:["Modern railways use ",e.jsx("strong",{children:"Traffic Management Systems (TMS)"})," to support this process. A TMS displays the real-time position and predicted path of every train, highlights emerging conflicts, and can suggest or automatically implement replanning strategies. The system continuously recalculates arrival predictions based on current positions, speeds, and the state of the infrastructure, providing controllers with a rolling forecast of the network state. However, the most complex decisions, particularly those involving service cancellations, diversions, and passenger information, still require human judgement and coordination across multiple control centres and operators."]}),e.jsxs("p",{children:["Specific ",e.jsx("strong",{children:"recovery strategies"})," used during and after disruption include:"]}),e.jsx("div",{className:"table-wrapper",children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Strategy"}),e.jsx("th",{children:"Description"}),e.jsx("th",{children:"When Used"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Skip-stopping"})}),e.jsx("td",{children:"A late-running stopping service skips one or more intermediate stations to recover time. Passengers for skipped stations must wait for the next service."}),e.jsx("td",{children:"Moderate delay on a frequent stopping service where the next service is close behind"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Short-forming"})}),e.jsx("td",{children:"Running a service with fewer carriages than planned (e.g., a 4-car unit instead of 8-car) because the additional unit is unavailable due to failure or displacement. Reduces capacity but maintains the service."}),e.jsx("td",{children:"Rolling stock shortage due to failure or displacement during disruption"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Turn-short (short-termination)"})}),e.jsx("td",{children:"Terminating a service before its planned destination and turning the train around to form a return working. Passengers for beyond the termination point must use alternative services."}),e.jsx("td",{children:"Line blockage ahead, or to recover a train to the right part of the network for its next working"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Diversion"})}),e.jsx("td",{children:"Routing a train via an alternative route to avoid a blocked section. May involve a longer journey time and different calling pattern."}),e.jsx("td",{children:"Complete blockage of the normal route where an alternative exists"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Cancellation"})}),e.jsx("td",{children:"Removing a service entirely from the operating plan. The rolling stock and crew are redeployed to other services or returned to depot."}),e.jsx("td",{children:"Severe disruption where maintaining the service is impossible or would cause greater overall delay"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Stepping back"})}),e.jsx("td",{children:"Restarting the service pattern from a known-good state. Rather than trying to recover individual trains to their correct diagram positions, all services are reset to a regular interval pattern from a defined time."}),e.jsx("td",{children:"After prolonged disruption where rolling stock and crew are badly out of position"})]})]})]})}),e.jsx("h3",{children:"Autumn Leaf-Fall Management"}),e.jsx("p",{children:"Every autumn, falling leaves create one of the railway's most persistent operational challenges. Leaves are crushed by wheel-rail contact into a hard, black, Teflon-like layer of compressed leaf mulch that dramatically reduces adhesion between wheel and rail. The coefficient of friction drops from the normal 0.250.35 to as low as 0.010.05  comparable to ice. This causes two critical problems: trains cannot brake effectively (leading to station overruns and signals passed at danger), and powered wheels spin on acceleration (leading to wheelflat damage and delayed departures)."}),e.jsx("p",{children:"The railway's response is a major annual operation:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Railhead treatment trains (RHTTs):"})," Dedicated trains that spray high-pressure water jets to clean the railhead, followed by application of"," ",e.jsx("strong",{children:"sandite"}),"  a gel containing sand and a steel-shot abrasive that restores adhesion. RHTTs run overnight and in the early morning on affected routes throughout the leaf-fall season (typically October to December). Network Rail operates a fleet of"," ",e.jsx("strong",{children:"Multi-Purpose Vehicles (MPVs)"})," and locomotive-hauled treatment trains for this purpose."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Timetable adjustments:"})," During the leaf-fall season, additional running time is added to timetables on affected routes to allow for reduced braking performance. In some cases, services are altered or reduced to provide additional recovery time."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Vegetation management:"})," Cutting back lineside trees and vegetation reduces the volume of leaves falling onto the track. This is a year-round activity but is targeted at the worst-affected locations. However, cutting trees near the railway is constrained by environmental regulations (nesting birds, protected species, tree preservation orders)."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Rolling stock measures:"})," Trains operating in leaf-fall areas are fitted with wheel-slide protection (WSP) systems and sanders. WSP detects wheel lock-up during braking and releases the brake momentarily, similar to ABS in road vehicles. Sanders deposit sand ahead of the wheels to improve adhesion."]})]}),e.jsx("h3",{children:"Extreme Weather Management"}),e.jsx("p",{children:"Climate change is increasing the frequency and severity of extreme weather events that disrupt railway operations. The railway must manage several distinct weather risks:"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Extreme heat:"})," When rail temperature exceeds approximately 46C (which corresponds to an air temperature of around 30C in direct sunlight), the risk of"," ",e.jsx("strong",{children:"rail buckling"})," increases sharply. Continuously welded rail under compression from thermal expansion can buckle laterally, creating a kink in the track that would derail any train passing over it. The response is to impose"," ",e.jsx("strong",{children:"heat speed restrictions"}),"  reducing the maximum speed to 60 mph or lower  because slower trains impose less lateral force on the track and are less likely to trigger a buckle. Network Rail uses weather forecasts and a network of rail temperature sensors to predict when restrictions will be needed and communicates them to signallers and operators in advance. Speed restrictions during hot weather cause significant delay, particularly on long-distance routes where the cumulative impact is large."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Flooding:"})," Heavy rainfall can flood track formations, wash out embankments, and overwhelm drainage systems. The immediate response is line closure until the water level drops and the track can be inspected. In severe cases, the formation may be damaged and require weeks of repair. Network Rail's weather monitoring capability includes rain gauges, river level sensors, and landslide detection systems at vulnerable locations. Pre-positioned emergency response teams can deploy pumps, temporary drainage, and track repair equipment."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Snow and ice:"})," Snow accumulation on tracks, frozen points mechanisms, ice on conductor rails (third-rail electrification), and blocked drainage all disrupt operations. Points heaters prevent freezing at critical locations, and de-icing trains treat conductor rails. However, prolonged cold spells can overwhelm these measures."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"High winds:"})," Winds above defined thresholds (typically 6070 mph) trigger speed restrictions or line closures, particularly on exposed sections such as coastal routes, viaducts, and bridges. The primary risks are train overturning (for lightweight vehicles with high side profiles), overhead line damage from falling trees, and debris on the track."]}),e.jsx("h3",{children:"Performance Metrics and Timetable Resilience"}),e.jsxs("p",{children:["Railway performance is measured through a hierarchy of metrics. Historically, the UK used",e.jsx("strong",{children:" Public Performance Measure (PPM)"}),": the percentage of trains arriving at their final destination within 5 minutes of the scheduled time (10 minutes for long-distance services). This has been supplemented and partly replaced by ",e.jsx("strong",{children:"On Time"})," (arrival within 1 minute of schedule), ",e.jsx("strong",{children:"right-time departure"}),", and",e.jsx("strong",{children:" cancellations and significant lateness (CaSL)"})," as a measure of the worst outcomes. Each metric tells a different story: a railway can have good PPM (most trains within 5 minutes) but poor On Time (many trains 2-4 minutes late) or low CaSL but poor PPM (few catastrophic failures but widespread small delays)."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Timetable resilience"})," is the ability of a timetable to absorb perturbations without delays cascading. Resilience is built into the timetable through several mechanisms:",e.jsx("strong",{children:" recovery time"})," (also called pathing time or engineering allowance) is additional running time beyond the technical minimum, allowing a slightly delayed train to recover to schedule. ",e.jsx("strong",{children:"Buffer time"})," is additional headway between trains beyond the signalling minimum, providing a cushion so that one late train does not immediately delay the following service. ",e.jsx("strong",{children:"Dwell time margin"})," allows for slower-than-planned station stops without delaying departure."]}),e.jsx("p",{children:'There is a fundamental trade-off between timetable efficiency and resilience. A "tight" timetable with minimal recovery and buffer time offers faster journey times and more train paths but is fragile: any perturbation cascades. A "padded" timetable is more robust but wastes capacity and delivers slower journeys. The art of timetable design is finding the right balance, placing recovery time where it is most needed (after known bottlenecks, at busy junctions) rather than spreading it evenly, and sizing buffers to match the observed variability at each point in the timetable.'}),e.jsx("h3",{children:"Performance Analysis and Continuous Improvement"}),e.jsx("p",{children:"Performance improvement on the railway is a data-driven, continuous process. The cycle follows a structured approach:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Data collection:"})," TRUST delay data, GPS-based train tracking, signalling logs, maintenance records, and customer complaint data are all inputs. Modern systems generate terabytes of performance data daily."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Root cause analysis:"})," The delay attribution data is analysed to identify the largest contributors to poor performance. Pareto analysis typically reveals that a small number of locations and failure types account for a large proportion of total delay. For example, 10 junctions may account for 40% of all infrastructure-caused delay on a route."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Intervention design:"})," For each identified hot-spot, specific interventions are designed. These might include: targeted maintenance (replacing a failure-prone set of points), timetable adjustment (adding recovery time after a known bottleneck), operational change (revised station dispatch procedures), or investment (grade-separating a flat junction, lengthening a platform)."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Implementation and monitoring:"})," Interventions are implemented and their effect monitored through the same data systems. If the intervention reduces delay at the target location, it is sustained. If not, the analysis is revisited."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Periodic performance review:"})," Network Rail and operators hold regular (typically 4-weekly) performance review meetings, examining trends, reviewing the effectiveness of interventions, and agreeing priorities for the next period. These reviews feed into longer-term investment planning  if a reliability problem cannot be resolved through maintenance and operational changes, it may justify a capital investment in infrastructure renewal."]})]}),e.jsxs("p",{children:["The ",e.jsx("strong",{children:"Joint Performance Improvement Plan (JPIP)"})," is the formal mechanism by which Network Rail and each train operator agree on their shared performance improvement priorities and actions. It is reviewed quarterly and is a contractual requirement of the track access agreement. The discipline of structured performance analysis, combined with the financial incentives of Schedule 8, has driven significant reliability improvements on the UK railway over the past two decades  though much remains to be done."]}),e.jsxs(N,{type:"analogy",children:["Delay attribution is like ",e.jsx("strong",{children:"distributed tracing in a microservices architecture"}),". When a user request fails or is slow, you need to trace the call chain across services to find the root cause. Was it the database, the authentication service, or a downstream API? Railway delay attribution does the same thing: following the chain of causation from the original incident (root cause) through every service it affected (reactionary delay), tagging each segment with the responsible party. Just as distributed tracing tools like Jaeger or Zipkin propagate correlation IDs through service calls, railway delay attribution propagates incident codes through the sequence of affected trains. And just as in software, the hardest bugs to diagnose are the ones where multiple independent failures coincide, making the causal chain ambiguous. The Schedule 8 regime is like an SLA with financial penalties  your cloud provider credits you when uptime falls below the guarantee, and the railway pays out when delay exceeds the benchmark. The continuous improvement cycle mirrors SRE practice: blameless postmortems (root cause analysis), error budgets (performance benchmarks), and toil reduction (targeted interventions at hot-spots)."]}),e.jsx(N,{label:"Recovery Time in Practice",children:"Recovery time is not free time. On a 60-minute journey, a railway might add 3-5 minutes of recovery time distributed across the route. This means the timetabled journey time is 63-65 minutes even though the train could run the route in 60 minutes under perfect conditions. Passengers perceive this as a slow journey, and there is constant commercial pressure to remove it. But without recovery time, a 2-minute delay at the start of the journey arrives as a 2-minute delay at the destination, triggering compensation payments and eroding public confidence. The optimal amount of recovery time depends on the observed variability at each point, and modern analytical tools use historical performance data to place it precisely where it delivers the greatest benefit to punctuality."}),e.jsx(ce,{goTo:h,items:[{target:"m4-l1",label:"Block System & Signals",desc:"Signal failures are among the most common and disruptive infrastructure faults."},{target:"m7-l1",label:"Railway Telecoms",desc:"Communication systems are critical for real-time incident management and coordination."},{target:"m6-l2",label:"Traction & Braking",desc:"Rolling stock failures (traction, brakes, doors) are a major source of delay."},{target:"m5-l2",label:"Power Supply & Distribution",desc:"Electrical supply failures disrupt all services in the affected area."}]})]})}const Hp=[{text:'What is "delay attribution" and why does it matter?',options:["Assigning blame to passengers who delay trains by holding doors","The process of formally identifying the cause of each delay minute and assigning it to the responsible party (infrastructure manager, operator, or external), which drives contractual penalties and improvement targets","A method of predicting future delays using weather data","Recording delays only when they exceed 30 minutes"],correct:1,explanation:"Every delay of 3+ minutes is investigated and attributed to a cause code and responsible party. This matters because it determines who pays performance penalties, drives targeted investment (fix the biggest delay causes first), and provides the evidence base for industry improvement plans. It is analogous to post-incident root-cause analysis in software reliability engineering."},{text:"What did the PPM (Public Performance Measure) metric measure?",options:["The percentage of trains arriving at all stops on time","The percentage of trains arriving at their final destination within a threshold (5 minutes for commuter, 10 for long-distance) AND not cancelled  combining punctuality and reliability into one figure","The average speed of all trains across the network","The number of trains running per day compared to the timetable"],correct:1,explanation:'PPM combined punctuality (arriving within threshold) and reliability (not cancelled) into a single percentage. A train had to both run and arrive on time to count. This single metric, while useful for public communication, could mask issues  for example, a service arriving 4 min 59 sec late counted as "on time" while a 5 min 01 sec arrival did not.'},{text:'What is "recovery time" (or engineering allowance) in a timetable?',options:["Time allocated for trains to be repaired after a breakdown","Extra minutes deliberately built into the schedule beyond the pure technical running time, allowing trains to absorb minor delays and return to their timetabled path","The time between the last train at night and the first train in the morning","Time reserved for crew meal breaks during a journey"],correct:1,explanation:"Recovery time is slack added to the timetable so that a train running slightly late can catch up before its next key timing point. Too little recovery time makes the timetable fragile (any perturbation cascades); too much wastes capacity and extends journey times. Balancing resilience against efficiency is a core timetabling trade-off."},{text:"How does effective incident management limit the impact of disruption?",options:["By preventing all incidents from occurring in the first place","By having pre-planned contingency timetables, clear escalation procedures, and rapid coordination between control centres to restore normal service quickly rather than letting degradation spread","By cancelling all trains until the incident is fully resolved","By automatically rerouting all trains via GPS"],correct:1,explanation:"Good incident management uses pre-planned contingency plans (degraded-mode timetables, predetermined diversionary routes), clear decision-making authority, and rapid cross-industry communication. The goal is to contain disruption to the affected area and restore the plan progressively, rather than allowing a local problem to cascade across the network  much like incident response runbooks in site reliability engineering."}];function _p(h,y){switch(h){case"m8-l1":return e.jsx(Wp,{goTo:y});case"m8-l2":return e.jsx(Up,{goTo:y});case"m8-l3":return e.jsx(Gp,{goTo:y});default:return null}}const Ip={"m8-l1":Op,"m8-l2":Lp,"m8-l3":Hp};function Fp({goTo:h}){return e.jsxs(e.Fragment,{children:[e.jsxs("figure",{className:"lesson-figure",children:[e.jsx("div",{className:"cad-symbol",children:e.jsxs("svg",{viewBox:"0 0 420 100",style:{width:"100%",maxWidth:"420px"},children:[e.jsx("text",{x:"210",y:"14",fill:"var(--text-dim)",fontSize:"10",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"GRIP Stages  Project Lifecycle"}),[{x:10,label:"1",name:"Output",color:"var(--text-dim)"},{x:65,label:"2",name:"Feasib.",color:"var(--text-dim)"},{x:120,label:"3",name:"Option",color:"var(--blue)"},{x:175,label:"4",name:"Single",color:"var(--blue)"},{x:230,label:"5",name:"Detail",color:"var(--accent)"},{x:285,label:"6",name:"Build",color:"var(--accent)"},{x:340,label:"7",name:"T&C",color:"var(--accent-secondary)"},{x:395,label:"8",name:"Close",color:"var(--accent-secondary)"}].map((y,b)=>e.jsxs("g",{children:[e.jsx("rect",{x:y.x,y:"28",width:"45",height:"30",fill:"var(--bg-hover)",stroke:y.color,strokeWidth:"1.5",rx:"3"}),e.jsx("text",{x:y.x+22,y:"40",fill:y.color,fontSize:"9",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",fontWeight:"bold",children:y.label}),e.jsx("text",{x:y.x+22,y:"52",fill:y.color,fontSize:"7",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:y.name}),b<7&&e.jsx("line",{x1:y.x+45,y1:"43",x2:y.x+55,y2:"43",stroke:"var(--text-dim)",strokeWidth:"1"}),b<7&&e.jsx("polygon",{points:`${y.x+55},43 ${y.x+51},40 ${y.x+51},46`,fill:"var(--text-dim)"})]},b)),e.jsx("line",{x1:"10",y1:"65",x2:"155",y2:"65",stroke:"var(--text-dim)",strokeWidth:"0.5"}),e.jsx("text",{x:"82",y:"78",fill:"var(--text-dim)",fontSize:"7",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"Define & Select"}),e.jsx("line",{x1:"175",y1:"65",x2:"320",y2:"65",stroke:"var(--accent)",strokeWidth:"0.5"}),e.jsx("text",{x:"247",y:"78",fill:"var(--accent)",fontSize:"7",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"Design & Build"}),e.jsx("line",{x1:"340",y1:"65",x2:"440",y2:"65",stroke:"var(--accent-secondary)",strokeWidth:"0.5"}),e.jsx("text",{x:"385",y:"78",fill:"var(--accent-secondary)",fontSize:"7",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"Deliver"}),e.jsx("text",{x:"210",y:"92",fill:"var(--text-dim)",fontSize:"7",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:" gate reviews between stages"})]})}),e.jsx("figcaption",{children:"CAD diagram: GRIP (Governance for Railway Investment Projects)  the 8-stage lifecycle for UK railway projects."})]}),e.jsx("h3",{children:"The Stages of a Railway Project"}),e.jsx("p",{children:"A railway project does not begin with design and end with construction. It follows a structured lifecycle that may span a decade or more from initial concept to the first revenue service. Understanding this lifecycle is essential because decisions made in early stages constrain everything that follows  and mistakes discovered late are exponentially more expensive to fix. The typical lifecycle comprises six broad phases: feasibility, preliminary design, detailed design, construction, testing and commissioning, and operations and maintenance."}),e.jsxs("p",{children:["In the UK, this lifecycle is formalised through ",e.jsx("strong",{children:"GRIP (Governance for Railway Investment Projects)"}),", which defines eight stages: Output Definition, Feasibility, Option Selection, Single Option Development, Detailed Design, Construction Test and Commission, Scheme Hand Back, and Project Close Out. Each stage has defined deliverables, review gates, and approval criteria. No stage can begin until the preceding gate has been passed. This staged approach exists because railways are safety-critical infrastructure where the cost of failure  measured in lives, not just money  demands rigorous control at every step."]}),e.jsxs("p",{children:["Network Rail has since evolved GRIP into the ",e.jsx("strong",{children:"PACE (Project Acceleration in a Controlled Environment)"})," framework, which aims to reduce bureaucratic overhead while maintaining governance rigour. PACE organises work into four phases  Develop, Design, Deliver, and Close  with decision gates between each phase. Regardless of whether a project follows GRIP or PACE, the underlying principle is the same: progressively commit resources only as uncertainty reduces and confidence in the solution grows."]}),e.jsxs("figure",{className:"lesson-figure",children:[e.jsx("div",{className:"image-placeholder",children:e.jsx("p",{children:"IMAGE NEEDED: Photo of a railway construction site showing active engineering works  e.g., track laying, OLE mast installation, or major station redevelopment. Should convey the scale and complexity of a railway project in the construction phase."})}),e.jsx("figcaption",{children:"A railway project in the construction phase  years of planning converge into physical reality on the ground."})]}),e.jsx("h3",{children:"GRIP Stages in Detail"}),e.jsx("p",{children:"Each GRIP stage has specific objectives, deliverables, and gate criteria. Understanding these in detail is essential for anyone working on UK rail projects, because the stage determines what design information is expected, what level of cost certainty is required, and what approvals must be obtained before progressing."}),e.jsx("div",{className:"table-wrapper",children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"GRIP Stage"}),e.jsx("th",{children:"Key Deliverables"}),e.jsx("th",{children:"Gate Review Focus"}),e.jsx("th",{children:"Typical Duration"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"1  Output Definition"})}),e.jsx("td",{children:"Statement of need, high-level output specification, strategic fit assessment"}),e.jsx("td",{children:"Does the project align with the railway's strategic objectives? Is the need genuine and evidenced?"}),e.jsx("td",{children:"26 months"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"2  Feasibility"})}),e.jsx("td",{children:"Option long-list, initial environmental appraisal, order-of-magnitude cost estimates (50%), initial programme"}),e.jsx("td",{children:"Are there feasible options that could meet the output requirements within acceptable cost and programme ranges?"}),e.jsx("td",{children:"39 months"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"3  Option Selection"})}),e.jsx("td",{children:"Multi-criteria option appraisal, preferred option recommendation, initial business case, environmental screening, preliminary surveys"}),e.jsx("td",{children:"Has the preferred option been selected through a robust, auditable process? Does the initial business case demonstrate value for money?"}),e.jsx("td",{children:"612 months"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"4  Single Option Development (Outline Design)"})}),e.jsx("td",{children:"Outline design drawings, preliminary hazard analysis, environmental impact assessment, land referencing, planning application preparation, cost estimate (20%), detailed programme"}),e.jsx("td",{children:"Is the design sufficiently mature to proceed to detailed design? Are consents obtainable? Is the cost estimate credible?"}),e.jsx("td",{children:"1224 months"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"5  Detailed Design"})}),e.jsx("td",{children:"Construction-ready drawings, specifications, method statements, procurement packages, final cost estimate (10%), integrated test plan, safety verification plan"}),e.jsx("td",{children:"Is the design complete, coordinated across all disciplines, and ready for construction? Are all interfaces resolved?"}),e.jsx("td",{children:"1224 months"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"6  Construction, Test and Commission"})}),e.jsx("td",{children:"As-built records, test certificates, commissioning reports, safety validation evidence, operational readiness assessment"}),e.jsx("td",{children:"Has the constructed asset been tested and proven to meet the design requirements? Is it safe to enter service?"}),e.jsx("td",{children:"1260 months"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"7  Scheme Hand Back"})}),e.jsx("td",{children:"Defects liability handover, O&M manuals, asset register updates, training records, performance monitoring plan"}),e.jsx("td",{children:"Has the project been formally handed over to the asset owner and operator? Are all residual defects documented?"}),e.jsx("td",{children:"312 months"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"8  Project Close Out"})}),e.jsx("td",{children:"Final account, lessons learned report, benefits realisation plan, archived project records"}),e.jsx("td",{children:"Have all contractual obligations been discharged? Are the promised benefits being realised?"}),e.jsx("td",{children:"36 months"})]})]})]})}),e.jsx("h3",{children:"Outline Design vs Detailed Design"}),e.jsxs("p",{children:["The distinction between ",e.jsx("strong",{children:"GRIP 4 (Single Option Development / Outline Design)"})," and",e.jsx("strong",{children:" GRIP 5 (Detailed Design)"})," is one of the most commonly misunderstood aspects of the project lifecycle, yet it is critical because it governs what decisions are fixed and what flexibility remains."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Outline Design"})," establishes the engineering solution in sufficient detail to confirm feasibility, obtain planning consents, and produce a reliable cost estimate. At this stage, the track alignment is defined to horizontal and vertical geometry level  curves, gradients, transitions  but not to individual sleeper positions. Structures are designed to general arrangement level: span lengths, deck types, foundation concepts, and clearance envelopes are confirmed, but reinforcement details, bearing schedules, and parapet designs are not. Signalling is defined at the principles level: signal positions, overlap lengths, track circuit boundaries, and interlocking tables in draft form. Electrification is defined at route-level: feeder station locations, sectioning strategy, wire run types, and mast spacing philosophy. The emphasis is on confirming that the overall solution works and that all critical interfaces between disciplines are identified and resolvable."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Detailed Design"})," produces everything needed for construction. Track engineers produce setting-out data to millimetre precision for every rail, sleeper, and fastening. Structures engineers produce reinforcement bar schedules, formwork drawings, and bearing installation procedures. Signalling engineers produce relay circuit diagrams, cable routing plans, and equipment room layouts. Electrification engineers produce mast foundation designs specific to each location's geotechnical conditions, wire run tension calculations, and bonding and earthing schedules. The critical shift from outline to detailed design is that all interface dimensions become contractually fixed  a change to any one discipline's detailed design may cascade through every other discipline's design, triggering costly rework."]}),e.jsxs("div",{className:"highlight-box",children:[e.jsx("strong",{children:"Key principle:"}),' Outline design answers "what are we building and will it work?" Detailed design answers "exactly how do we build it, to what dimensions, with what materials, in what sequence?" The cost of changing the answer increases by roughly an order of magnitude between these two stages.']}),e.jsx("h3",{children:"Feasibility and Options"}),e.jsxs("p",{children:["The feasibility phase answers a deceptively simple question: is this project worth doing? It begins with understanding the ",e.jsx("strong",{children:"service requirement"}),"  what transport need does this project address? This might be capacity relief on a congested corridor, connectivity to a new development, freight gauge enhancement, or speed improvement. The service requirement drives everything: it determines the type of infrastructure needed, the performance parameters, and ultimately the cost."]}),e.jsx("p",{children:"At this stage, alignment options are sketched at a high level, typically using desktop studies with existing mapping and survey data. Engineers identify major constraints  rivers, motorways, protected habitats, flood plains, existing buildings  and develop several corridor options. High-level cost estimates (often within a range of -30% to +50%) are produced, along with initial assessments of environmental impact, land acquisition requirements, and interfaces with the existing railway network. The output is a strategic business case that determines whether the project proceeds to design."}),e.jsx("p",{children:"Multiple disciplines contribute even at this early stage. Track engineers assess whether the alignment geometry can achieve the desired line speed. Signalling engineers determine whether the existing signalling can accommodate additional services or whether a complete resignalling is required. Electrification engineers assess whether the existing power supply has capacity, or whether new feeder stations and switching sections are needed. Structures engineers identify every bridge, tunnel, and retaining wall that may need modification. The feasibility study is a whole-system exercise, not the province of any single discipline."}),e.jsx("h3",{children:"Business Case Development"}),e.jsxs("p",{children:["No railway project proceeds without a robust ",e.jsx("strong",{children:"business case"}),". In the UK, the business case follows the HM Treasury ",e.jsx("strong",{children:"Green Book"})," five-case model, which requires five distinct arguments to be made before public funds are committed. This framework applies to all government-funded projects but is particularly significant for railways given their scale and multi-decade impacts."]}),e.jsx("div",{className:"table-wrapper",children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Case"}),e.jsx("th",{children:"Question Answered"}),e.jsx("th",{children:"Key Content for Railway Projects"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Strategic Case"})}),e.jsx("td",{children:"Why is this project needed?"}),e.jsx("td",{children:"Alignment with transport policy, evidence of demand, strategic fit with rail network plans, problem statement supported by data (overcrowding, journey times, connectivity gaps)"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Economic Case"})}),e.jsx("td",{children:"Does it represent value for money?"}),e.jsx("td",{children:"Benefit-Cost Ratio (BCR) calculated using WebTAG methodology, monetised benefits (journey time savings, reliability, safety, reduced road congestion, wider economic impacts), sensitivity analysis, distributional impacts"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Financial Case"})}),e.jsx("td",{children:"Is it affordable?"}),e.jsx("td",{children:"Capital cost estimate with contingency (Quantified Risk Assessment), whole-life operating costs, revenue projections, funding sources (DfT grant, fare revenue, third-party contributions), cash flow profile over construction and early operations"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Commercial Case"})}),e.jsx("td",{children:"Can it be procured?"}),e.jsx("td",{children:"Procurement strategy (traditional, design-and-build, alliance), contract form (NEC, bespoke), market capacity and interest, risk allocation between client and contractor, supply chain readiness"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Management Case"})}),e.jsx("td",{children:"Can it be delivered?"}),e.jsx("td",{children:"Project governance structure, programme and milestones, risk register and mitigation strategy, stakeholder management plan, benefits realisation plan, assurance and audit arrangements"})]})]})]})}),e.jsxs("p",{children:["The ",e.jsx("strong",{children:"Benefit-Cost Ratio (BCR)"}),' is the headline metric for the economic case. It compares the present value of benefits (typically over a 60-year appraisal period for rail infrastructure) against the present value of costs. A BCR greater than 2.0 is generally considered "high" value for money; between 1.5 and 2.0 is "medium"; and below 1.5 is "low." However, BCR alone does not determine whether a project proceeds  strategic and distributional considerations can justify projects with lower BCRs, particularly where connectivity to underserved regions is a policy objective.']}),e.jsxs("p",{children:["The Department for Transport's ",e.jsx("strong",{children:"WebTAG (Web-based Transport Analysis Guidance)"}),"provides the detailed methodology for calculating benefits. Journey time savings are the largest benefit component for most rail schemes, calculated by multiplying the number of affected passengers by the time saving and by the value of time (which varies by journey purpose  commuting, business, leisure). Reliability benefits, crowding relief, accident reduction, noise reduction, air quality improvement, and greenhouse gas emission changes are also monetised. Wider economic impacts  agglomeration benefits from improved connectivity between labour markets  can be significant for major schemes but are subject to additionality tests to avoid double-counting."]}),e.jsx("h3",{children:"Environmental Impact Assessment"}),e.jsxs("p",{children:["Railway projects of any significant scale require an ",e.jsx("strong",{children:"Environmental Impact Assessment (EIA)"})," under the Town and Country Planning (Environmental Impact Assessment) Regulations or equivalent legislation for nationally significant infrastructure. The EIA process is not merely a regulatory hurdle  it shapes the engineering design by identifying constraints that must be respected or mitigated."]}),e.jsxs("p",{children:["The EIA process begins with ",e.jsx("strong",{children:"screening"}),"  determining whether an EIA is required  followed by ",e.jsx("strong",{children:"scoping"}),", which defines the topics to be assessed. For railway projects, the typical scope includes: noise and vibration (both during construction and operation), air quality, landscape and visual impact, ecology and biodiversity (including protected species surveys that may take a full year due to seasonal constraints), water resources and flood risk, cultural heritage and archaeology, traffic and transport during construction, community effects (severance, loss of amenity), and climate change (both the project's carbon footprint and its resilience to climate change impacts such as increased flooding and extreme heat)."]}),e.jsxs("p",{children:["The output is an ",e.jsx("strong",{children:"Environmental Statement (ES)"}),"  a substantial document (often running to thousands of pages with technical appendices) that describes the baseline conditions, predicts the impacts, and sets out the mitigation measures. Mitigation for railway noise might include noise barriers, rail dampers, or building insulation. Ecological mitigation might include the translocation of protected species, creation of replacement habitats, or the design of wildlife crossings (green bridges, badger tunnels, bat gantries). These mitigation commitments become legally binding once planning consent is granted, and the project must demonstrate compliance during construction and operation."]}),e.jsx("h3",{children:"Land Acquisition and Compulsory Purchase"}),e.jsxs("p",{children:["Railways require land. New lines require land acquisition along the entire route corridor; enhancements to existing railways may require additional land for widening, new structures, or construction compounds. In the UK, where most land is privately owned, this is achieved through ",e.jsx("strong",{children:"compulsory purchase"}),"  the legal power of a public authority to acquire land without the owner's consent, subject to the payment of compensation."]}),e.jsxs("p",{children:["For railway projects, compulsory purchase powers may be obtained through several mechanisms depending on the scale and nature of the project. The ",e.jsx("strong",{children:"Transport and Works Act 1992"})," provides powers through a ",e.jsx("strong",{children:"Transport and Works Act Order (TWAO)"}),", which is the most common route for significant rail schemes that are not nationally significant. ",e.jsx("strong",{children:"Nationally Significant Infrastructure Projects (NSIPs)"})," typically new railways or very major enhancements  require a ",e.jsx("strong",{children:"Development Consent Order (DCO)"})," under the Planning Act 2008, which is determined by the relevant Secretary of State following examination by the Planning Inspectorate. Smaller works on existing railway land may be carried out under ",e.jsx("strong",{children:"permitted development rights"}),"granted by the Town and Country Planning (General Permitted Development) Order, which allows certain railway works without specific planning permission."]}),e.jsxs("p",{children:["The land acquisition process requires detailed ",e.jsx("strong",{children:"land referencing"}),"  identifying every parcel of land affected, every owner, tenant, and occupier, and every right that exists over the land (rights of way, wayleaves, easements). This is a substantial exercise that must be completed before the order application is submitted. Compensation is assessed on the basis of the land's open market value plus severance and injurious affection (the reduction in value of retained land), disturbance costs, and in some cases a loss payment for homeowners and businesses. The Lands Tribunal (now the Upper Tribunal) resolves disputes where compensation cannot be agreed."]}),e.jsx("h3",{children:"Planning Consent Processes"}),e.jsx("div",{className:"table-wrapper",children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Consent Route"}),e.jsx("th",{children:"Applicable To"}),e.jsx("th",{children:"Determining Authority"}),e.jsx("th",{children:"Typical Timeline"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"TWAO"})}),e.jsx("td",{children:"Significant rail schemes (new stations, line reopenings, major enhancements)"}),e.jsx("td",{children:"Secretary of State for Transport, following public inquiry if objections"}),e.jsx("td",{children:"1836 months from application"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"DCO"})}),e.jsx("td",{children:"Nationally significant infrastructure (new railways, very major enhancements)"}),e.jsx("td",{children:"Secretary of State, following examination by Planning Inspectorate"}),e.jsx("td",{children:"2448 months from application (pre-application consultation adds 12+ months)"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Permitted Development"})}),e.jsx("td",{children:"Works on existing operational railway land (track renewals, minor structures, equipment installation)"}),e.jsx("td",{children:"No specific consent required, but prior approval may be needed for certain works"}),e.jsx("td",{children:"N/A (but prior approval typically 8 weeks)"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Planning Permission"})}),e.jsx("td",{children:"Works outside railway land that do not qualify for TWAO/DCO (e.g., access roads, compound areas)"}),e.jsx("td",{children:"Local Planning Authority"}),e.jsx("td",{children:"816 weeks (longer if called in)"})]})]})]})}),e.jsx("h3",{children:"Preliminary and Detailed Design"}),e.jsxs("p",{children:["Once an option is selected, ",e.jsx("strong",{children:"preliminary design"})," refines it with real data. Ground investigation boreholes are drilled along the alignment to characterise soil and rock conditions. Topographic surveys capture precise ground levels. Existing structures are inspected and assessed for capacity. The track alignment is designed in detail  horizontal curves, vertical curves, cant, transitions  constrained by the geotechnical findings and the structural interfaces. Signalling principles are established: signal positions, overlap lengths, track circuit boundaries. Electrification requirements are defined: feeder station locations, sectioning points, neutral sections, mast positions. The output is a design that is sufficiently developed to produce a reliable cost estimate (typically within -10% to +10%) and to obtain planning consents."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Detailed design"})," is where every discipline produces construction-ready drawings, specifications, and schedules. Track engineers produce rail setting-out data to millimetre precision. Structures engineers produce reinforcement drawings for every concrete pour. Signalling engineers produce circuit diagrams for every relay rack and interlocking table for every route. Electrification engineers produce mast foundation designs, wire run calculations, and bonding schedules. The critical activity in detailed design is ",e.jsx("strong",{children:"interface management"}),"  ensuring that the outputs of one discipline are compatible with the inputs of every other. A mast foundation that conflicts with a cable route, a signal that cannot be seen past a new overhead line structure, a track drainage outfall that undermines a retaining wall  these are the interface failures that detailed design must catch before construction begins."]}),e.jsx("h3",{children:"Programme Management vs Project Management"}),e.jsxs("p",{children:["Large railway undertakings are often structured as ",e.jsx("strong",{children:"programmes"})," rather than single projects. A programme is a collection of related projects and activities managed in a coordinated way to achieve benefits that could not be obtained by managing them individually. The distinction matters because railway enhancements frequently involve multiple interdependent work packages  for example, a capacity enhancement might require track remodelling (one project), signalling renewal (another project), power supply upgrade (a third project), and new rolling stock procurement (a fourth project), all of which must be delivered in a coordinated sequence to achieve the capacity benefit."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Project management"})," focuses on delivering a defined scope within agreed cost, time, and quality parameters. ",e.jsx("strong",{children:"Programme management"})," focuses on managing the interdependencies between projects, sequencing the delivery to maximise benefits realisation, managing strategic risks that affect multiple projects, and ensuring that changes in one project are assessed for their impact on others. In UK rail, programme management typically follows the ",e.jsx("strong",{children:"Managing Successful Programmes (MSP)"})," framework, while individual projects follow ",e.jsx("strong",{children:"PRINCE2"})," or the GRIP/PACE lifecycle."]}),e.jsxs("p",{children:["The ",e.jsx("strong",{children:"programme integration function"})," is responsible for the interfaces between projects  ensuring that the signalling project delivers its enabling works in time for the track remodelling project's possession, that the power supply upgrade is commissioned before the new rolling stock arrives, and that the timetable change that unlocks the capacity benefit is planned to coincide with the completion of all infrastructure works. This coordination is often the most challenging aspect of railway delivery because delays in any one project cascade through the programme."]}),e.jsx("h3",{children:"Supply Chain and Contract Models"}),e.jsx("p",{children:"The choice of contract model profoundly affects how a railway project is delivered, how risk is allocated, and how effectively interfaces are managed. The UK rail industry has experimented with several models over the past three decades."}),e.jsx("div",{className:"table-wrapper",children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Contract Model"}),e.jsx("th",{children:"Description"}),e.jsx("th",{children:"Interface Risk"}),e.jsx("th",{children:"Examples"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Traditional (Design-Bid-Build)"})}),e.jsx("td",{children:"Client designs, then tenders construction separately. Contractor builds to client's design."}),e.jsx("td",{children:"High  interface between designer and constructor, and between multiple discipline designers, sits with the client"}),e.jsx("td",{children:"Historically common on Network Rail renewals"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Design and Build"})}),e.jsx("td",{children:"Single contractor responsible for both design and construction. Client specifies outputs and performance requirements."}),e.jsx("td",{children:"Lower  contractor manages internal interfaces, but client-contractor interface for requirements becomes critical"}),e.jsx("td",{children:"Thameslink Programme (some packages)"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"NEC Contracts"})}),e.jsx("td",{children:"The NEC (New Engineering Contract) suite provides a family of contracts with options for different risk allocations (Options AF). Emphasises early warning, risk reduction, and collaborative working."}),e.jsx("td",{children:"Depends on the option chosen  target cost (Option C) with pain/gain share incentivises collaboration"}),e.jsx("td",{children:"Widely used across Network Rail projects"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Alliance Contracting"})}),e.jsx("td",{children:"Client and one or more contractors form a virtual organisation with shared objectives, shared risk/reward, and unanimous decision-making. No blame culture."}),e.jsx("td",{children:"Lowest  all parties are jointly responsible for all interfaces, incentivised to resolve issues collaboratively"}),e.jsx("td",{children:"Crossrail (some packages), East West Rail"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Framework Agreements"})}),e.jsx("td",{children:"Pre-agreed terms with selected contractors for repeat work packages. Work is called off under the framework as needed."}),e.jsx("td",{children:"Variable  depends on scope of each call-off"}),e.jsx("td",{children:"Network Rail CP6 frameworks for track renewals, signalling, electrification"})]})]})]})}),e.jsxs("p",{children:["The NEC suite has become the default contract family for UK rail projects. ",e.jsx("strong",{children:"NEC4 Option C (target cost with activity schedule)"})," is the most commonly used variant for construction works, providing a pain/gain share mechanism that incentivises the contractor to deliver below the target cost while protecting the client from unlimited cost overrun. The ",e.jsx("strong",{children:"Early Warning Register"})," and ",e.jsx("strong",{children:"Risk Reduction Meeting"}),"mechanisms in NEC contracts are particularly valuable on railway projects where emerging risks (unexpected ground conditions, interface clashes, possession overruns) must be managed collaboratively rather than through adversarial claims processes."]}),e.jsx("h3",{children:"Construction, Testing, and Commissioning"}),e.jsxs("p",{children:["Railway construction is fundamentally different from most civil engineering because the railway must usually remain operational during the works. Work on or near the operational railway is carried out during ",e.jsx("strong",{children:"possessions"}),"  planned periods when train services are suspended on the affected section and the track is handed over to the engineering team. Possessions are precious and tightly time-limited: a typical weekend possession might give 52 hours of access. Major works require blockades of a week or more, which must be planned years in advance and coordinated with the timetable and passenger information teams. Greenfield construction (new lines on new alignments) avoids these constraints but introduces its own challenges: land acquisition, earthworks, and the eventual connection to the existing network."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Testing and commissioning"})," is the phase that separates a construction site from a working railway. Signalling is tested exhaustively: every route is set and proven, every interlocking condition is verified, every track circuit is walked and confirmed. Electrification is energised section by section, with clearance tests under each structure and contact force measurements at every registration. Test trains run at progressively increasing speeds, with instrumentation measuring ride quality, track geometry, pantograph uplift, and signalling system response. Only when every subsystem has been individually tested and the integrated system has been proven does the infrastructure manager accept the works and hand back to operations."]}),e.jsx("h3",{children:"Lessons from Major UK Railway Projects"}),e.jsx("p",{children:"The UK's recent experience with major railway projects provides invaluable lessons about the lifecycle, governance, and interfaces discussed throughout this module. Three projects in particular illustrate both what can go right and what can go wrong."}),e.jsxs("p",{children:[e.jsx("strong",{children:"Crossrail (Elizabeth Line):"})," The largest infrastructure project in Europe when construction began, Crossrail delivered 42 km of new tunnels under central London, connecting existing surface railways to create a cross-city service. The project demonstrated the value of mature systems engineering  the interface between the new tunnel infrastructure and the existing surface railway (different signalling systems, different electrification voltages, different operating rules) was extraordinarily complex. However, the project also demonstrated the consequences of underestimating testing and commissioning complexity. The original opening date of December 2018 was delayed to May 2022  primarily because the integration of signalling, train control, and station systems proved far more difficult than anticipated. The lesson: construction is not the hardest part of a railway project; integration and commissioning often is."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Thameslink Programme:"})," This programme enhanced the north-south rail corridor through central London, rebuilding London Bridge station (one of the busiest in the UK) while keeping it operational, and introducing new digital signalling (ETCS Level 2) on the core section. The London Bridge rebuild is widely regarded as a programme management success  the phased construction approach, with services progressively moved between platforms over several years, required extraordinary coordination between track, signalling, structures, and operations disciplines. The key lesson: meticulous phasing and interface management can deliver transformational change on a live, busy railway."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"HS2:"})," The UK's high-speed railway from London to Birmingham (Phase 1) and onward (Phase 2, now substantially revised) illustrates the challenges of the political and planning dimensions of the project lifecycle. HS2 has faced sustained challenges around cost escalation, the DCO and parliamentary bill process for obtaining powers, environmental mitigation requirements (ancient woodland, archaeological sites), and the difficulty of maintaining political consensus for projects that span multiple parliamentary terms. The engineering is largely conventional (high-speed rail is well-understood technology), but the project underscores that technical capability is necessary but not sufficient  a railway project must also be deliverable within the political, financial, and social constraints of its environment."]}),e.jsxs(N,{type:"analogy",children:["The railway project lifecycle mirrors a ",e.jsx("strong",{children:"software development lifecycle"}),", but with a crucial difference: there is no agile iteration once the concrete is poured. Feasibility is your product discovery phase. Preliminary design is your architecture and system design. Detailed design is your implementation sprint  but every line of code must be complete and reviewed before any deployment begins. Construction is deployment to production, but you cannot roll back a bridge foundation. Testing and commissioning is your QA and UAT phase, and it must be exhaustive because there are no hotfixes in live railway operations. The GRIP gate reviews are your sprint reviews and stakeholder sign-offs  except that each gate governs expenditure commitments of tens or hundreds of millions of pounds. The business case is your product roadmap ROI analysis, and the five-case model is like having to justify your project to five different VPs simultaneously: strategy, finance, procurement, delivery, and value. This is why railways invest so heavily in upfront design: the cost of a production bug is measured in derailments, not downtime."]}),e.jsx(N,{type:"info",label:"GRIP Stages",children:"The eight GRIP stages provide a framework for managing risk and cost through progressive design maturity. Each gate review asks: do we understand the risks well enough to justify spending the next tranche of money? The early stages are cheap (studies and surveys); the later stages are expensive (construction and commissioning). The gate process ensures that expensive commitments are only made when the design is sufficiently mature to justify them. Many projects fail not because of technical problems but because they rush through early stages and discover fundamental issues during construction  when changes cost 10 to 100 times more than they would have in design."}),e.jsx(N,{type:"info",label:"Environmental and Planning Consents",children:"Environmental Impact Assessment and planning consent are not administrative formalities  they are integral parts of the engineering process. Ecological survey windows (bat surveys in summer, great crested newt surveys in spring, breeding bird surveys in MarchJuly) can add 1218 months to the programme if not anticipated early. Archaeological investigations along a route corridor can uncover remains that require design changes (realignment to avoid, or redesign of foundations to preserve in situ). Flood risk assessments may require compensatory flood storage  engineered areas that must be excavated to replace the floodplain volume displaced by the railway embankment. These constraints must be identified in feasibility and resolved in outline design; discovering them in detailed design or construction leads to programme delays and cost overruns."}),e.jsx(ce,{goTo:h,items:[{target:"m0",label:"Foundations",desc:"The fundamental principles that feasibility studies must account for from the very beginning."},{target:"m1",label:"Track",desc:"Alignment design is one of the first disciplines engaged in preliminary design."},{target:"m2",label:"Civil Engineering",desc:"Earthworks, drainage, and ground conditions shape the project from feasibility onwards."},{target:"m3",label:"Structures",desc:"Bridges, tunnels, and retaining walls are often the longest-lead and highest-cost items."},{target:"m4",label:"Signalling",desc:"Signalling principles must be established early as they drive track layout and operational capacity."},{target:"m5",label:"Electrification",desc:"Power supply capacity and OLE design are critical constraints identified in preliminary design."},{target:"m6",label:"Rolling Stock",desc:"Vehicle specifications define the loading gauge, braking curves, and power demands the infrastructure must accommodate."},{target:"m7",label:"Telecoms",desc:"Communications infrastructure must be planned alongside signalling and operations systems."},{target:"m8",label:"Operations",desc:"The timetable and operational concept are the ultimate test of whether the design delivers the service requirement."}]})]})}const Vp=[{text:"What are the GRIP stages in railway project delivery?",options:["A series of physical grip tests performed on rail surfaces","Governance for Railway Investment Projects  a staged framework (stages 18) from output definition through feasibility, option selection, detailed design, construction, testing, and handover to operations","A grading system for railway project managers from junior to senior","A financial model for calculating return on investment for rail projects"],correct:1,explanation:"GRIP provides a structured lifecycle with stage-gate reviews. Each stage (Output Definition, Feasibility, Option Selection, Single Option Development, Detailed Design, Construction, Testing & Commissioning, Project Close-Out) has defined deliverables and a review gate before proceeding. This ensures adequate investigation before committing to expensive construction."},{text:"Why is the feasibility stage critical in railway projects?",options:["Because it produces the final construction drawings","Because it identifies whether viable options exist, assesses major risks and constraints early, and prevents commitment of large resources to projects that may not be deliverable or cost-effective","Because it is when the railway is closed for construction work","Because it is the only stage requiring safety approval"],correct:1,explanation:"Feasibility is where you discover whether the project is technically possible and economically justified before spending heavily. Identifying showstoppers here (e.g. a bridge that cannot accommodate the required clearances, or prohibitive utility diversions) costs a fraction of discovering them during construction. The cost of changes rises exponentially as the project progresses."},{text:"What happens during Testing and Commissioning of a railway system?",options:["Passengers are invited to trial the new service for free","Each component is individually tested, then progressively integrated and tested as a system, including interface testing between disciplines, before being proven safe to enter operational service","Only the signalling system is tested; other systems are assumed to work","A single end-to-end test run is performed on opening day"],correct:1,explanation:"Testing and commissioning follows a structured hierarchy: component testing, subsystem testing, integration testing (where interfaces between signalling, telecoms, power, track, and rolling stock are verified), and finally system proving (running realistic service patterns). Each stage must pass before proceeding  directly analogous to unit, integration, and end-to-end testing in software."},{text:"What is the relationship between project handover and the operations/maintenance phase?",options:["There is no formal handover; operations staff learn on the job","The project must formally demonstrate that the asset is safe, reliable, and maintainable, provide complete documentation and training, and transfer responsibility to the operations and maintenance organisation through a structured handover process","Operations staff are involved only after the project is fully complete and closed out","Handover simply means giving the keys to the station to the train operator"],correct:1,explanation:"Handover is a critical transition where the project team must prove the asset meets its requirements, provide as-built documentation, maintenance manuals, spare parts, and operator training. Poor handover  missing documentation, untrained staff, unknown maintenance requirements  leads to reliability problems and safety risks in service. The best projects involve operations and maintenance staff from early design stages."}];function Jp({goTo:h}){return e.jsxs(e.Fragment,{children:[e.jsxs("figure",{className:"lesson-figure",children:[e.jsx("div",{className:"cad-symbol",children:e.jsxs("svg",{viewBox:"0 0 360 140",style:{width:"100%",maxWidth:"360px"},children:[e.jsx("text",{x:"180",y:"14",fill:"var(--text-dim)",fontSize:"10",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"Interface Matrix  Disciplines"}),[{x:180,y:35,label:"Track"},{x:280,y:50,label:"Sig"},{x:310,y:95,label:"E&P"},{x:240,y:125,label:"Telecoms"},{x:120,y:125,label:"Civils"},{x:50,y:95,label:"Struct"},{x:80,y:50,label:"RS"}].map((y,b)=>e.jsxs("g",{children:[e.jsx("circle",{cx:y.x,cy:y.y,r:"18",fill:"var(--bg-hover)",stroke:"var(--accent)",strokeWidth:"1"}),e.jsx("text",{x:y.x,y:y.y+3,fill:"var(--accent)",fontSize:"7",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:y.label})]},b)),e.jsx("line",{x1:"180",y1:"53",x2:"280",y2:"50",stroke:"var(--border-light)",strokeWidth:"0.8"}),e.jsx("line",{x1:"180",y1:"53",x2:"80",y2:"50",stroke:"var(--border-light)",strokeWidth:"0.8"}),e.jsx("line",{x1:"280",y1:"68",x2:"310",y2:"77",stroke:"var(--border-light)",strokeWidth:"0.8"}),e.jsx("line",{x1:"310",y1:"113",x2:"240",y2:"125",stroke:"var(--border-light)",strokeWidth:"0.8"}),e.jsx("line",{x1:"120",y1:"125",x2:"50",y2:"113",stroke:"var(--border-light)",strokeWidth:"0.8"}),e.jsx("line",{x1:"50",y1:"77",x2:"80",y2:"68",stroke:"var(--border-light)",strokeWidth:"0.8"}),e.jsx("line",{x1:"80",y1:"50",x2:"280",y2:"50",stroke:"var(--red)",strokeWidth:"1",strokeDasharray:"3,2"}),e.jsx("line",{x1:"180",y1:"53",x2:"310",y2:"95",stroke:"var(--red)",strokeWidth:"1",strokeDasharray:"3,2"}),e.jsx("line",{x1:"180",y1:"53",x2:"50",y2:"95",stroke:"var(--red)",strokeWidth:"1",strokeDasharray:"3,2"}),e.jsx("line",{x1:"280",y1:"68",x2:"120",y2:"107",stroke:"var(--red)",strokeWidth:"1",strokeDasharray:"3,2"}),e.jsx("line",{x1:"80",y1:"68",x2:"240",y2:"107",stroke:"var(--red)",strokeWidth:"1",strokeDasharray:"3,2"}),e.jsx("line",{x1:"30",y1:"14",x2:"50",y2:"14",stroke:"var(--red)",strokeWidth:"1",strokeDasharray:"3,2"}),e.jsx("text",{x:"55",y:"17",fill:"var(--text-dim)",fontSize:"7",fontFamily:"JetBrains Mono, monospace",children:"critical interfaces"})]})}),e.jsx("figcaption",{children:"CAD diagram: Interface matrix showing the web of interdependencies between railway engineering disciplines. Dashed red lines = critical interfaces."})]}),e.jsx("h3",{children:"Why Interfaces Matter Most"}),e.jsxs("p",{children:["Railway engineering comprises multiple specialised disciplines  track, civil engineering, structures, signalling, electrification, rolling stock, telecommunications, and operations  each with its own standards, design tools, and professional culture. Individually, each discipline is well understood and mature. The problems arise at the",e.jsx("strong",{children:" interfaces"})," between them. History shows that the majority of serious engineering failures on railways occur not because a single discipline made an error within its own domain, but because two or more disciplines made assumptions about each other that turned out to be incompatible."]}),e.jsxs("p",{children:["Interface management is therefore not a bureaucratic overhead but a core engineering activity. It is formalised through ",e.jsx("strong",{children:"Interface Control Documents (ICDs)"}),", which define the physical, electrical, functional, and procedural boundaries between disciplines. An ICD specifies what each discipline will provide and what it expects to receive  dimensions, loads, clearances, electrical characteristics, timing requirements, and data formats. When an ICD is agreed, both parties are contractually bound to deliver their side of the interface. When ICDs are incomplete, ambiguous, or not enforced, interface failures are almost inevitable."]}),e.jsxs("figure",{className:"lesson-figure",children:[e.jsx("div",{className:"image-placeholder",children:e.jsx("p",{children:"IMAGE NEEDED: Photo showing a complex point where multiple railway disciplines physically meet  e.g., where OLE passes through a bridge structure, or where signalling cables cross under track, or a tunnel portal with electrification transition. Shows the physical reality of engineering interfaces."})}),e.jsx("figcaption",{children:"Where disciplines meet  a tunnel portal showing the interface between civil structures, electrification, track, and signalling."})]}),e.jsx("h3",{children:"The Interface Management Process"}),e.jsx("p",{children:"Effective interface management follows a structured four-stage process: identification, documentation, verification, and close-out. Each stage has specific activities and deliverables, and skipping or rushing any stage dramatically increases the risk of interface failure."}),e.jsxs("p",{children:[e.jsx("strong",{children:"Interface Identification"})," begins at the earliest design stage and continues throughout the project. It involves systematically mapping every point where one discipline's design output affects another discipline's design input. The tool for this is an",e.jsx("strong",{children:" Interface Matrix"}),"  a grid with all disciplines (and all contracts, if responsibilities are split) on both axes. Each cell in the matrix represents a potential interface. For a railway project with six engineering disciplines and three construction contracts, the matrix may contain hundreds of interfaces. Each interface is assigned a unique identifier, an owner (the party responsible for managing the interface), and a criticality rating."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Interface Documentation"})," is the production of the ICD for each identified interface. The ICD specifies the interface boundary (often a physical location or a data exchange point), the requirements at that boundary (dimensions, loads, clearances, electrical characteristics, data formats), the responsibilities of each party, the tolerances and acceptance criteria, and the verification method. ICDs should be drafted during outline design and finalised during detailed design. Critically, both parties to an interface must formally agree the ICD  a unilateral ICD is worthless because the other party has not committed to delivering their side."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Interface Verification"})," confirms that both parties have actually delivered what the ICD requires. This occurs during detailed design (through design reviews and clash detection), during construction (through inspection and measurement), and during testing and commissioning (through integrated testing). Verification must be planned  each ICD should specify how compliance will be demonstrated and who will perform the verification."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Interface Close-out"})," is the formal confirmation that an interface has been fully resolved  both parties have delivered their commitments, verification has been completed, and no residual risks remain. The interface register is updated to show the closed-out status. On a well-managed project, all interfaces should be closed out before scheme hand-back; on a poorly managed project, unresolved interfaces persist into operations, creating ongoing maintenance and safety challenges."]}),e.jsx("h3",{children:"Common Interface Failure Modes"}),e.jsx("p",{children:"Understanding the common patterns of interface failure helps engineers anticipate and prevent them. The following failure modes recur across railway projects worldwide."}),e.jsx("div",{className:"table-wrapper",children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Failure Mode"}),e.jsx("th",{children:"Description"}),e.jsx("th",{children:"Example"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Assumption mismatch"})}),e.jsx("td",{children:"Two disciplines each assume the other is responsible for a requirement, or each designs to different assumed parameters"}),e.jsx("td",{children:"Track designer assumes 20-tonne axle load; structures designer assesses bridge for 25.5-tonne axle load (RA10), wasting capacity. Or worse, the reverse  structures assessed for lower load than track permits."})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Geometric clash"})}),e.jsx("td",{children:"Physical elements from different disciplines occupy the same space"}),e.jsx("td",{children:"OLE mast foundation clashes with signalling cable route. Discovered during construction when the cable trench is excavated and hits the mast foundation concrete."})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Timing mismatch"})}),e.jsx("td",{children:"One discipline's construction must precede another's but the programme does not reflect this dependency"}),e.jsx("td",{children:"Signalling cables must be installed before track ballast is laid (cables run in troughs beneath the ballast), but the track contractor is scheduled to work first."})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Electrical incompatibility"})}),e.jsx("td",{children:"Electrical parameters (voltage, frequency, impedance, current capacity) at an interface are incompatible"}),e.jsx("td",{children:"New track circuit equipment designed for a different rail impedance than the rail type actually installed, causing false occupancy indications."})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Data format mismatch"})}),e.jsx("td",{children:"Digital systems at an interface use incompatible data formats, protocols, or message structures"}),e.jsx("td",{children:"ETCS onboard unit expects balise telegrams in a format different from the trackside balise encoder output, discovered during integration testing."})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Maintenance access conflict"})}),e.jsx("td",{children:"Equipment from one discipline is installed in a location that prevents maintenance access to another discipline's equipment"}),e.jsx("td",{children:"An OLE structure is positioned so that it prevents access to a signal for lamp changing, requiring a full possession and overhead line isolation for a routine maintenance task."})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Contractual gap"})}),e.jsx("td",{children:"The interface falls between two contracts and neither contractor's scope includes resolving it"}),e.jsx("td",{children:"The bond between the running rail and the earthing conductor is not in the track contract (electrical work) or the electrification contract (not a running rail), so it is never installed."})]})]})]})}),e.jsx("h3",{children:"The Systems Integration Contractor"}),e.jsxs("p",{children:["On large, complex railway projects, the role of ",e.jsx("strong",{children:"Systems Integration (SI) contractor"})," has emerged as a critical function. The SI contractor is responsible for ensuring that the individual discipline designs and construction outputs combine into a working whole. This role is distinct from the individual discipline designers (who are expert in their own domain) and from the project manager (who manages cost, time, and commercial relationships). The SI contractor is an engineering role  it requires deep understanding of multiple disciplines and, most importantly, of the interfaces between them."]}),e.jsx("p",{children:"The SI contractor's responsibilities typically include: maintaining the overall system requirements baseline, managing the interface register and chairing interface resolution meetings, conducting system-level design reviews (not reviewing each discipline's design in detail but verifying that the discipline designs are compatible at their interfaces), developing the integrated test strategy (defining how subsystems will be tested together), and managing the integrated commissioning programme. On Crossrail, the SI contractor role was critical in managing the interface between the conventional railway signalling on the surface sections and the CBTC (Communications-Based Train Control) signalling in the tunnel sections  an interface that required trains to seamlessly transition between two completely different signalling philosophies at speed."}),e.jsx("h3",{children:"Design Coordination and BIM for Railways"}),e.jsxs("p",{children:["Traditional design coordination relied on overlay of 2D drawings  placing the track plan, the signalling plan, the OLE plan, and the cable routes drawing on a light table to check for clashes. This process was manual, error-prone, and could only detect geometric conflicts (not electrical, functional, or timing interfaces). Modern railway projects increasingly use ",e.jsx("strong",{children:"Building Information Modelling (BIM)"})," to manage design coordination digitally."]}),e.jsxs("p",{children:["BIM for railways involves creating a coordinated 3D model of all disciplines' designs in a shared digital environment. Each discipline produces its design in a 3D format  track alignment and cross-sections, structure geometry, OLE mast positions and wire profiles, signalling equipment locations, cable route corridors  and these are combined in a federated model. Automated ",e.jsx("strong",{children:"clash detection"})," identifies geometric conflicts (a cable duct passing through a foundation, a signal head within the OLE clearance zone) far earlier and more reliably than manual overlay. The model also enables ",e.jsx("strong",{children:"4D simulation"})," (adding time to the model to visualise the construction sequence) and ",e.jsx("strong",{children:"5D estimation"})," (linking model quantities to cost data)."]}),e.jsxs("p",{children:["However, BIM for railways is less mature than BIM for buildings. Railway infrastructure is linear (extending for kilometres rather than fitting in a building footprint), operates within tight clearance envelopes, involves dynamic systems (moving trains, pantograph contact, thermal rail expansion), and must integrate with legacy infrastructure that predates digital records. The UK rail industry has adopted the ",e.jsx("strong",{children:"BS EN ISO 19650"})," framework for information management using BIM, and Network Rail's",e.jsx("strong",{children:"Digital Railway"})," programme is driving adoption, but full multi-discipline federated BIM remains an aspiration on many projects."]}),e.jsx("h3",{children:"CAD and Digital Engineering Tools"}),e.jsx("p",{children:"Each railway discipline uses specialist CAD and engineering software, and the interoperability (or lack thereof) between these tools is itself an interface management challenge."}),e.jsx("div",{className:"table-wrapper",children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Discipline"}),e.jsx("th",{children:"Common Tools"}),e.jsx("th",{children:"Key Outputs"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Track alignment"})}),e.jsx("td",{children:"Bentley OpenRail Designer, MX Rail, 12d Model"}),e.jsx("td",{children:"Horizontal and vertical alignment, cant diagram, setting-out data, cross-sections"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Civil / earthworks"})}),e.jsx("td",{children:"Bentley OpenRail Designer, Civil 3D, 12d Model"}),e.jsx("td",{children:"Earthworks volumes, drainage design, formation levels, cut/fill balance"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Structures"})}),e.jsx("td",{children:"Autodesk Revit, Tekla Structures, LUSAS, MIDAS"}),e.jsx("td",{children:"3D structural models, general arrangement drawings, reinforcement details, structural analysis"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Signalling"})}),e.jsx("td",{children:"Specialist tools (often proprietary to signalling supplier), AutoCAD for schematics"}),e.jsx("td",{children:"Signalling layout plans, interlocking data, circuit diagrams, cable schedules"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Electrification / OLE"})}),e.jsx("td",{children:"Bentley OpenRail Overhead Line, Candy (wire run design), PLS-CADD"}),e.jsx("td",{children:"OLE layout, mast positions, wire tensions, registration arm geometry, clearance analysis"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Telecoms / power"})}),e.jsx("td",{children:"AutoCAD, Bentley Substation, ETAP (power systems analysis)"}),e.jsx("td",{children:"Cable route plans, equipment room layouts, power distribution diagrams"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Federation / coordination"})}),e.jsx("td",{children:"Bentley ProjectWise, Autodesk BIM 360, Navisworks (clash detection)"}),e.jsx("td",{children:"Federated model, clash reports, 4D programme simulation"})]})]})]})}),e.jsx("p",{children:"A persistent challenge is that signalling design tools are often proprietary to the signalling supplier and do not export data in standard formats (IFC, DWG, LandXML) compatible with the federation tools. This means that signalling equipment is often represented in the federated model as simplified placeholder geometry rather than detailed 3D objects, limiting the effectiveness of automated clash detection for signalling interfaces. This is an area of active development in the industry."}),e.jsx("h3",{children:"Configuration Management and Change Control"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Configuration management"})," is the discipline of tracking and controlling the design baseline  the set of approved design documents that defines what is being built. On a railway project with hundreds of drawings, specifications, and interface documents produced by multiple designers, maintaining control over which version of each document is current and approved is essential. Without configuration management, construction teams may build to superseded drawings, interfaces may reference different design revisions, and the as-built record may not reflect what was actually constructed."]}),e.jsxs("p",{children:["The configuration management system maintains a ",e.jsx("strong",{children:"design baseline register"}),"listing every document, its current revision, its approval status, and its relationships to other documents (which interfaces it defines, which requirements it satisfies). When a change is proposed  whether initiated by a design team (to resolve a technical issue), by the client (to change a requirement), or by a contractor (to propose an alternative construction method)  it must pass through a formal ",e.jsx("strong",{children:"change control process"}),"."]}),e.jsx("p",{children:"The change control process typically involves: (1) documenting the proposed change and its justification, (2) assessing the impact on all affected disciplines and interfaces (the interface impact assessment is critical  a change that appears minor within one discipline may have major consequences for another), (3) assessing the cost and programme implications, (4) obtaining approval from the change authority (typically the project manager or a design review board), (5) implementing the change across all affected documents, and (6) notifying all affected parties and updating the design baseline register. On complex projects, change control can consume significant engineering resource  but the alternative (uncontrolled changes propagating through the design) is far more costly."}),e.jsx("h3",{children:"Track, Signalling, and Electrification Interfaces"}),e.jsxs("p",{children:["The interface between ",e.jsx("strong",{children:"track and signalling"})," is one of the most fundamental on the railway. In conventional signalling, the rails themselves are part of the signalling system: track circuits use the running rails as electrical conductors to detect the presence of trains. This means that the track engineer cannot treat the rails purely as a structural element  they must also satisfy electrical requirements. Insulated rail joints (IRJs) must be positioned at specific locations to define track circuit boundaries, and these positions must be coordinated with the signalling engineer's track circuit plan. If a track engineer moves a rail joint for structural reasons without consulting the signalling engineer, a track circuit boundary may be in the wrong place, potentially creating a dangerous gap in train detection."]}),e.jsxs("p",{children:["The interface between ",e.jsx("strong",{children:"electrification and signalling"})," is equally critical. On electrified railways, the traction return current flows through the running rails  the same rails that carry track circuit signalling currents. Traction return current is many orders of magnitude larger than signalling current, and if it is not properly managed, it can overwhelm track circuits, causing false clear signals (extremely dangerous) or nuisance failures (operationally disruptive). Impedance bonds, return conductor rails, and careful bonding schemes are used to separate traction return current from signalling current, but the design requires intimate coordination between electrification and signalling engineers."]}),e.jsxs("p",{children:["The interface between ",e.jsx("strong",{children:"electrification and structures"})," governs whether the overhead line equipment (OLE) can physically fit under bridges and through tunnels. The contact wire must maintain a minimum height above rail level (typically 4,700 mm in the UK) and a minimum electrical clearance from earthed structures (typically 270 mm at 25 kV). When an existing bridge has insufficient clearance, the options are limited and expensive: lower the track (major civil engineering), raise or rebuild the bridge (major structural engineering), or use a reduced-height pantograph with special OLE design. Every structure on the route must be individually assessed  and there may be hundreds."]}),e.jsx("h3",{children:"Electromagnetic Compatibility (EMC)"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Electromagnetic compatibility"})," is a critical cross-discipline interface that is often underestimated until problems emerge during testing and commissioning. A railway is an electrically noisy environment: traction motors draw high currents with rapid switching transients, pantograph arcing generates broadband electromagnetic interference, track circuits and axle counters use low-level signals that are susceptible to interference, and digital signalling systems (ETCS, GSM-R/FRMCS) rely on radio communications that must operate reliably in this hostile electromagnetic environment."]}),e.jsxs("p",{children:["EMC management requires each electrical and electronic system to be designed both to limit its own electromagnetic emissions and to tolerate the emissions from all other systems. This is defined through ",e.jsx("strong",{children:"EMC zones"}),"  regions of the railway with defined electromagnetic characteristics  and ",e.jsx("strong",{children:"emission and immunity limits"})," for equipment installed in each zone. The relevant standards include",e.jsx("strong",{children:" EN 50121"})," (railway EMC standard, covering rolling stock, signalling, fixed installations, and emission to the outside world) and ",e.jsx("strong",{children:"EN 50238"}),"(compatibility between rolling stock and train detection systems)."]}),e.jsx("p",{children:"EMC failures on railways take several forms: interference with track circuits (causing wrong-side or right-side failures), interference with radio communications (GSM-R dropouts affecting ETCS data link availability), interference with level crossing equipment, and interference with lineside equipment from external sources (nearby mobile phone masts, power lines, industrial equipment). The resolution of EMC problems often requires changes to multiple disciplines  for example, resolving interference between a new rolling stock fleet and existing track circuits might require modifications to the train's traction converter filtering, the track circuit operating frequency, and the rail bonding arrangements, involving the rolling stock manufacturer, the signalling contractor, and the electrification contractor."}),e.jsx("h3",{children:"Rolling Stock Interfaces"}),e.jsxs("p",{children:["Rolling stock sits at the centre of a web of interfaces. The ",e.jsx("strong",{children:"wheel-rail interface"})," connects rolling stock to track: wheel profiles must be compatible with rail profiles, axle loads must not exceed the track's design capacity, and vehicle dynamics must be stable at the operating speed. The ",e.jsx("strong",{children:"rolling stock to electrification"})," interface governs pantograph compatibility: the pantograph must be able to follow the contact wire across the full range of speeds and in all wind conditions, the collection strip material must be compatible with the contact wire material, and the static and dynamic uplift forces must stay within defined limits."]}),e.jsxs("p",{children:["The ",e.jsx("strong",{children:"rolling stock to signalling"})," interface is becoming increasingly complex as railways move towards digital signalling. Onboard equipment  ETCS, AWS, TPWS  must communicate correctly with the trackside systems. Braking curves calculated by the onboard computer must reflect the actual braking performance of the vehicle. Balise readers must be positioned at the correct height and offset relative to the track-mounted balises. Antenna patterns must not interfere with other radio systems. Each of these sub-interfaces has its own specification, test regime, and approval process."]}),e.jsxs("p",{children:["The ",e.jsx("strong",{children:"operations to everything"})," interface is perhaps the most overlooked and most consequential. The timetable  the ultimate product of the railway  depends on every other discipline delivering its promised performance. If the track alignment does not support the planned line speed, the journey time increases. If the signalling headway is longer than assumed, the service frequency decreases. If the rolling stock acceleration is slower than specified, the dwell times are wrong. If the electrification power supply cannot support the planned service, trains will lose power on steep gradients. The timetable must be ",e.jsx("strong",{children:"deliverable"}),"  and proving that it is requires an integrated simulation that models track, signalling, rolling stock, and power supply together."]}),e.jsx("h3",{children:"Testing and Commissioning Interfaces"}),e.jsx("p",{children:"The testing and commissioning phase is where interface failures that survived the design process become visible  and where they are most expensive to resolve because the infrastructure is built and changing anything requires physical modification. A structured approach to testing manages this risk."}),e.jsxs("p",{children:[e.jsx("strong",{children:"Individual subsystem testing"})," verifies that each discipline's installation meets its own specifications: track geometry is within tolerance, signalling equipment passes its functional tests, OLE wire heights and staggers are correct, telecoms links achieve their required throughput. These are primarily single-discipline activities, though they require coordination (you cannot test OLE with trains until the track is available and the signalling permits train movements)."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Integrated testing"})," verifies the interfaces between subsystems. This is where the system first operates as a whole: a test train runs under the OLE, controlled by the signalling system, over the new track, communicating via the telecoms network. Integrated testing reveals issues that no amount of single-discipline testing can detect: pantograph bounce at a particular OLE registration, signalling interference from traction current, GSM-R blackspots caused by structural interference, and ride quality issues at specific track features. Integrated testing requires all disciplines to be present and available to diagnose and resolve issues collaboratively."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Shadow running"})," (also called trial running or trial operations) is the final phase before revenue service. Trains run to the planned timetable, with operational staff in their normal roles, but without fare-paying passengers. This tests not just the engineering systems but the operational interfaces: do the drivers know the route, do the signallers know the new layout, do the control room staff know the new equipment, do the maintenance teams have access and procedures for every asset? Shadow running typically lasts two to four weeks, during which all systems must demonstrate sustained reliable performance. Any significant failures during shadow running delay the opening date."]}),e.jsx("h3",{children:"Handover from Project to Operations and Maintenance"}),e.jsx("p",{children:"The transition from a project organisation (focused on building something new) to an operational organisation (focused on running and maintaining it) is itself a critical interface that is frequently mismanaged. The project team has deep knowledge of what was built and why; the operations and maintenance teams need to understand how to operate it safely and maintain it efficiently. This knowledge transfer must be planned and resourced, not assumed."}),e.jsxs("p",{children:["The ",e.jsx("strong",{children:"handover package"})," typically includes: as-built drawings and records (reflecting what was actually constructed, not just what was designed), operation and maintenance manuals for all installed equipment, spare parts lists and initial spare holdings, training records for all operations and maintenance staff, the safety case (including all hazard log entries and mitigation measures), test certificates and commissioning records, warranty information, and the asset register data needed to integrate the new assets into the infrastructure manager's asset management system."]}),e.jsxs("p",{children:["On many projects, the maintenance team is involved from the detailed design stage onwards through a ",e.jsx("strong",{children:"maintenance review"})," process. This ensures that equipment is accessible for maintenance without requiring possessions or isolations that are disproportionate to the task, that standard maintenance tools and procedures can be used, that spare parts are compatible with existing inventory, and that the asset life and degradation characteristics are understood for maintenance planning. Involving the maintainer early is a form of interface management  it ensures the design-to-maintenance interface is resolved before construction rather than discovered during the first maintenance intervention."]}),e.jsxs(N,{type:"analogy",children:["Interfaces are where most bugs live  just like ",e.jsx("strong",{children:"API contracts between microservices"}),". Each railway discipline is a well-tested service in isolation, but the system fails at the integration points. An Interface Control Document is an API specification: it defines the request format, response format, error handling, and service level agreement between two disciplines. Configuration management is your version control system  without it, teams are working on different branches that will never merge cleanly. Change control is your pull request review process: every change must be assessed for its impact on all dependent services before it is merged. BIM clash detection is your automated integration test suite  it catches the obvious conflicts early, but it cannot catch semantic errors (a cable duct that is geometrically clear of a foundation but thermally incompatible with it). The systems integration contractor is your platform engineering team  responsible not for any one service but for ensuring they all work together. And handover to operations is your deployment runbook and on-call handoff combined: the project team must transfer not just the system but the knowledge needed to keep it running."]}),e.jsx(N,{type:"info",label:"Interface Control Documents",children:"A well-written ICD contains: (1) a clear definition of the interface boundary, (2) the physical and functional requirements at that boundary, (3) the responsibilities of each party, (4) the tolerances and acceptance criteria, (5) the process for managing changes to the interface, and (6) the verification and validation methods. ICDs are living documents that must be updated as the design evolves. On large projects, a dedicated interface manager maintains a register of all ICDs and tracks their status through design reviews."}),e.jsx(N,{type:"info",label:"EMC Standards for Railways",children:"The EN 50121 series governs electromagnetic compatibility for the whole railway environment. Part 1 covers general concepts; Part 2 covers emission of the whole railway to the outside world; Part 3 covers rolling stock; Part 4 covers signalling and telecommunications apparatus; and Part 5 covers fixed power supply installations. EN 50238 specifically addresses the compatibility interface between rolling stock and infrastructure, particularly train detection systems. EMC compliance must be verified by measurement on the completed system  analysis and simulation alone are not sufficient because the electromagnetic environment of a real railway is too complex to model accurately."}),e.jsx(ce,{goTo:h,items:[{target:"m0",label:"Foundations",desc:"The steel-on-steel contact and low adhesion principles that underpin the wheel-rail interface."},{target:"m1",label:"Track",desc:"Rails carry both trains and signalling currents  track design must satisfy both roles."},{target:"m2",label:"Civil Engineering",desc:"Earthworks and drainage interface with track formation and structure foundations."},{target:"m3",label:"Structures",desc:"Clearance under bridges and through tunnels is the critical electrification-structures interface."},{target:"m4",label:"Signalling",desc:"Track circuits, interlockings, and onboard equipment create interfaces with track, electrification, and rolling stock."},{target:"m5",label:"Electrification",desc:"Traction return current, OLE clearances, and pantograph compatibility are key interface areas."},{target:"m6",label:"Rolling Stock",desc:"Vehicles sit at the centre of the interface web  connecting to track, signalling, electrification, and operations."},{target:"m7",label:"Telecoms",desc:"GSM-R and ETCS data links must interface cleanly with signalling and onboard systems."},{target:"m8",label:"Operations",desc:"The timetable is the ultimate integration test  it depends on every other discipline delivering."}]})]})}const Kp=[{text:"Why is the track-signalling interface a common source of problems?",options:["Because track and signalling engineers use different computer systems","Because track geometry changes (realignment, re-railing, S&C replacement) can affect signal sighting, track circuit boundaries, and axle counter positions, and these dependencies are often poorly documented or communicated between disciplines","Because track and signalling are always designed by the same team, causing groupthink","Because signalling does not interact with track at all"],correct:1,explanation:"Track and signalling are deeply coupled: signal positions depend on braking distances and sighting from specific track geometry, track circuits depend on rail joints and insulated blocks, and points machines must align with specific switch layouts. When one discipline changes something, the other may be affected in ways that are not immediately obvious  classic interface bugs arising from tightly coupled but separately managed subsystems."},{text:"What clearance issue arises at the electrification-structures interface?",options:["Structures block the electricity supply from substations","Overhead line equipment requires minimum electrical clearances to earthed structures (bridges, tunnels, canopies), and existing structures may have insufficient headroom, requiring expensive raising, rebuilding, or track lowering","Electrification wires must never pass through any structure","Structures generate electromagnetic interference that disrupts traction power"],correct:1,explanation:"A 25 kV overhead wire needs defined electrical clearances to any earthed metalwork. Many Victorian-era bridges and tunnels were built with minimal headroom. Electrification projects frequently discover that structures need raising, tracks need lowering, or wire geometry needs complex arrangements to achieve clearance  often the most expensive and disruptive part of the project."},{text:"What is an Interface Control Document (ICD)?",options:["A regulatory licence required to operate a railway interface","A formal document that defines the physical, electrical, data, and procedural interfaces between two subsystems or disciplines, including responsibilities and acceptance criteria","A user manual for the signalling control panel","A document that records all faults found during testing"],correct:1,explanation:"An ICD is the contractual and technical definition of how two systems connect. It specifies physical dimensions, electrical characteristics, data formats and protocols, timing requirements, environmental conditions, and which party is responsible for what. Without clear ICDs, each discipline makes assumptions about the other that may be wrong  the engineering equivalent of an API contract between microservices."},{text:"What is the most effective way to catch cross-discipline integration issues early?",options:["Assign all disciplines to a single engineer to avoid communication problems","Conduct structured interface reviews and integrated design reviews involving all affected disciplines from early design stages, supported by interface registers and formal ICDs","Wait until testing and commissioning to discover interface issues, since they cannot be predicted","Use the same software tools across all engineering disciplines"],correct:1,explanation:"Cross-discipline integration reviews at early design stages are far more cost-effective than discovering interface problems during construction or commissioning. An interface register tracks all identified interfaces and their status. Regular multi-discipline design reviews ensure each team understands how their changes affect others  the engineering equivalent of architecture reviews and cross-team design documents in software development."}];function Pp({goTo:h}){return e.jsxs(e.Fragment,{children:[e.jsxs("figure",{className:"lesson-figure",children:[e.jsx("div",{className:"cad-symbol",children:e.jsxs("svg",{viewBox:"0 0 400 150",style:{width:"100%",maxWidth:"400px"},children:[e.jsx("text",{x:"200",y:"14",fill:"var(--text-dim)",fontSize:"10",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"V-Model  Systems Engineering Lifecycle"}),e.jsx("rect",{x:"10",y:"30",width:"80",height:"18",fill:"var(--bg-hover)",stroke:"var(--accent)",strokeWidth:"1",rx:"2"}),e.jsx("text",{x:"50",y:"42",fill:"var(--accent)",fontSize:"7",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"Requirements"}),e.jsx("rect",{x:"50",y:"55",width:"80",height:"18",fill:"var(--bg-hover)",stroke:"var(--accent)",strokeWidth:"1",rx:"2"}),e.jsx("text",{x:"90",y:"67",fill:"var(--accent)",fontSize:"7",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"System Design"}),e.jsx("rect",{x:"90",y:"80",width:"80",height:"18",fill:"var(--bg-hover)",stroke:"var(--accent)",strokeWidth:"1",rx:"2"}),e.jsx("text",{x:"130",y:"92",fill:"var(--accent)",fontSize:"7",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"Detail Design"}),e.jsx("rect",{x:"150",y:"105",width:"100",height:"22",fill:"var(--bg-hover)",stroke:"var(--accent-secondary)",strokeWidth:"1.5",rx:"3"}),e.jsx("text",{x:"200",y:"119",fill:"var(--accent-secondary)",fontSize:"8",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"Build / Code"}),e.jsx("rect",{x:"270",y:"80",width:"80",height:"18",fill:"var(--bg-hover)",stroke:"var(--blue)",strokeWidth:"1",rx:"2"}),e.jsx("text",{x:"310",y:"92",fill:"var(--blue)",fontSize:"7",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"Unit Test"}),e.jsx("rect",{x:"270",y:"55",width:"80",height:"18",fill:"var(--bg-hover)",stroke:"var(--blue)",strokeWidth:"1",rx:"2"}),e.jsx("text",{x:"310",y:"67",fill:"var(--blue)",fontSize:"7",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"Integration"}),e.jsx("rect",{x:"310",y:"30",width:"80",height:"18",fill:"var(--bg-hover)",stroke:"var(--blue)",strokeWidth:"1",rx:"2"}),e.jsx("text",{x:"350",y:"42",fill:"var(--blue)",fontSize:"7",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"Validation"}),e.jsx("line",{x1:"50",y1:"48",x2:"90",y2:"55",stroke:"var(--text-dim)",strokeWidth:"0.8"}),e.jsx("line",{x1:"130",y1:"73",x2:"150",y2:"80",stroke:"var(--text-dim)",strokeWidth:"0.8"}),e.jsx("line",{x1:"170",y1:"98",x2:"200",y2:"105",stroke:"var(--text-dim)",strokeWidth:"0.8"}),e.jsx("line",{x1:"200",y1:"105",x2:"250",y2:"98",stroke:"var(--text-dim)",strokeWidth:"0.8"}),e.jsx("line",{x1:"270",y1:"80",x2:"250",y2:"73",stroke:"var(--text-dim)",strokeWidth:"0.8"}),e.jsx("line",{x1:"310",y1:"55",x2:"350",y2:"48",stroke:"var(--text-dim)",strokeWidth:"0.8"}),e.jsx("line",{x1:"90",y1:"39",x2:"310",y2:"39",stroke:"var(--red)",strokeWidth:"0.8",strokeDasharray:"4,3"}),e.jsx("line",{x1:"130",y1:"64",x2:"270",y2:"64",stroke:"var(--red)",strokeWidth:"0.8",strokeDasharray:"4,3"}),e.jsx("line",{x1:"170",y1:"89",x2:"270",y2:"89",stroke:"var(--red)",strokeWidth:"0.8",strokeDasharray:"4,3"}),e.jsx("text",{x:"200",y:"36",fill:"var(--red)",fontSize:"6",fontFamily:"JetBrains Mono, monospace",textAnchor:"middle",children:"traceability"})]})}),e.jsx("figcaption",{children:"CAD diagram: V-Model lifecycle  requirements decompose (left), implementation at bottom, verification traces back (right). Horizontal dashed lines show traceability."})]}),e.jsx("h3",{children:"Systems Engineering for Railways"}),e.jsxs("p",{children:["Railways are ",e.jsx("strong",{children:"systems of systems"}),". No single discipline can deliver a working railway in isolation  the value emerges only when track, signalling, electrification, rolling stock, telecommunications, and operations work together as an integrated whole. ",e.jsx("strong",{children:"Systems engineering"})," is the discipline that manages this integration. It ensures that the railway, as a complete system, meets the needs of its stakeholders  passengers, freight customers, operators, maintainers, and the public  not just the technical specifications of its individual subsystems."]}),e.jsxs("p",{children:["The foundation of systems engineering is ",e.jsx("strong",{children:"requirements tracing"}),'. It begins with operational needs: "The railway must carry 20,000 passengers per hour in each direction at a peak-hour frequency of 24 trains per hour." This high-level requirement is decomposed into system-level requirements: signalling must deliver a headway of 150 seconds, track must support a line speed of 160 km/h, rolling stock must provide 1,000 seats per train with a dwell time of 30 seconds. These system-level requirements are further decomposed into subsystem specifications: the interlocking must process route requests within 3 seconds, the track geometry must support 150 mm of cant at the tightest curve, the traction motors must deliver 300 kW per axle. Every requirement at every level must be traceable back to an operational need and forward to a verification method.']}),e.jsxs("figure",{className:"lesson-figure",children:[e.jsx("div",{className:"image-placeholder",children:e.jsx("p",{children:"IMAGE NEEDED: Diagram of the V-model showing the left side (decomposition: concept  system requirements  subsystem specs  component specs) and the right side (integration: component test  subsystem integration  system validation  acceptance). Or a photo of a systems engineering review/testing session."})}),e.jsx("figcaption",{children:"The V-model  the standard framework for railway systems engineering, ensuring every requirement is verified at its corresponding level."})]}),e.jsx("h3",{children:"The V-Model in Practice"}),e.jsxs("p",{children:["The ",e.jsx("strong",{children:"V-model"})," is the standard development framework for railway systems engineering. The left side of the V represents decomposition: from operational concept through system requirements, subsystem requirements, and component specifications. The bottom of the V is implementation: detailed design and manufacturing. The right side represents integration and verification: component testing, subsystem integration testing, system validation, and operational acceptance. Each level on the right side verifies the requirements defined at the corresponding level on the left side. The V-model ensures that nothing is built without a requirement and nothing is required without being verified."]}),e.jsxs("p",{children:["In practice, applying the V-model to a railway project means establishing clear",e.jsx("strong",{children:" verification and validation (V&V)"}),` plans at each level. At the system level, validation asks: "Are we building the right system? Does it meet the stakeholders' needs?" This is confirmed through operational acceptance testing  running the timetable, measuring journey times, surveying passenger satisfaction. At the subsystem level, verification asks: "Are we building the system right? Does each subsystem meet its specification?" This is confirmed through discipline-specific testing  signalling functional testing, track geometry measurement, OLE contact force testing.`]}),e.jsx("div",{className:"table-wrapper",children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"V-Model Level (Left)"}),e.jsx("th",{children:"Activity"}),e.jsx("th",{children:"V-Model Level (Right)"}),e.jsx("th",{children:"Verification Method"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Operational Concept"})}),e.jsx("td",{children:"Define service requirement, timetable concept, capacity targets"}),e.jsx("td",{children:e.jsx("strong",{children:"Operational Acceptance"})}),e.jsx("td",{children:"Shadow running, trial operations, performance monitoring against service targets"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"System Requirements"})}),e.jsx("td",{children:"Define headway, line speed, availability targets, safety targets (THR)"}),e.jsx("td",{children:e.jsx("strong",{children:"System Validation"})}),e.jsx("td",{children:"Integrated testing with all subsystems, end-to-end functional testing, RAMS demonstration"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Subsystem Requirements"})}),e.jsx("td",{children:"Signalling principles, OLE design parameters, track standards, telecoms coverage"}),e.jsx("td",{children:e.jsx("strong",{children:"Subsystem Verification"})}),e.jsx("td",{children:"Discipline-specific testing: signalling route proving, OLE clearance and tension tests, track geometry measurement"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Component Specifications"})}),e.jsx("td",{children:"Relay specifications, mast foundation designs, rail material standards, cable specifications"}),e.jsx("td",{children:e.jsx("strong",{children:"Component Testing"})}),e.jsx("td",{children:"Type testing, factory acceptance testing (FAT), material certificates, installation checks"})]}),e.jsx("tr",{children:e.jsxs("td",{colSpan:4,style:{textAlign:"center"},children:[e.jsx("strong",{children:"Implementation (Bottom of V):"})," Detailed design, manufacture, construction, installation"]})})]})]})}),e.jsx("p",{children:'A critical principle of the V-model is that the verification plan on the right side must be written at the same time as the requirements on the left side  not after implementation. This is because the act of writing the verification plan exposes ambiguous, untestable, or contradictory requirements. If a requirement cannot be verified, it is not a valid requirement. For example, a requirement that "the signalling system shall be reliable" is not verifiable; a requirement that "the signalling system shall achieve an MTBF of not less than 50,000 hours, demonstrated through a 12-month reliability growth programme" is verifiable. Writing verification plans early also ensures that the testing infrastructure (test rigs, test trains, instrumentation, access to the railway during testing windows) is planned and resourced in the project programme.'}),e.jsx("h3",{children:"The EN 50126 Lifecycle in Detail"}),e.jsxs("p",{children:[e.jsx("strong",{children:"EN 50126"})," (Railway Applications  The Specification and Demonstration of Reliability, Availability, Maintainability and Safety) defines a complete lifecycle for RAMS management, consisting of 14 phases. This lifecycle is broader than just the design and construction phases  it extends from initial concept through to decommissioning."]}),e.jsx("div",{className:"table-wrapper",children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Phase"}),e.jsx("th",{children:"Title"}),e.jsx("th",{children:"Key RAMS Activities"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{children:"1"}),e.jsx("td",{children:e.jsx("strong",{children:"Concept"})}),e.jsx("td",{children:"Define system mission, preliminary RAMS targets, initial hazard identification"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"2"}),e.jsx("td",{children:e.jsx("strong",{children:"System Definition and Application Conditions"})}),e.jsx("td",{children:"Define system boundary, operating environment, external interfaces, relevant standards"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"3"}),e.jsx("td",{children:e.jsx("strong",{children:"Risk Analysis"})}),e.jsx("td",{children:"Systematic hazard identification, risk evaluation, definition of tolerable risk criteria, Preliminary Hazard Analysis (PHA)"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"4"}),e.jsx("td",{children:e.jsx("strong",{children:"System Requirements"})}),e.jsx("td",{children:"Allocate RAMS requirements to subsystems, define Safety Integrity Levels (SILs), establish RAM targets per subsystem"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"5"}),e.jsx("td",{children:e.jsx("strong",{children:"Apportionment of System Requirements"})}),e.jsx("td",{children:"Distribute RAMS targets across subsystems using reliability block diagrams, fault trees, and allocation techniques"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"6"}),e.jsx("td",{children:e.jsx("strong",{children:"Design and Implementation"})}),e.jsx("td",{children:"Design to meet RAMS requirements, apply safety techniques appropriate to SIL, design FMEA, software development per EN 50128"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"7"}),e.jsx("td",{children:e.jsx("strong",{children:"Manufacturing"})}),e.jsx("td",{children:"Quality assurance during manufacture, production testing, burn-in testing for early-life failures"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"8"}),e.jsx("td",{children:e.jsx("strong",{children:"Installation"})}),e.jsx("td",{children:"Installation verification, site acceptance testing, environmental testing (EMC, temperature, vibration)"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"9"}),e.jsx("td",{children:e.jsx("strong",{children:"System Validation"})}),e.jsx("td",{children:"Integrated system testing, RAMS demonstration testing, safety validation against requirements"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"10"}),e.jsx("td",{children:e.jsx("strong",{children:"System Acceptance"})}),e.jsx("td",{children:"Formal acceptance by railway authority, safety case approval, operational readiness confirmation"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"11"}),e.jsx("td",{children:e.jsx("strong",{children:"Operation and Maintenance"})}),e.jsx("td",{children:"Performance monitoring, failure data collection, reliability growth tracking, maintenance optimisation"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"12"}),e.jsx("td",{children:e.jsx("strong",{children:"Performance Monitoring"})}),e.jsx("td",{children:"Ongoing RAMS data analysis, trend monitoring, comparison against targets, degradation tracking"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"13"}),e.jsx("td",{children:e.jsx("strong",{children:"Modification and Retrofit"})}),e.jsx("td",{children:"Change impact assessment, regression testing, safety case update, revalidation"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"14"}),e.jsx("td",{children:e.jsx("strong",{children:"Decommissioning and Disposal"})}),e.jsx("td",{children:"Safe removal, environmental obligations, asset register update, knowledge preservation"})]})]})]})}),e.jsx("p",{children:"The lifecycle is not purely sequential  later phases may reveal issues that require revisiting earlier phases. For example, reliability data collected during Phase 11 (Operation and Maintenance) may show that a component's actual MTBF is significantly below the target, triggering a Phase 13 modification. Similarly, a Phase 9 validation failure may require a return to Phase 6 to redesign a subsystem. The lifecycle includes feedback loops to manage this iteration systematically."}),e.jsx("h3",{children:"RAMS and Safety Cases"}),e.jsxs("p",{children:[e.jsx("strong",{children:"RAMS"}),"  Reliability, Availability, Maintainability, and Safety  is the framework for managing the non-functional performance of railway systems. Each element addresses a different aspect of dependability:"]}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Reliability:"})," The probability that the system will perform its intended function without failure for a specified period. Measured in Mean Time Between Failures (MTBF). A signalling interlocking with an MTBF of 100,000 hours will, on average, experience one failure every 11 years."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Availability:"})," The proportion of time the system is operational and ready for use. Depends on both reliability (how often it fails) and maintainability (how quickly it can be repaired). A system with 99.9% availability is out of service for approximately 8.7 hours per year. Availability is calculated as MTBF / (MTBF + MTTR)."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Maintainability:"})," The ease and speed with which the system can be restored to working condition after a failure. Measured in Mean Time To Repair (MTTR). Designing for maintainability means providing access for maintenance staff, using modular replaceable units, and ensuring diagnostic information is available. A low MTTR is particularly important on railways because every minute of repair time represents service disruption."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Safety:"})," Freedom from unacceptable risk of harm to people. Railway safety is governed by the European standards ",e.jsx("strong",{children:"EN 50126"})," (RAMS lifecycle),",e.jsx("strong",{children:" EN 50128"})," (software for railway control and protection systems), and",e.jsx("strong",{children:" EN 50129"})," (safety-related electronic systems for signalling). These standards define Safety Integrity Levels (SILs) from SIL 0 (no safety requirement) to SIL 4 (the highest integrity, required for signalling interlockings and train protection systems)."]})]}),e.jsxs("div",{className:"highlight-box",children:[e.jsx("strong",{children:"Safety Integrity Levels (SILs):"})," SIL 0  no safety requirement. SIL 1  safety-related (e.g., passenger information systems where failure could cause confusion but not harm). SIL 2  safety-relevant (e.g., level crossing obstacle detection). SIL 3  high safety integrity (e.g., axle counters for train detection). SIL 4  the highest integrity (e.g., interlockings, ATP systems). The SIL determines the rigour of design, verification, and validation activities required  the higher the SIL, the more independent assessment, formal methods, and diverse redundancy are required."]}),e.jsx("h3",{children:"Hazard Analysis Techniques"}),e.jsx("p",{children:"Hazard analysis is the systematic process of identifying hazards (conditions or events that could lead to harm), analysing their causes and consequences, and determining the risk they pose. Railway safety standards require the use of multiple complementary techniques because no single technique can identify all hazards. The following are the principal techniques used in railway safety engineering."}),e.jsxs("p",{children:[e.jsx("strong",{children:"Preliminary Hazard Analysis (PHA)"})," is performed early in the project lifecycle (EN 50126 Phase 3) using brainstorming, checklists, and expert judgement to identify hazards at the system level. The PHA produces an initial ",e.jsx("strong",{children:"Hazard Log"}),"  a living register of all identified hazards, their assessed risk, the required mitigations, and the current status of each mitigation. The Hazard Log is the central safety management tool throughout the project and operational life."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Hazard and Operability Study (HAZOP)"}),' is a structured workshop-based technique that systematically examines deviations from the intended design or operating conditions. For each function or parameter, the team applies guide words (no, more, less, reverse, other than, early, late) to identify potential deviations and their consequences. HAZOP is particularly effective for identifying operational and procedural hazards that PHA may miss  for example, "what if the signaller sets a route late?" or "what if the maintenance team restores equipment in the wrong sequence?"']}),e.jsxs("p",{children:[e.jsx("strong",{children:"Failure Mode and Effects Analysis (FMEA)"})," is a bottom-up technique that systematically examines each component or function, identifies its possible failure modes, and assesses the effects of each failure on the subsystem and system. FMEA is particularly useful during detailed design when the component-level architecture is known. Each failure mode is rated for severity, occurrence probability, and detectability, producing a Risk Priority Number (RPN) that helps prioritise mitigation efforts."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Fault Tree Analysis (FTA)"}),' is a top-down, deductive technique that starts with an undesirable top event (e.g., "collision between trains") and works backwards through logic gates (AND, OR) to identify all possible combinations of basic events that could cause it. FTA is valuable for quantitative risk assessment because the probabilities of basic events can be combined through the logic gates to calculate the probability of the top event. It is also used to demonstrate that the Tolerable Hazard Rate (THR) is met.']}),e.jsxs("p",{children:[e.jsx("strong",{children:"Event Tree Analysis (ETA)"})," is a forward-looking technique that starts with an initiating event and maps the possible outcomes depending on whether each subsequent barrier or mitigation succeeds or fails. Each path through the event tree represents a scenario with a calculable probability and consequence. ETA is useful for understanding the effectiveness of protection layers  for example, starting from a signal passed at danger (SPAD): does the overlap contain the train? If not, does the train protection system intervene? If not, is there a conflicting movement?"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Bow-tie analysis"})," combines FTA (on the left, showing causes of the central hazardous event) with ETA (on the right, showing consequences and barriers). The bow-tie provides a powerful visual representation of the complete risk picture for a hazard, showing both prevention barriers (reducing the likelihood of the event) and mitigation barriers (reducing the consequences). Bow-tie diagrams are increasingly used in railway safety communication because they are accessible to non-specialists while retaining analytical rigour."]}),e.jsx("h3",{children:"CSM-RA: Common Safety Method for Risk Evaluation and Assessment"}),e.jsxs("p",{children:["The ",e.jsx("strong",{children:"Common Safety Method for Risk Evaluation and Assessment (CSM-RA)"}),', established by EU Regulation 402/2013 (and retained in UK law), provides a harmonised process for assessing whether a change to the railway system is acceptable from a safety perspective. CSM-RA applies to any "significant change" to the railway  whether technical, operational, or organisational  and is mandatory for all EU and UK railway undertakings and infrastructure managers.']}),e.jsxs("p",{children:["The CSM-RA process begins with a ",e.jsx("strong",{children:"significance assessment"}),"  determining whether a proposed change is significant enough to require a formal risk evaluation. The criteria for significance include: novelty, complexity, consequences of failure, reversibility, similarity to previous changes, and monitoring capability. If the change is deemed significant, a full risk assessment is required."]}),e.jsxs("p",{children:["The risk assessment must demonstrate that the risk associated with the change is acceptable using one or more of three principles: (1) ",e.jsx("strong",{children:"Codes of Practice"}),"  applying recognised standards and established engineering practice, (2) ",e.jsx("strong",{children:"Reference Systems"}),"  demonstrating that the changed system is at least as safe as a similar system already in safe operation, or (3) ",e.jsx("strong",{children:"Explicit Risk Estimation"}),"  quantitative risk analysis demonstrating that the residual risk is tolerable. In practice, most changes use a combination of these principles  codes of practice for well-understood aspects and explicit risk estimation for novel aspects."]}),e.jsxs("p",{children:["The risk assessment must be reviewed by an ",e.jsx("strong",{children:"Assessment Body"}),"  an independent organisation accredited to assess CSM-RA compliance. The Assessment Body does not approve the change but provides an independent opinion on whether the risk assessment process has been correctly applied and the conclusions are justified. This independent oversight is a fundamental element of railway safety governance."]}),e.jsx("h3",{children:"Safety Verification and Validation"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Safety verification"}),' confirms that the system has been designed and built in accordance with the safety requirements  it answers the question "was it built right?"',e.jsx("strong",{children:" Safety validation"}),' confirms that the system, as implemented, actually achieves the required level of safety in its operational context  it answers "was the right thing built?" Both are required by EN 50126 and EN 50129, and they are complementary activities performed at different stages of the lifecycle.']}),e.jsx("p",{children:"Verification activities include: design reviews (checking that the design implements the safety requirements), analysis (fault tree analysis, FMEA confirming that safety targets are met by the design), testing (functional testing, stress testing, environmental testing), and inspection (checking that the installation matches the design). Verification is typically performed by the designer or an independent verification team."}),e.jsx("p",{children:"Validation activities include: integrated system testing in the operational environment, demonstration of RAMS performance against targets, confirmation that all hazard mitigations identified in the Hazard Log are implemented and effective, and review of the complete safety case by the safety authority. Validation is typically performed by the project assessor or an independent safety assessor."}),e.jsx("h3",{children:"Independent Safety Assessment (ISA)"}),e.jsxs("p",{children:["The ",e.jsx("strong",{children:"Independent Safety Assessor (ISA)"})," is a person or organisation independent of the project team that provides an independent assessment of whether the safety activities have been correctly performed and the safety arguments are sound. The ISA role is required by EN 50129 for safety-related electronic systems and is considered best practice for all railway safety assessments."]}),e.jsx("p",{children:"The ISA's independence is critical  they must have no commercial interest in the project's outcome and no organisational reporting line to the project team. In the UK, ISA organisations are typically accredited by UKAS (United Kingdom Accreditation Service) to EN ISO/IEC 17020 (requirements for inspection bodies) and must demonstrate competence in the relevant railway safety standards."}),e.jsx("p",{children:"The ISA's role spans the project lifecycle. During design, the ISA reviews the safety plan, the hazard analysis, the safety requirements allocation, and the SIL assignments. During implementation, the ISA reviews the design verification evidence, the test plans, and the test results. During validation, the ISA reviews the safety case and provides an independent safety assessment report. This report, which states the ISA's opinion on whether the system is acceptably safe, is a key input to the safety authority's decision on whether to approve the system for entry into service."}),e.jsxs("p",{children:["The ISA does not approve the system  that responsibility rests with the ",e.jsx("strong",{children:"duty holder"})," (typically the infrastructure manager or railway undertaking) through the safety authority. The ISA provides assurance that the safety arguments are robust and the evidence is sufficient, but the duty holder takes the decision and accepts the residual risk."]}),e.jsx("h3",{children:"EN 50128: Software Safety"}),e.jsxs("p",{children:[e.jsx("strong",{children:"EN 50128"})," (Railway Applications  Communication, Signalling and Processing Systems  Software for Railway Control and Protection Systems) specifies the requirements for developing, deploying, and maintaining software used in safety-related railway systems. Given that modern signalling, train control, and protection systems are predominantly software-based, EN 50128 is one of the most important standards in the railway safety framework."]}),e.jsx("p",{children:"EN 50128 assigns required techniques and measures for each phase of the software development lifecycle, depending on the software's SIL. The higher the SIL, the more rigorous the required techniques. Key requirements include:"}),e.jsx("div",{className:"table-wrapper",children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Aspect"}),e.jsx("th",{children:"SIL 01"}),e.jsx("th",{children:"SIL 2"}),e.jsx("th",{children:"SIL 34"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Requirements specification"})}),e.jsx("td",{children:"Semi-formal methods recommended"}),e.jsx("td",{children:"Semi-formal methods highly recommended"}),e.jsx("td",{children:"Formal methods highly recommended"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Architecture design"})}),e.jsx("td",{children:"Structured design"}),e.jsx("td",{children:"Structured design with defensive programming"}),e.jsx("td",{children:"Formal proof, diverse redundancy, safety bag"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Coding standards"})}),e.jsx("td",{children:"Recommended"}),e.jsx("td",{children:"Highly recommended (e.g., MISRA C)"}),e.jsx("td",{children:"Mandatory, restricted language subset"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Testing"})}),e.jsx("td",{children:"Functional testing, boundary value analysis"}),e.jsx("td",{children:"Structural coverage (statement + branch), equivalence classes"}),e.jsx("td",{children:"MC/DC coverage, formal verification, back-to-back testing"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Independence"})}),e.jsx("td",{children:"Self-assessment"}),e.jsx("td",{children:"Independent verification team"}),e.jsx("td",{children:"Independent verification and validation, independent ISA assessment"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Tool qualification"})}),e.jsx("td",{children:"Not required"}),e.jsx("td",{children:"T2 tools must be validated"}),e.jsx("td",{children:"All T2 and T3 tools must be qualified to the SIL of the output"})]})]})]})}),e.jsxs("p",{children:[e.jsx("strong",{children:"Tool qualification"})," is a frequently underestimated aspect of EN 50128. Development tools are classified as T1 (no influence on the output, e.g., a text editor), T2 (could introduce errors that are detectable by subsequent activities, e.g., a compiler), or T3 (could introduce undetectable errors, e.g., a code generator or test tool). T2 and T3 tools used for SIL 3/4 software must themselves be qualified  their correct operation must be demonstrated with evidence appropriate to the SIL. This means that even the compiler, linker, and test framework used to build and test safety-critical signalling software must be shown to be trustworthy."]}),e.jsx("h3",{children:"EN 50129: Safety Case Structure"}),e.jsxs("p",{children:[e.jsx("strong",{children:"EN 50129"})," (Railway Applications  Communication, Signalling and Processing Systems  Safety Related Electronic Systems for Signalling) defines the structure and content of the safety case for electronic signalling systems. The standard establishes a three-tier safety case architecture that is widely used across the railway industry."]}),e.jsxs("p",{children:["The ",e.jsx("strong",{children:"Generic Product Safety Case (GPSC)"})," covers the safety of the product itself  the hardware and software platform  independent of any particular application. It is produced by the equipment manufacturer and demonstrates that the product is capable of achieving the claimed SIL when correctly applied. The GPSC includes evidence of the development process (compliance with EN 50128 for software and EN 50129 Annex A for hardware), type test results, reliability data, and a list of conditions and constraints that must be respected when the product is applied."]}),e.jsxs("p",{children:["The ",e.jsx("strong",{children:"Generic Application Safety Case (GASC)"})," covers the safety of the product as applied in a particular class of applications  for example, a signalling interlocking applied to a UK main-line junction. The GASC demonstrates that the generic product, when configured according to the generic application rules, will achieve the required safety for that class of application. It includes evidence that the application rules correctly implement the required safety functions, that the configuration process is controlled, and that the interface conditions from the GPSC are satisfied."]}),e.jsxs("p",{children:["The ",e.jsx("strong",{children:"Specific Application Safety Case (SASC)"})," covers the safety of the product as applied at a specific location  for example, the interlocking at Clapham Junction. The SASC demonstrates that the specific application data (the actual interlocking tables, signal positions, track circuit boundaries for that location) have been correctly derived from the operational requirements and correctly configured in the product. The SASC includes evidence of site-specific hazard analysis, verification of the application data, and site testing results."]}),e.jsxs("div",{className:"highlight-box",children:[e.jsx("strong",{children:"The three-tier safety case architecture"})," enables efficiency through reuse: the GPSC is produced once per product, the GASC once per application class, and only the SASC is specific to each installation. This is critical for signalling deployments where the same product may be installed at hundreds of locations  without the three-tier approach, each location would require a complete safety case from scratch."]}),e.jsx("h3",{children:"Human Factors in Railway Safety"}),e.jsxs("p",{children:["Technical safety measures  interlockings, train protection systems, safety-critical software  are essential but not sufficient. A large proportion of railway incidents involve ",e.jsx("strong",{children:"human factors"}),": errors in operation, maintenance, or design that arise from the interaction between people and the technical systems they use. Human factors engineering aims to design systems, procedures, and working environments that minimise the likelihood and consequences of human error."]}),e.jsxs("p",{children:["In the UK, ",e.jsx("strong",{children:"GE/GN 8668 (Managing Human Factors Integration When Modifying or Introducing Rolling Stock and Infrastructure)"})," provides guidance on integrating human factors into railway engineering projects. The standard requires that human factors be considered throughout the project lifecycle  not just as a retrospective review of the finished design but as an input to design decisions from the outset."]}),e.jsxs("p",{children:["Key human factors considerations for railway design include: ",e.jsx("strong",{children:"display and control design"})," (ensuring that signaller workstations, driver cab layouts, and maintenance interfaces present information clearly and allow reliable operation); ",e.jsx("strong",{children:"task analysis"})," (understanding what tasks operators and maintainers must perform and designing systems to support those tasks); ",e.jsx("strong",{children:"workload management"})," (ensuring that operators are neither overloaded nor underloaded, both of which increase error risk);",e.jsx("strong",{children:"error tolerance"})," (designing systems that either prevent errors or detect and recover from them  interlockings are the classic example of error-tolerant design, preventing signallers from setting conflicting routes); and ",e.jsx("strong",{children:"competence management"})," (ensuring that all staff have the training, experience, and ongoing assessment needed to perform safety-critical tasks)."]}),e.jsx("p",{children:"Human factors analysis is also a required input to the hazard analysis process. For every hazard involving human interaction, the analysis must consider: the likelihood of human error given the task demands and environmental conditions, the detectability of the error before it leads to harm, and the effectiveness of any barriers or mitigations that depend on human action. Safety cases that rely on human vigilance as a primary barrier  without technical backup  are increasingly considered inadequate, reflecting the principle that safety-critical functions should be automated wherever practicable and that humans should serve as an additional layer of protection, not the primary one."}),e.jsx("h3",{children:"A safety case"}),e.jsxs("p",{children:["A ",e.jsx("strong",{children:"safety case"})," is the documented argument that a system is acceptably safe. It combines evidence from hazard analysis, risk assessment, design verification, testing, and operational experience into a structured argument. The safety case must demonstrate that all identified hazards have been mitigated to a tolerable level, typically using the ALARP (As Low As Reasonably Practicable) principle. Safety cases are living documents that must be maintained throughout the system's operational life and updated whenever the system is modified."]}),e.jsxs("p",{children:["The ",e.jsx("strong",{children:"ALARP principle"}),' requires that risk be reduced to a level that is as low as reasonably practicable  meaning that further risk reduction would require effort, time, or cost that is grossly disproportionate to the benefit achieved. ALARP is not the same as "as low as possible"  it acknowledges that zero risk is unachievable and that resources spent on marginal risk reduction in one area might achieve greater safety benefit if applied elsewhere. The ALARP demonstration is a key component of every safety case and requires explicit argument for each significant residual risk.']}),e.jsx("h3",{children:"Whole-Life Cost and Asset Management"}),e.jsxs("p",{children:["Railway infrastructure is long-lived  track structures may last 3050 years, signalling systems 2540 years, bridges and tunnels 100+ years. The ",e.jsx("strong",{children:"whole-life cost (WLC)"})," of a railway asset includes not just its initial capital cost but also its operating cost, maintenance cost, renewal cost, and disposal cost over its entire service life. For many railway assets, the maintenance and renewal costs over the asset life significantly exceed the initial capital cost  a decision that saves money at construction but increases maintenance cost may be a poor whole-life choice."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"ISO 55000"})," (Asset Management) provides the international framework for managing physical assets to deliver value over their whole life. Applied to railways, asset management involves: understanding the current condition and performance of every asset (through inspection, monitoring, and data analysis), predicting future degradation and the consequences of failure, planning interventions (maintenance, renewal, enhancement) to optimise whole-life cost while meeting safety and performance requirements, and making investment decisions based on risk and value rather than age or condition alone."]}),e.jsx("p",{children:"Whole-life cost analysis is essential during the design phase because the design determines the maintenance regime. For example, choosing a concrete sleeper over a timber sleeper increases the capital cost but reduces the maintenance cost (concrete sleepers have a design life of 50+ years vs 2535 years for treated timber). Choosing ETCS Level 2 over conventional signalling may increase the initial system cost but reduces the lineside equipment (and therefore the maintenance access requirements and possession costs). Choosing stainless steel for overhead line fittings rather than galvanised steel increases the material cost but eliminates the need for periodic re-galvanising in aggressive environments (coastal, tunnels)."}),e.jsx("p",{children:"The RAM parameters (reliability, availability, maintainability) directly feed into whole-life cost analysis. A more reliable system fails less often, requiring fewer unplanned maintenance interventions. A more maintainable system can be repaired faster, reducing the operational impact of failures. A more available system delivers more revenue service, generating more fare income. These relationships mean that RAMS engineering is not just a safety discipline but an economic discipline  investing in reliability and maintainability at the design stage reduces whole-life cost and improves the business case."}),e.jsx("h3",{children:"Miniature Railways: The Hobby as Microcosm"}),e.jsx("p",{children:"For those who come to railway engineering through the hobby of model or miniature railways, it is worth recognising that a well-designed miniature railway is a genuine microcosm of the full-size system. A 7.25-inch gauge miniature railway faces the same fundamental challenges: track must be aligned and gauged accurately, points must be interlocked, signals must enforce safe separation, structures must clear the loading gauge, and the timetable must be operationally deliverable. The physics scales differently (lighter axle loads, lower speeds, tighter curves), but the engineering principles are identical."}),e.jsx("p",{children:"Building a miniature railway is an excellent way to develop an intuitive understanding of railway engineering interfaces. When you discover that your signal cannot be seen past the bridge you just built, or that your point motor fouls the drainage channel, or that your locomotive stalls on the gradient you thought was acceptable  you are experiencing exactly the same interface failures that occur on full-size projects, just at a scale where the consequences are educational rather than catastrophic. Many professional railway engineers maintain an active involvement in miniature railways precisely because it keeps their systems thinking sharp."}),e.jsx("h3",{children:"Comprehensive Railway Glossary"}),e.jsx("p",{children:"The following glossary brings together key terms from every module in this curriculum. Understanding this shared vocabulary is essential for effective communication across disciplines  many interface failures begin with two engineers using the same word to mean different things, or different words to mean the same thing."}),e.jsx("div",{className:"table-wrapper",children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Term"}),e.jsx("th",{children:"Definition"}),e.jsx("th",{children:"Primary Module"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"ALARP"})}),e.jsx("td",{children:"As Low As Reasonably Practicable. The principle that risk must be reduced until further reduction would require effort grossly disproportionate to the benefit. Central to UK railway safety cases."}),e.jsx("td",{children:"Capstone (M9)"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Ballast"})}),e.jsx("td",{children:"Crushed stone (typically granite) placed beneath and around sleepers to distribute load, provide drainage, and allow track geometry adjustment."}),e.jsx("td",{children:"Track (M1)"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"BCR"})}),e.jsx("td",{children:"Benefit-Cost Ratio. The ratio of monetised benefits to costs used to assess value for money. A BCR above 2.0 is generally considered high value for money in UK transport appraisal."}),e.jsx("td",{children:"Capstone (M9)"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Cant"})}),e.jsx("td",{children:"The superelevation of the outer rail on a curve, expressed in millimetres. Counteracts centrifugal force to improve passenger comfort and reduce rail wear."}),e.jsx("td",{children:"Track (M1)"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"CSM-RA"})}),e.jsx("td",{children:"Common Safety Method for Risk Evaluation and Assessment. The EU-mandated process for assessing safety of railway changes, requiring demonstration that risk is acceptable."}),e.jsx("td",{children:"Capstone (M9)"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"CWR"})}),e.jsx("td",{children:"Continuously Welded Rail. Rails welded into long strings (often several kilometres) eliminating joints. Reduces noise, maintenance, and rolling resistance but requires careful management of thermal stress."}),e.jsx("td",{children:"Track (M1)"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"DCO"})}),e.jsx("td",{children:"Development Consent Order. The planning consent mechanism for nationally significant infrastructure projects under the Planning Act 2008."}),e.jsx("td",{children:"Capstone (M9)"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Earthworks"})}),e.jsx("td",{children:"Cuttings (excavated) and embankments (built up) that create the railway formation at the required level. Subject to geotechnical risks including slope instability and settlement."}),e.jsx("td",{children:"Civil (M2)"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"EMC"})}),e.jsx("td",{children:"Electromagnetic Compatibility. The ability of electrical and electronic equipment to function in its intended electromagnetic environment without introducing intolerable interference."}),e.jsx("td",{children:"Capstone (M9)"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"ETCS"})}),e.jsx("td",{children:"European Train Control System. A digital signalling system that transmits movement authorities directly to the train via balises (Level 1/2) or radio (Level 2/3), replacing lineside signals."}),e.jsx("td",{children:"Signalling (M4)"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"ETA"})}),e.jsx("td",{children:"Event Tree Analysis. A forward-looking hazard analysis technique that models the possible outcomes from an initiating event through successive barrier successes or failures."}),e.jsx("td",{children:"Capstone (M9)"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"FMEA"})}),e.jsx("td",{children:"Failure Mode and Effects Analysis. A bottom-up technique that identifies component failure modes and assesses their effects on the system. Used in railway design per EN 50126."}),e.jsx("td",{children:"Capstone (M9)"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Formation"})}),e.jsx("td",{children:"The prepared ground surface on which the track structure is built. Must provide adequate bearing capacity and drainage."}),e.jsx("td",{children:"Civil (M2)"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"FTA"})}),e.jsx("td",{children:"Fault Tree Analysis. A top-down, deductive technique using logic gates to identify all combinations of basic events that could cause an undesirable top event."}),e.jsx("td",{children:"Capstone (M9)"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Gauge (track)"})}),e.jsx("td",{children:"The distance between the inner faces of the two running rails, measured 14 mm below the rail surface. Standard gauge is 1,435 mm worldwide."}),e.jsx("td",{children:"Track (M1)"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"GRIP"})}),e.jsx("td",{children:"Governance for Railway Investment Projects. Network Rail's eight-stage project lifecycle framework, being succeeded by PACE."}),e.jsx("td",{children:"Capstone (M9)"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"GSM-R"})}),e.jsx("td",{children:"Global System for Mobile Communications  Railway. A dedicated mobile communications standard for voice and data on railways, being succeeded by FRMCS (Future Railway Mobile Communication System)."}),e.jsx("td",{children:"Telecoms (M7)"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Hazard Log"})}),e.jsx("td",{children:"A living register of all identified hazards, their assessed risk, required mitigations, and current status. The central safety management document throughout the project lifecycle."}),e.jsx("td",{children:"Capstone (M9)"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Headway"})}),e.jsx("td",{children:"The minimum time interval between successive trains on the same line. Determined by signalling system, braking distance, and operating practices. Typically 2-3 minutes on busy lines."}),e.jsx("td",{children:"Operations (M8)"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"ICD"})}),e.jsx("td",{children:"Interface Control Document. A formal document defining the physical, electrical, functional, and procedural requirements at the boundary between two disciplines or systems."}),e.jsx("td",{children:"Capstone (M9)"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Interlocking"})}),e.jsx("td",{children:"A safety system that prevents conflicting signal routes from being set simultaneously. Ensures that points are correctly set and locked before a signal clears. The core of railway safety."}),e.jsx("td",{children:"Signalling (M4)"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"ISA"})}),e.jsx("td",{children:"Independent Safety Assessor. A person or organisation independent of the project that assesses whether safety activities are correct and safety arguments are sound. Required by EN 50129."}),e.jsx("td",{children:"Capstone (M9)"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Loading Gauge"})}),e.jsx("td",{children:"The maximum cross-sectional envelope within which a rail vehicle must fit. Varies by railway  the UK has one of the most restrictive in Europe."}),e.jsx("td",{children:"Rolling Stock (M6)"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"MTBF"})}),e.jsx("td",{children:"Mean Time Between Failures. A measure of reliability, representing the average time between consecutive failures of a repairable system."}),e.jsx("td",{children:"Capstone (M9)"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"MTTR"})}),e.jsx("td",{children:"Mean Time To Repair. A measure of maintainability, representing the average time to restore a system to working condition after a failure."}),e.jsx("td",{children:"Capstone (M9)"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"OHL / OCS"})}),e.jsx("td",{children:"Overhead Line / Overhead Contact System. The catenary and contact wire system that delivers electrical power to trains via a pantograph. Typically 25 kV AC on mainlines."}),e.jsx("td",{children:"Electrification (M5)"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Pantograph"})}),e.jsx("td",{children:"The spring-loaded, articulated arm on the roof of an electric train that maintains contact with the overhead wire to collect traction current."}),e.jsx("td",{children:"Electrification (M5)"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Possession"})}),e.jsx("td",{children:"A planned period during which a section of track is closed to train services and handed over to engineering staff for maintenance or construction work."}),e.jsx("td",{children:"Operations (M8)"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"RAMS"})}),e.jsx("td",{children:"Reliability, Availability, Maintainability, and Safety. The framework for specifying and verifying the dependability of railway systems, governed by EN 50126."}),e.jsx("td",{children:"Capstone (M9)"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"SIL"})}),e.jsx("td",{children:"Safety Integrity Level. A measure of the required safety performance of a function, from SIL 0 (no safety requirement) to SIL 4 (highest integrity, e.g., interlockings)."}),e.jsx("td",{children:"Capstone (M9)"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Sleeper"})}),e.jsx("td",{children:"The transverse beam (concrete, timber, or steel) that supports the rails, maintains gauge, and transfers load to the ballast. Spaced at approximately 650 mm centres."}),e.jsx("td",{children:"Track (M1)"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Subgrade"})}),e.jsx("td",{children:"The natural ground beneath the formation. Its bearing capacity determines the required thickness of formation layers and the long-term stability of the track."}),e.jsx("td",{children:"Civil (M2)"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"THR"})}),e.jsx("td",{children:"Tolerable Hazard Rate. The maximum acceptable rate of occurrence for a hazardous event, derived from the overall safety target and apportioned to individual hazards."}),e.jsx("td",{children:"Capstone (M9)"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Traction Return"})}),e.jsx("td",{children:"The path by which electric traction current returns from the train to the power supply. Usually through the running rails, creating interfaces with signalling track circuits."}),e.jsx("td",{children:"Electrification (M5)"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Turnout"})}),e.jsx("td",{children:"A track component (also called a switch or point) that allows a train to diverge from one track to another. Comprises switch rails, a crossing (frog), and closure rails."}),e.jsx("td",{children:"Track (M1)"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"TWAO"})}),e.jsx("td",{children:"Transport and Works Act Order. The consent mechanism under the Transport and Works Act 1992 for authorising railway and tramway works in England and Wales."}),e.jsx("td",{children:"Capstone (M9)"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"V-model"})}),e.jsx("td",{children:"The systems engineering development framework where the left side decomposes requirements, the bottom implements, and the right side verifies. Each right-side level corresponds to a left-side level."}),e.jsx("td",{children:"Capstone (M9)"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"WLC"})}),e.jsx("td",{children:"Whole-Life Cost. The total cost of an asset over its entire service life, including capital, operating, maintenance, renewal, and disposal costs."}),e.jsx("td",{children:"Capstone (M9)"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"WTT"})}),e.jsx("td",{children:"Working Timetable. The complete, detailed timetable used by railway staff, containing all train movements including empty stock, engineering trains, and pathing allowances not shown in the public timetable."}),e.jsx("td",{children:"Operations (M8)"})]})]})]})}),e.jsxs(N,{type:"analogy",children:["Systems engineering for railways is like ",e.jsx("strong",{children:"architecture decision records combined with integration testing across all services"}),". Requirements tracing is your dependency graph  every feature (operational need) maps to components (subsystem specifications) through well-defined interfaces. The V-model is your CI/CD pipeline run in slow motion: you cannot deploy (construct) until every test at every level has passed. RAMS is your SLA framework  MTBF is your uptime target, MTTR is your incident response time, and SIL levels are your criticality ratings. A safety case is your post-incident review written before the incident happens: a structured, evidence-based argument that the system will not fail in ways that harm people. EN 50128 software safety requirements are your code quality standards on steroids  imagine if your linter, test framework, and CI pipeline all had to be independently certified before you could trust their output. The three-tier safety case is like your microservice architecture: a validated base image (GPSC), a tested deployment template (GASC), and a site-specific configuration (SASC). And the glossary? It is your team's ubiquitous language  because in both software and railways, half of all bugs start with a misunderstanding about what a word means."]}),e.jsx(N,{type:"info",label:"The EN 5012x Standards",children:"The three pillars of railway safety standards  EN 50126 (RAMS), EN 50128 (software), and EN 50129 (electronic systems)  form an interlocking framework. EN 50126 defines the lifecycle and RAMS requirements. EN 50128 specifies the software development practices required at each SIL level, including coding standards, testing coverage, and formal methods. EN 50129 defines the evidence structure for the safety case and the conditions for safety approval. Together, they ensure that safety is not an afterthought but is designed in, verified, and maintained throughout the system's life. These standards are complemented by EN 50159 (safety-related communication in railway systems), EN 50121 (electromagnetic compatibility), and EN 50238 (compatibility between rolling stock and train detection systems)."}),e.jsx(N,{type:"info",label:"CSM-RA and the Assessment Body",children:"The Common Safety Method for Risk Evaluation and Assessment (CSM-RA) is the legal framework for assessing safety changes on railways in the UK and EU. Any significant change  technical, operational, or organisational  must be assessed using one or more of three risk acceptance principles: application of codes of practice, comparison with a reference system, or explicit risk estimation. The assessment must be reviewed by an accredited Assessment Body that is independent of the project. The CSM-RA process ensures that safety is formally considered for every change to the railway, not just for new installations."}),e.jsx(N,{type:"info",label:"ISO 55000 and Whole-Life Asset Management",children:"ISO 55000 provides the framework for managing assets to deliver value over their whole life. For railways, this means making design and investment decisions based on whole-life cost rather than capital cost alone. A decision that is cheapest to build may be the most expensive to maintain. RAMS engineering directly supports asset management: reliability data informs maintenance planning, maintainability design reduces repair costs and service disruption, and availability targets align engineering performance with operational and commercial objectives."}),e.jsx(ce,{goTo:h,items:[{target:"m0",label:"Foundations",desc:"The fundamental physics and principles that all system requirements must respect."},{target:"m1",label:"Track",desc:"Track geometry, CWR stress management, and turnout design are subsystem specifications traced from operational needs."},{target:"m2",label:"Civil Engineering",desc:"Formation design, drainage, and earthworks stability are verified through the V-model right side."},{target:"m3",label:"Structures",desc:"Bridge and tunnel clearances, loading assessments, and structural safety cases follow EN standards."},{target:"m4",label:"Signalling",desc:"Interlockings are SIL 4 systems  the highest safety integrity level, requiring the most rigorous verification."},{target:"m5",label:"Electrification",desc:"Power supply reliability and OLE safety are key RAMS parameters for electrified railways."},{target:"m6",label:"Rolling Stock",desc:"Vehicle certification and type approval demonstrate compliance with system-level requirements."},{target:"m7",label:"Telecoms",desc:"Communications reliability directly impacts signalling availability, especially for ETCS Level 2/3."},{target:"m8",label:"Operations",desc:"Operational acceptance is the top of the V-model right side  the ultimate validation that the system works."}]})]})}const Yp=[{text:"What is the V-model in systems engineering?",options:["A technique for calculating the speed of trains on curves","A development lifecycle where each decomposition stage on the left (requirements  design  implementation) has a corresponding verification/validation stage on the right, ensuring that every requirement is tested at the appropriate level","A model of voltage distribution in electrified railways","A management hierarchy shaped like the letter V"],correct:1,explanation:'The V-model ensures traceability from requirements through design to testing. System requirements are verified by system acceptance tests, subsystem requirements by integration tests, and component specifications by unit tests. The key principle is that you define how you will verify each requirement at the same time you write it  "test-driven development" applied to systems engineering.'},{text:"What does RAMS stand for in railway systems engineering?",options:["Railway Automated Management System","Reliability, Availability, Maintainability, and Safety  four key properties that must be specified, designed for, and demonstrated throughout the system lifecycle","Risk Assessment and Mitigation Strategy","Remote Access Monitoring System"],correct:1,explanation:"RAMS are interdependent system properties. Reliability (how often it fails), Availability (proportion of time it is operational), Maintainability (how quickly it can be restored), and Safety (freedom from unacceptable risk) must all be quantified as requirements and demonstrated through analysis and testing. Improving one may affect another  for example, adding redundancy improves availability but increases maintenance burden."},{text:"What role do EN 50126, EN 50128, and EN 50129 play in railway safety?",options:["They specify the dimensions of railway rolling stock","EN 50126 covers the overall RAMS lifecycle, EN 50128 covers software safety, and EN 50129 covers safety-related electronic systems  together they form the framework for demonstrating that railway systems are acceptably safe","They are numbering schemes for European railway routes","They define the chemical composition of rail steel"],correct:1,explanation:"These three CENELEC standards form a coherent safety framework. EN 50126 defines the RAMS lifecycle process (hazard identification, risk analysis, safety requirements). EN 50128 specifies techniques for developing safety-related software (coding standards, testing, independence). EN 50129 defines how to build a safety case for electronic/programmable systems. Together they ensure that safety is systematically addressed, not left to chance."},{text:'What is "requirements traceability" and why is it essential?',options:["The ability to trace the physical route of a railway on a map","The ability to link every high-level requirement through design decisions to implementation and then to the specific test that verifies it, ensuring nothing is missed and every feature exists for a documented reason","A technique for tracing faults in electrical wiring","Recording which engineer wrote each requirement"],correct:1,explanation:"Traceability creates a chain: stakeholder need  system requirement  subsystem requirement  design element  test case. Upward traceability confirms every implementation serves a real need (no gold-plating). Downward traceability confirms every requirement has been implemented and verified (no gaps). Without traceability, complex systems accumulate untested requirements and unjustified features  the same principle as code coverage and requirement tracking in software engineering."}];function Qp(h,y){switch(h){case"m9-l1":return e.jsx(Fp,{goTo:y});case"m9-l2":return e.jsx(Jp,{goTo:y});case"m9-l3":return e.jsx(Pp,{goTo:y});default:return null}}const Xp={"m9-l1":Vp,"m9-l2":Kp,"m9-l3":Yp},Zp={...Ef,...Lf,...Kf,...tp,...hp,...vp,...Cp,...Np,...Ip,...Xp};function $p(h,y){const b=Mf(h,y);if(b)return b;const d=Uf(h,y);if(d)return d;const R=Jf(h,y);if(R)return R;const O=ep(h,y);if(O)return O;const _=dp(h,y);if(_)return _;const X=xp(h,y);if(X)return X;const C=Ap(h,y);if(C)return C;const j=qp(h,y);if(j)return j;const U=_p(h,y);if(U)return U;const D=Qp(h,y);return D||e.jsx("p",{children:"Content coming soon."})}function ey({lessonId:h,children:y,goTo:b,progress:d,toggleLesson:R,saveQuiz:O}){const _=pl(h);if(!_)return null;const X=Zt[_];if(!X)return null;const C=X.lessons.findIndex(I=>I.id===h),j=X.lessons[C];if(!j)return null;const U=Zp[h],D=!!d.lessons[h],J=[];Object.values(Zt).forEach(I=>I.lessons.forEach(ie=>J.push(ie.id)));const G=J.indexOf(h),F=G>0?J[G-1]??"index":"index",re=G<J.length-1?J[G+1]??"index":"index",Ge=I=>{for(const ie of Object.values(Zt)){const je=ie.lessons.find(Se=>Se.id===I);if(je)return je.title}return I==="index"?"Index":I},We=re==="index"?"Back to Index":Ge(re),Z=F==="index"?"Index":Ge(F);return e.jsxs("div",{className:"page-inner page-enter",children:[e.jsxs("div",{className:"lesson-header",children:[e.jsxs("div",{className:"lesson-breadcrumb",children:[e.jsxs("span",{className:"module-link",onClick:()=>b(X.lessons[0]?.id??_),children:["Module ",_.slice(1),": ",X.title]})," / Lesson ",j.short]}),e.jsxs("div",{className:"module-number",children:["Lesson ",j.short]}),e.jsx("h2",{children:j.title}),e.jsx("div",{className:"lesson-progress-dots",children:X.lessons.map((I,ie)=>e.jsx("div",{className:`lesson-progress-dot${ie===C?" current":""}${d.lessons[I.id]?" done":""}`},I.id))}),e.jsxs("div",{className:"lesson-step-label",children:["Lesson ",C+1," of ",X.lessons.length]})]}),y,U&&e.jsx(jf,{questions:U,lessonId:h,onComplete:(I,ie)=>O(h,I,ie)}),e.jsxs("div",{className:"page-nav",children:[e.jsxs("div",{className:"page-nav-btn",onClick:()=>{b(F)},children:[" ",Z]}),e.jsx("button",{className:`mark-complete-btn${D?" completed":""}`,onClick:()=>R(h),children:D?" Completed":"Mark Complete"}),e.jsxs("div",{className:"page-nav-btn next",onClick:()=>{b(re)},children:[We," "]})]})]})}const Fs="railway-course-progress-v2",Ru=mf();function ty(){try{const h=localStorage.getItem(Fs);if(h){const b=JSON.parse(h);if(b)return b}const y=JSON.parse(localStorage.getItem("railway-curriculum-progress")||"{}");if(y&&Object.keys(y).length>0){const b={lessons:{},quizzes:{}};return Object.entries(Zt).forEach(([d,R])=>{y[d]&&R.lessons.forEach(O=>{b.lessons[O.id]=!0})}),localStorage.setItem(Fs,JSON.stringify(b)),b}}catch{}return{lessons:{},quizzes:{}}}function iy(){const[h,y]=Re.useState(ty),b=Re.useCallback(C=>{y(j=>{const U={...j,lessons:{...j.lessons,[C]:!j.lessons[C]}};try{localStorage.setItem(Fs,JSON.stringify(U))}catch{}return U})},[]),d=Re.useCallback((C,j,U)=>{y(D=>{const J={...D,quizzes:{...D.quizzes,[C]:{score:j,total:U}}};try{localStorage.setItem(Fs,JSON.stringify(J))}catch{}return J})},[]),R=Re.useCallback(C=>{const j=Zt[C];return j?j.lessons.every(U=>h.lessons[U.id]):!1},[h]),O=Ru.filter(C=>h.lessons[C]).length,_=Ru.length,X=_>0?Math.round(O/_*100):0;return{progress:h,toggleLesson:b,saveQuiz:d,isModuleComplete:R,pct:X,totalDone:O,totalItems:_}}function ny(){const[h,y]=Re.useState(()=>window.location.hash.slice(1)||"index"),[b,d]=Re.useState(!1),{progress:R,toggleLesson:O,saveQuiz:_,isModuleComplete:X,pct:C,totalDone:j,totalItems:U}=iy(),D=Re.useCallback(G=>{const F=Eu(G);y(F),window.location.hash=F,d(!1),setTimeout(()=>{const re=document.querySelector(".main");re&&re.scrollTo(0,0)},0)},[]);Re.useEffect(()=>{const G=()=>{const F=window.location.hash.slice(1);y(F?Eu(F):"index")};return window.addEventListener("hashchange",G),()=>window.removeEventListener("hashchange",G)},[]),Re.useEffect(()=>{const G=F=>{if(!(F.target instanceof HTMLElement&&(F.target.tagName==="INPUT"||F.target.tagName==="TEXTAREA"))){if(F.key==="ArrowLeft"){const re=document.querySelector(".page-nav-btn:not(.next)");re instanceof HTMLElement&&re.click()}else if(F.key==="ArrowRight"){const re=document.querySelector(".page-nav-btn.next");re instanceof HTMLElement&&re.click()}}};return window.addEventListener("keydown",G),()=>window.removeEventListener("keydown",G)},[]);const J=()=>{if(h==="index")return e.jsx(ff,{goTo:D});if(h==="symbols")return e.jsx(pf,{goTo:D});const G=$p(h,D);return G?e.jsx(ey,{lessonId:h,goTo:D,progress:R,toggleLesson:O,saveQuiz:_,children:G}):e.jsx("div",{className:"page-inner",children:e.jsx("p",{children:"Page not found."})})};return e.jsxs(e.Fragment,{children:[e.jsx(uf,{onToggleSidebar:()=>d(G=>!G)}),e.jsxs("div",{className:"layout",children:[e.jsx(gf,{currentPage:h,goTo:D,progress:R,isModuleComplete:X,pct:C,totalDone:j,totalItems:U,isOpen:b,onClose:()=>d(!1)}),e.jsx("main",{className:"main",children:J()})]}),b&&e.jsx("div",{className:"overlay show",onClick:()=>d(!1)})]})}hf.createRoot(document.getElementById("root")).render(e.jsx(Re.StrictMode,{children:e.jsx(ny,{})}));
